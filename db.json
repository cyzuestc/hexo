{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/hexo-theme-apollo/source/favicon.png","path":"favicon.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/css/apollo.css","path":"css/apollo.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/font/sourcesanspro.woff","path":"font/sourcesanspro.woff","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/font/sourcesanspro.woff2","path":"font/sourcesanspro.woff2","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/scss/apollo.scss","path":"scss/apollo.scss","modified":1,"renderable":1}],"Cache":[{"_id":"themes/hexo-theme-apollo/.gitignore","hash":"a006beea0877a0aa3610ee00e73f62cb1d45125b","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/LICENSE","hash":"6e31ac9076bfc8f09ae47977419eee4edfb63e5b","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/README.md","hash":"201c76d030a98578ed5a6ad5c766a7bde91c32d3","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/_config.yml","hash":"8943fc7bc7231135ea0fe1ef11ff6bb994b7faa3","modified":1541230951255},{"_id":"themes/hexo-theme-apollo/gulpfile.js","hash":"857a026b6643a2cd52c65d4ae0dc7fe9618206ee","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/package.json","hash":"eb1e76ec0b7ed6c6c7b2bd32b4f1e1bbe15800ca","modified":1541140460834},{"_id":"source/_posts/.2018.11.02 学习记录.md.swp","hash":"810d019f80571a9be29329f78c0741e7c153b874","modified":1541173088292},{"_id":"source/_posts/.2018.11.03 常用的vim命令.md.swp","hash":"8bb3901f2a122fb18bd66079aadfe95bb2260b50","modified":1541221797031},{"_id":"source/_posts/2017.10.15 Web学习.md","hash":"27a0f9fe6f5223430b664144b4271c1685b907f0","modified":1541139886029},{"_id":"source/_posts/2017.10.16 Web激活用户.md","hash":"e0fafbc6c6be287726a5bd7d651056c9e56d3930","modified":1541139886029},{"_id":"source/_posts/2017.10.16 Web登陆功能实现.md","hash":"c50feb6aa0c85cdb13ad9681c04751e274a0fc23","modified":1541139886030},{"_id":"source/_posts/2017.10.17 分类模块.md","hash":"8365c067d1acdf30762c4e098377b25101df2251","modified":1541139886030},{"_id":"source/_posts/2017.10.17 退出登陆处理.md","hash":"ec1e24cc75d394e824eb8d90b0d13fde84a61d54","modified":1541139886030},{"_id":"source/_posts/2017.10.18 购物车模块.md","hash":"ed7865979271c09bd0554771c3c81128c833c9de","modified":1541139886030},{"_id":"source/_posts/2017.10.20 properties的使用.md","hash":"065c8e5fb2ec026c7791114408dea5944951b292","modified":1541139886030},{"_id":"source/_posts/2017.10.20 数据库连接池学习.md","hash":"543d1450229360d67eda67365e4d35e5b558280d","modified":1541139886030},{"_id":"source/_posts/2017.10.22 XML学习.md","hash":"dfe987de4793d12cd8bf7a3862fef4ae4d05ac14","modified":1541139886030},{"_id":"source/_posts/2017.10.23 servlet.md","hash":"dbc8917080352690fc031b5b84c2eebb67bda3c1","modified":1541139886030},{"_id":"source/_posts/2017.10.27 Spring 学习.md","hash":"190254b3a4637c7ffc15317d7c9d805ceb3b8637","modified":1541139886030},{"_id":"source/_posts/2017.10.28 Spring学习.md","hash":"16bc20775217287a68ec99fcc51b866b3cc60c3a","modified":1541139886030},{"_id":"source/_posts/2017.10.29 Spring学习.md","hash":"802f2ed0f36701855795f09892c791d2f2b6bf15","modified":1541139886030},{"_id":"source/_posts/2017.10.29 操作系统学习.md","hash":"ce8e10b0a24800c56cb7c7bce2a058e76ed87d59","modified":1541139886030},{"_id":"source/_posts/2017.10.30 Spring,Struts学习.md","hash":"20bc79aa11291c57414807b2f33cd2930fc68855","modified":1541139886030},{"_id":"source/_posts/2017.10.31 SpringMVC学习.md","hash":"228752d7c3be0f164a760293267c2dd46ec8f2cc","modified":1541139886030},{"_id":"source/_posts/2017.10.31 Struts学习.md","hash":"5b71ab9bfeb9921bbda56a49d3b07e9e89612ba5","modified":1541139886030},{"_id":"source/_posts/2017.10.6读书笔记.md","hash":"1c9b649da088154850002bf910ca0bc5803dc06a","modified":1541139886030},{"_id":"source/_posts/2017.10.9 javaScript学习.md","hash":"dc1f2dfa9d453c206ddc5aababafb3d804cc1a06","modified":1541139886030},{"_id":"source/_posts/2017.11.1 SpringMVC整合spring学习.md","hash":"f2d929b7d6040de0be4a32b6fb18d4880eb448ed","modified":1541139886030},{"_id":"source/_posts/2017.11.18 css学习.md","hash":"572f3d84bf9c9e664f4ff2bfa71bea073335dd9f","modified":1541139886030},{"_id":"source/_posts/2017.11.2 mybatis学习.md","hash":"0dc37d73967dc84eacd75d892bcb3ea1ace0f59f","modified":1541139886030},{"_id":"source/_posts/2017.11.21 多线程学习.md","hash":"32344e4b68acfa8b6fd9039d5f7095fc571888c8","modified":1541139886030},{"_id":"source/_posts/2017.11.3 mybatis学习.md","hash":"53de04ce3d1b718b8733c6e0d8bfbf01fad05871","modified":1541139886030},{"_id":"source/_posts/2017.11.9 ssm学习.md","hash":"3554c16e9abe445a2e8e980484c11982a52c7a39","modified":1541139886030},{"_id":"source/_posts/2017.12.25 spring注解详解.md","hash":"ed6183ccba8a6ad56fac8eddd9697a4427695d3f","modified":1541139886030},{"_id":"source/_posts/2017.9.18学习.md","hash":"5406a67a4bf73e6e4bde72025465ef78ab60d245","modified":1541139886030},{"_id":"source/_posts/2017.9.23    温故而知新.md","hash":"011c400242c22b42abd85359c417abbe0f2e3fc6","modified":1541139886030},{"_id":"source/_posts/2017.9.23 数据库操作.md","hash":"d5529430f00e685d0e529219465f0130c64bd8f3","modified":1541139886030},{"_id":"source/_posts/2017.9.24多线程与文件下载.md","hash":"839f99524693ea7d0eb769deb86ed70183a62d85","modified":1541139886030},{"_id":"source/_posts/2017.9.30Tomcat,servlet复习.md","hash":"29d0958769847a891f874b9c8ab7f768581a024f","modified":1541139886030},{"_id":"source/_posts/2018.05.10 linux任务jobs详解.md","hash":"26ffe1388ad8330023f9b6167bf3abcabd616316","modified":1541139886030},{"_id":"source/_posts/2018.05.10 qqbot学习记录.md","hash":"2ea4a0522aa3b91cc85e673ec437a39868fb6a7c","modified":1541139886030},{"_id":"source/_posts/2018.05.10 删除excel多余100多w的空行.md","hash":"8fd2423bea1efc2d600faa2df77f61e5fa27cb68","modified":1541139886030},{"_id":"source/_posts/2018.05.10 破解安卓手机内微信聊天记录安卓手机内微信聊天记录.md","hash":"2b77eb575519ad551452c8b0def3406e06c7ec8f","modified":1541139886030},{"_id":"source/_posts/2018.05.11 idea创建maven一直loading-archetype-list.md","hash":"e0c33ea3ada75e06244a72bc47e96335d57dd211","modified":1541139886031},{"_id":"source/_posts/2018.05.11 markdown常用的语法总结.md","hash":"19bd2bc42eb0a6c05b264c7a260be93071a85331","modified":1541139886031},{"_id":"source/_posts/2018.05.11 深入理解java编码问题.md","hash":"7daffec3fafd031e1915f0151df44db2c314aaa9","modified":1541139886031},{"_id":"source/_posts/2018.05.12 linux下安装java环境配置步骤详述.md","hash":"c99541fc2ed76b3aefef6db2fd539f68ce93db80","modified":1541139886031},{"_id":"source/_posts/2018.05.13 FastJSON简单使用.md","hash":"4bc165f5f6fbc803b81a182b458c9fa6352208d7","modified":1541139886031},{"_id":"source/_posts/2018.05.15 idea编译项目为jar.md","hash":"24a9d8ff2582cc3d20d30385bbeedbf3e74d4a9b","modified":1541139886031},{"_id":"source/_posts/2018.05.24 Comparator与Comparable.md","hash":"2035acecaba4fee26706f9957be4e692fb6b5ff8","modified":1541139886031},{"_id":"source/_posts/2018.05.24 关闭idea的searchEverywhere.md","hash":"b1d2e1d8794e2b253dc070cfd4cada67a90b22e9","modified":1541139886031},{"_id":"source/_posts/2018.07.03 java基础知识.md","hash":"47f79263c2021aad3ce2134ef691cd3f63f6f8ea","modified":1541139886031},{"_id":"source/_posts/2018.07.15 3次握手4次挥手.md","hash":"e7675c29ccce27a1a03b60898556672d4b8ba6a2","modified":1541139886031},{"_id":"source/_posts/2018.07.15 浏览器访问一个网址的时候都有哪些过程.md","hash":"518817c37f4738a3bcff44c3c7add26ea6dc6f69","modified":1541139886031},{"_id":"source/_posts/2018.07.16 Synchronized底层优化偏向锁-轻量级锁.md","hash":"ebf31778c152ab0addb96fa677c9cf953811fa15","modified":1541139886031},{"_id":"source/_posts/2018.07.16 static与this.md","hash":"ac571cf927fe33fedfe72d6c31d0bda9f647bf82","modified":1541139886031},{"_id":"source/_posts/2018.07.16 synchronized原理.md","hash":"ccd3cacb22bfa419864419fd81c85480756c3ae1","modified":1541139886031},{"_id":"source/_posts/2018.07.16 序列化原理机制.md","hash":"7ee23276ae69fb7486792083ee16b0f3ac48c614","modified":1541139886031},{"_id":"source/_posts/2018.07.17 ConcurrentHashMap的锁分段技术.md","hash":"a34d1166bbeb37771d7345b3f00951063fba3957","modified":1541139886031},{"_id":"source/_posts/2018.07.17 Tomcat集群Cluster实现原理剖析.md","hash":"83fc92949bec624099d240d1523be8fb0b2d4cf7","modified":1541139886031},{"_id":"source/_posts/2018.07.17 单例模式的八种写法.md","hash":"6f717b50c87592ee5a8dc363e638ee79b138b38e","modified":1541139886031},{"_id":"source/_posts/2018.07.17 深入理解乐观锁与悲观锁.md","hash":"33882751b79c757bf9e0eb4c4739fd9e78a5595b","modified":1541139886031},{"_id":"source/_posts/2018.07.18 MD5和SHA-1.md","hash":"61ee47e523de40084e5cff1a9a29425d76054e13","modified":1541139886031},{"_id":"source/_posts/2018.07.18 final关键字的四种用法.md","hash":"25877ede09c15e2e4f319f2cdfb245234a6935fa","modified":1541139886031},{"_id":"source/_posts/2018.07.18 java类中serialversionuid作用是什么.md","hash":"5cd0763f5f458e1a6568d93d9e5a33604d058087","modified":1541139886031},{"_id":"source/_posts/2018.07.18 markdown语法总结.md","hash":"4da90bdb0c4c5fe1effe3911382078416f319a9a","modified":1541139886031},{"_id":"source/_posts/2018.07.18 字节与字符的区别加强记忆.md","hash":"49b77d7a3d8e6fdc044d42b927f9265664138ec4","modified":1541139886032},{"_id":"source/_posts/2018.07.18 红黑树.md","hash":"4951255cce1077c5adf1ea306bf03d295d74ac50","modified":1541139886032},{"_id":"source/_posts/2018.07.18 线程和进程较为清晰的解释.md","hash":"108e0b66789111d6fb6c1c20666385130e498c5b","modified":1541139886032},{"_id":"source/_posts/2018.07.18 解决hash碰撞冲突.md","hash":"9bd66b5613756182c34e856c98d4bdf19ff89998","modified":1541139886032},{"_id":"source/_posts/2018.07.19 ReentrantLock了解.md","hash":"1bf73d7719414da58dda230c298a4a8d9657b9b9","modified":1541139886032},{"_id":"source/_posts/2018.07.19 wait-notify-notifyAll详解.md","hash":"946c5ff2994800d4ce10a236dc63ca9f64cb7839","modified":1541139886032},{"_id":"source/_posts/2018.07.22 mybatis遇到的小坑.md","hash":"094f440c4384fa46a873060ba464ca195332d94d","modified":1541139886032},{"_id":"source/_posts/2018.07.22 springboot热部署.md","hash":"18349d05262fe3f427a0be3681e6019916efc54d","modified":1541139886032},{"_id":"source/_posts/2018.07.24 .tomcat服务器实现https.md","hash":"a8f5e24321f419f68ea74509e6af8e308784c580","modified":1541139886032},{"_id":"source/_posts/2018.07.24 cookie中的path设置.md","hash":"d4547f1bba57930c64fbd167ba8689195081df4c","modified":1541139886032},{"_id":"source/_posts/2018.07.28 springboot遇到一些问题.md","hash":"24730e9218a14775faf474afc4a96479e5d19156","modified":1541139886032},{"_id":"source/_posts/2018.08.14 秒杀活动解决方案.md","hash":"9790657f13ce7e31891b9a43bcfd720cd162dfa9","modified":1541139886032},{"_id":"source/_posts/2018.08.17 Redis实现分布式锁.md","hash":"3c70802f32a261fb16838f9affc93fa96fcaceb6","modified":1541139886032},{"_id":"source/_posts/2018.08.23 电源vb编程.md","hash":"af1f230bde387599a620243691553c96255b00ff","modified":1541139886032},{"_id":"source/_posts/2018.08.24 substring导致内存泄漏.md","hash":"94d50e3e0a111e0272e7206629c0fc7b653d2ef7","modified":1541139886032},{"_id":"source/_posts/2018.08.24 tomcat系统架构.md","hash":"7477ca785e4c3334e3f4f4b68a84a07d7c86309f","modified":1541139886032},{"_id":"source/_posts/2018.08.24 分布式的幂等性.md","hash":"8e255c4d4ab4dcd5ce8f0c6dafee42e3c2f249f6","modified":1541139886032},{"_id":"source/_posts/2018.10.30 DOM学习.md","hash":"9dc8c1d5c828a63e9d0e4053e4bd867916c92024","modified":1541139886032},{"_id":"source/_posts/2018.10.30 Vue学习.md","hash":"4ce97897bd6cf9859c05e4bc2030fa556f2b6de1","modified":1541139886032},{"_id":"source/_posts/2018.11.01 varchar能装多少个字符.md","hash":"1b9e605cee2456b3fceaa9e30af7a58744e5e834","modified":1541139886032},{"_id":"source/_posts/2018.11.01 网络地址转换.md","hash":"fafbf0bc2a4bf8ea1ab6274af69df2007e59fa7e","modified":1541139886032},{"_id":"source/_posts/2018.11.02 ssh学习.md","hash":"7bf48326f8cbb6c5d34a8a558ed0a3d1cf2bbf53","modified":1541171044456},{"_id":"source/_posts/2018.11.02 一些琐碎的记录.md","hash":"aac821f0bc8875bfb2e6c6e309b6fbefa818172a","modified":1541173520833},{"_id":"source/_posts/2018.11.03 git踩坑记.md","hash":"378a38cbc5b0e9995552acce2e68bcd81251ce98","modified":1541214984607},{"_id":"source/_posts/2018.11.03 关于数据库的几道面试题.md","hash":"33f2fd2670a66ccc09b760dc58849cf75b46f83c","modified":1541231592628},{"_id":"source/_posts/2018.11.03 常用的vim命令.md","hash":"56fc389f618829b152045bbcd0188ef21a6d0497","modified":1541223084693},{"_id":"source/_posts/7.10日学习记录.md","hash":"8521bb5d4add9e8148476088a92e1daee2156870","modified":1541139886032},{"_id":"source/_posts/7.11学习记录.md","hash":"3f1715f435efe9307723a56baf26070cdc0accaf","modified":1541139886032},{"_id":"source/_posts/8.6vba学习记录.md","hash":"820a80f259e179064e9585d7ea52b355a1d7b4f1","modified":1541139886032},{"_id":"source/_posts/Cells操作方法总结.md","hash":"b2b1729e23c04cac15e8d3ec73d28ece594349ce","modified":1541139886032},{"_id":"source/_posts/IDEA热部署与tomcat热加载.md","hash":"f3f950c15534cd8f2991d92994d8ab330a4e084c","modified":1541139886032},{"_id":"source/_posts/Scanner用法学习.md","hash":"b3ca84953e6e85df3a1c9c89850ba72e8737d479","modified":1541139886032},{"_id":"source/_posts/TCP-IP模型各层功能简介.md","hash":"3b26a4f56f0443de3ca824172c6fe51dc8e80635","modified":1541229122462},{"_id":"source/_posts/VBA错误处理.md","hash":"66b4c429e6ae763bb445b46a9e6e83cf34800d5d","modified":1541139886033},{"_id":"source/_posts/ajax学习.md","hash":"9ab67caf591b0cde2d88d63786badd820a091db0","modified":1541139886032},{"_id":"source/_posts/cmd打开文件.md","hash":"06dd1012432385bbdde31e2194d56190a2977250","modified":1541139886032},{"_id":"source/_posts/getResourceAsStream学习.md","hash":"9e6b2b055a104ba8f6b87d94baffb15ac1ed9e93","modified":1541139886032},{"_id":"source/_posts/init-param 与 context-param.md","hash":"1713cabae0131a8f550c7fbcc66126a5e09f69f7","modified":1541139886032},{"_id":"source/_posts/javaMail学习记录.md","hash":"3f288dec4cd271cd4c55746936520df425ff1515","modified":1541139886032},{"_id":"source/_posts/javaSocket简单学习.md","hash":"386927310b2134d9dd7fdc26671e4413637e71e0","modified":1541139886032},{"_id":"source/_posts/linux后台运行方法学习.md","hash":"3f5407b5cb517561d058dc16392b5a9508f671a1","modified":1541139886032},{"_id":"source/_posts/log4j学习.md","hash":"c8f905c9c750d78490030f91d75d0ea19c8863d7","modified":1541139886032},{"_id":"source/_posts/mysql更改密码.md","hash":"9eba101fa54726d597b9c76f89731a5843ff6afa","modified":1541139886032},{"_id":"source/_posts/servlet学习.md","hash":"c732d23eedb185b01e8865c26166db40b1dc06f5","modified":1541139886032},{"_id":"source/_posts/tomcat复习.md","hash":"e91d6b3c21aa5621db9316c8bf5b87e202ae26dc","modified":1541139886033},{"_id":"source/categories/index.md","hash":"8ba6d139b67b14f9f0bae9d5c379cc3b21099e63","modified":1541229946007},{"_id":"themes/hexo-theme-apollo/doc/doc-en.md","hash":"409e931a444c02a57b64a0a44dde6e66c1881ca0","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/doc/doc-zh.md","hash":"2a6a81840cdaf497969268a12d8f62c98cc38103","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/languages/en.yml","hash":"ca168b190932229884db1de755ec2f793c758a16","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/languages/zh-cn.yml","hash":"22a2d16fe8c0dddb016b5325b9b9c182a1b49ae1","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/layout/archive.jade","hash":"62797414355bf4474092bc3a32726c8340820ffb","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/layout/index.jade","hash":"55f2f1b4b5364a0e09cb18e1112664c6415fb881","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/layout/post.jade","hash":"245c26244c075c3632d1545c3b228ee9d112f15d","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/source/favicon.png","hash":"ea9abe25652fd5f91ad3ac362521931b45001f42","modified":1541171594000},{"_id":"themes/hexo-theme-apollo/layout/mixins/paginator.jade","hash":"f4ee2fb61a32e199b48cf93771749edc8a007391","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/layout/mixins/post.jade","hash":"f23c6c40e14cdf16783b3c2baf736c9dce18408c","modified":1541140460833},{"_id":"themes/hexo-theme-apollo/layout/partial/comment.jade","hash":"ff0a2c269c2434da2ac5529872f1d6184a71f96d","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/layout/partial/copyright.jade","hash":"e7b2656ac55d13d3af4e11a971029e342e3a4a55","modified":1541141978404},{"_id":"themes/hexo-theme-apollo/layout/partial/head.jade","hash":"328141678d4b747220472556b013e6827e3dde48","modified":1541141614490},{"_id":"themes/hexo-theme-apollo/layout/partial/layout.jade","hash":"529c2ec06cfbc3d5b6d66dd320db50dfab5577a6","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/layout/partial/nav.jade","hash":"f4842d9d3d763fbb823d112a6f49f24cc42a0ad4","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/layout/partial/scripts.jade","hash":"6bff591ae3d1ff6750f239c4c933ad61f009f36a","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/source/css/apollo.css","hash":"e07a11a5da5fc097f023e06a85575356066afd09","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/source/font/sourcesanspro.woff","hash":"a6722c9b6439b7a020a9be3d3178970757a9265c","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/source/font/sourcesanspro.woff2","hash":"da65f527a8da65d5eb6721626d28cfdb46ab104a","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/source/scss/apollo.scss","hash":"e0092f469264b55b25e0d441274f1c812147e7d1","modified":1541140460835},{"_id":"source/_posts/2018.07.18 B树B-树B-树B-树总结.md","hash":"1a162d3104d708275c8a2338953c67df3b78c587","modified":1541139886031},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/archive-post-list.scss","hash":"d2f740a7d48349b7536777c795f82ab740836d0f","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/base.scss","hash":"ae967b2049ecb9b8c4e139ecce32fd9fb5358ac5","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/copyright.scss","hash":"1309667e3000037170cfbb5b8c9c65f4ffcf6814","modified":1541140460834},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/footer.scss","hash":"094aca6e52f11b139ac7980ca03fa7b9d8fc7b2f","modified":1541140460835},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/header.scss","hash":"153bde88bf8ffeae4ffd813d8cc694dd83d33d94","modified":1541140460835},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/home-post-list.scss","hash":"6b5c59f3d2295944f934aee2c1156012a3306d5d","modified":1541140460835},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/mq.scss","hash":"fc5dda52cfbb10e27e2471e03f4606fb3d588225","modified":1541140460835},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/normalize.scss","hash":"fd0b27bed6f103ea95b08f698ea663ff576dbcf1","modified":1541140460835},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/post.scss","hash":"1998f207541a2590a5624549f96c5e65d136690a","modified":1541140460835},{"_id":"public/categories/index.html","hash":"04456748467938d5d9c22b7f9a88f94187192516","modified":1541231599983},{"_id":"public/2018/11/03/常用的vim命令/index.html","hash":"f41bf21817ef7ac09aabb32d6e8b120bf575a946","modified":1541231599983},{"_id":"public/2018/11/03/git踩坑记/index.html","hash":"6307ebeede060f4c6759b342e51e36fa2307a708","modified":1541231599984},{"_id":"public/2018/11/02/ssh学习/index.html","hash":"7bf598738e23214368dc1386770e751c37fe0dde","modified":1541231599984},{"_id":"public/2018/11/02/一些琐碎的记录/index.html","hash":"82aabe016a582604ad3bc8ddc4fc4ba5de5dbe8a","modified":1541231599984},{"_id":"public/2018/11/01/网络地址转换/index.html","hash":"e5a5855e6bad090719741a3661ab7c5a2fb50b12","modified":1541231599984},{"_id":"public/2018/11/01/varchar能装多少个字符/index.html","hash":"78deddfc6759e77c644bc2d3a1e25a8704ee3b0c","modified":1541231599984},{"_id":"public/2018/10/30/DOM学习/index.html","hash":"11e316230da5aa514d5c12bfb8ee2e2cfb95fa31","modified":1541231599984},{"_id":"public/2018/08/24/分布式的幂等性/index.html","hash":"1811aa8d2f42149b0d27343b56d37b4cda03cee1","modified":1541231599984},{"_id":"public/2018/08/24/substring导致内存泄漏/index.html","hash":"c592da7a0d0ebe94897831a34196b5d0abc74426","modified":1541231599984},{"_id":"public/2018/08/24/tomcat系统架构/index.html","hash":"76a093c7a92b4db5a4340034c9d48d3146df8f1c","modified":1541231599984},{"_id":"public/2018/08/23/电源vb编程/index.html","hash":"4ff43442149b82b49cf9bc89cd6f07e4d218e2cf","modified":1541231599984},{"_id":"public/2018/08/17/Redis实现分布式锁/index.html","hash":"db97ae573420a73595351113b81a3925c40f977c","modified":1541231599985},{"_id":"public/2018/08/14/秒杀活动解决方案/index.html","hash":"6310e09f8baaf14b6349c1798268d702d8765e61","modified":1541231599985},{"_id":"public/2018/07/28/springboot遇到一些问题/index.html","hash":"0b0ee4573c74376933b578e6e4f51ec6900ede07","modified":1541231599985},{"_id":"public/2018/07/26/.tomcat服务器实现https/index.html","hash":"75c092a2aef405a23bf0dbd4196a01ce74661536","modified":1541231599985},{"_id":"public/2018/07/24/cookie中的path设置/index.html","hash":"950efe5e121baa2b9e132bce0758575949d28230","modified":1541231599985},{"_id":"public/2018/07/22/springboot热部署/index.html","hash":"c52bb9eb33f918452b83e1aabf40e33869a33448","modified":1541231599985},{"_id":"public/2018/07/22/mybatis遇到的小坑/index.html","hash":"81e70506f3e2a0e535a106f8cf24e15a6b14be26","modified":1541231599985},{"_id":"public/2018/07/19/wait-notify-notifyAll详解/index.html","hash":"7fcf61be65ab0b3e07da61f970be3bab7288cab9","modified":1541231599985},{"_id":"public/2018/07/19/ReentrantLock了解/index.html","hash":"9a94b3368f7343fc7fb6636c0080c00b52ad8479","modified":1541231599985},{"_id":"public/2018/07/18/解决hash碰撞冲突/index.html","hash":"102ce6cd050053e6d356b6526a1149e80cd2bb26","modified":1541231599985},{"_id":"public/2018/07/18/线程和进程较为清晰的解释/index.html","hash":"c148cf5361e64773b50b29fb1f9bf21bb0fb0db2","modified":1541231599985},{"_id":"public/2018/07/18/java类中serialversionuid作用是什么/index.html","hash":"fbf6a4b5b3bc0d7f39724d05178acb70d3e24308","modified":1541231599985},{"_id":"public/2018/07/18/final关键字的四种用法/index.html","hash":"f684ea910fe2aef91497420493ddfc936cb73fe4","modified":1541231599985},{"_id":"public/2018/07/18/字节与字符的区别加强记忆/index.html","hash":"d26c3bb15fe708a1e7ea6bcf6987478f59897f1d","modified":1541231599985},{"_id":"public/2018/07/18/markdown语法总结/index.html","hash":"3d07e5db1d3e4342720e6217780bce97bd81cf19","modified":1541231599985},{"_id":"public/2018/07/18/MD5和SHA-1/index.html","hash":"1669b66cf17fc3696f7ca2193e31f6710230c523","modified":1541231599985},{"_id":"public/2018/07/17/深入理解乐观锁与悲观锁/index.html","hash":"aaf73d6035d33d3ccfe2a75e58bc6d39ff3572b9","modified":1541231599985},{"_id":"public/2018/07/17/单例模式的八种写法/index.html","hash":"a69f139a050093d0a18c215e80b1c46e6efb523f","modified":1541231599986},{"_id":"public/2018/07/16/Synchronized底层优化偏向锁-轻量级锁/index.html","hash":"43307d5af39f0db58ebf868b865adc2b91193952","modified":1541231599986},{"_id":"public/2018/07/16/synchronized原理/index.html","hash":"8f62ef7b4825add508da34452c3f319cb0392a15","modified":1541231599986},{"_id":"public/2018/07/16/序列化原理机制/index.html","hash":"b7df763a474c8b22c7885b33f6924d36fe07a3c8","modified":1541231599986},{"_id":"public/2018/07/16/static与this/index.html","hash":"1002d38f9fd64b30cbebf539e4893db93484d667","modified":1541231599986},{"_id":"public/2018/07/15/浏览器访问一个网址的时候都有哪些过程/index.html","hash":"260eb1cfe8ca97681072f1439a7d182ed34b33ff","modified":1541231599986},{"_id":"public/2018/07/03/java基础知识/index.html","hash":"b5ff283a3550df6e398048ef8601490b08fdd152","modified":1541231599986},{"_id":"public/2018/05/24/关闭idea的searchEverywhere/index.html","hash":"4973c51c84d2677f745b4de765287f9d2c7f60a8","modified":1541231599986},{"_id":"public/2018/05/24/Comparator与Comparable/index.html","hash":"d3fd25d931760b876eaec5ac56d963cdea31ad46","modified":1541231599986},{"_id":"public/2018/05/15/idea编译项目为jar/index.html","hash":"6d9abb05961fab285d56b7111bc8b3127aa1ae07","modified":1541231599986},{"_id":"public/2018/05/13/FastJSON简单使用/index.html","hash":"4ba0508f54e14d01dc9c64e07be5edf4515c068b","modified":1541231599986},{"_id":"public/2018/05/12/linux下安装java环境配置步骤详述/index.html","hash":"1d0d5872e07ec5f7623ff24c83372b93d3a4d2f8","modified":1541231599986},{"_id":"public/2018/05/11/markdown常用的语法总结/index.html","hash":"e7d8eb762bb679b00e5ae41d1dce5975d3aaa4bd","modified":1541231599987},{"_id":"public/2018/05/11/深入理解java编码问题/index.html","hash":"642b182ea3346b6f6807129fb2a7533fff66d89f","modified":1541231599987},{"_id":"public/2018/05/11/idea创建maven一直loading-archetype-list/index.html","hash":"5328ce4ecc17a61498924402fa799572a78d3153","modified":1541231599987},{"_id":"public/2018/05/10/linux任务jobs详解/index.html","hash":"54a95056aa8178ea0fd5cdfd3dca1c874c5490e6","modified":1541231599987},{"_id":"public/2018/05/10/qqbot学习记录/index.html","hash":"51f45bb70fc90474e6304defe1fff5a1e1ad13bd","modified":1541231599987},{"_id":"public/2018/05/10/删除excel多余100多w的空行/index.html","hash":"4083d8b22521f20b1568b4a8b1719d4f3c94b642","modified":1541231599987},{"_id":"public/2018/05/10/破解安卓手机内微信聊天记录安卓手机内微信聊天记录/index.html","hash":"871b4f85444ec95b78a9a863d41711c41cf73535","modified":1541231599987},{"_id":"public/2018/05/08/init-param-与-context-param/index.html","hash":"95adf676897f8f551d073db0703cca6d7d952f90","modified":1541231599987},{"_id":"public/2018/04/24/servlet学习/index.html","hash":"8d56f49b7049f2231c913d50fdd5963fb9a5c4d9","modified":1541231599987},{"_id":"public/2018/04/23/getResourceAsStream学习/index.html","hash":"cc3bf80c3ded11639825c996f081e42318f5857b","modified":1541231599987},{"_id":"public/2018/04/18/javaSocket简单学习/index.html","hash":"521ccb69cafe7c17db1746d2bc429096f407dee2","modified":1541231599987},{"_id":"public/2018/04/18/log4j学习/index.html","hash":"f70db8a0a655fe96588784f1ae94368c55a2db67","modified":1541231599987},{"_id":"public/2018/04/16/linux后台运行方法学习/index.html","hash":"fd9ffb2d1e15cc5995d681d623b1caac323b785a","modified":1541231599988},{"_id":"public/2018/04/16/javaMail学习记录/index.html","hash":"ccd3f4edb225b5a23806b6bc18216e64c78e16ba","modified":1541231599988},{"_id":"public/2018/04/08/TCP-IP模型各层功能简介/index.html","hash":"e24d06183e4722b8e778c73e856ba059cec99c25","modified":1541231599988},{"_id":"public/2018/04/06/cmd打开文件/index.html","hash":"8cad80d46b96d3d6c7a9c42d3c50a7533fced9f9","modified":1541231599988},{"_id":"public/2018/04/06/mysql更改密码/index.html","hash":"ed67c6bbf1c5b21658715df313856dd2b6df58fc","modified":1541231599988},{"_id":"public/2018/04/03/tomcat复习/index.html","hash":"aa441caa6cc9e476a29b35b94c617e305704460d","modified":1541231599988},{"_id":"public/2017/12/25/spring注解详解/index.html","hash":"a058f5d4e86ea1e6e6988ac6b7759c26f0fe0ede","modified":1541231599988},{"_id":"public/2017/11/21/多线程学习/index.html","hash":"c0e4081df627bda70dbde1f1f8d4ce71f376124a","modified":1541231599988},{"_id":"public/2017/11/18/css学习/index.html","hash":"6127f2a9d2e869c2c2b0e1dedf5989b9e600fdd5","modified":1541231599988},{"_id":"public/2017/11/02/2017-11-9-ssm学习/index.html","hash":"5bf33f9e41cca13de048a6afeb7c1b866fc2c93c","modified":1541231599989},{"_id":"public/2017/11/02/2017-11-3-mybatis学习/index.html","hash":"099bc89d05849db3f43c5b156082700fc6933c34","modified":1541231599989},{"_id":"public/2017/10/31/Struts学习/index.html","hash":"2bfa1c90b8b13675256638db90807b8183b82c8d","modified":1541231599989},{"_id":"public/2017/10/31/SpringMVC学习/index.html","hash":"c85054f25e4d72f671ff02609e70cf0a163e35c7","modified":1541231599989},{"_id":"public/2017/10/31/2017-11-1-SpringMVC整合spring学习/index.html","hash":"5515ab897b55890bc7eb0dc0ae3999b2c1c450c2","modified":1541231599989},{"_id":"public/2017/10/29/操作系统学习/index.html","hash":"499c0dd4e58a6f9887b6037eaed0d303948829fa","modified":1541231599989},{"_id":"public/2017/10/28/Spring学习/index.html","hash":"f9d3d2bff8471fd8e5e0814235cddd743329bfe5","modified":1541231599989},{"_id":"public/2017/10/23/servlet/index.html","hash":"d6b44d4612f88a0218dd6ea467c25c085764557d","modified":1541231599989},{"_id":"public/2017/10/22/XML学习/index.html","hash":"7b8c34d86ac49156af3f66bfb0b9b516305b50ab","modified":1541231599990},{"_id":"public/2017/10/20/properties的使用/index.html","hash":"3196e85cf0a3389f9f5e6b65b037b85c5f35bae6","modified":1541231599990},{"_id":"public/2017/10/20/数据库连接池学习/index.html","hash":"1481e596e817a3cb4272b7c03761b72293e46615","modified":1541231599990},{"_id":"public/2017/10/18/购物车模块/index.html","hash":"fb6f02dac4b0560409559bb80e2abb033fc62b8a","modified":1541231599990},{"_id":"public/2017/10/17/退出登陆处理/index.html","hash":"96850bb077f27929237bb78e6586a1a02e9ca789","modified":1541231599990},{"_id":"public/2017/10/17/分类模块/index.html","hash":"906f98e0c545c205a55119afb02089bac361cd01","modified":1541231599990},{"_id":"public/2017/10/17/2017-10-9-javaScript学习/index.html","hash":"ddf20facc16bb1d40d5498de4663622414455b00","modified":1541231599990},{"_id":"public/2017/10/16/Web激活用户/index.html","hash":"399663bc24e604582fb7116bd6a6f8b4d5506172","modified":1541231599990},{"_id":"public/2017/10/16/Web登陆功能实现/index.html","hash":"3406ef10f2ad23e2f20903010617211ee6f7f2ff","modified":1541231599990},{"_id":"public/2017/10/06/2017-10-6读书笔记/index.html","hash":"36ab16e9070d857a9bbe8685cdad0b83c0f5f94c","modified":1541231599990},{"_id":"public/2017/09/30/2017-9-30Tomcat-servlet复习/index.html","hash":"159b3f5fd3a8cfbb6c629da3d5bcbf141c61c489","modified":1541231599990},{"_id":"public/2017/09/24/2017-9-24多线程与文件下载/index.html","hash":"ee6e355ad04c438f65eb6964ab15b6619af9df21","modified":1541231599990},{"_id":"public/2017/09/23/2017-9-23-温故而知新/index.html","hash":"5f0460db261f971d4cb4d817ff0b073b141987ef","modified":1541231599990},{"_id":"public/2017/09/23/2017-9-23-数据库操作/index.html","hash":"d12363157210fe9d1da2501d824f2a3c8b31e39d","modified":1541231599991},{"_id":"public/2017/09/18/2017-9-18学习/index.html","hash":"8eefaeada42842f01ed451140f62d98e05bc28b8","modified":1541231599991},{"_id":"public/2017/08/06/8-6vba学习记录/index.html","hash":"1c63de4a6c58da2d9e1e2cac565b3503eb78053f","modified":1541231599991},{"_id":"public/2017/08/01/Cells操作方法总结/index.html","hash":"6bf2434fba526aeb449b24df6c6e1744ebb0dea4","modified":1541231599991},{"_id":"public/2017/07/11/7-11学习记录/index.html","hash":"10b8745782118927a67d848c1586c158b47ea134","modified":1541231599991},{"_id":"public/2017/07/10/7-10日学习记录/index.html","hash":"56342980647db952623a19e6ff051c29402e5f20","modified":1541231599991},{"_id":"public/2017/07/09/IDEA热部署与tomcat热加载/index.html","hash":"327e917a87788c59bd4229bb45a76a8b8abaa576","modified":1541231599991},{"_id":"public/2017/07/09/VBA错误处理/index.html","hash":"183215a16c8e7ea0d8c1f93da94904ceaa21e73a","modified":1541231599991},{"_id":"public/2017/07/09/Scanner用法学习/index.html","hash":"ff6a5ef6b9347890933345314dddcc4521bf8e12","modified":1541231599991},{"_id":"public/archives/index.html","hash":"ce40cfc16ac7fc4a3655f3eb28c6ddec3d058ac0","modified":1541231599991},{"_id":"public/archives/page/2/index.html","hash":"315fdc1813317d7515d8f6ab5e92a74f6a30bb4e","modified":1541231599991},{"_id":"public/archives/page/3/index.html","hash":"a1e33f2ce52058dd0b9a1aad68bc19c39f647192","modified":1541231599991},{"_id":"public/archives/page/4/index.html","hash":"6b412c08cc69c4b1a2512406eff26cd7aa5c9c1f","modified":1541231599991},{"_id":"public/archives/page/5/index.html","hash":"d5af4c5f9e5d9aa5e3eedfbd33228f863dbc8934","modified":1541231599991},{"_id":"public/archives/page/6/index.html","hash":"930262608288439a39383f52e56670c9d6aae94e","modified":1541231599991},{"_id":"public/archives/page/7/index.html","hash":"2a1b29abc94a6970b440e1139e0f01791517745d","modified":1541231599991},{"_id":"public/archives/page/8/index.html","hash":"93815a513f1db61ac9b76ce547257a70b451f6b3","modified":1541231599992},{"_id":"public/archives/page/9/index.html","hash":"3e638bd94db69f135cbf9d1233dcd719982d1b42","modified":1541231599992},{"_id":"public/archives/page/10/index.html","hash":"fa5fcbc6eef671c8538ca90191bea245d5ae1367","modified":1541231599992},{"_id":"public/archives/page/11/index.html","hash":"2b1c2e696320683c2c027570fb8c3b485e497af3","modified":1541231599992},{"_id":"public/archives/2017/index.html","hash":"a4351ec48c24c6fec1859a134f99bbd0f53589d0","modified":1541231599992},{"_id":"public/archives/2017/page/2/index.html","hash":"0d1d4b26477527b81be1e1471a2a2774ce00b000","modified":1541231599992},{"_id":"public/archives/2017/page/3/index.html","hash":"9b8aed4a00ade5493cdfe7f2a2e114ca9c350956","modified":1541231599992},{"_id":"public/archives/2017/page/4/index.html","hash":"09cc0201fdb1b5357f553a8556c8bd36aa9e348a","modified":1541231599992},{"_id":"public/archives/2017/07/index.html","hash":"12c8d15c667218fe0cd4e16a756c12e848ceff01","modified":1541231599992},{"_id":"public/archives/2017/08/index.html","hash":"996fc94e52fbd68fc52dc16a47cb58cc7935fcf5","modified":1541231599993},{"_id":"public/archives/2017/09/index.html","hash":"f991a732591f08af902d6ac1cdcea9c06e1d4d2e","modified":1541231599993},{"_id":"public/archives/2017/10/index.html","hash":"055942d3ba3f33f44ef6fbf3352a40434337bf21","modified":1541231599993},{"_id":"public/archives/2017/10/page/2/index.html","hash":"14ddf9582c6e330f244fdbbb32f7c05aa5241041","modified":1541231599993},{"_id":"public/archives/2017/11/index.html","hash":"537b080a56a8197bce2b47c827fd5ea76b01a0fc","modified":1541231599993},{"_id":"public/archives/2017/12/index.html","hash":"ee8d8750058486e200c34c5fbbcfccbe83b30aba","modified":1541231599993},{"_id":"public/archives/2018/index.html","hash":"3fb256d651ff97f5581d2e3856f84a9b60b25c3a","modified":1541231599993},{"_id":"public/archives/2018/page/2/index.html","hash":"598fce10a608801fadeeddb13acd4ee4fdeff35a","modified":1541231599993},{"_id":"public/archives/2018/page/3/index.html","hash":"94eaac82f0c305ed98bf5b9c5efe801440be22c4","modified":1541231599993},{"_id":"public/archives/2018/page/4/index.html","hash":"7009709d7df79771d6de9f5c2192fec606b6b929","modified":1541231599993},{"_id":"public/archives/2018/page/5/index.html","hash":"0ed4cf0befc92727393072ef4106b3f2755be54a","modified":1541231599993},{"_id":"public/archives/2018/page/6/index.html","hash":"71967055801942c290071116fffabe7f79cc4ae5","modified":1541231599993},{"_id":"public/archives/2018/page/7/index.html","hash":"fb61c3addd5cec62d482fb0729a0d234ff849fda","modified":1541231599993},{"_id":"public/archives/2018/04/index.html","hash":"cd03590209742ea1c6557739f0484c568306d85d","modified":1541231599993},{"_id":"public/archives/2018/04/page/2/index.html","hash":"62ba6fc78b3dfa997bcbdaa4d8436dc4b1677079","modified":1541231599993},{"_id":"public/archives/2018/05/index.html","hash":"73ecef37fbad8ee65d0a997e0ba238ac4927d0f7","modified":1541231599993},{"_id":"public/archives/2018/05/page/2/index.html","hash":"f31eb35f476c31542e42ee3203622a5b6e7c1766","modified":1541231599993},{"_id":"public/archives/2018/07/index.html","hash":"d2d9a016a10445cd43753feebfece08b04e2cb8d","modified":1541231599994},{"_id":"public/archives/2018/07/page/2/index.html","hash":"5cc3ae0a933fc77508c0ddda57e3dab9563106ff","modified":1541231599994},{"_id":"public/archives/2018/07/page/3/index.html","hash":"766d55d80fac8da3a2368345c4cd9cf6a665efce","modified":1541231599994},{"_id":"public/archives/2018/08/index.html","hash":"c1c333b5f72de1dc942431299dc995a4b3e2fe6d","modified":1541231599994},{"_id":"public/archives/2018/10/index.html","hash":"4f4bfefd38cbdf8bd593519a80dc4126f5e1a013","modified":1541231599994},{"_id":"public/archives/2018/11/index.html","hash":"1f0f16a187cfc026e75be6bdd7591cc25ad4b6a8","modified":1541231599994},{"_id":"public/categories/计算机网络/index.html","hash":"c88870cfef509636b3378547c523043132d4de3f","modified":1541231599994},{"_id":"public/index.html","hash":"7af01ea4d851d92a2977a8111711b6d1682ad4e0","modified":1541231599994},{"_id":"public/page/2/index.html","hash":"ae2598b57635566ee3d6b4263ca91ded34622c17","modified":1541231599994},{"_id":"public/page/3/index.html","hash":"30cd073da240bb3f0fb253919752c8493b96f8a3","modified":1541231599994},{"_id":"public/page/4/index.html","hash":"6866ba5e1d89d2158e5e3f8d0bfd7e2eecacd960","modified":1541231599994},{"_id":"public/page/5/index.html","hash":"331dd276ae45c9795b1e9e4fd57d5e156de5ff30","modified":1541231599994},{"_id":"public/page/6/index.html","hash":"9d432baf489781881d7e1f40dec74173122e5a3a","modified":1541231599994},{"_id":"public/page/7/index.html","hash":"d67c13e61e3358d987a6004b8190999546a3a67e","modified":1541231599994},{"_id":"public/page/8/index.html","hash":"457e7aa1a821866a6890f3ad6552e2a2f3f412f1","modified":1541231599994},{"_id":"public/page/9/index.html","hash":"861736567eb33483b17ca87cb6ca3dbc1ddbb950","modified":1541231599994},{"_id":"public/page/10/index.html","hash":"f925e22324b5a18abaa592f718bb71ef0edde099","modified":1541231599995},{"_id":"public/page/11/index.html","hash":"422b5fb29e504d1c696833701419071da956867a","modified":1541231599995},{"_id":"public/tags/java/index.html","hash":"3f70a062bf5f940432b3ca3019ed63ab01630f79","modified":1541231599995},{"_id":"public/tags/java-多线程/index.html","hash":"b95e23fd3f7bbeac58490357f6ea378f4fe3531f","modified":1541231599995},{"_id":"public/tags/微信-安卓/index.html","hash":"ce45a6a655af9548d7057af6fd48cbcebbebdd5e","modified":1541231599995},{"_id":"public/tags/linux/index.html","hash":"b50b6b293997074fde456258ce83ddbeca2c0a48","modified":1541231599995},{"_id":"public/tags/jar-java/index.html","hash":"fad3fe1e39082b7ac1f43b4cb19724b6434290d3","modified":1541231599995},{"_id":"public/tags/面试/index.html","hash":"cd0832f33bd4c3a0989fed0909f10afb1dc6c49b","modified":1541231599995},{"_id":"public/tags/面试/page/2/index.html","hash":"2344d620d28a499c2e443d2a9533a08ce2a41f86","modified":1541231599995},{"_id":"public/tags/面试/page/3/index.html","hash":"febde0f6f4258e9109d5e08488a846380f22dd9f","modified":1541231599995},{"_id":"public/tags/项目/index.html","hash":"9500049a3d1005e1f1a5a291d7f484cc6a331a2b","modified":1541231599995},{"_id":"public/tags/前端-编程/index.html","hash":"2736f6a2c65b929cd965017dc3c21a1b35149e73","modified":1541231599995},{"_id":"public/2018/10/30/Vue学习/index.html","hash":"ee3827067ddc6883b82426fbdf82b4b4802e33d4","modified":1541231599995},{"_id":"public/2018/07/18/红黑树/index.html","hash":"ca07a830ab931e666d63d2d9187bcbfdddae05f2","modified":1541231599995},{"_id":"public/2018/07/18/B树B-树B-树B-树总结/index.html","hash":"0966ca4a9e0badfff2a833de15d6e80d57cdce77","modified":1541231599995},{"_id":"public/2018/07/17/ConcurrentHashMap的锁分段技术/index.html","hash":"f1ac54b515bc969b0ba74825d8a6592f092e4b4f","modified":1541231599996},{"_id":"public/2018/07/17/Tomcat集群Cluster实现原理剖析/index.html","hash":"0e377e6e569e64ef90ea249bb46acebc1d74c765","modified":1541231599996},{"_id":"public/2018/07/15/3次握手4次挥手/index.html","hash":"f379c66d93cff6195bec626078495577c4f00875","modified":1541231599996},{"_id":"public/2018/04/25/ajax学习/index.html","hash":"dc4a288c8b47d2ed47da84405fa114b0809d5814","modified":1541231599996},{"_id":"public/2017/11/02/2017-11-2-mybatis学习/index.html","hash":"7b011617df6a0d9b6ce21ffcdf66ea51bfcf8192","modified":1541231599996},{"_id":"public/2017/10/29/Spring学习/index.html","hash":"33ee4954f6d374984952bedde80e9a535dc82421","modified":1541231599996},{"_id":"public/2017/10/29/Spring,Struts学习/index.html","hash":"fe63f0e7f9347ac8c8ca4996788fcb0fe9d419b1","modified":1541231599996},{"_id":"public/2017/10/27/Spring 学习/index.html","hash":"3789dc3e0a5f0cd58c74a7fdf5fe85634ed09097","modified":1541231599996},{"_id":"public/2017/10/15/Web学习/index.html","hash":"b504f711d1f545a60a141888d221c918093af95f","modified":1541231599996},{"_id":"public/2018/11/03/关于数据库的几道面试题/index.html","hash":"d4daacae102d769b7c0110db7064b1b660764227","modified":1541231600005},{"_id":"public/favicon.png","hash":"ea9abe25652fd5f91ad3ac362521931b45001f42","modified":1541231600007},{"_id":"public/font/sourcesanspro.woff","hash":"a6722c9b6439b7a020a9be3d3178970757a9265c","modified":1541231600007},{"_id":"public/font/sourcesanspro.woff2","hash":"da65f527a8da65d5eb6721626d28cfdb46ab104a","modified":1541231600007},{"_id":"public/scss/apollo.scss","hash":"e0092f469264b55b25e0d441274f1c812147e7d1","modified":1541231600010},{"_id":"public/css/apollo.css","hash":"e07a11a5da5fc097f023e06a85575356066afd09","modified":1541231600011}],"Category":[{"name":"计算机网络","_id":"cjo15hzdp003ydcyu1u45znu8"}],"Data":[],"Page":[{"title":"categories","date":"2018-11-03T07:18:47.000Z","type":"categories","_content":"\n","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-11-03 15:18:47\ntype: \"categories\"\n---\n\n","updated":"2018-11-03T07:25:46.007Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cjo15hzpk0048dcyue0y0zhbx","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"2017.10.15 Web学习","date":"2017-10-14T23:55:58.000Z","_content":"1.将表单提交至servlet\n```\n//请求这个servlet\n<form action=\"<c:url value='/UserServlet'/>\" method=\"post\" id=\"registForm\">\n//请求servlet某个方法,接下来要准备userServlet类及regist方法\n<input type=\"hidden\" name=\"method\" value=\"regist\"/>\n...\n\npublic class UserServlet extends BaseServlet{\n    private UserService userService = new UserService();\n    \n    private String ajaxValidateEmail(HttpServletRequest req, HttpServletResponse resp)throws ServletException, IOException{\n        //1.获取email\n        String email =req.ajaxValidateEmail(email);\n        //2.通过service得到校验结果\n        boolean b = userService.ajaxValidateEmail(email);\n        //3.发送给客户端\n        resp.getWriter().print(b);\n        return null;\n    }\n    \n    \n    \n    \n    //注册功能\n    public String regist(HttpServletRequest req, HttpServletResponse resp) throw Exception{\n        //1.封装表单数据到User对象中\n        User formUser = CommonUtils.toBean(req.getParameterMap(), User.class);\n        //2.校验,如果失败,保存信息,返回register.jsp\n        \n        req.setAttribute(\"form\",formUser);\n        req.setAttribute(\"errors\",errors);\n        return \"f:/jsps/user/regist.jsp\";\n        \n        \n        //3.使用service完成业务\n        userService.regist(formUser);\n        //4.保存成功信息,转发到msg.jsp显示\n        req.setAttribute(\"code\",\"success\");\n        req.setAttribute(\"msg\",\"注册成功,情马上到邮箱激活\");\n        return \"f:/jsps/msg.jsp\";\n    }\n    \n    //后台注册校验\n    private Map<String,String> validateRegist(User formUser){\n        Map<String,String> errors = new HashMap();\n        String loginname = formUser.getLoginname();\n        if(loginname == null || loginname.trim.isEmpty()){\n            errors.put(\"username\",\"用户名不能为空\");\n        }\n    }\n}\n\n```\n\n---\n\n\n2.表单提交时校验\n```\n$(#registForm).submit(function(){\n   validateLoginname();\n   return false;//拦截 \n});\n```\n\n---\n\n3.后台校验\n```\n//焦点消失时发送异步请求\nUserServlet\n 提交页面ajax校验方法\n 1.校验用户名是否注册\n 2.校验email是否注册\n 3.校验码是否正确//验证码保存在session中\n 访问数据库还得写service层,提供如下方法\nUserService\n 1.校验用户名\n 2.校验Email\nUserDao\n 1.校验用户名\n 2.校验Email\n```\n```\npublic class User{\n    //对象数据库表\n    private String uid;//主键\n    private String loginname;//登录名\n    ...\n    //对应注册表单\n    private String reloginpass;//确认密码\n    private String verifyCode;//验证码\n    //修改密码表单\n    private String newloginpass;//新密码\n}\n```\n\n```\npublic class UserDao{\n    private QueryRunner qr = new TxQueryRunner();\n    \n    public boolean ajaxValidateLoginname(String loginname){\n        String sql = \"select count(1) from t_user where loginname=?\";\n        Number number = (Number)qr.query(sql,new SaclarHandler(),loginname);\n        return number.intValue() == 0;\n    }\n}\n```\n\n```\npublic class UserService{\n    private UserDao userDao = new UserDao();\n    //用户名注册校验\n        public boolean ajaxValidateLoginname(String loginname){\n            return userDao.ajaxValidateLoginname(loginname);\n        }\n    \n}\n```\n4.ajax学习\n```\n$.ajax(\n{\n    url:Servlet地址, \n    data:{method:\"ajaxValidateLoginname\",loginname:value}//参数,\n    type:POST,\n    dataType:json(表示服务器返回的数据类型经),\n    async:false,//是否异步请求,如果是异步那么不会等服务器返回,函数就往下走\n    chche:false,\n    success:function(result){\n        if(!result){\n            $(#+id+\"Error\").text(\"用户名已被调用\");\n            showError($(\"#\"+id+\"Error\"));\n            return false;\n        }\n    }\n}\n);\n```\n---\n\n5.UserServlet#regist(){//相当于秘书的活\n-    1.封装表单数据到javaBean中\n-    2.校验参数(前端校验不可靠,后端还要校验)\n-    3.把表单数据给service完成业务逻辑//相当于老板的活\n-    4.保存成功信息\n-    5.转发到写字板显示成功信息\n}\n\nUserService#regist(User){\n-    1.补齐其他数据(id,状态,激活码)\n-    2.userDao把数据保存到数据库中\n-    3.发邮件\n}\n\nUserDao#add(User){\n    略\n}\n\n实际代码:\n```\nDao层:\npublic void add(User user)throw SQLException{\n    String sql=\"insert into t_user values(?,?,?,?,?,?)\";\n    Object[] params = {user.getUid,user.getLoginname,...};\n    qr.update(sql,params);\n}\n\n```\n```\nUserService层\npublic void regist(User user){\n    //1.数据的补齐\n    user.setUid(CommonUtils.uuid);\n    user.setStatus(false);\n    user.setActivationCode(CommonUtils.uuid+CommonUtils.uuid);\n    //2.向数据库中插入\n    userDao.add(user);\n    //3.发邮件\n    //把配置文件内容加载到prop中\n    Properties prop = new Properties();\n    prop.load(this.getClass().getClassLoader().getResourceAsStream(\"email_template.properties\"));\n    \n-   1.登陆邮件服务器,得到session\n    String host = prop.getProperty(\"host\");//\"服务器主机名\"\n    String name = prop.getProperty(\"username\");//登录名\n    String pass = \"\";//登陆密码\n    Session session = MailUtils.createSession(host,name,pas\n-   2.创建Mail对象\n    String from = \"\";\n    String to = \"\";\n    String subject = \"\";\n    String content =\n    //format把{0}用第二个参数替换\n    MessageFormat.format(prop.getProperty(\"content\"),user.getActivationCode());\n    Mail mail = new Mail(from,to,subject,content);\n-   3.发送邮件\n     MailUtils.send(session,mail);\n}\n```","source":"_posts/2017.10.15 Web学习.md","raw":"---\ntitle: 2017.10.15 Web学习\ndate: 2017-10-15 07:55:58\ntags:\n---\n1.将表单提交至servlet\n```\n//请求这个servlet\n<form action=\"<c:url value='/UserServlet'/>\" method=\"post\" id=\"registForm\">\n//请求servlet某个方法,接下来要准备userServlet类及regist方法\n<input type=\"hidden\" name=\"method\" value=\"regist\"/>\n...\n\npublic class UserServlet extends BaseServlet{\n    private UserService userService = new UserService();\n    \n    private String ajaxValidateEmail(HttpServletRequest req, HttpServletResponse resp)throws ServletException, IOException{\n        //1.获取email\n        String email =req.ajaxValidateEmail(email);\n        //2.通过service得到校验结果\n        boolean b = userService.ajaxValidateEmail(email);\n        //3.发送给客户端\n        resp.getWriter().print(b);\n        return null;\n    }\n    \n    \n    \n    \n    //注册功能\n    public String regist(HttpServletRequest req, HttpServletResponse resp) throw Exception{\n        //1.封装表单数据到User对象中\n        User formUser = CommonUtils.toBean(req.getParameterMap(), User.class);\n        //2.校验,如果失败,保存信息,返回register.jsp\n        \n        req.setAttribute(\"form\",formUser);\n        req.setAttribute(\"errors\",errors);\n        return \"f:/jsps/user/regist.jsp\";\n        \n        \n        //3.使用service完成业务\n        userService.regist(formUser);\n        //4.保存成功信息,转发到msg.jsp显示\n        req.setAttribute(\"code\",\"success\");\n        req.setAttribute(\"msg\",\"注册成功,情马上到邮箱激活\");\n        return \"f:/jsps/msg.jsp\";\n    }\n    \n    //后台注册校验\n    private Map<String,String> validateRegist(User formUser){\n        Map<String,String> errors = new HashMap();\n        String loginname = formUser.getLoginname();\n        if(loginname == null || loginname.trim.isEmpty()){\n            errors.put(\"username\",\"用户名不能为空\");\n        }\n    }\n}\n\n```\n\n---\n\n\n2.表单提交时校验\n```\n$(#registForm).submit(function(){\n   validateLoginname();\n   return false;//拦截 \n});\n```\n\n---\n\n3.后台校验\n```\n//焦点消失时发送异步请求\nUserServlet\n 提交页面ajax校验方法\n 1.校验用户名是否注册\n 2.校验email是否注册\n 3.校验码是否正确//验证码保存在session中\n 访问数据库还得写service层,提供如下方法\nUserService\n 1.校验用户名\n 2.校验Email\nUserDao\n 1.校验用户名\n 2.校验Email\n```\n```\npublic class User{\n    //对象数据库表\n    private String uid;//主键\n    private String loginname;//登录名\n    ...\n    //对应注册表单\n    private String reloginpass;//确认密码\n    private String verifyCode;//验证码\n    //修改密码表单\n    private String newloginpass;//新密码\n}\n```\n\n```\npublic class UserDao{\n    private QueryRunner qr = new TxQueryRunner();\n    \n    public boolean ajaxValidateLoginname(String loginname){\n        String sql = \"select count(1) from t_user where loginname=?\";\n        Number number = (Number)qr.query(sql,new SaclarHandler(),loginname);\n        return number.intValue() == 0;\n    }\n}\n```\n\n```\npublic class UserService{\n    private UserDao userDao = new UserDao();\n    //用户名注册校验\n        public boolean ajaxValidateLoginname(String loginname){\n            return userDao.ajaxValidateLoginname(loginname);\n        }\n    \n}\n```\n4.ajax学习\n```\n$.ajax(\n{\n    url:Servlet地址, \n    data:{method:\"ajaxValidateLoginname\",loginname:value}//参数,\n    type:POST,\n    dataType:json(表示服务器返回的数据类型经),\n    async:false,//是否异步请求,如果是异步那么不会等服务器返回,函数就往下走\n    chche:false,\n    success:function(result){\n        if(!result){\n            $(#+id+\"Error\").text(\"用户名已被调用\");\n            showError($(\"#\"+id+\"Error\"));\n            return false;\n        }\n    }\n}\n);\n```\n---\n\n5.UserServlet#regist(){//相当于秘书的活\n-    1.封装表单数据到javaBean中\n-    2.校验参数(前端校验不可靠,后端还要校验)\n-    3.把表单数据给service完成业务逻辑//相当于老板的活\n-    4.保存成功信息\n-    5.转发到写字板显示成功信息\n}\n\nUserService#regist(User){\n-    1.补齐其他数据(id,状态,激活码)\n-    2.userDao把数据保存到数据库中\n-    3.发邮件\n}\n\nUserDao#add(User){\n    略\n}\n\n实际代码:\n```\nDao层:\npublic void add(User user)throw SQLException{\n    String sql=\"insert into t_user values(?,?,?,?,?,?)\";\n    Object[] params = {user.getUid,user.getLoginname,...};\n    qr.update(sql,params);\n}\n\n```\n```\nUserService层\npublic void regist(User user){\n    //1.数据的补齐\n    user.setUid(CommonUtils.uuid);\n    user.setStatus(false);\n    user.setActivationCode(CommonUtils.uuid+CommonUtils.uuid);\n    //2.向数据库中插入\n    userDao.add(user);\n    //3.发邮件\n    //把配置文件内容加载到prop中\n    Properties prop = new Properties();\n    prop.load(this.getClass().getClassLoader().getResourceAsStream(\"email_template.properties\"));\n    \n-   1.登陆邮件服务器,得到session\n    String host = prop.getProperty(\"host\");//\"服务器主机名\"\n    String name = prop.getProperty(\"username\");//登录名\n    String pass = \"\";//登陆密码\n    Session session = MailUtils.createSession(host,name,pas\n-   2.创建Mail对象\n    String from = \"\";\n    String to = \"\";\n    String subject = \"\";\n    String content =\n    //format把{0}用第二个参数替换\n    MessageFormat.format(prop.getProperty(\"content\"),user.getActivationCode());\n    Mail mail = new Mail(from,to,subject,content);\n-   3.发送邮件\n     MailUtils.send(session,mail);\n}\n```","slug":"Web学习","published":1,"updated":"2018-11-02T06:24:46.029Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz990000dcyuz3p6howw","content":"<p>1.将表单提交至servlet<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//请求这个servlet</span><br><span class=\"line\">&lt;form action=&quot;&lt;c:url value=&apos;/UserServlet&apos;/&gt;&quot; method=&quot;post&quot; id=&quot;registForm&quot;&gt;</span><br><span class=\"line\">//请求servlet某个方法,接下来要准备userServlet类及regist方法</span><br><span class=\"line\">&lt;input type=&quot;hidden&quot; name=&quot;method&quot; value=&quot;regist&quot;/&gt;</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">public class UserServlet extends BaseServlet&#123;</span><br><span class=\"line\">    private UserService userService = new UserService();</span><br><span class=\"line\">    </span><br><span class=\"line\">    private String ajaxValidateEmail(HttpServletRequest req, HttpServletResponse resp)throws ServletException, IOException&#123;</span><br><span class=\"line\">        //1.获取email</span><br><span class=\"line\">        String email =req.ajaxValidateEmail(email);</span><br><span class=\"line\">        //2.通过service得到校验结果</span><br><span class=\"line\">        boolean b = userService.ajaxValidateEmail(email);</span><br><span class=\"line\">        //3.发送给客户端</span><br><span class=\"line\">        resp.getWriter().print(b);</span><br><span class=\"line\">        return null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    //注册功能</span><br><span class=\"line\">    public String regist(HttpServletRequest req, HttpServletResponse resp) throw Exception&#123;</span><br><span class=\"line\">        //1.封装表单数据到User对象中</span><br><span class=\"line\">        User formUser = CommonUtils.toBean(req.getParameterMap(), User.class);</span><br><span class=\"line\">        //2.校验,如果失败,保存信息,返回register.jsp</span><br><span class=\"line\">        </span><br><span class=\"line\">        req.setAttribute(&quot;form&quot;,formUser);</span><br><span class=\"line\">        req.setAttribute(&quot;errors&quot;,errors);</span><br><span class=\"line\">        return &quot;f:/jsps/user/regist.jsp&quot;;</span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        //3.使用service完成业务</span><br><span class=\"line\">        userService.regist(formUser);</span><br><span class=\"line\">        //4.保存成功信息,转发到msg.jsp显示</span><br><span class=\"line\">        req.setAttribute(&quot;code&quot;,&quot;success&quot;);</span><br><span class=\"line\">        req.setAttribute(&quot;msg&quot;,&quot;注册成功,情马上到邮箱激活&quot;);</span><br><span class=\"line\">        return &quot;f:/jsps/msg.jsp&quot;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    //后台注册校验</span><br><span class=\"line\">    private Map&lt;String,String&gt; validateRegist(User formUser)&#123;</span><br><span class=\"line\">        Map&lt;String,String&gt; errors = new HashMap();</span><br><span class=\"line\">        String loginname = formUser.getLoginname();</span><br><span class=\"line\">        if(loginname == null || loginname.trim.isEmpty())&#123;</span><br><span class=\"line\">            errors.put(&quot;username&quot;,&quot;用户名不能为空&quot;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>2.表单提交时校验<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(#registForm).submit(function()&#123;</span><br><span class=\"line\">   validateLoginname();</span><br><span class=\"line\">   return false;//拦截 </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>3.后台校验<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//焦点消失时发送异步请求</span><br><span class=\"line\">UserServlet</span><br><span class=\"line\"> 提交页面ajax校验方法</span><br><span class=\"line\"> 1.校验用户名是否注册</span><br><span class=\"line\"> 2.校验email是否注册</span><br><span class=\"line\"> 3.校验码是否正确//验证码保存在session中</span><br><span class=\"line\"> 访问数据库还得写service层,提供如下方法</span><br><span class=\"line\">UserService</span><br><span class=\"line\"> 1.校验用户名</span><br><span class=\"line\"> 2.校验Email</span><br><span class=\"line\">UserDao</span><br><span class=\"line\"> 1.校验用户名</span><br><span class=\"line\"> 2.校验Email</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class User&#123;</span><br><span class=\"line\">    //对象数据库表</span><br><span class=\"line\">    private String uid;//主键</span><br><span class=\"line\">    private String loginname;//登录名</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    //对应注册表单</span><br><span class=\"line\">    private String reloginpass;//确认密码</span><br><span class=\"line\">    private String verifyCode;//验证码</span><br><span class=\"line\">    //修改密码表单</span><br><span class=\"line\">    private String newloginpass;//新密码</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class UserDao&#123;</span><br><span class=\"line\">    private QueryRunner qr = new TxQueryRunner();</span><br><span class=\"line\">    </span><br><span class=\"line\">    public boolean ajaxValidateLoginname(String loginname)&#123;</span><br><span class=\"line\">        String sql = &quot;select count(1) from t_user where loginname=?&quot;;</span><br><span class=\"line\">        Number number = (Number)qr.query(sql,new SaclarHandler(),loginname);</span><br><span class=\"line\">        return number.intValue() == 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class UserService&#123;</span><br><span class=\"line\">    private UserDao userDao = new UserDao();</span><br><span class=\"line\">    //用户名注册校验</span><br><span class=\"line\">        public boolean ajaxValidateLoginname(String loginname)&#123;</span><br><span class=\"line\">            return userDao.ajaxValidateLoginname(loginname);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>4.ajax学习<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax(</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    url:Servlet地址, </span><br><span class=\"line\">    data:&#123;method:&quot;ajaxValidateLoginname&quot;,loginname:value&#125;//参数,</span><br><span class=\"line\">    type:POST,</span><br><span class=\"line\">    dataType:json(表示服务器返回的数据类型经),</span><br><span class=\"line\">    async:false,//是否异步请求,如果是异步那么不会等服务器返回,函数就往下走</span><br><span class=\"line\">    chche:false,</span><br><span class=\"line\">    success:function(result)&#123;</span><br><span class=\"line\">        if(!result)&#123;</span><br><span class=\"line\">            $(#+id+&quot;Error&quot;).text(&quot;用户名已被调用&quot;);</span><br><span class=\"line\">            showError($(&quot;#&quot;+id+&quot;Error&quot;));</span><br><span class=\"line\">            return false;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>5.UserServlet#regist(){//相当于秘书的活</p>\n<ul>\n<li>1.封装表单数据到javaBean中</li>\n<li>2.校验参数(前端校验不可靠,后端还要校验)</li>\n<li>3.把表单数据给service完成业务逻辑//相当于老板的活</li>\n<li>4.保存成功信息</li>\n<li>5.转发到写字板显示成功信息<br>}</li>\n</ul>\n<p>UserService#regist(User){</p>\n<ul>\n<li>1.补齐其他数据(id,状态,激活码)</li>\n<li>2.userDao把数据保存到数据库中</li>\n<li>3.发邮件<br>}</li>\n</ul>\n<p>UserDao#add(User){<br>    略<br>}</p>\n<p>实际代码:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Dao层:</span><br><span class=\"line\">public void add(User user)throw SQLException&#123;</span><br><span class=\"line\">    String sql=&quot;insert into t_user values(?,?,?,?,?,?)&quot;;</span><br><span class=\"line\">    Object[] params = &#123;user.getUid,user.getLoginname,...&#125;;</span><br><span class=\"line\">    qr.update(sql,params);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserService层</span><br><span class=\"line\">public void regist(User user)&#123;</span><br><span class=\"line\">    //1.数据的补齐</span><br><span class=\"line\">    user.setUid(CommonUtils.uuid);</span><br><span class=\"line\">    user.setStatus(false);</span><br><span class=\"line\">    user.setActivationCode(CommonUtils.uuid+CommonUtils.uuid);</span><br><span class=\"line\">    //2.向数据库中插入</span><br><span class=\"line\">    userDao.add(user);</span><br><span class=\"line\">    //3.发邮件</span><br><span class=\"line\">    //把配置文件内容加载到prop中</span><br><span class=\"line\">    Properties prop = new Properties();</span><br><span class=\"line\">    prop.load(this.getClass().getClassLoader().getResourceAsStream(&quot;email_template.properties&quot;));</span><br><span class=\"line\">    </span><br><span class=\"line\">-   1.登陆邮件服务器,得到session</span><br><span class=\"line\">    String host = prop.getProperty(&quot;host&quot;);//&quot;服务器主机名&quot;</span><br><span class=\"line\">    String name = prop.getProperty(&quot;username&quot;);//登录名</span><br><span class=\"line\">    String pass = &quot;&quot;;//登陆密码</span><br><span class=\"line\">    Session session = MailUtils.createSession(host,name,pas</span><br><span class=\"line\">-   2.创建Mail对象</span><br><span class=\"line\">    String from = &quot;&quot;;</span><br><span class=\"line\">    String to = &quot;&quot;;</span><br><span class=\"line\">    String subject = &quot;&quot;;</span><br><span class=\"line\">    String content =</span><br><span class=\"line\">    //format把&#123;0&#125;用第二个参数替换</span><br><span class=\"line\">    MessageFormat.format(prop.getProperty(&quot;content&quot;),user.getActivationCode());</span><br><span class=\"line\">    Mail mail = new Mail(from,to,subject,content);</span><br><span class=\"line\">-   3.发送邮件</span><br><span class=\"line\">     MailUtils.send(session,mail);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>1.将表单提交至servlet<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//请求这个servlet</span><br><span class=\"line\">&lt;form action=&quot;&lt;c:url value=&apos;/UserServlet&apos;/&gt;&quot; method=&quot;post&quot; id=&quot;registForm&quot;&gt;</span><br><span class=\"line\">//请求servlet某个方法,接下来要准备userServlet类及regist方法</span><br><span class=\"line\">&lt;input type=&quot;hidden&quot; name=&quot;method&quot; value=&quot;regist&quot;/&gt;</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">public class UserServlet extends BaseServlet&#123;</span><br><span class=\"line\">    private UserService userService = new UserService();</span><br><span class=\"line\">    </span><br><span class=\"line\">    private String ajaxValidateEmail(HttpServletRequest req, HttpServletResponse resp)throws ServletException, IOException&#123;</span><br><span class=\"line\">        //1.获取email</span><br><span class=\"line\">        String email =req.ajaxValidateEmail(email);</span><br><span class=\"line\">        //2.通过service得到校验结果</span><br><span class=\"line\">        boolean b = userService.ajaxValidateEmail(email);</span><br><span class=\"line\">        //3.发送给客户端</span><br><span class=\"line\">        resp.getWriter().print(b);</span><br><span class=\"line\">        return null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    //注册功能</span><br><span class=\"line\">    public String regist(HttpServletRequest req, HttpServletResponse resp) throw Exception&#123;</span><br><span class=\"line\">        //1.封装表单数据到User对象中</span><br><span class=\"line\">        User formUser = CommonUtils.toBean(req.getParameterMap(), User.class);</span><br><span class=\"line\">        //2.校验,如果失败,保存信息,返回register.jsp</span><br><span class=\"line\">        </span><br><span class=\"line\">        req.setAttribute(&quot;form&quot;,formUser);</span><br><span class=\"line\">        req.setAttribute(&quot;errors&quot;,errors);</span><br><span class=\"line\">        return &quot;f:/jsps/user/regist.jsp&quot;;</span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        //3.使用service完成业务</span><br><span class=\"line\">        userService.regist(formUser);</span><br><span class=\"line\">        //4.保存成功信息,转发到msg.jsp显示</span><br><span class=\"line\">        req.setAttribute(&quot;code&quot;,&quot;success&quot;);</span><br><span class=\"line\">        req.setAttribute(&quot;msg&quot;,&quot;注册成功,情马上到邮箱激活&quot;);</span><br><span class=\"line\">        return &quot;f:/jsps/msg.jsp&quot;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    //后台注册校验</span><br><span class=\"line\">    private Map&lt;String,String&gt; validateRegist(User formUser)&#123;</span><br><span class=\"line\">        Map&lt;String,String&gt; errors = new HashMap();</span><br><span class=\"line\">        String loginname = formUser.getLoginname();</span><br><span class=\"line\">        if(loginname == null || loginname.trim.isEmpty())&#123;</span><br><span class=\"line\">            errors.put(&quot;username&quot;,&quot;用户名不能为空&quot;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>2.表单提交时校验<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(#registForm).submit(function()&#123;</span><br><span class=\"line\">   validateLoginname();</span><br><span class=\"line\">   return false;//拦截 </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>3.后台校验<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//焦点消失时发送异步请求</span><br><span class=\"line\">UserServlet</span><br><span class=\"line\"> 提交页面ajax校验方法</span><br><span class=\"line\"> 1.校验用户名是否注册</span><br><span class=\"line\"> 2.校验email是否注册</span><br><span class=\"line\"> 3.校验码是否正确//验证码保存在session中</span><br><span class=\"line\"> 访问数据库还得写service层,提供如下方法</span><br><span class=\"line\">UserService</span><br><span class=\"line\"> 1.校验用户名</span><br><span class=\"line\"> 2.校验Email</span><br><span class=\"line\">UserDao</span><br><span class=\"line\"> 1.校验用户名</span><br><span class=\"line\"> 2.校验Email</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class User&#123;</span><br><span class=\"line\">    //对象数据库表</span><br><span class=\"line\">    private String uid;//主键</span><br><span class=\"line\">    private String loginname;//登录名</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    //对应注册表单</span><br><span class=\"line\">    private String reloginpass;//确认密码</span><br><span class=\"line\">    private String verifyCode;//验证码</span><br><span class=\"line\">    //修改密码表单</span><br><span class=\"line\">    private String newloginpass;//新密码</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class UserDao&#123;</span><br><span class=\"line\">    private QueryRunner qr = new TxQueryRunner();</span><br><span class=\"line\">    </span><br><span class=\"line\">    public boolean ajaxValidateLoginname(String loginname)&#123;</span><br><span class=\"line\">        String sql = &quot;select count(1) from t_user where loginname=?&quot;;</span><br><span class=\"line\">        Number number = (Number)qr.query(sql,new SaclarHandler(),loginname);</span><br><span class=\"line\">        return number.intValue() == 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class UserService&#123;</span><br><span class=\"line\">    private UserDao userDao = new UserDao();</span><br><span class=\"line\">    //用户名注册校验</span><br><span class=\"line\">        public boolean ajaxValidateLoginname(String loginname)&#123;</span><br><span class=\"line\">            return userDao.ajaxValidateLoginname(loginname);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>4.ajax学习<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax(</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    url:Servlet地址, </span><br><span class=\"line\">    data:&#123;method:&quot;ajaxValidateLoginname&quot;,loginname:value&#125;//参数,</span><br><span class=\"line\">    type:POST,</span><br><span class=\"line\">    dataType:json(表示服务器返回的数据类型经),</span><br><span class=\"line\">    async:false,//是否异步请求,如果是异步那么不会等服务器返回,函数就往下走</span><br><span class=\"line\">    chche:false,</span><br><span class=\"line\">    success:function(result)&#123;</span><br><span class=\"line\">        if(!result)&#123;</span><br><span class=\"line\">            $(#+id+&quot;Error&quot;).text(&quot;用户名已被调用&quot;);</span><br><span class=\"line\">            showError($(&quot;#&quot;+id+&quot;Error&quot;));</span><br><span class=\"line\">            return false;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>5.UserServlet#regist(){//相当于秘书的活</p>\n<ul>\n<li>1.封装表单数据到javaBean中</li>\n<li>2.校验参数(前端校验不可靠,后端还要校验)</li>\n<li>3.把表单数据给service完成业务逻辑//相当于老板的活</li>\n<li>4.保存成功信息</li>\n<li>5.转发到写字板显示成功信息<br>}</li>\n</ul>\n<p>UserService#regist(User){</p>\n<ul>\n<li>1.补齐其他数据(id,状态,激活码)</li>\n<li>2.userDao把数据保存到数据库中</li>\n<li>3.发邮件<br>}</li>\n</ul>\n<p>UserDao#add(User){<br>    略<br>}</p>\n<p>实际代码:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Dao层:</span><br><span class=\"line\">public void add(User user)throw SQLException&#123;</span><br><span class=\"line\">    String sql=&quot;insert into t_user values(?,?,?,?,?,?)&quot;;</span><br><span class=\"line\">    Object[] params = &#123;user.getUid,user.getLoginname,...&#125;;</span><br><span class=\"line\">    qr.update(sql,params);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserService层</span><br><span class=\"line\">public void regist(User user)&#123;</span><br><span class=\"line\">    //1.数据的补齐</span><br><span class=\"line\">    user.setUid(CommonUtils.uuid);</span><br><span class=\"line\">    user.setStatus(false);</span><br><span class=\"line\">    user.setActivationCode(CommonUtils.uuid+CommonUtils.uuid);</span><br><span class=\"line\">    //2.向数据库中插入</span><br><span class=\"line\">    userDao.add(user);</span><br><span class=\"line\">    //3.发邮件</span><br><span class=\"line\">    //把配置文件内容加载到prop中</span><br><span class=\"line\">    Properties prop = new Properties();</span><br><span class=\"line\">    prop.load(this.getClass().getClassLoader().getResourceAsStream(&quot;email_template.properties&quot;));</span><br><span class=\"line\">    </span><br><span class=\"line\">-   1.登陆邮件服务器,得到session</span><br><span class=\"line\">    String host = prop.getProperty(&quot;host&quot;);//&quot;服务器主机名&quot;</span><br><span class=\"line\">    String name = prop.getProperty(&quot;username&quot;);//登录名</span><br><span class=\"line\">    String pass = &quot;&quot;;//登陆密码</span><br><span class=\"line\">    Session session = MailUtils.createSession(host,name,pas</span><br><span class=\"line\">-   2.创建Mail对象</span><br><span class=\"line\">    String from = &quot;&quot;;</span><br><span class=\"line\">    String to = &quot;&quot;;</span><br><span class=\"line\">    String subject = &quot;&quot;;</span><br><span class=\"line\">    String content =</span><br><span class=\"line\">    //format把&#123;0&#125;用第二个参数替换</span><br><span class=\"line\">    MessageFormat.format(prop.getProperty(&quot;content&quot;),user.getActivationCode());</span><br><span class=\"line\">    Mail mail = new Mail(from,to,subject,content);</span><br><span class=\"line\">-   3.发送邮件</span><br><span class=\"line\">     MailUtils.send(session,mail);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"Web激活用户","date":"2017-10-15T23:55:58.000Z","_content":"DAO模式是标准的J2EE设计模式之一,典型的DAO实现有下列几个组件:\n- 1.DAO工厂类\n- 2.DAO接口\n- 3.实现DAO接口具体实现类\n- 4.数据传递对象\n\n\n事物划分:transaction demarcation\n\n---\n```\nUserDao:（具体的查询，更新，等方法）\n//查询用户激活码\npublic User findByCode(String code) throw SQLException{\n    String sql = \"select * from t_user where activationCode = ?\";\n    return qr.query(sql,new BeanHandler<User>(User.class),code);\n}\n//激活用户\npublic void updateStatus(String uid,boolean status) throws SQLException{\n    String sql = \"update t_user set status=? where uid=?\";\n    qr.update(sql,status,uid);\n}\n```\n---\n```\nUserService:\npublic UserDao userDao = new UserDao();\n//激活功能\npublic void activation(String code) throw UserException{\n    <!--1.通过激活码查询用户-->\n    <!--2.如果user是null,说明无效是无效激活码,抛异常-->\n    <!--3.查看用户状态是否为true-->\n    <!--4.修改状态为true-->\n    \n    User user = userDao.findByCode(code);\n    if(user == null)throw new UserException(\"无效的激活码\");\n    if(user.isStatus()) throw new UserException(\"您已经激活了，不要二次激活\")；\n    userDao.updateStatus(user.getUid(),true);\n}\n```\n---\n\n```\nUserServlet:\n\npublic String activation(HttpServletRequest req,HttpServletResponse resp) throw ServletException,IOException{\n    <!--1.获取参数激活码-->\n    <!--2.用激活码调用service方法完成激活。如果有异常，保存到request中，转发到msg.jsp显示-->\n    <!--3.保存成功信息到request，转发到msg.jsp显示-->\n    String code = req.getParameter(\"activationCode\");\n    try{\n        userService.activation(code);\n        req.setAttribute(\"code\",\"success\");\n        req.setAttribute(\"msg\",\"恭喜，激活成功\");        \n    }catch(UserException e){\n        req.setAttribute(\"msg\",getMessage());\n        req.setAttribute(\"code\",\"error\");\n    }\n    return \"f:/jsps/msg.jsp\";\n}\n\n\n```\n\n\n\n\n创建自己的异常类：\n继承Exception，生成构造器\n---","source":"_posts/2017.10.16 Web激活用户.md","raw":"---\ntitle: Web激活用户\ndate: 2017-10-16 07:55:58\ntags:\n---\nDAO模式是标准的J2EE设计模式之一,典型的DAO实现有下列几个组件:\n- 1.DAO工厂类\n- 2.DAO接口\n- 3.实现DAO接口具体实现类\n- 4.数据传递对象\n\n\n事物划分:transaction demarcation\n\n---\n```\nUserDao:（具体的查询，更新，等方法）\n//查询用户激活码\npublic User findByCode(String code) throw SQLException{\n    String sql = \"select * from t_user where activationCode = ?\";\n    return qr.query(sql,new BeanHandler<User>(User.class),code);\n}\n//激活用户\npublic void updateStatus(String uid,boolean status) throws SQLException{\n    String sql = \"update t_user set status=? where uid=?\";\n    qr.update(sql,status,uid);\n}\n```\n---\n```\nUserService:\npublic UserDao userDao = new UserDao();\n//激活功能\npublic void activation(String code) throw UserException{\n    <!--1.通过激活码查询用户-->\n    <!--2.如果user是null,说明无效是无效激活码,抛异常-->\n    <!--3.查看用户状态是否为true-->\n    <!--4.修改状态为true-->\n    \n    User user = userDao.findByCode(code);\n    if(user == null)throw new UserException(\"无效的激活码\");\n    if(user.isStatus()) throw new UserException(\"您已经激活了，不要二次激活\")；\n    userDao.updateStatus(user.getUid(),true);\n}\n```\n---\n\n```\nUserServlet:\n\npublic String activation(HttpServletRequest req,HttpServletResponse resp) throw ServletException,IOException{\n    <!--1.获取参数激活码-->\n    <!--2.用激活码调用service方法完成激活。如果有异常，保存到request中，转发到msg.jsp显示-->\n    <!--3.保存成功信息到request，转发到msg.jsp显示-->\n    String code = req.getParameter(\"activationCode\");\n    try{\n        userService.activation(code);\n        req.setAttribute(\"code\",\"success\");\n        req.setAttribute(\"msg\",\"恭喜，激活成功\");        \n    }catch(UserException e){\n        req.setAttribute(\"msg\",getMessage());\n        req.setAttribute(\"code\",\"error\");\n    }\n    return \"f:/jsps/msg.jsp\";\n}\n\n\n```\n\n\n\n\n创建自己的异常类：\n继承Exception，生成构造器\n---","slug":"Web激活用户","published":1,"updated":"2018-11-02T06:24:46.029Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9e0001dcyu6yp1ljii","content":"<p>DAO模式是标准的J2EE设计模式之一,典型的DAO实现有下列几个组件:</p>\n<ul>\n<li>1.DAO工厂类</li>\n<li>2.DAO接口</li>\n<li>3.实现DAO接口具体实现类</li>\n<li>4.数据传递对象</li>\n</ul>\n<p>事物划分:transaction demarcation</p>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserDao:（具体的查询，更新，等方法）</span><br><span class=\"line\">//查询用户激活码</span><br><span class=\"line\">public User findByCode(String code) throw SQLException&#123;</span><br><span class=\"line\">    String sql = &quot;select * from t_user where activationCode = ?&quot;;</span><br><span class=\"line\">    return qr.query(sql,new BeanHandler&lt;User&gt;(User.class),code);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//激活用户</span><br><span class=\"line\">public void updateStatus(String uid,boolean status) throws SQLException&#123;</span><br><span class=\"line\">    String sql = &quot;update t_user set status=? where uid=?&quot;;</span><br><span class=\"line\">    qr.update(sql,status,uid);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserService:</span><br><span class=\"line\">public UserDao userDao = new UserDao();</span><br><span class=\"line\">//激活功能</span><br><span class=\"line\">public void activation(String code) throw UserException&#123;</span><br><span class=\"line\">    &lt;!--1.通过激活码查询用户--&gt;</span><br><span class=\"line\">    &lt;!--2.如果user是null,说明无效是无效激活码,抛异常--&gt;</span><br><span class=\"line\">    &lt;!--3.查看用户状态是否为true--&gt;</span><br><span class=\"line\">    &lt;!--4.修改状态为true--&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    User user = userDao.findByCode(code);</span><br><span class=\"line\">    if(user == null)throw new UserException(&quot;无效的激活码&quot;);</span><br><span class=\"line\">    if(user.isStatus()) throw new UserException(&quot;您已经激活了，不要二次激活&quot;)；</span><br><span class=\"line\">    userDao.updateStatus(user.getUid(),true);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserServlet:</span><br><span class=\"line\"></span><br><span class=\"line\">public String activation(HttpServletRequest req,HttpServletResponse resp) throw ServletException,IOException&#123;</span><br><span class=\"line\">    &lt;!--1.获取参数激活码--&gt;</span><br><span class=\"line\">    &lt;!--2.用激活码调用service方法完成激活。如果有异常，保存到request中，转发到msg.jsp显示--&gt;</span><br><span class=\"line\">    &lt;!--3.保存成功信息到request，转发到msg.jsp显示--&gt;</span><br><span class=\"line\">    String code = req.getParameter(&quot;activationCode&quot;);</span><br><span class=\"line\">    try&#123;</span><br><span class=\"line\">        userService.activation(code);</span><br><span class=\"line\">        req.setAttribute(&quot;code&quot;,&quot;success&quot;);</span><br><span class=\"line\">        req.setAttribute(&quot;msg&quot;,&quot;恭喜，激活成功&quot;);        </span><br><span class=\"line\">    &#125;catch(UserException e)&#123;</span><br><span class=\"line\">        req.setAttribute(&quot;msg&quot;,getMessage());</span><br><span class=\"line\">        req.setAttribute(&quot;code&quot;,&quot;error&quot;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return &quot;f:/jsps/msg.jsp&quot;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>创建自己的异常类：</p>\n<h2 id=\"继承Exception，生成构造器\"><a href=\"#继承Exception，生成构造器\" class=\"headerlink\" title=\"继承Exception，生成构造器\"></a>继承Exception，生成构造器</h2>","site":{"data":{}},"excerpt":"","more":"<p>DAO模式是标准的J2EE设计模式之一,典型的DAO实现有下列几个组件:</p>\n<ul>\n<li>1.DAO工厂类</li>\n<li>2.DAO接口</li>\n<li>3.实现DAO接口具体实现类</li>\n<li>4.数据传递对象</li>\n</ul>\n<p>事物划分:transaction demarcation</p>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserDao:（具体的查询，更新，等方法）</span><br><span class=\"line\">//查询用户激活码</span><br><span class=\"line\">public User findByCode(String code) throw SQLException&#123;</span><br><span class=\"line\">    String sql = &quot;select * from t_user where activationCode = ?&quot;;</span><br><span class=\"line\">    return qr.query(sql,new BeanHandler&lt;User&gt;(User.class),code);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//激活用户</span><br><span class=\"line\">public void updateStatus(String uid,boolean status) throws SQLException&#123;</span><br><span class=\"line\">    String sql = &quot;update t_user set status=? where uid=?&quot;;</span><br><span class=\"line\">    qr.update(sql,status,uid);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserService:</span><br><span class=\"line\">public UserDao userDao = new UserDao();</span><br><span class=\"line\">//激活功能</span><br><span class=\"line\">public void activation(String code) throw UserException&#123;</span><br><span class=\"line\">    &lt;!--1.通过激活码查询用户--&gt;</span><br><span class=\"line\">    &lt;!--2.如果user是null,说明无效是无效激活码,抛异常--&gt;</span><br><span class=\"line\">    &lt;!--3.查看用户状态是否为true--&gt;</span><br><span class=\"line\">    &lt;!--4.修改状态为true--&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    User user = userDao.findByCode(code);</span><br><span class=\"line\">    if(user == null)throw new UserException(&quot;无效的激活码&quot;);</span><br><span class=\"line\">    if(user.isStatus()) throw new UserException(&quot;您已经激活了，不要二次激活&quot;)；</span><br><span class=\"line\">    userDao.updateStatus(user.getUid(),true);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserServlet:</span><br><span class=\"line\"></span><br><span class=\"line\">public String activation(HttpServletRequest req,HttpServletResponse resp) throw ServletException,IOException&#123;</span><br><span class=\"line\">    &lt;!--1.获取参数激活码--&gt;</span><br><span class=\"line\">    &lt;!--2.用激活码调用service方法完成激活。如果有异常，保存到request中，转发到msg.jsp显示--&gt;</span><br><span class=\"line\">    &lt;!--3.保存成功信息到request，转发到msg.jsp显示--&gt;</span><br><span class=\"line\">    String code = req.getParameter(&quot;activationCode&quot;);</span><br><span class=\"line\">    try&#123;</span><br><span class=\"line\">        userService.activation(code);</span><br><span class=\"line\">        req.setAttribute(&quot;code&quot;,&quot;success&quot;);</span><br><span class=\"line\">        req.setAttribute(&quot;msg&quot;,&quot;恭喜，激活成功&quot;);        </span><br><span class=\"line\">    &#125;catch(UserException e)&#123;</span><br><span class=\"line\">        req.setAttribute(&quot;msg&quot;,getMessage());</span><br><span class=\"line\">        req.setAttribute(&quot;code&quot;,&quot;error&quot;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return &quot;f:/jsps/msg.jsp&quot;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>创建自己的异常类：</p>\n<h2 id=\"继承Exception，生成构造器\"><a href=\"#继承Exception，生成构造器\" class=\"headerlink\" title=\"继承Exception，生成构造器\"></a>继承Exception，生成构造器</h2>"},{"title":"2017.10.16 Web登陆功能实现","date":"2017-10-15T23:55:58.000Z","_content":"Request对象:\n客户端向服务器发送请求时,服务器对本次请求创建request对象,并在调用Servlet的service方法时,将该对象传递给service方法,Request对象中封装了客户端发来的所有请求数据\n---\n\n\n登陆功能各层实现\n\n---\n1.UserDao\n```\nprivate QueryRunner qr= new TxQueryRunner();\npublic User findByLoginnameAndLoginpass(String loginname, String loginpass)throw SQLException{\n    String sql = \"select * from t_user where loginname=?and loginpass = ?\";\n    return qr.query(sql,new BeanHandler<User.class>,loginname,loginpass);\n}\n\n```\n---\n2.UserService\n```\nprivate UserDao userDao = new UserDao();\npublic User login(User user){\n    return userDao.findByLoginnameAndLoginpass(user.getLoginname(),user.getLoginpass());\n}\n\n```\n---\n3.UserServlet\n```\npublic String login(HttpServletRequest req,HttpServletResponse resp) throws ServletException,IOException{\n    <!--1.封装表单数据到USer-->\n    <!--2.校验表单数据-->\n    <!--3.使用service查询,得到User-->\n    <!--4.查看用户是否存在-->\n    <!--    *如果不存在或者未激活-->\n    <!--    1.保存错误信息-->\n    <!--    2.保存表单数据-->\n    <!--    3.转发到login.jsp-->\n    <!--    *如果存在-->\n    <!--    1.保存user到session中-->\n    <!--    2.保存用户名称到session中,中文需要编码处理(cookie中没有中文)-->\n    \n    1.封装表单数据\n    User formuser = CommonUtils.toBean(req.getParameterMap(),User.class);\n    2.校验\n    Map<String,String> errors = validateLogin(formuser,req.getSession());\n    if(errors.size()>0){\n        req.setAttribute(\"form\",formUser);\n        req.setAttribute(\"errors\",errors);\n        return \"f:/jsps/user/login.jsp\";\n    }\n    3.调用userService#login()方法\n    User user = userService.login(formuser);\n    4.开始判断\n    if(user == null){\n        req.setAttribute(\"msg\",\"用户名或者密码错误!\");\n        req.setAttribute(\"user\",formUser);\n        return \"f:/jsps/user/login.jsp\";\n    }else{\n        if(user.isStatus){\n            req.setAttribute(\"msg\",\"你没激活!\");\n            req.setAttribute(\"user\",formUser);\n            return \"f:/jsps/user/login.jsp\";            \n        }else{\n            //保存用户到session\n            req.getSession.setAttribute(\"sessionUser\",user);\n            //获取用户名到cookie中\n            String loginname=user.getLoginname();\n            loginname = URLEncoder.encode(loginname,\"utf-8\");\n            Cookie cookie = new Cookie(\"loginname\",loginname);\n            cookie.setMaxAge(60*60*24*10);//十天\n            resp.addCookie(cookie);\n            return \"r:/index.jsp\";\n        }\n    }\n    \n}","source":"_posts/2017.10.16 Web登陆功能实现.md","raw":"---\ntitle: 2017.10.16 Web登陆功能实现\ndate: 2017-10-16 07:55:58\ntags:\n---\nRequest对象:\n客户端向服务器发送请求时,服务器对本次请求创建request对象,并在调用Servlet的service方法时,将该对象传递给service方法,Request对象中封装了客户端发来的所有请求数据\n---\n\n\n登陆功能各层实现\n\n---\n1.UserDao\n```\nprivate QueryRunner qr= new TxQueryRunner();\npublic User findByLoginnameAndLoginpass(String loginname, String loginpass)throw SQLException{\n    String sql = \"select * from t_user where loginname=?and loginpass = ?\";\n    return qr.query(sql,new BeanHandler<User.class>,loginname,loginpass);\n}\n\n```\n---\n2.UserService\n```\nprivate UserDao userDao = new UserDao();\npublic User login(User user){\n    return userDao.findByLoginnameAndLoginpass(user.getLoginname(),user.getLoginpass());\n}\n\n```\n---\n3.UserServlet\n```\npublic String login(HttpServletRequest req,HttpServletResponse resp) throws ServletException,IOException{\n    <!--1.封装表单数据到USer-->\n    <!--2.校验表单数据-->\n    <!--3.使用service查询,得到User-->\n    <!--4.查看用户是否存在-->\n    <!--    *如果不存在或者未激活-->\n    <!--    1.保存错误信息-->\n    <!--    2.保存表单数据-->\n    <!--    3.转发到login.jsp-->\n    <!--    *如果存在-->\n    <!--    1.保存user到session中-->\n    <!--    2.保存用户名称到session中,中文需要编码处理(cookie中没有中文)-->\n    \n    1.封装表单数据\n    User formuser = CommonUtils.toBean(req.getParameterMap(),User.class);\n    2.校验\n    Map<String,String> errors = validateLogin(formuser,req.getSession());\n    if(errors.size()>0){\n        req.setAttribute(\"form\",formUser);\n        req.setAttribute(\"errors\",errors);\n        return \"f:/jsps/user/login.jsp\";\n    }\n    3.调用userService#login()方法\n    User user = userService.login(formuser);\n    4.开始判断\n    if(user == null){\n        req.setAttribute(\"msg\",\"用户名或者密码错误!\");\n        req.setAttribute(\"user\",formUser);\n        return \"f:/jsps/user/login.jsp\";\n    }else{\n        if(user.isStatus){\n            req.setAttribute(\"msg\",\"你没激活!\");\n            req.setAttribute(\"user\",formUser);\n            return \"f:/jsps/user/login.jsp\";            \n        }else{\n            //保存用户到session\n            req.getSession.setAttribute(\"sessionUser\",user);\n            //获取用户名到cookie中\n            String loginname=user.getLoginname();\n            loginname = URLEncoder.encode(loginname,\"utf-8\");\n            Cookie cookie = new Cookie(\"loginname\",loginname);\n            cookie.setMaxAge(60*60*24*10);//十天\n            resp.addCookie(cookie);\n            return \"r:/index.jsp\";\n        }\n    }\n    \n}","slug":"Web登陆功能实现","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9m0002dcyuckvpzmti","content":"<p>Request对象:</p>\n<h2 id=\"客户端向服务器发送请求时-服务器对本次请求创建request对象-并在调用Servlet的service方法时-将该对象传递给service方法-Request对象中封装了客户端发来的所有请求数据\"><a href=\"#客户端向服务器发送请求时-服务器对本次请求创建request对象-并在调用Servlet的service方法时-将该对象传递给service方法-Request对象中封装了客户端发来的所有请求数据\" class=\"headerlink\" title=\"客户端向服务器发送请求时,服务器对本次请求创建request对象,并在调用Servlet的service方法时,将该对象传递给service方法,Request对象中封装了客户端发来的所有请求数据\"></a>客户端向服务器发送请求时,服务器对本次请求创建request对象,并在调用Servlet的service方法时,将该对象传递给service方法,Request对象中封装了客户端发来的所有请求数据</h2><p>登陆功能各层实现</p>\n<hr>\n<p>1.UserDao<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private QueryRunner qr= new TxQueryRunner();</span><br><span class=\"line\">public User findByLoginnameAndLoginpass(String loginname, String loginpass)throw SQLException&#123;</span><br><span class=\"line\">    String sql = &quot;select * from t_user where loginname=?and loginpass = ?&quot;;</span><br><span class=\"line\">    return qr.query(sql,new BeanHandler&lt;User.class&gt;,loginname,loginpass);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>2.UserService<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private UserDao userDao = new UserDao();</span><br><span class=\"line\">public User login(User user)&#123;</span><br><span class=\"line\">    return userDao.findByLoginnameAndLoginpass(user.getLoginname(),user.getLoginpass());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>3.UserServlet<br><code>`</code><br>public String login(HttpServletRequest req,HttpServletResponse resp) throws ServletException,IOException{<br>    <!--1.封装表单数据到USer--><br>    <!--2.校验表单数据--><br>    <!--3.使用service查询,得到User--><br>    <!--4.查看用户是否存在--><br>    <!--    *如果不存在或者未激活--><br>    <!--    1.保存错误信息--><br>    <!--    2.保存表单数据--><br>    <!--    3.转发到login.jsp--><br>    <!--    *如果存在--><br>    <!--    1.保存user到session中--><br>    <!--    2.保存用户名称到session中,中文需要编码处理(cookie中没有中文)--></p>\n<pre><code>1.封装表单数据\nUser formuser = CommonUtils.toBean(req.getParameterMap(),User.class);\n2.校验\nMap&lt;String,String&gt; errors = validateLogin(formuser,req.getSession());\nif(errors.size()&gt;0){\n    req.setAttribute(&quot;form&quot;,formUser);\n    req.setAttribute(&quot;errors&quot;,errors);\n    return &quot;f:/jsps/user/login.jsp&quot;;\n}\n3.调用userService#login()方法\nUser user = userService.login(formuser);\n4.开始判断\nif(user == null){\n    req.setAttribute(&quot;msg&quot;,&quot;用户名或者密码错误!&quot;);\n    req.setAttribute(&quot;user&quot;,formUser);\n    return &quot;f:/jsps/user/login.jsp&quot;;\n}else{\n    if(user.isStatus){\n        req.setAttribute(&quot;msg&quot;,&quot;你没激活!&quot;);\n        req.setAttribute(&quot;user&quot;,formUser);\n        return &quot;f:/jsps/user/login.jsp&quot;;            \n    }else{\n        //保存用户到session\n        req.getSession.setAttribute(&quot;sessionUser&quot;,user);\n        //获取用户名到cookie中\n        String loginname=user.getLoginname();\n        loginname = URLEncoder.encode(loginname,&quot;utf-8&quot;);\n        Cookie cookie = new Cookie(&quot;loginname&quot;,loginname);\n        cookie.setMaxAge(60*60*24*10);//十天\n        resp.addCookie(cookie);\n        return &quot;r:/index.jsp&quot;;\n    }\n}\n</code></pre><p>}</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Request对象:</p>\n<h2 id=\"客户端向服务器发送请求时-服务器对本次请求创建request对象-并在调用Servlet的service方法时-将该对象传递给service方法-Request对象中封装了客户端发来的所有请求数据\"><a href=\"#客户端向服务器发送请求时-服务器对本次请求创建request对象-并在调用Servlet的service方法时-将该对象传递给service方法-Request对象中封装了客户端发来的所有请求数据\" class=\"headerlink\" title=\"客户端向服务器发送请求时,服务器对本次请求创建request对象,并在调用Servlet的service方法时,将该对象传递给service方法,Request对象中封装了客户端发来的所有请求数据\"></a>客户端向服务器发送请求时,服务器对本次请求创建request对象,并在调用Servlet的service方法时,将该对象传递给service方法,Request对象中封装了客户端发来的所有请求数据</h2><p>登陆功能各层实现</p>\n<hr>\n<p>1.UserDao<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private QueryRunner qr= new TxQueryRunner();</span><br><span class=\"line\">public User findByLoginnameAndLoginpass(String loginname, String loginpass)throw SQLException&#123;</span><br><span class=\"line\">    String sql = &quot;select * from t_user where loginname=?and loginpass = ?&quot;;</span><br><span class=\"line\">    return qr.query(sql,new BeanHandler&lt;User.class&gt;,loginname,loginpass);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>2.UserService<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private UserDao userDao = new UserDao();</span><br><span class=\"line\">public User login(User user)&#123;</span><br><span class=\"line\">    return userDao.findByLoginnameAndLoginpass(user.getLoginname(),user.getLoginpass());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>3.UserServlet<br><code>`</code><br>public String login(HttpServletRequest req,HttpServletResponse resp) throws ServletException,IOException{<br>    <!--1.封装表单数据到USer--><br>    <!--2.校验表单数据--><br>    <!--3.使用service查询,得到User--><br>    <!--4.查看用户是否存在--><br>    <!--    *如果不存在或者未激活--><br>    <!--    1.保存错误信息--><br>    <!--    2.保存表单数据--><br>    <!--    3.转发到login.jsp--><br>    <!--    *如果存在--><br>    <!--    1.保存user到session中--><br>    <!--    2.保存用户名称到session中,中文需要编码处理(cookie中没有中文)--></p>\n<pre><code>1.封装表单数据\nUser formuser = CommonUtils.toBean(req.getParameterMap(),User.class);\n2.校验\nMap&lt;String,String&gt; errors = validateLogin(formuser,req.getSession());\nif(errors.size()&gt;0){\n    req.setAttribute(&quot;form&quot;,formUser);\n    req.setAttribute(&quot;errors&quot;,errors);\n    return &quot;f:/jsps/user/login.jsp&quot;;\n}\n3.调用userService#login()方法\nUser user = userService.login(formuser);\n4.开始判断\nif(user == null){\n    req.setAttribute(&quot;msg&quot;,&quot;用户名或者密码错误!&quot;);\n    req.setAttribute(&quot;user&quot;,formUser);\n    return &quot;f:/jsps/user/login.jsp&quot;;\n}else{\n    if(user.isStatus){\n        req.setAttribute(&quot;msg&quot;,&quot;你没激活!&quot;);\n        req.setAttribute(&quot;user&quot;,formUser);\n        return &quot;f:/jsps/user/login.jsp&quot;;            \n    }else{\n        //保存用户到session\n        req.getSession.setAttribute(&quot;sessionUser&quot;,user);\n        //获取用户名到cookie中\n        String loginname=user.getLoginname();\n        loginname = URLEncoder.encode(loginname,&quot;utf-8&quot;);\n        Cookie cookie = new Cookie(&quot;loginname&quot;,loginname);\n        cookie.setMaxAge(60*60*24*10);//十天\n        resp.addCookie(cookie);\n        return &quot;r:/index.jsp&quot;;\n    }\n}\n</code></pre><p>}</p>\n"},{"title":"2017.10.分类模块","date":"2017-10-16T23:55:58.000Z","_content":"\n显示所有分类\n```\n主页中插入一个jsp:\n<table class=\"table\" align=\"center\">\n    <tr class=\"trTop\">\n        <td colspan=\"2\" class=\"tdTop\">\n            <iframe frameborder=\"0\" src=\"<c:url value='/jsps/search.jsp'/>\" name=\"search\"></iframe>\n        </td>\n    </tr>\n</table>\n\n```\n\n---\n\n分类模块:\n```\n1.发起请求位置:main.jsp中发起请求\n创建所有相关类:\ncn.itcast.goods.category.\ndomain.Category\ndao.CategoryDao\nservice.CategoryService\nweb.servlet.CategoryServlet\n\n//Category->\npublic class Category{\n    private String cid;\n    private String cname;\n    private Category parent;\n    private String desc;//分类描述\n    private List<Category> children;\n    \n    private Category toCategory(Map<String,Object> map{\n        Category category = CommonUtils.toBean(map,Category.class);\n        String pid = (String)map.get(\"pid\");\n        if(pid!= null){\n            Category parent = new Category();\n            parent.setCid(pid);\n            \n        }\n    }\n    \n}\n//CategoryDao->\npublic class CategoryDao{\n    private QueryRunner qr = new TxQueryRunner();\n    public List<Category>findAll(){\n        //查询所有一级分类\n        \n    }\n    \n}\n\n```","source":"_posts/2017.10.17 分类模块.md","raw":"---\ntitle: 2017.10.分类模块\ndate: 2017-10-17 07:55:58\ntags:\n---\n\n显示所有分类\n```\n主页中插入一个jsp:\n<table class=\"table\" align=\"center\">\n    <tr class=\"trTop\">\n        <td colspan=\"2\" class=\"tdTop\">\n            <iframe frameborder=\"0\" src=\"<c:url value='/jsps/search.jsp'/>\" name=\"search\"></iframe>\n        </td>\n    </tr>\n</table>\n\n```\n\n---\n\n分类模块:\n```\n1.发起请求位置:main.jsp中发起请求\n创建所有相关类:\ncn.itcast.goods.category.\ndomain.Category\ndao.CategoryDao\nservice.CategoryService\nweb.servlet.CategoryServlet\n\n//Category->\npublic class Category{\n    private String cid;\n    private String cname;\n    private Category parent;\n    private String desc;//分类描述\n    private List<Category> children;\n    \n    private Category toCategory(Map<String,Object> map{\n        Category category = CommonUtils.toBean(map,Category.class);\n        String pid = (String)map.get(\"pid\");\n        if(pid!= null){\n            Category parent = new Category();\n            parent.setCid(pid);\n            \n        }\n    }\n    \n}\n//CategoryDao->\npublic class CategoryDao{\n    private QueryRunner qr = new TxQueryRunner();\n    public List<Category>findAll(){\n        //查询所有一级分类\n        \n    }\n    \n}\n\n```","slug":"分类模块","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9o0003dcyudz83v44u","content":"<p>显示所有分类<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">主页中插入一个jsp:</span><br><span class=\"line\">&lt;table class=&quot;table&quot; align=&quot;center&quot;&gt;</span><br><span class=\"line\">    &lt;tr class=&quot;trTop&quot;&gt;</span><br><span class=\"line\">        &lt;td colspan=&quot;2&quot; class=&quot;tdTop&quot;&gt;</span><br><span class=\"line\">            &lt;iframe frameborder=&quot;0&quot; src=&quot;&lt;c:url value=&apos;/jsps/search.jsp&apos;/&gt;&quot; name=&quot;search&quot;&gt;&lt;/iframe&gt;</span><br><span class=\"line\">        &lt;/td&gt;</span><br><span class=\"line\">    &lt;/tr&gt;</span><br><span class=\"line\">&lt;/table&gt;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>分类模块:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.发起请求位置:main.jsp中发起请求</span><br><span class=\"line\">创建所有相关类:</span><br><span class=\"line\">cn.itcast.goods.category.</span><br><span class=\"line\">domain.Category</span><br><span class=\"line\">dao.CategoryDao</span><br><span class=\"line\">service.CategoryService</span><br><span class=\"line\">web.servlet.CategoryServlet</span><br><span class=\"line\"></span><br><span class=\"line\">//Category-&gt;</span><br><span class=\"line\">public class Category&#123;</span><br><span class=\"line\">    private String cid;</span><br><span class=\"line\">    private String cname;</span><br><span class=\"line\">    private Category parent;</span><br><span class=\"line\">    private String desc;//分类描述</span><br><span class=\"line\">    private List&lt;Category&gt; children;</span><br><span class=\"line\">    </span><br><span class=\"line\">    private Category toCategory(Map&lt;String,Object&gt; map&#123;</span><br><span class=\"line\">        Category category = CommonUtils.toBean(map,Category.class);</span><br><span class=\"line\">        String pid = (String)map.get(&quot;pid&quot;);</span><br><span class=\"line\">        if(pid!= null)&#123;</span><br><span class=\"line\">            Category parent = new Category();</span><br><span class=\"line\">            parent.setCid(pid);</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//CategoryDao-&gt;</span><br><span class=\"line\">public class CategoryDao&#123;</span><br><span class=\"line\">    private QueryRunner qr = new TxQueryRunner();</span><br><span class=\"line\">    public List&lt;Category&gt;findAll()&#123;</span><br><span class=\"line\">        //查询所有一级分类</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>显示所有分类<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">主页中插入一个jsp:</span><br><span class=\"line\">&lt;table class=&quot;table&quot; align=&quot;center&quot;&gt;</span><br><span class=\"line\">    &lt;tr class=&quot;trTop&quot;&gt;</span><br><span class=\"line\">        &lt;td colspan=&quot;2&quot; class=&quot;tdTop&quot;&gt;</span><br><span class=\"line\">            &lt;iframe frameborder=&quot;0&quot; src=&quot;&lt;c:url value=&apos;/jsps/search.jsp&apos;/&gt;&quot; name=&quot;search&quot;&gt;&lt;/iframe&gt;</span><br><span class=\"line\">        &lt;/td&gt;</span><br><span class=\"line\">    &lt;/tr&gt;</span><br><span class=\"line\">&lt;/table&gt;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>分类模块:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.发起请求位置:main.jsp中发起请求</span><br><span class=\"line\">创建所有相关类:</span><br><span class=\"line\">cn.itcast.goods.category.</span><br><span class=\"line\">domain.Category</span><br><span class=\"line\">dao.CategoryDao</span><br><span class=\"line\">service.CategoryService</span><br><span class=\"line\">web.servlet.CategoryServlet</span><br><span class=\"line\"></span><br><span class=\"line\">//Category-&gt;</span><br><span class=\"line\">public class Category&#123;</span><br><span class=\"line\">    private String cid;</span><br><span class=\"line\">    private String cname;</span><br><span class=\"line\">    private Category parent;</span><br><span class=\"line\">    private String desc;//分类描述</span><br><span class=\"line\">    private List&lt;Category&gt; children;</span><br><span class=\"line\">    </span><br><span class=\"line\">    private Category toCategory(Map&lt;String,Object&gt; map&#123;</span><br><span class=\"line\">        Category category = CommonUtils.toBean(map,Category.class);</span><br><span class=\"line\">        String pid = (String)map.get(&quot;pid&quot;);</span><br><span class=\"line\">        if(pid!= null)&#123;</span><br><span class=\"line\">            Category parent = new Category();</span><br><span class=\"line\">            parent.setCid(pid);</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//CategoryDao-&gt;</span><br><span class=\"line\">public class CategoryDao&#123;</span><br><span class=\"line\">    private QueryRunner qr = new TxQueryRunner();</span><br><span class=\"line\">    public List&lt;Category&gt;findAll()&#123;</span><br><span class=\"line\">        //查询所有一级分类</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"2017.10.17退出登录处理","date":"2017-10-16T23:55:58.000Z","_content":"JavaScript记忆登陆名\n```\n$(function(){\n//中文编码问题\n    var loginname = window.decodeURI(\"${cookie.loginname.value}\");\n});\n```\n---\n\n根据用户是否登陆显示不同的链接\n```\n<c:choose>\n    <c:when test=\"${empty sessionScope.sessionUser}\">\n        <a: href=\"\" target=\"body\"></a>\n        <a: href=\"\" target=\"body\"></a>\n    </c:when>\n    <c:otherwise>\n        欢迎你,${sessionScope.sessionUser.loginname}&nbsp;\n    </c:otherwise>\n</c:choose>\n\n```\n退出登陆处理\nServlet:\n```\nreq.getSession().invalidate();\nreturn \"r: /jsps/user/login.jsp\";\n```\njsp:\n```\n<a href=\"<c:url value='/UserServlet?method=quit'/>\" target = \"_parent\">退出</a>&nbsp\n111\n---\n","source":"_posts/2017.10.17 退出登陆处理.md","raw":"---\ntitle: 2017.10.17退出登录处理\ndate: 2017-10-17 07:55:58\ntags:\n---\nJavaScript记忆登陆名\n```\n$(function(){\n//中文编码问题\n    var loginname = window.decodeURI(\"${cookie.loginname.value}\");\n});\n```\n---\n\n根据用户是否登陆显示不同的链接\n```\n<c:choose>\n    <c:when test=\"${empty sessionScope.sessionUser}\">\n        <a: href=\"\" target=\"body\"></a>\n        <a: href=\"\" target=\"body\"></a>\n    </c:when>\n    <c:otherwise>\n        欢迎你,${sessionScope.sessionUser.loginname}&nbsp;\n    </c:otherwise>\n</c:choose>\n\n```\n退出登陆处理\nServlet:\n```\nreq.getSession().invalidate();\nreturn \"r: /jsps/user/login.jsp\";\n```\njsp:\n```\n<a href=\"<c:url value='/UserServlet?method=quit'/>\" target = \"_parent\">退出</a>&nbsp\n111\n---\n","slug":"退出登陆处理","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9p0004dcyurn78jp67","content":"<p>JavaScript记忆登陆名<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(function()&#123;</span><br><span class=\"line\">//中文编码问题</span><br><span class=\"line\">    var loginname = window.decodeURI(&quot;$&#123;cookie.loginname.value&#125;&quot;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>根据用户是否登陆显示不同的链接<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;c:choose&gt;</span><br><span class=\"line\">    &lt;c:when test=&quot;$&#123;empty sessionScope.sessionUser&#125;&quot;&gt;</span><br><span class=\"line\">        &lt;a: href=&quot;&quot; target=&quot;body&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">        &lt;a: href=&quot;&quot; target=&quot;body&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">    &lt;/c:when&gt;</span><br><span class=\"line\">    &lt;c:otherwise&gt;</span><br><span class=\"line\">        欢迎你,$&#123;sessionScope.sessionUser.loginname&#125;&amp;nbsp;</span><br><span class=\"line\">    &lt;/c:otherwise&gt;</span><br><span class=\"line\">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure></p>\n<p>退出登陆处理<br>Servlet:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">req.getSession().invalidate();</span><br><span class=\"line\">return &quot;r: /jsps/user/login.jsp&quot;;</span><br></pre></td></tr></table></figure></p>\n<p>jsp:<br><code>`</code><br><a href=\"<c:url value='/UserServlet?method=quit'/>\" target=\"_parent\">退出</a>&amp;nbsp</p>\n<h2 id=\"111\"><a href=\"#111\" class=\"headerlink\" title=\"111\"></a>111</h2>","site":{"data":{}},"excerpt":"","more":"<p>JavaScript记忆登陆名<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(function()&#123;</span><br><span class=\"line\">//中文编码问题</span><br><span class=\"line\">    var loginname = window.decodeURI(&quot;$&#123;cookie.loginname.value&#125;&quot;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>根据用户是否登陆显示不同的链接<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;c:choose&gt;</span><br><span class=\"line\">    &lt;c:when test=&quot;$&#123;empty sessionScope.sessionUser&#125;&quot;&gt;</span><br><span class=\"line\">        &lt;a: href=&quot;&quot; target=&quot;body&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">        &lt;a: href=&quot;&quot; target=&quot;body&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">    &lt;/c:when&gt;</span><br><span class=\"line\">    &lt;c:otherwise&gt;</span><br><span class=\"line\">        欢迎你,$&#123;sessionScope.sessionUser.loginname&#125;&amp;nbsp;</span><br><span class=\"line\">    &lt;/c:otherwise&gt;</span><br><span class=\"line\">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure></p>\n<p>退出登陆处理<br>Servlet:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">req.getSession().invalidate();</span><br><span class=\"line\">return &quot;r: /jsps/user/login.jsp&quot;;</span><br></pre></td></tr></table></figure></p>\n<p>jsp:<br><code>`</code><br><a href=\"<c:url value='/UserServlet?method=quit'/>\" target=\"_parent\">退出</a>&amp;nbsp</p>\n<h2 id=\"111\"><a href=\"#111\" class=\"headerlink\" title=\"111\"></a>111</h2>"},{"title":"购物车模块","date":"2017-10-17T23:55:58.000Z","_content":"url标签会自动对参数进行url编码\n```\n<c:url value=\"/BookServlet\" var = \"authorUrl\">\n    <c:param name=\"method\" value=\"findByAuthor\"/>\n    <c:param name=\"author\" value=\"${book.author}\"/>\n</c:url>\n```\n多表联查\n```\nCartItemDao\npublic List<CartItem> findByUser(String uid){\n    String sql = \"select * from t_cartitem c, t_book b where c.bid = b.bid and uid = ?\";\n    List<Map<String,Object>> mapList = qr.query();\n    return toCartItemList(mapList);\n}\n```\n//把map映射成CartItem\n```\nIf(map == null)return null;\nCartItem cartItem = CommonUtils.toBean(map,CartItem.class);\nBook book =  CommonUtils.toBean(map,Book.class);\nUser user =  CommonUtils.toBean(map,User.class);\ncartItem.setBook(book);\ncartItem.setUser(user);\nreturn cartItem;\n\n```\n//把多个Map(List<Map>)映射成多个CartItem(List<CartItem>)\n```\nList<CartItem> cartItemList toCartItemList(List<Map<String,Object>> mapList){\n    List<CartItem> cartItemList = new ArrayList<CartItem>();\n    for(Map map:mapList){\n        CartItem cartItem = toCartItem(map);\n        cartItemList.add(cartItem);\n    }\n    return cartItemList;\n}\n```\n//list.jsp\n```\n<c:forEach items=\"${cartItemList }\" var=\"cartItem\">\n\n\n</c:forEach>\n```\n//获取所有被勾选的条目复选框\n```\n$(\":checkbox[name=checkboxBtn][checked=checked]\").each(function(){\nvar id = $(this).val;\n\n}\n```\n//统一设置所有条目的复选按钮\n```\nfunction setItemCheckBox(bool){\n    $(\":checkbox[name=checkboxBtn]\").attr(\"checked\",bool);\n}\n```\n//设置结算按钮样式\n```\nfunction setJieSuan(bool){\n    if(bool){\n        $(\"#jiesuan\").removeClass(kill).addClass(\"jiesuan)\";\n        $(\"#jiesuan\").unbind(\"click\");//撤销当前元素上所有click属性\n    }else{\n        $(\"#jiesuan\").remove(jiesuan).addClass(\"kill\");\n        $(\"#jiesuan\").click(function(){return false;})\n    }\n}\n\n```\n//所有条目的个数\n```\n$(\":checkbox[name=checkboxBtn]\").click(function(){\n   var all = $(\":checkbox[name=checkboxBtn]\").length;\n    \n});\n\n```\n//batchDelete\nqr.update(sql,cartItemIdArray);//cartItemIdArray必须是object数组","source":"_posts/2017.10.18 购物车模块.md","raw":"---\ntitle: 购物车模块\ndate: 2017-10-18 07:55:58\ntags:\n---\nurl标签会自动对参数进行url编码\n```\n<c:url value=\"/BookServlet\" var = \"authorUrl\">\n    <c:param name=\"method\" value=\"findByAuthor\"/>\n    <c:param name=\"author\" value=\"${book.author}\"/>\n</c:url>\n```\n多表联查\n```\nCartItemDao\npublic List<CartItem> findByUser(String uid){\n    String sql = \"select * from t_cartitem c, t_book b where c.bid = b.bid and uid = ?\";\n    List<Map<String,Object>> mapList = qr.query();\n    return toCartItemList(mapList);\n}\n```\n//把map映射成CartItem\n```\nIf(map == null)return null;\nCartItem cartItem = CommonUtils.toBean(map,CartItem.class);\nBook book =  CommonUtils.toBean(map,Book.class);\nUser user =  CommonUtils.toBean(map,User.class);\ncartItem.setBook(book);\ncartItem.setUser(user);\nreturn cartItem;\n\n```\n//把多个Map(List<Map>)映射成多个CartItem(List<CartItem>)\n```\nList<CartItem> cartItemList toCartItemList(List<Map<String,Object>> mapList){\n    List<CartItem> cartItemList = new ArrayList<CartItem>();\n    for(Map map:mapList){\n        CartItem cartItem = toCartItem(map);\n        cartItemList.add(cartItem);\n    }\n    return cartItemList;\n}\n```\n//list.jsp\n```\n<c:forEach items=\"${cartItemList }\" var=\"cartItem\">\n\n\n</c:forEach>\n```\n//获取所有被勾选的条目复选框\n```\n$(\":checkbox[name=checkboxBtn][checked=checked]\").each(function(){\nvar id = $(this).val;\n\n}\n```\n//统一设置所有条目的复选按钮\n```\nfunction setItemCheckBox(bool){\n    $(\":checkbox[name=checkboxBtn]\").attr(\"checked\",bool);\n}\n```\n//设置结算按钮样式\n```\nfunction setJieSuan(bool){\n    if(bool){\n        $(\"#jiesuan\").removeClass(kill).addClass(\"jiesuan)\";\n        $(\"#jiesuan\").unbind(\"click\");//撤销当前元素上所有click属性\n    }else{\n        $(\"#jiesuan\").remove(jiesuan).addClass(\"kill\");\n        $(\"#jiesuan\").click(function(){return false;})\n    }\n}\n\n```\n//所有条目的个数\n```\n$(\":checkbox[name=checkboxBtn]\").click(function(){\n   var all = $(\":checkbox[name=checkboxBtn]\").length;\n    \n});\n\n```\n//batchDelete\nqr.update(sql,cartItemIdArray);//cartItemIdArray必须是object数组","slug":"购物车模块","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9q0005dcyuk12vkli3","content":"<p>url标签会自动对参数进行url编码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;c:url value=&quot;/BookServlet&quot; var = &quot;authorUrl&quot;&gt;</span><br><span class=\"line\">    &lt;c:param name=&quot;method&quot; value=&quot;findByAuthor&quot;/&gt;</span><br><span class=\"line\">    &lt;c:param name=&quot;author&quot; value=&quot;$&#123;book.author&#125;&quot;/&gt;</span><br><span class=\"line\">&lt;/c:url&gt;</span><br></pre></td></tr></table></figure></p>\n<p>多表联查<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CartItemDao</span><br><span class=\"line\">public List&lt;CartItem&gt; findByUser(String uid)&#123;</span><br><span class=\"line\">    String sql = &quot;select * from t_cartitem c, t_book b where c.bid = b.bid and uid = ?&quot;;</span><br><span class=\"line\">    List&lt;Map&lt;String,Object&gt;&gt; mapList = qr.query();</span><br><span class=\"line\">    return toCartItemList(mapList);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//把map映射成CartItem<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">If(map == null)return null;</span><br><span class=\"line\">CartItem cartItem = CommonUtils.toBean(map,CartItem.class);</span><br><span class=\"line\">Book book =  CommonUtils.toBean(map,Book.class);</span><br><span class=\"line\">User user =  CommonUtils.toBean(map,User.class);</span><br><span class=\"line\">cartItem.setBook(book);</span><br><span class=\"line\">cartItem.setUser(user);</span><br><span class=\"line\">return cartItem;</span><br></pre></td></tr></table></figure></p>\n<p>//把多个Map(List<map>)映射成多个CartItem(List<cartitem>)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;CartItem&gt; cartItemList toCartItemList(List&lt;Map&lt;String,Object&gt;&gt; mapList)&#123;</span><br><span class=\"line\">    List&lt;CartItem&gt; cartItemList = new ArrayList&lt;CartItem&gt;();</span><br><span class=\"line\">    for(Map map:mapList)&#123;</span><br><span class=\"line\">        CartItem cartItem = toCartItem(map);</span><br><span class=\"line\">        cartItemList.add(cartItem);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return cartItemList;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></cartitem></map></p>\n<p>//list.jsp<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;c:forEach items=&quot;$&#123;cartItemList &#125;&quot; var=&quot;cartItem&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure></p>\n<p>//获取所有被勾选的条目复选框<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;:checkbox[name=checkboxBtn][checked=checked]&quot;).each(function()&#123;</span><br><span class=\"line\">var id = $(this).val;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//统一设置所有条目的复选按钮<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function setItemCheckBox(bool)&#123;</span><br><span class=\"line\">    $(&quot;:checkbox[name=checkboxBtn]&quot;).attr(&quot;checked&quot;,bool);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//设置结算按钮样式<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function setJieSuan(bool)&#123;</span><br><span class=\"line\">    if(bool)&#123;</span><br><span class=\"line\">        $(&quot;#jiesuan&quot;).removeClass(kill).addClass(&quot;jiesuan)&quot;;</span><br><span class=\"line\">        $(&quot;#jiesuan&quot;).unbind(&quot;click&quot;);//撤销当前元素上所有click属性</span><br><span class=\"line\">    &#125;else&#123;</span><br><span class=\"line\">        $(&quot;#jiesuan&quot;).remove(jiesuan).addClass(&quot;kill&quot;);</span><br><span class=\"line\">        $(&quot;#jiesuan&quot;).click(function()&#123;return false;&#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//所有条目的个数<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;:checkbox[name=checkboxBtn]&quot;).click(function()&#123;</span><br><span class=\"line\">   var all = $(&quot;:checkbox[name=checkboxBtn]&quot;).length;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>//batchDelete<br>qr.update(sql,cartItemIdArray);//cartItemIdArray必须是object数组</p>\n","site":{"data":{}},"excerpt":"","more":"<p>url标签会自动对参数进行url编码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;c:url value=&quot;/BookServlet&quot; var = &quot;authorUrl&quot;&gt;</span><br><span class=\"line\">    &lt;c:param name=&quot;method&quot; value=&quot;findByAuthor&quot;/&gt;</span><br><span class=\"line\">    &lt;c:param name=&quot;author&quot; value=&quot;$&#123;book.author&#125;&quot;/&gt;</span><br><span class=\"line\">&lt;/c:url&gt;</span><br></pre></td></tr></table></figure></p>\n<p>多表联查<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CartItemDao</span><br><span class=\"line\">public List&lt;CartItem&gt; findByUser(String uid)&#123;</span><br><span class=\"line\">    String sql = &quot;select * from t_cartitem c, t_book b where c.bid = b.bid and uid = ?&quot;;</span><br><span class=\"line\">    List&lt;Map&lt;String,Object&gt;&gt; mapList = qr.query();</span><br><span class=\"line\">    return toCartItemList(mapList);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//把map映射成CartItem<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">If(map == null)return null;</span><br><span class=\"line\">CartItem cartItem = CommonUtils.toBean(map,CartItem.class);</span><br><span class=\"line\">Book book =  CommonUtils.toBean(map,Book.class);</span><br><span class=\"line\">User user =  CommonUtils.toBean(map,User.class);</span><br><span class=\"line\">cartItem.setBook(book);</span><br><span class=\"line\">cartItem.setUser(user);</span><br><span class=\"line\">return cartItem;</span><br></pre></td></tr></table></figure></p>\n<p>//把多个Map(List<map>)映射成多个CartItem(List<cartitem>)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;CartItem&gt; cartItemList toCartItemList(List&lt;Map&lt;String,Object&gt;&gt; mapList)&#123;</span><br><span class=\"line\">    List&lt;CartItem&gt; cartItemList = new ArrayList&lt;CartItem&gt;();</span><br><span class=\"line\">    for(Map map:mapList)&#123;</span><br><span class=\"line\">        CartItem cartItem = toCartItem(map);</span><br><span class=\"line\">        cartItemList.add(cartItem);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return cartItemList;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></cartitem></map></p>\n<p>//list.jsp<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;c:forEach items=&quot;$&#123;cartItemList &#125;&quot; var=&quot;cartItem&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure></p>\n<p>//获取所有被勾选的条目复选框<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;:checkbox[name=checkboxBtn][checked=checked]&quot;).each(function()&#123;</span><br><span class=\"line\">var id = $(this).val;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//统一设置所有条目的复选按钮<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function setItemCheckBox(bool)&#123;</span><br><span class=\"line\">    $(&quot;:checkbox[name=checkboxBtn]&quot;).attr(&quot;checked&quot;,bool);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//设置结算按钮样式<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function setJieSuan(bool)&#123;</span><br><span class=\"line\">    if(bool)&#123;</span><br><span class=\"line\">        $(&quot;#jiesuan&quot;).removeClass(kill).addClass(&quot;jiesuan)&quot;;</span><br><span class=\"line\">        $(&quot;#jiesuan&quot;).unbind(&quot;click&quot;);//撤销当前元素上所有click属性</span><br><span class=\"line\">    &#125;else&#123;</span><br><span class=\"line\">        $(&quot;#jiesuan&quot;).remove(jiesuan).addClass(&quot;kill&quot;);</span><br><span class=\"line\">        $(&quot;#jiesuan&quot;).click(function()&#123;return false;&#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//所有条目的个数<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;:checkbox[name=checkboxBtn]&quot;).click(function()&#123;</span><br><span class=\"line\">   var all = $(&quot;:checkbox[name=checkboxBtn]&quot;).length;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>//batchDelete<br>qr.update(sql,cartItemIdArray);//cartItemIdArray必须是object数组</p>\n"},{"title":"2017.10.20 properties的使用","date":"2017-10-19T23:55:58.000Z","_content":"```\nInputStream in = JdbcPool.class.getClassLoader().getResourceAsStream(\"pic/test/db.properties\");\nProperties prop = new Properties();\ntry{\n    prop.load(in);\n    String driver = prop.getProperty(\"driver\");\n    String url = prop.getProperty(\"url\");\n    String username = prop.getProperty(\"username\");\n    String password = prop.getProperty(\"password\");\n    }catch(...){\n        ...\n    }\n```\n往properties里增加值\n```\nOutputStream fos = new FileOutputStream(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\db.properties\");\nproperties.setProperty(String.valueOf(i++),m.group(0));\nproperties.store(fos,\"Update '\"+i + \"' value\");\n\n```\n\n只有符合切入点,才让通知和目标方法结合在一起\n目标对象:\nAOP代理:\n切面:\n织入:形成代理对象的方法的过程就是织入\n通知:切面中的方法\n切入点:\n连接点:","source":"_posts/2017.10.20 properties的使用.md","raw":"---\ntitle: 2017.10.20 properties的使用\ndate: 2017-10-20 07:55:58\ntags:\n---\n```\nInputStream in = JdbcPool.class.getClassLoader().getResourceAsStream(\"pic/test/db.properties\");\nProperties prop = new Properties();\ntry{\n    prop.load(in);\n    String driver = prop.getProperty(\"driver\");\n    String url = prop.getProperty(\"url\");\n    String username = prop.getProperty(\"username\");\n    String password = prop.getProperty(\"password\");\n    }catch(...){\n        ...\n    }\n```\n往properties里增加值\n```\nOutputStream fos = new FileOutputStream(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\db.properties\");\nproperties.setProperty(String.valueOf(i++),m.group(0));\nproperties.store(fos,\"Update '\"+i + \"' value\");\n\n```\n\n只有符合切入点,才让通知和目标方法结合在一起\n目标对象:\nAOP代理:\n切面:\n织入:形成代理对象的方法的过程就是织入\n通知:切面中的方法\n切入点:\n连接点:","slug":"properties的使用","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9s0006dcyunheo05ve","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InputStream in = JdbcPool.class.getClassLoader().getResourceAsStream(&quot;pic/test/db.properties&quot;);</span><br><span class=\"line\">Properties prop = new Properties();</span><br><span class=\"line\">try&#123;</span><br><span class=\"line\">    prop.load(in);</span><br><span class=\"line\">    String driver = prop.getProperty(&quot;driver&quot;);</span><br><span class=\"line\">    String url = prop.getProperty(&quot;url&quot;);</span><br><span class=\"line\">    String username = prop.getProperty(&quot;username&quot;);</span><br><span class=\"line\">    String password = prop.getProperty(&quot;password&quot;);</span><br><span class=\"line\">    &#125;catch(...)&#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>往properties里增加值<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OutputStream fos = new FileOutputStream(&quot;C:\\\\Users\\\\Administrator\\\\Desktop\\\\db.properties&quot;);</span><br><span class=\"line\">properties.setProperty(String.valueOf(i++),m.group(0));</span><br><span class=\"line\">properties.store(fos,&quot;Update &apos;&quot;+i + &quot;&apos; value&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>只有符合切入点,才让通知和目标方法结合在一起<br>目标对象:<br>AOP代理:<br>切面:<br>织入:形成代理对象的方法的过程就是织入<br>通知:切面中的方法<br>切入点:<br>连接点:</p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InputStream in = JdbcPool.class.getClassLoader().getResourceAsStream(&quot;pic/test/db.properties&quot;);</span><br><span class=\"line\">Properties prop = new Properties();</span><br><span class=\"line\">try&#123;</span><br><span class=\"line\">    prop.load(in);</span><br><span class=\"line\">    String driver = prop.getProperty(&quot;driver&quot;);</span><br><span class=\"line\">    String url = prop.getProperty(&quot;url&quot;);</span><br><span class=\"line\">    String username = prop.getProperty(&quot;username&quot;);</span><br><span class=\"line\">    String password = prop.getProperty(&quot;password&quot;);</span><br><span class=\"line\">    &#125;catch(...)&#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>往properties里增加值<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OutputStream fos = new FileOutputStream(&quot;C:\\\\Users\\\\Administrator\\\\Desktop\\\\db.properties&quot;);</span><br><span class=\"line\">properties.setProperty(String.valueOf(i++),m.group(0));</span><br><span class=\"line\">properties.store(fos,&quot;Update &apos;&quot;+i + &quot;&apos; value&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>只有符合切入点,才让通知和目标方法结合在一起<br>目标对象:<br>AOP代理:<br>切面:<br>织入:形成代理对象的方法的过程就是织入<br>通知:切面中的方法<br>切入点:<br>连接点:</p>\n"},{"title":"2017.10.20 数据库连接池学习","date":"2017-10-19T23:55:58.000Z","_content":" 数据库连接池在初始化时将创建一定数量的数据库连接放到连接池中, 这些数据库连接的数量是由最小数据库连接数来设定的.无论这些数据库连接是否被使用,连接池都将一直保证至少拥有这么多的连接数量.连接池的最大数据库连接数量限定了这个连接池能占有的最大连接数,当应用程序向连接池请求的连接数超过最大连接数量时,这些请求将被加入到等待队列中.\n \n ---\n 编写连接池需实现java.sql.DataSource接口。DataSource接口中定义了两个重载的getConnection方法：\n```\nConnection getConnection()\nConnection getConnection(String username, String password)\n```\n实现DataSource接口，并实现连接池功能的步骤：\n\n -   1.在DataSource构造函数中批量创建与数据库的连接，并把创建的连接加入LinkedList对象中。\n-    2.实现getConnection方法，让getConnection方法每次调用时，从LinkedList中取一个Connection返回给用户。\n-    3.当用户使用完Connection，调用Connection.close()方法时，Collection对象应保证将自己返回到LinkedList中,而不要把conn还给数据库。Collection保证将自己返回到LinkedList中是此处编程的难点。\n\n---\n数据库连接池核心代码\n\n使用动态代理技术构建连接池中的connection\n```\nproxyConn = (Connection) Proxy.newProxyInstance(this.getClass()\n            .getClassLoader(), conn.getClass().getInterfaces(),\n            new InvocationHandler() {\n        //此处为内部类，当close方法被调用时将conn还回池中,其它方法直接执行\n            public Object invoke(Object proxy, Method method,\n                      Object[] args) throws Throwable {\n                if (method.getName().equals(\"close\")) {\n                    pool.addLast(conn);\n                    return null;\n            }\n            return method.invoke(conn, args);\n        }\n    });\n```","source":"_posts/2017.10.20 数据库连接池学习.md","raw":"---\ntitle: 2017.10.20 数据库连接池学习\ndate: 2017-10-20 07:55:58\ntags:\n---\n 数据库连接池在初始化时将创建一定数量的数据库连接放到连接池中, 这些数据库连接的数量是由最小数据库连接数来设定的.无论这些数据库连接是否被使用,连接池都将一直保证至少拥有这么多的连接数量.连接池的最大数据库连接数量限定了这个连接池能占有的最大连接数,当应用程序向连接池请求的连接数超过最大连接数量时,这些请求将被加入到等待队列中.\n \n ---\n 编写连接池需实现java.sql.DataSource接口。DataSource接口中定义了两个重载的getConnection方法：\n```\nConnection getConnection()\nConnection getConnection(String username, String password)\n```\n实现DataSource接口，并实现连接池功能的步骤：\n\n -   1.在DataSource构造函数中批量创建与数据库的连接，并把创建的连接加入LinkedList对象中。\n-    2.实现getConnection方法，让getConnection方法每次调用时，从LinkedList中取一个Connection返回给用户。\n-    3.当用户使用完Connection，调用Connection.close()方法时，Collection对象应保证将自己返回到LinkedList中,而不要把conn还给数据库。Collection保证将自己返回到LinkedList中是此处编程的难点。\n\n---\n数据库连接池核心代码\n\n使用动态代理技术构建连接池中的connection\n```\nproxyConn = (Connection) Proxy.newProxyInstance(this.getClass()\n            .getClassLoader(), conn.getClass().getInterfaces(),\n            new InvocationHandler() {\n        //此处为内部类，当close方法被调用时将conn还回池中,其它方法直接执行\n            public Object invoke(Object proxy, Method method,\n                      Object[] args) throws Throwable {\n                if (method.getName().equals(\"close\")) {\n                    pool.addLast(conn);\n                    return null;\n            }\n            return method.invoke(conn, args);\n        }\n    });\n```","slug":"数据库连接池学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9t0007dcyuhmv4gbhf","content":"<p> 数据库连接池在初始化时将创建一定数量的数据库连接放到连接池中, 这些数据库连接的数量是由最小数据库连接数来设定的.无论这些数据库连接是否被使用,连接池都将一直保证至少拥有这么多的连接数量.连接池的最大数据库连接数量限定了这个连接池能占有的最大连接数,当应用程序向连接池请求的连接数超过最大连接数量时,这些请求将被加入到等待队列中.</p>\n<hr>\n<p> 编写连接池需实现java.sql.DataSource接口。DataSource接口中定义了两个重载的getConnection方法：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Connection getConnection()</span><br><span class=\"line\">Connection getConnection(String username, String password)</span><br></pre></td></tr></table></figure></p>\n<p>实现DataSource接口，并实现连接池功能的步骤：</p>\n<ul>\n<li>1.在DataSource构造函数中批量创建与数据库的连接，并把创建的连接加入LinkedList对象中。<ul>\n<li>2.实现getConnection方法，让getConnection方法每次调用时，从LinkedList中取一个Connection返回给用户。</li>\n<li>3.当用户使用完Connection，调用Connection.close()方法时，Collection对象应保证将自己返回到LinkedList中,而不要把conn还给数据库。Collection保证将自己返回到LinkedList中是此处编程的难点。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<p>数据库连接池核心代码</p>\n<p>使用动态代理技术构建连接池中的connection<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxyConn = (Connection) Proxy.newProxyInstance(this.getClass()</span><br><span class=\"line\">            .getClassLoader(), conn.getClass().getInterfaces(),</span><br><span class=\"line\">            new InvocationHandler() &#123;</span><br><span class=\"line\">        //此处为内部类，当close方法被调用时将conn还回池中,其它方法直接执行</span><br><span class=\"line\">            public Object invoke(Object proxy, Method method,</span><br><span class=\"line\">                      Object[] args) throws Throwable &#123;</span><br><span class=\"line\">                if (method.getName().equals(&quot;close&quot;)) &#123;</span><br><span class=\"line\">                    pool.addLast(conn);</span><br><span class=\"line\">                    return null;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            return method.invoke(conn, args);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p> 数据库连接池在初始化时将创建一定数量的数据库连接放到连接池中, 这些数据库连接的数量是由最小数据库连接数来设定的.无论这些数据库连接是否被使用,连接池都将一直保证至少拥有这么多的连接数量.连接池的最大数据库连接数量限定了这个连接池能占有的最大连接数,当应用程序向连接池请求的连接数超过最大连接数量时,这些请求将被加入到等待队列中.</p>\n<hr>\n<p> 编写连接池需实现java.sql.DataSource接口。DataSource接口中定义了两个重载的getConnection方法：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Connection getConnection()</span><br><span class=\"line\">Connection getConnection(String username, String password)</span><br></pre></td></tr></table></figure></p>\n<p>实现DataSource接口，并实现连接池功能的步骤：</p>\n<ul>\n<li>1.在DataSource构造函数中批量创建与数据库的连接，并把创建的连接加入LinkedList对象中。<ul>\n<li>2.实现getConnection方法，让getConnection方法每次调用时，从LinkedList中取一个Connection返回给用户。</li>\n<li>3.当用户使用完Connection，调用Connection.close()方法时，Collection对象应保证将自己返回到LinkedList中,而不要把conn还给数据库。Collection保证将自己返回到LinkedList中是此处编程的难点。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<p>数据库连接池核心代码</p>\n<p>使用动态代理技术构建连接池中的connection<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxyConn = (Connection) Proxy.newProxyInstance(this.getClass()</span><br><span class=\"line\">            .getClassLoader(), conn.getClass().getInterfaces(),</span><br><span class=\"line\">            new InvocationHandler() &#123;</span><br><span class=\"line\">        //此处为内部类，当close方法被调用时将conn还回池中,其它方法直接执行</span><br><span class=\"line\">            public Object invoke(Object proxy, Method method,</span><br><span class=\"line\">                      Object[] args) throws Throwable &#123;</span><br><span class=\"line\">                if (method.getName().equals(&quot;close&quot;)) &#123;</span><br><span class=\"line\">                    pool.addLast(conn);</span><br><span class=\"line\">                    return null;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            return method.invoke(conn, args);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure></p>\n"},{"title":"2017.10.22 XML学习","date":"2017-10-21T23:55:58.000Z","_content":"XML:Extensible Markup Language\n\n---\nXML:常用作软件配置文件,描述模块之间关系;\n\nXML:文档声明,元素,属性,注释,CDATA区,特殊字符,处理指令\n\n声明:<?xml version=\"1.0\" encoding=\"gb2312\" ?>\n\n空格换行都被当原始内容处理\n\n一个标签有多个属性,写作<input name=\"text\"> 这个也可写为\n```\n<input>\n<name>text</name>\n</input>\n```\n注释要写在声明之后\n\nCDATA区\n```\n<![CDATA[\n<input>\n<name>text</name>\n</input>\n]]\n```\n\n处理指令:\n<?xml-stylesheet type=\"text/css\" href=\"config.css\"?>\n\n---\n\nXML约束,编写一个文档约束一个XML文档的书写规范;\nXML DTD\nXML Schema\n---\n```\n<!DOCTYPE 书架 SYSTEM \"book.dtd\">\n<书架>\n    <书>\n        <书名></书名>\n        <作者></作者>\n        <售价></售价>\n    </书>\n</书架>\n\n//dtd可以存在与xml中\nbook.dtd:\n<!ELEMENT 书架(书+)>\n<!ELEMENT 书(书名,作者,售价)>\n<!ELEMENT 书名(#PCDATA)>\n<!ELEMENT 作者(#PCDATA)>\n<!ELEMENT 售价(#PCDATA)>\n```\n---\n属性定义\n<!ATTLIST 页面作者\n姓名 CDATA #IMPLIED\n年龄 CDATA #IMPLIED\n联系方式 CDATA #REQUIRED\n网站职务 CDATA #FIXED \"页面作者\"\n个人爱好 CDATA \"上网\"\n>\n---\nXML编程(CRUD)create read update delete\n\nXML解析方式:dom,sax\ndom W3C推荐\nsax XML社区事实的标准\n---\nsax解析:\n从上往下读,读取一行处理一行,内存消耗小,但不适合增删改\n---\nCRUD\n```\nDocumentBuilderFactory factory = DocumentBuliderFactory.Instance();\nDocumentBuilder builder = factory.newDocumentBuilder();\nDocument document = builder.parse(\"src/book.xml\");\n//查\nNode root = document.getElementsByTagName(\"书架\").item(0);\n\nif(node instanceof Element){\n    system.out.print(node.getNodeName());\n}\n//增(默认增加到最后)\nElement price = document.createElement(\"售价\");\nprice.setTextContent(\"59.00元\");\nElement book = document.getElementsByTagName(\"书\").item(0);\nbook.appendChild(pirce);\n//增(增加到某个节点后)\n//1.得到参考节点\nElement rfNode = (ELement)document.getElementsByTagName(\"售价\").item(0);\n//2.得到要挂载的节点\nElement book = document.getElementsByTagName(\"书\").item(0);\nbook.appendChild(pirce);\n//3.插入\nbook.insertBefore(newChild,rfNode);\n\n//增加属性\nElement bookname = document.getElementsByTagName(\"书名\").item(0);\nbookname.setAttribute(\"name\",\"xxxx\");\n\n//删除节点\nElement e = document.getElementsByTagName(\"售价\").item(0);\nElement book = document.getElementsByTagName(\"书\").item(0);\nbook.removeChild(e);\n//或者\ne.getParentNode().removeChild(e);\n\n\n\n\n//把更新后内存写回xml文档\nTransformerFactory tffactory = TransFormerFactory.newInstance();\nTransform tf = tffactory.newTransformer();\ntf.transform(new DOMSource(document),new StreamResult(new FileOutputStream(\"src/book.xml\"));\n\n\n\n\n```\n命名方式:\n\nUI:user interface\n\ndao\n\ndomain/entity/bean 封装数据的实体\n\nUtils getDocument(),write2Xml(Document document)\n\n---\n使用Dom4j解析XML\n---\n增\n```\nDocument document = DocumentHelper.createDocument();\nElement root = document.addElement(\"root\");\n\nElement author1 = root.addElement(\"author\")\n    .addAttribute(\"name\",\"James\")\n    .addAttribute(\"location\",\"James\")\n    .addText(\"James Strachan\")\n    \nreturn document;    \n```\n写入xml\n```\nXMLWriter writer = new XMLWriter(\n    new FileWriter(\"output.xml\")\n);\nwirter.write(document);\nwriter.close;\n\n//Pretty print the document to System.out\nOutputFormat format = OutputFormat.createPrettyPrint();\nwriter = new XMLWriter(System.out,format);\nwriter.write(document);\n\n```\n读取XML\n```\nSAXReader reader = new SAXReader();\nDocument document = reader.reader(new File(\"src/book.xml\"))\n\nElement root = document.getRootElement();\nroot.element(\"书\").get(1);\n\n```\n乱码问题\n```\nOutputFormat format = OutputFormat.createPrettyPrint();\nformat.setEncoding(\"utf-8\");\n\nXMLWriter writer = new XMLWriter(new FileOutputStream(\"src/book.xml\"),format)\nwriter.write(document);\nwriter.close();\n\n```","source":"_posts/2017.10.22 XML学习.md","raw":"---\ntitle: 2017.10.22 XML学习\ndate: 2017-10-22 07:55:58\ntags:\n---\nXML:Extensible Markup Language\n\n---\nXML:常用作软件配置文件,描述模块之间关系;\n\nXML:文档声明,元素,属性,注释,CDATA区,特殊字符,处理指令\n\n声明:<?xml version=\"1.0\" encoding=\"gb2312\" ?>\n\n空格换行都被当原始内容处理\n\n一个标签有多个属性,写作<input name=\"text\"> 这个也可写为\n```\n<input>\n<name>text</name>\n</input>\n```\n注释要写在声明之后\n\nCDATA区\n```\n<![CDATA[\n<input>\n<name>text</name>\n</input>\n]]\n```\n\n处理指令:\n<?xml-stylesheet type=\"text/css\" href=\"config.css\"?>\n\n---\n\nXML约束,编写一个文档约束一个XML文档的书写规范;\nXML DTD\nXML Schema\n---\n```\n<!DOCTYPE 书架 SYSTEM \"book.dtd\">\n<书架>\n    <书>\n        <书名></书名>\n        <作者></作者>\n        <售价></售价>\n    </书>\n</书架>\n\n//dtd可以存在与xml中\nbook.dtd:\n<!ELEMENT 书架(书+)>\n<!ELEMENT 书(书名,作者,售价)>\n<!ELEMENT 书名(#PCDATA)>\n<!ELEMENT 作者(#PCDATA)>\n<!ELEMENT 售价(#PCDATA)>\n```\n---\n属性定义\n<!ATTLIST 页面作者\n姓名 CDATA #IMPLIED\n年龄 CDATA #IMPLIED\n联系方式 CDATA #REQUIRED\n网站职务 CDATA #FIXED \"页面作者\"\n个人爱好 CDATA \"上网\"\n>\n---\nXML编程(CRUD)create read update delete\n\nXML解析方式:dom,sax\ndom W3C推荐\nsax XML社区事实的标准\n---\nsax解析:\n从上往下读,读取一行处理一行,内存消耗小,但不适合增删改\n---\nCRUD\n```\nDocumentBuilderFactory factory = DocumentBuliderFactory.Instance();\nDocumentBuilder builder = factory.newDocumentBuilder();\nDocument document = builder.parse(\"src/book.xml\");\n//查\nNode root = document.getElementsByTagName(\"书架\").item(0);\n\nif(node instanceof Element){\n    system.out.print(node.getNodeName());\n}\n//增(默认增加到最后)\nElement price = document.createElement(\"售价\");\nprice.setTextContent(\"59.00元\");\nElement book = document.getElementsByTagName(\"书\").item(0);\nbook.appendChild(pirce);\n//增(增加到某个节点后)\n//1.得到参考节点\nElement rfNode = (ELement)document.getElementsByTagName(\"售价\").item(0);\n//2.得到要挂载的节点\nElement book = document.getElementsByTagName(\"书\").item(0);\nbook.appendChild(pirce);\n//3.插入\nbook.insertBefore(newChild,rfNode);\n\n//增加属性\nElement bookname = document.getElementsByTagName(\"书名\").item(0);\nbookname.setAttribute(\"name\",\"xxxx\");\n\n//删除节点\nElement e = document.getElementsByTagName(\"售价\").item(0);\nElement book = document.getElementsByTagName(\"书\").item(0);\nbook.removeChild(e);\n//或者\ne.getParentNode().removeChild(e);\n\n\n\n\n//把更新后内存写回xml文档\nTransformerFactory tffactory = TransFormerFactory.newInstance();\nTransform tf = tffactory.newTransformer();\ntf.transform(new DOMSource(document),new StreamResult(new FileOutputStream(\"src/book.xml\"));\n\n\n\n\n```\n命名方式:\n\nUI:user interface\n\ndao\n\ndomain/entity/bean 封装数据的实体\n\nUtils getDocument(),write2Xml(Document document)\n\n---\n使用Dom4j解析XML\n---\n增\n```\nDocument document = DocumentHelper.createDocument();\nElement root = document.addElement(\"root\");\n\nElement author1 = root.addElement(\"author\")\n    .addAttribute(\"name\",\"James\")\n    .addAttribute(\"location\",\"James\")\n    .addText(\"James Strachan\")\n    \nreturn document;    \n```\n写入xml\n```\nXMLWriter writer = new XMLWriter(\n    new FileWriter(\"output.xml\")\n);\nwirter.write(document);\nwriter.close;\n\n//Pretty print the document to System.out\nOutputFormat format = OutputFormat.createPrettyPrint();\nwriter = new XMLWriter(System.out,format);\nwriter.write(document);\n\n```\n读取XML\n```\nSAXReader reader = new SAXReader();\nDocument document = reader.reader(new File(\"src/book.xml\"))\n\nElement root = document.getRootElement();\nroot.element(\"书\").get(1);\n\n```\n乱码问题\n```\nOutputFormat format = OutputFormat.createPrettyPrint();\nformat.setEncoding(\"utf-8\");\n\nXMLWriter writer = new XMLWriter(new FileOutputStream(\"src/book.xml\"),format)\nwriter.write(document);\nwriter.close();\n\n```","slug":"XML学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9u0008dcyu2xy5poa7","content":"<p>XML:Extensible Markup Language</p>\n<hr>\n<p>XML:常用作软件配置文件,描述模块之间关系;</p>\n<p>XML:文档声明,元素,属性,注释,CDATA区,特殊字符,处理指令</p>\n<p>声明:&lt;?xml version=”1.0” encoding=”gb2312” ?&gt;</p>\n<p>空格换行都被当原始内容处理</p>\n<p>一个标签有多个属性,写作<input name=\"text\"> 这个也可写为<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input&gt;</span><br><span class=\"line\">&lt;name&gt;text&lt;/name&gt;</span><br><span class=\"line\">&lt;/input&gt;</span><br></pre></td></tr></table></figure></p>\n<p>注释要写在声明之后</p>\n<p>CDATA区<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;![CDATA[</span><br><span class=\"line\">&lt;input&gt;</span><br><span class=\"line\">&lt;name&gt;text&lt;/name&gt;</span><br><span class=\"line\">&lt;/input&gt;</span><br><span class=\"line\">]]</span><br></pre></td></tr></table></figure></p>\n<p>处理指令:<br>&lt;?xml-stylesheet type=”text/css” href=”config.css”?&gt;</p>\n<hr>\n<p>XML约束,编写一个文档约束一个XML文档的书写规范;<br>XML DTD</p>\n<h2 id=\"XML-Schema\"><a href=\"#XML-Schema\" class=\"headerlink\" title=\"XML Schema\"></a>XML Schema</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE 书架 SYSTEM &quot;book.dtd&quot;&gt;</span><br><span class=\"line\">&lt;书架&gt;</span><br><span class=\"line\">    &lt;书&gt;</span><br><span class=\"line\">        &lt;书名&gt;&lt;/书名&gt;</span><br><span class=\"line\">        &lt;作者&gt;&lt;/作者&gt;</span><br><span class=\"line\">        &lt;售价&gt;&lt;/售价&gt;</span><br><span class=\"line\">    &lt;/书&gt;</span><br><span class=\"line\">&lt;/书架&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">//dtd可以存在与xml中</span><br><span class=\"line\">book.dtd:</span><br><span class=\"line\">&lt;!ELEMENT 书架(书+)&gt;</span><br><span class=\"line\">&lt;!ELEMENT 书(书名,作者,售价)&gt;</span><br><span class=\"line\">&lt;!ELEMENT 书名(#PCDATA)&gt;</span><br><span class=\"line\">&lt;!ELEMENT 作者(#PCDATA)&gt;</span><br><span class=\"line\">&lt;!ELEMENT 售价(#PCDATA)&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>属性定义<br>&lt;!ATTLIST 页面作者<br>姓名 CDATA #IMPLIED<br>年龄 CDATA #IMPLIED<br>联系方式 CDATA #REQUIRED<br>网站职务 CDATA #FIXED “页面作者”<br>个人爱好 CDATA “上网”</p>\n<blockquote>\n</blockquote>\n<hr>\n<p>XML编程(CRUD)create read update delete</p>\n<p>XML解析方式:dom,sax<br>dom W3C推荐</p>\n<h2 id=\"sax-XML社区事实的标准\"><a href=\"#sax-XML社区事实的标准\" class=\"headerlink\" title=\"sax XML社区事实的标准\"></a>sax XML社区事实的标准</h2><p>sax解析:</p>\n<h2 id=\"从上往下读-读取一行处理一行-内存消耗小-但不适合增删改\"><a href=\"#从上往下读-读取一行处理一行-内存消耗小-但不适合增删改\" class=\"headerlink\" title=\"从上往下读,读取一行处理一行,内存消耗小,但不适合增删改\"></a>从上往下读,读取一行处理一行,内存消耗小,但不适合增删改</h2><p>CRUD<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DocumentBuilderFactory factory = DocumentBuliderFactory.Instance();</span><br><span class=\"line\">DocumentBuilder builder = factory.newDocumentBuilder();</span><br><span class=\"line\">Document document = builder.parse(&quot;src/book.xml&quot;);</span><br><span class=\"line\">//查</span><br><span class=\"line\">Node root = document.getElementsByTagName(&quot;书架&quot;).item(0);</span><br><span class=\"line\"></span><br><span class=\"line\">if(node instanceof Element)&#123;</span><br><span class=\"line\">    system.out.print(node.getNodeName());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//增(默认增加到最后)</span><br><span class=\"line\">Element price = document.createElement(&quot;售价&quot;);</span><br><span class=\"line\">price.setTextContent(&quot;59.00元&quot;);</span><br><span class=\"line\">Element book = document.getElementsByTagName(&quot;书&quot;).item(0);</span><br><span class=\"line\">book.appendChild(pirce);</span><br><span class=\"line\">//增(增加到某个节点后)</span><br><span class=\"line\">//1.得到参考节点</span><br><span class=\"line\">Element rfNode = (ELement)document.getElementsByTagName(&quot;售价&quot;).item(0);</span><br><span class=\"line\">//2.得到要挂载的节点</span><br><span class=\"line\">Element book = document.getElementsByTagName(&quot;书&quot;).item(0);</span><br><span class=\"line\">book.appendChild(pirce);</span><br><span class=\"line\">//3.插入</span><br><span class=\"line\">book.insertBefore(newChild,rfNode);</span><br><span class=\"line\"></span><br><span class=\"line\">//增加属性</span><br><span class=\"line\">Element bookname = document.getElementsByTagName(&quot;书名&quot;).item(0);</span><br><span class=\"line\">bookname.setAttribute(&quot;name&quot;,&quot;xxxx&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">//删除节点</span><br><span class=\"line\">Element e = document.getElementsByTagName(&quot;售价&quot;).item(0);</span><br><span class=\"line\">Element book = document.getElementsByTagName(&quot;书&quot;).item(0);</span><br><span class=\"line\">book.removeChild(e);</span><br><span class=\"line\">//或者</span><br><span class=\"line\">e.getParentNode().removeChild(e);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">//把更新后内存写回xml文档</span><br><span class=\"line\">TransformerFactory tffactory = TransFormerFactory.newInstance();</span><br><span class=\"line\">Transform tf = tffactory.newTransformer();</span><br><span class=\"line\">tf.transform(new DOMSource(document),new StreamResult(new FileOutputStream(&quot;src/book.xml&quot;));</span><br></pre></td></tr></table></figure></p>\n<p>命名方式:</p>\n<p>UI:user interface</p>\n<p>dao</p>\n<p>domain/entity/bean 封装数据的实体</p>\n<p>Utils getDocument(),write2Xml(Document document)</p>\n<hr>\n<h2 id=\"使用Dom4j解析XML\"><a href=\"#使用Dom4j解析XML\" class=\"headerlink\" title=\"使用Dom4j解析XML\"></a>使用Dom4j解析XML</h2><p>增<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Document document = DocumentHelper.createDocument();</span><br><span class=\"line\">Element root = document.addElement(&quot;root&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">Element author1 = root.addElement(&quot;author&quot;)</span><br><span class=\"line\">    .addAttribute(&quot;name&quot;,&quot;James&quot;)</span><br><span class=\"line\">    .addAttribute(&quot;location&quot;,&quot;James&quot;)</span><br><span class=\"line\">    .addText(&quot;James Strachan&quot;)</span><br><span class=\"line\">    </span><br><span class=\"line\">return document;</span><br></pre></td></tr></table></figure></p>\n<p>写入xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">XMLWriter writer = new XMLWriter(</span><br><span class=\"line\">    new FileWriter(&quot;output.xml&quot;)</span><br><span class=\"line\">);</span><br><span class=\"line\">wirter.write(document);</span><br><span class=\"line\">writer.close;</span><br><span class=\"line\"></span><br><span class=\"line\">//Pretty print the document to System.out</span><br><span class=\"line\">OutputFormat format = OutputFormat.createPrettyPrint();</span><br><span class=\"line\">writer = new XMLWriter(System.out,format);</span><br><span class=\"line\">writer.write(document);</span><br></pre></td></tr></table></figure></p>\n<p>读取XML<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SAXReader reader = new SAXReader();</span><br><span class=\"line\">Document document = reader.reader(new File(&quot;src/book.xml&quot;))</span><br><span class=\"line\"></span><br><span class=\"line\">Element root = document.getRootElement();</span><br><span class=\"line\">root.element(&quot;书&quot;).get(1);</span><br></pre></td></tr></table></figure></p>\n<p>乱码问题<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OutputFormat format = OutputFormat.createPrettyPrint();</span><br><span class=\"line\">format.setEncoding(&quot;utf-8&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">XMLWriter writer = new XMLWriter(new FileOutputStream(&quot;src/book.xml&quot;),format)</span><br><span class=\"line\">writer.write(document);</span><br><span class=\"line\">writer.close();</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>XML:Extensible Markup Language</p>\n<hr>\n<p>XML:常用作软件配置文件,描述模块之间关系;</p>\n<p>XML:文档声明,元素,属性,注释,CDATA区,特殊字符,处理指令</p>\n<p>声明:&lt;?xml version=”1.0” encoding=”gb2312” ?&gt;</p>\n<p>空格换行都被当原始内容处理</p>\n<p>一个标签有多个属性,写作<input name=\"text\"> 这个也可写为<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input&gt;</span><br><span class=\"line\">&lt;name&gt;text&lt;/name&gt;</span><br><span class=\"line\">&lt;/input&gt;</span><br></pre></td></tr></table></figure></p>\n<p>注释要写在声明之后</p>\n<p>CDATA区<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;![CDATA[</span><br><span class=\"line\">&lt;input&gt;</span><br><span class=\"line\">&lt;name&gt;text&lt;/name&gt;</span><br><span class=\"line\">&lt;/input&gt;</span><br><span class=\"line\">]]</span><br></pre></td></tr></table></figure></p>\n<p>处理指令:<br>&lt;?xml-stylesheet type=”text/css” href=”config.css”?&gt;</p>\n<hr>\n<p>XML约束,编写一个文档约束一个XML文档的书写规范;<br>XML DTD</p>\n<h2 id=\"XML-Schema\"><a href=\"#XML-Schema\" class=\"headerlink\" title=\"XML Schema\"></a>XML Schema</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE 书架 SYSTEM &quot;book.dtd&quot;&gt;</span><br><span class=\"line\">&lt;书架&gt;</span><br><span class=\"line\">    &lt;书&gt;</span><br><span class=\"line\">        &lt;书名&gt;&lt;/书名&gt;</span><br><span class=\"line\">        &lt;作者&gt;&lt;/作者&gt;</span><br><span class=\"line\">        &lt;售价&gt;&lt;/售价&gt;</span><br><span class=\"line\">    &lt;/书&gt;</span><br><span class=\"line\">&lt;/书架&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">//dtd可以存在与xml中</span><br><span class=\"line\">book.dtd:</span><br><span class=\"line\">&lt;!ELEMENT 书架(书+)&gt;</span><br><span class=\"line\">&lt;!ELEMENT 书(书名,作者,售价)&gt;</span><br><span class=\"line\">&lt;!ELEMENT 书名(#PCDATA)&gt;</span><br><span class=\"line\">&lt;!ELEMENT 作者(#PCDATA)&gt;</span><br><span class=\"line\">&lt;!ELEMENT 售价(#PCDATA)&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>属性定义<br>&lt;!ATTLIST 页面作者<br>姓名 CDATA #IMPLIED<br>年龄 CDATA #IMPLIED<br>联系方式 CDATA #REQUIRED<br>网站职务 CDATA #FIXED “页面作者”<br>个人爱好 CDATA “上网”</p>\n<blockquote>\n</blockquote>\n<hr>\n<p>XML编程(CRUD)create read update delete</p>\n<p>XML解析方式:dom,sax<br>dom W3C推荐</p>\n<h2 id=\"sax-XML社区事实的标准\"><a href=\"#sax-XML社区事实的标准\" class=\"headerlink\" title=\"sax XML社区事实的标准\"></a>sax XML社区事实的标准</h2><p>sax解析:</p>\n<h2 id=\"从上往下读-读取一行处理一行-内存消耗小-但不适合增删改\"><a href=\"#从上往下读-读取一行处理一行-内存消耗小-但不适合增删改\" class=\"headerlink\" title=\"从上往下读,读取一行处理一行,内存消耗小,但不适合增删改\"></a>从上往下读,读取一行处理一行,内存消耗小,但不适合增删改</h2><p>CRUD<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DocumentBuilderFactory factory = DocumentBuliderFactory.Instance();</span><br><span class=\"line\">DocumentBuilder builder = factory.newDocumentBuilder();</span><br><span class=\"line\">Document document = builder.parse(&quot;src/book.xml&quot;);</span><br><span class=\"line\">//查</span><br><span class=\"line\">Node root = document.getElementsByTagName(&quot;书架&quot;).item(0);</span><br><span class=\"line\"></span><br><span class=\"line\">if(node instanceof Element)&#123;</span><br><span class=\"line\">    system.out.print(node.getNodeName());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//增(默认增加到最后)</span><br><span class=\"line\">Element price = document.createElement(&quot;售价&quot;);</span><br><span class=\"line\">price.setTextContent(&quot;59.00元&quot;);</span><br><span class=\"line\">Element book = document.getElementsByTagName(&quot;书&quot;).item(0);</span><br><span class=\"line\">book.appendChild(pirce);</span><br><span class=\"line\">//增(增加到某个节点后)</span><br><span class=\"line\">//1.得到参考节点</span><br><span class=\"line\">Element rfNode = (ELement)document.getElementsByTagName(&quot;售价&quot;).item(0);</span><br><span class=\"line\">//2.得到要挂载的节点</span><br><span class=\"line\">Element book = document.getElementsByTagName(&quot;书&quot;).item(0);</span><br><span class=\"line\">book.appendChild(pirce);</span><br><span class=\"line\">//3.插入</span><br><span class=\"line\">book.insertBefore(newChild,rfNode);</span><br><span class=\"line\"></span><br><span class=\"line\">//增加属性</span><br><span class=\"line\">Element bookname = document.getElementsByTagName(&quot;书名&quot;).item(0);</span><br><span class=\"line\">bookname.setAttribute(&quot;name&quot;,&quot;xxxx&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">//删除节点</span><br><span class=\"line\">Element e = document.getElementsByTagName(&quot;售价&quot;).item(0);</span><br><span class=\"line\">Element book = document.getElementsByTagName(&quot;书&quot;).item(0);</span><br><span class=\"line\">book.removeChild(e);</span><br><span class=\"line\">//或者</span><br><span class=\"line\">e.getParentNode().removeChild(e);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">//把更新后内存写回xml文档</span><br><span class=\"line\">TransformerFactory tffactory = TransFormerFactory.newInstance();</span><br><span class=\"line\">Transform tf = tffactory.newTransformer();</span><br><span class=\"line\">tf.transform(new DOMSource(document),new StreamResult(new FileOutputStream(&quot;src/book.xml&quot;));</span><br></pre></td></tr></table></figure></p>\n<p>命名方式:</p>\n<p>UI:user interface</p>\n<p>dao</p>\n<p>domain/entity/bean 封装数据的实体</p>\n<p>Utils getDocument(),write2Xml(Document document)</p>\n<hr>\n<h2 id=\"使用Dom4j解析XML\"><a href=\"#使用Dom4j解析XML\" class=\"headerlink\" title=\"使用Dom4j解析XML\"></a>使用Dom4j解析XML</h2><p>增<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Document document = DocumentHelper.createDocument();</span><br><span class=\"line\">Element root = document.addElement(&quot;root&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">Element author1 = root.addElement(&quot;author&quot;)</span><br><span class=\"line\">    .addAttribute(&quot;name&quot;,&quot;James&quot;)</span><br><span class=\"line\">    .addAttribute(&quot;location&quot;,&quot;James&quot;)</span><br><span class=\"line\">    .addText(&quot;James Strachan&quot;)</span><br><span class=\"line\">    </span><br><span class=\"line\">return document;</span><br></pre></td></tr></table></figure></p>\n<p>写入xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">XMLWriter writer = new XMLWriter(</span><br><span class=\"line\">    new FileWriter(&quot;output.xml&quot;)</span><br><span class=\"line\">);</span><br><span class=\"line\">wirter.write(document);</span><br><span class=\"line\">writer.close;</span><br><span class=\"line\"></span><br><span class=\"line\">//Pretty print the document to System.out</span><br><span class=\"line\">OutputFormat format = OutputFormat.createPrettyPrint();</span><br><span class=\"line\">writer = new XMLWriter(System.out,format);</span><br><span class=\"line\">writer.write(document);</span><br></pre></td></tr></table></figure></p>\n<p>读取XML<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SAXReader reader = new SAXReader();</span><br><span class=\"line\">Document document = reader.reader(new File(&quot;src/book.xml&quot;))</span><br><span class=\"line\"></span><br><span class=\"line\">Element root = document.getRootElement();</span><br><span class=\"line\">root.element(&quot;书&quot;).get(1);</span><br></pre></td></tr></table></figure></p>\n<p>乱码问题<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OutputFormat format = OutputFormat.createPrettyPrint();</span><br><span class=\"line\">format.setEncoding(&quot;utf-8&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">XMLWriter writer = new XMLWriter(new FileOutputStream(&quot;src/book.xml&quot;),format)</span><br><span class=\"line\">writer.write(document);</span><br><span class=\"line\">writer.close();</span><br></pre></td></tr></table></figure></p>\n"},{"title":"2017.10.23 servlet","date":"2017-10-22T23:55:58.000Z","_content":"getOutputStream 字节流\n\ngetWriter 字符流\n\n防止乱码:\n```\nresponse.setHeader(\"Content-type\",\"text/html\";\"charset=utf-8\");\nString data = \"中国\";\nOutputStream ops = response.getOutputStream();\nout.write(data.getBytes(\"utf-8\"));\n```\n","source":"_posts/2017.10.23 servlet.md","raw":"---\ntitle: 2017.10.23 servlet\ndate: 2017-10-23 07:55:58\ntags:\n---\ngetOutputStream 字节流\n\ngetWriter 字符流\n\n防止乱码:\n```\nresponse.setHeader(\"Content-type\",\"text/html\";\"charset=utf-8\");\nString data = \"中国\";\nOutputStream ops = response.getOutputStream();\nout.write(data.getBytes(\"utf-8\"));\n```\n","slug":"servlet","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9v0009dcyux5fshklr","content":"<p>getOutputStream 字节流</p>\n<p>getWriter 字符流</p>\n<p>防止乱码:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">response.setHeader(&quot;Content-type&quot;,&quot;text/html&quot;;&quot;charset=utf-8&quot;);</span><br><span class=\"line\">String data = &quot;中国&quot;;</span><br><span class=\"line\">OutputStream ops = response.getOutputStream();</span><br><span class=\"line\">out.write(data.getBytes(&quot;utf-8&quot;));</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>getOutputStream 字节流</p>\n<p>getWriter 字符流</p>\n<p>防止乱码:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">response.setHeader(&quot;Content-type&quot;,&quot;text/html&quot;;&quot;charset=utf-8&quot;);</span><br><span class=\"line\">String data = &quot;中国&quot;;</span><br><span class=\"line\">OutputStream ops = response.getOutputStream();</span><br><span class=\"line\">out.write(data.getBytes(&quot;utf-8&quot;));</span><br></pre></td></tr></table></figure></p>\n"},{"title":"2017.10.27 Spring学习","date":"2017-10-26T23:55:58.000Z","_content":"1.Spring基本功能详解\n---\n- 1. SpringIOC\n    Spring的控制反转：把对象的创建、初始化、销毁等工作交给spring容器来做。由spring容器控制对象的生命周期。\n```\nA.\t启动spring容器\n1、\t在类路径下寻找配置文件来实例化容器 \nApplicationContext ctx = new ClassPathXmlApplicationContext(new String[]{\"beans.xml\"});可以在整个类路径中寻找xml文件\n* 通过这种方式加载。需要将spring的配置文件放到当前项目的classpath路径下\n*  classpath路径指的是当前项目的src目录，该目录是java源文件的存放位置。 \n2、\t在文件系统路径下寻找配置文件来实例化容器 \nApplicationContext ctx = new FileSystemXmlApplicationContext(new String[]{“d:\\\\beans.xml“});Spring的配置文件可以指定多个，可以通过String数组传入。\n注：经常用第一种方法启动容器\nB.\t从spring容器中提取对象\n\n```\n- 2. 别名\n```\n<beans>\n\t<alias name=\"person\" alias=\"p\"/>\n\t<bean name=\"person\" class=\"cn.itcast.aliasspring.Person\"/>\n</beans>\n通过这样的配置，可以达到在一个地方命名，在多个地方使用不同的名字的效果。\n```\n- 3. \tSpring容器内部对象\n```\n-  1.创建对象的方式\n   -  无参构造函数\n   <bean id=“personService\" class=\"cn.itcast.bean.impl.PersonServiceImpl\"/>\n   -  静态工厂\n    <bean id=\"personService\"  class=\"com.itcast.factory.PersonServiceFactory\"    factory-method=\"createPersonService\" />\n    public class PersonServiceFactory {\n          public  static PersonService createPersonService(){\n                return new PersonServiceImpl();\n          }\n    }\n    -  实例工厂\n    记住概念即可\n\n```\n- 4.  singleton(默认值) \n```\n    在每个Spring IoC容器中一个bean定义只有一个对象实例(共享)。\n    默认情况下会在容器启动时初始化bean，但我们可以指定Bean节点的lazy-init=“true”来延迟初始化bean，这时候，只有第一次获取bean会才初始化bean。如：\n    <beans default-lazy-init=\"true“ ...> \n    \n    \n```\n-  5. prototype(原型；样机；典型)\n```\n允许bean可以被多次实例化(使用一次就创建一个实例) . Spring不能对一个prototype bean的整个生命周期负责.这就意味着清楚prototype作用域的对象并释放任何prototype bean所持有的昂贵资源都是客户端的责任。\n```\n-  6. Request\n```\n在一次http请求中,一个bean定义对应一个实例,即每次http请求将会有各自的bean实例, 他们依据某个bean定义创建而成.该作用域仅在基于web的Spring ApplicationContext情形下有效\n```\n-  7. Session\n```\n在一次http请求中,一个bean定义对应一个实例,该作用域仅在基于web的Spring ApplicationContext情形下有效\n```\n-  8. Global session\n```\n在Global session中,一个bean定义对应一个实例,仅在使用portlet context时有效.该作用域仅在基于web的Spring ApplicationContext情形下有效\n```\n-  9. 初始化bean时机\n```\nSpring默认在启动时将所有singleton bean提前进行实例化。提前实例化意味着作为初始化的一部分，ApplicationContext会自动创建并配置所有的singleton bean.通常情况下这是件好事。因为这样在配置中有任何错误能立即发现。\nLazy-init=”true or  false”\nLazy-init 为false,spring容器将在启动的时候报错（比较好的一种方式）\nLazy-init 为true,spring容器将在调用该类的时候出错。\n\n```\n\n\n-  10. init,destory\n```\n Spring初始化bean或销毁bean时，有时需要作一些处理工作，因此spring可以在创建和拆卸bean的时候调用bean的两个生命周期方法。\n   <bean id=“foo” class=“...Foo”\n            init-method=“setup”\n            destory-method=“teardown”/>\n当foo被载入到Spring容器中时调用init-method方法。当foo从容器中删除时调用destory-method（scope = singleton有效）\n\n```\n-  11. 依赖注入(DI)\n```\n1. 使用构造器注入\n    使用xml注入方式\n    A. 通过参数的顺序\n    <constructor-arg index=\"0\">\n      <value>张三</value>\n    </constructor-arg>\n    <constructor-arg index=\"1\">\n           <value>56</value>\n     </constructor-arg> \n    B. 通过参数的类型\n    <constructor-arg type=\"java.lang.Integer\">\n              <value>56</value>\n    </constructor-arg>\n    <constructor-arg type=\"java.lang.String\">\n          <value>张三</value>\n    </constructor-arg>\n2. 使用属性setting方法进行注入\n\n    使用xml的注入方式：\n    \n    A.\t简单Bean的注入\n    简单Bean包括两种类型：包装类型和String\n    <bean id=\"personService\"   class=\"com.itcast.bean.impl.PersonServiceImpl\">\n    <!-- 基本类型,string类型 -->\n    <property name=\"age\" value=\"20\"></property>\n    <property name=\"name\" value=\"张无忌\"></property>                        </bean>\n    B.\t引用其他Bean\n    <bean id=\"person\" class=\"com.itcast.bean.Person\" />\n     <bean id=\"personService\"  class=\"com.itcast.bean.impl.PersonServiceImpl\">\n     <property name=\"person\" ref=\"person\" />\n    </bean>\n\n    装配list集合\n    <property name=\"lists\">\n        <list>\n            <value>list1</value>\n            <value>list2</value>\n            <ref bean=\"person\">\n        </list>\n    </property>\n\n    装配set集合\n    <property name=\"sets\">\n        <set>\n            <value>set1</value>\n            <value>set2</value>\n            <ref bean=\"person\">\n        </set>\n    </property>    \n\n\n    装配map集合\n    <property name=\"maps\">\n             <map>\n                  <entry key=\"01\">\n                          <value>map01</value>\n                  </entry>\n                  <entry key=\"02\">\n                          <value>map02</value>\n                  </entry>\t\n             </map>\n\n    </property>       \n    map中的<entry>的数值和<list>以及<set>的一样，可以使任何有效的属性元素，需要注意的是key值必须是String的。\n\n    装配properties\n    <property name=\"props\">\n           <props>\n             <prop key=\"01\">prop1</prop>\n             <prop key=\"02\">prop2</prop>\n           </props>\n    </property>  \n\n```\n-  12. 注解\n```\n步骤：\t\nA.\t在配置文件中，引入context命名空间\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring- beans-2.5.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context-2.5.xsd\">\nB.\t在配置文件中加入context:annotation-config标签\n<context:annotation-config/> \n这个配置隐式注册了多个对注释进行解析处理的处理器 \nAutowiredAnnotationBeanPostProcessor，CommonAnnotationBeanPostProcessor，\nPersistenceAnnotationBeanPostProcessor，RequiredAnnotationBeanPostProcessor \n注： @Resource注解在spring安装目录的lib\\j2ee\\common-annotations.jar\n\n1. @Autowired\n这两个注解的区别是：@Autowired 默认按类型装配，@Resource默认按名称装配，当找不到与名称匹配的bean才会按类型装配。 \n2. @Autowired注解是按类型装配依赖对象，默认情况下它要求依赖对象必须存在，如果允许null值，可以设置它required属性为false。\n3. @Qualifier\n如果我们想使用按名称装配，可以结合@Qualifier注解一起使用。如下：\n4. @Resource\n- 1、\t@Resource注解和@Autowired一样，也可以标注在字段或属性的setter方法上.\n- 2、\t@Resource注解默认按名称装配。\n        名称可以通过@Resource的name属性指定，如果没有指定name属性，\n        •\t当注解标注在字段上，即默认取字段的名称作为bean名称寻找依赖对象\n        •\t当注解标注在属性的setter方法上，即默认取属性名作为bean名称寻找依赖对象。 \n        •\t注意：如果没有指定name属性，并且按照默认的名称找不到依赖对象时， @Resource注解会回退到按类型装配。但一旦指定了name属性，就只能按名称装配了。 \n\n5. @PostConstruct\n指定Bean的初始化方法\n6. @PreDestory\n指定Bean的销毁方法\n\n```\n- 13. 扫描\n```\n前面的例子我们都是使用XML的bean定义来配置组件。在一个稍大的项目中，通常会有上百个组件，如果这些组件采用xml的bean定义来配置，显然会增加配置文件的体积，查找及维护起来也不太方便。spring2.5为我们引入了组件自动扫描机制，它可以在类路径底下寻找标注了@Component、@Service、@Controller、@Repository注解的类，并把这些类纳入进spring容器中管理。它的作用和在xml文件中使用bean节点配置组件是一样的。要使用自动扫描机制，我们需要打开以下配置信息:\n1、引入context命名空间  需要在xml配置文件中配置以下信息： \n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n           http://www.springframework.org/schema/context\n           http://www.springframework.org/schema/context/spring-context-2.5.xsd\">\n          <context:component-scan base-package=\"cn.itcast\"/>\n</beans>\n2、在配置文件中添加context:component-scan标签 \n       <context:component-scan base-package=\"cn.itcast\"/>\n       其中base-package为需要扫描的包(含子包)。\n注:\n1、在使用组件扫描元素时，AutowiredAnnotationBeanPostProcessor 和CommonAnnotationBeanPostProcessor会隐式地被包括进来。 也就是说，连个组件都会被自动检测并织入 - 所有这一切都不需要在XML中提供任何bean配置元数据。 \n2、功能介绍\n@Service用于标注业务层组件、\n@Controller用于标注控制层组件（如struts中的action）、\n@Repository用于标注数据访问组件，即DAO组件。\n而@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。 \n\n\n```\n\n\n14. Spring中的继承\n```\n<bean id=\"student\" class=\"cn...\" parent=\"person\"/>\n\n---\n\n\n\n","source":"_posts/2017.10.27 Spring 学习.md","raw":"---\ntitle: 2017.10.27 Spring学习\ndate: 2017-10-27 07:55:58\ntags:\n---\n1.Spring基本功能详解\n---\n- 1. SpringIOC\n    Spring的控制反转：把对象的创建、初始化、销毁等工作交给spring容器来做。由spring容器控制对象的生命周期。\n```\nA.\t启动spring容器\n1、\t在类路径下寻找配置文件来实例化容器 \nApplicationContext ctx = new ClassPathXmlApplicationContext(new String[]{\"beans.xml\"});可以在整个类路径中寻找xml文件\n* 通过这种方式加载。需要将spring的配置文件放到当前项目的classpath路径下\n*  classpath路径指的是当前项目的src目录，该目录是java源文件的存放位置。 \n2、\t在文件系统路径下寻找配置文件来实例化容器 \nApplicationContext ctx = new FileSystemXmlApplicationContext(new String[]{“d:\\\\beans.xml“});Spring的配置文件可以指定多个，可以通过String数组传入。\n注：经常用第一种方法启动容器\nB.\t从spring容器中提取对象\n\n```\n- 2. 别名\n```\n<beans>\n\t<alias name=\"person\" alias=\"p\"/>\n\t<bean name=\"person\" class=\"cn.itcast.aliasspring.Person\"/>\n</beans>\n通过这样的配置，可以达到在一个地方命名，在多个地方使用不同的名字的效果。\n```\n- 3. \tSpring容器内部对象\n```\n-  1.创建对象的方式\n   -  无参构造函数\n   <bean id=“personService\" class=\"cn.itcast.bean.impl.PersonServiceImpl\"/>\n   -  静态工厂\n    <bean id=\"personService\"  class=\"com.itcast.factory.PersonServiceFactory\"    factory-method=\"createPersonService\" />\n    public class PersonServiceFactory {\n          public  static PersonService createPersonService(){\n                return new PersonServiceImpl();\n          }\n    }\n    -  实例工厂\n    记住概念即可\n\n```\n- 4.  singleton(默认值) \n```\n    在每个Spring IoC容器中一个bean定义只有一个对象实例(共享)。\n    默认情况下会在容器启动时初始化bean，但我们可以指定Bean节点的lazy-init=“true”来延迟初始化bean，这时候，只有第一次获取bean会才初始化bean。如：\n    <beans default-lazy-init=\"true“ ...> \n    \n    \n```\n-  5. prototype(原型；样机；典型)\n```\n允许bean可以被多次实例化(使用一次就创建一个实例) . Spring不能对一个prototype bean的整个生命周期负责.这就意味着清楚prototype作用域的对象并释放任何prototype bean所持有的昂贵资源都是客户端的责任。\n```\n-  6. Request\n```\n在一次http请求中,一个bean定义对应一个实例,即每次http请求将会有各自的bean实例, 他们依据某个bean定义创建而成.该作用域仅在基于web的Spring ApplicationContext情形下有效\n```\n-  7. Session\n```\n在一次http请求中,一个bean定义对应一个实例,该作用域仅在基于web的Spring ApplicationContext情形下有效\n```\n-  8. Global session\n```\n在Global session中,一个bean定义对应一个实例,仅在使用portlet context时有效.该作用域仅在基于web的Spring ApplicationContext情形下有效\n```\n-  9. 初始化bean时机\n```\nSpring默认在启动时将所有singleton bean提前进行实例化。提前实例化意味着作为初始化的一部分，ApplicationContext会自动创建并配置所有的singleton bean.通常情况下这是件好事。因为这样在配置中有任何错误能立即发现。\nLazy-init=”true or  false”\nLazy-init 为false,spring容器将在启动的时候报错（比较好的一种方式）\nLazy-init 为true,spring容器将在调用该类的时候出错。\n\n```\n\n\n-  10. init,destory\n```\n Spring初始化bean或销毁bean时，有时需要作一些处理工作，因此spring可以在创建和拆卸bean的时候调用bean的两个生命周期方法。\n   <bean id=“foo” class=“...Foo”\n            init-method=“setup”\n            destory-method=“teardown”/>\n当foo被载入到Spring容器中时调用init-method方法。当foo从容器中删除时调用destory-method（scope = singleton有效）\n\n```\n-  11. 依赖注入(DI)\n```\n1. 使用构造器注入\n    使用xml注入方式\n    A. 通过参数的顺序\n    <constructor-arg index=\"0\">\n      <value>张三</value>\n    </constructor-arg>\n    <constructor-arg index=\"1\">\n           <value>56</value>\n     </constructor-arg> \n    B. 通过参数的类型\n    <constructor-arg type=\"java.lang.Integer\">\n              <value>56</value>\n    </constructor-arg>\n    <constructor-arg type=\"java.lang.String\">\n          <value>张三</value>\n    </constructor-arg>\n2. 使用属性setting方法进行注入\n\n    使用xml的注入方式：\n    \n    A.\t简单Bean的注入\n    简单Bean包括两种类型：包装类型和String\n    <bean id=\"personService\"   class=\"com.itcast.bean.impl.PersonServiceImpl\">\n    <!-- 基本类型,string类型 -->\n    <property name=\"age\" value=\"20\"></property>\n    <property name=\"name\" value=\"张无忌\"></property>                        </bean>\n    B.\t引用其他Bean\n    <bean id=\"person\" class=\"com.itcast.bean.Person\" />\n     <bean id=\"personService\"  class=\"com.itcast.bean.impl.PersonServiceImpl\">\n     <property name=\"person\" ref=\"person\" />\n    </bean>\n\n    装配list集合\n    <property name=\"lists\">\n        <list>\n            <value>list1</value>\n            <value>list2</value>\n            <ref bean=\"person\">\n        </list>\n    </property>\n\n    装配set集合\n    <property name=\"sets\">\n        <set>\n            <value>set1</value>\n            <value>set2</value>\n            <ref bean=\"person\">\n        </set>\n    </property>    \n\n\n    装配map集合\n    <property name=\"maps\">\n             <map>\n                  <entry key=\"01\">\n                          <value>map01</value>\n                  </entry>\n                  <entry key=\"02\">\n                          <value>map02</value>\n                  </entry>\t\n             </map>\n\n    </property>       \n    map中的<entry>的数值和<list>以及<set>的一样，可以使任何有效的属性元素，需要注意的是key值必须是String的。\n\n    装配properties\n    <property name=\"props\">\n           <props>\n             <prop key=\"01\">prop1</prop>\n             <prop key=\"02\">prop2</prop>\n           </props>\n    </property>  \n\n```\n-  12. 注解\n```\n步骤：\t\nA.\t在配置文件中，引入context命名空间\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring- beans-2.5.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context-2.5.xsd\">\nB.\t在配置文件中加入context:annotation-config标签\n<context:annotation-config/> \n这个配置隐式注册了多个对注释进行解析处理的处理器 \nAutowiredAnnotationBeanPostProcessor，CommonAnnotationBeanPostProcessor，\nPersistenceAnnotationBeanPostProcessor，RequiredAnnotationBeanPostProcessor \n注： @Resource注解在spring安装目录的lib\\j2ee\\common-annotations.jar\n\n1. @Autowired\n这两个注解的区别是：@Autowired 默认按类型装配，@Resource默认按名称装配，当找不到与名称匹配的bean才会按类型装配。 \n2. @Autowired注解是按类型装配依赖对象，默认情况下它要求依赖对象必须存在，如果允许null值，可以设置它required属性为false。\n3. @Qualifier\n如果我们想使用按名称装配，可以结合@Qualifier注解一起使用。如下：\n4. @Resource\n- 1、\t@Resource注解和@Autowired一样，也可以标注在字段或属性的setter方法上.\n- 2、\t@Resource注解默认按名称装配。\n        名称可以通过@Resource的name属性指定，如果没有指定name属性，\n        •\t当注解标注在字段上，即默认取字段的名称作为bean名称寻找依赖对象\n        •\t当注解标注在属性的setter方法上，即默认取属性名作为bean名称寻找依赖对象。 \n        •\t注意：如果没有指定name属性，并且按照默认的名称找不到依赖对象时， @Resource注解会回退到按类型装配。但一旦指定了name属性，就只能按名称装配了。 \n\n5. @PostConstruct\n指定Bean的初始化方法\n6. @PreDestory\n指定Bean的销毁方法\n\n```\n- 13. 扫描\n```\n前面的例子我们都是使用XML的bean定义来配置组件。在一个稍大的项目中，通常会有上百个组件，如果这些组件采用xml的bean定义来配置，显然会增加配置文件的体积，查找及维护起来也不太方便。spring2.5为我们引入了组件自动扫描机制，它可以在类路径底下寻找标注了@Component、@Service、@Controller、@Repository注解的类，并把这些类纳入进spring容器中管理。它的作用和在xml文件中使用bean节点配置组件是一样的。要使用自动扫描机制，我们需要打开以下配置信息:\n1、引入context命名空间  需要在xml配置文件中配置以下信息： \n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n           http://www.springframework.org/schema/context\n           http://www.springframework.org/schema/context/spring-context-2.5.xsd\">\n          <context:component-scan base-package=\"cn.itcast\"/>\n</beans>\n2、在配置文件中添加context:component-scan标签 \n       <context:component-scan base-package=\"cn.itcast\"/>\n       其中base-package为需要扫描的包(含子包)。\n注:\n1、在使用组件扫描元素时，AutowiredAnnotationBeanPostProcessor 和CommonAnnotationBeanPostProcessor会隐式地被包括进来。 也就是说，连个组件都会被自动检测并织入 - 所有这一切都不需要在XML中提供任何bean配置元数据。 \n2、功能介绍\n@Service用于标注业务层组件、\n@Controller用于标注控制层组件（如struts中的action）、\n@Repository用于标注数据访问组件，即DAO组件。\n而@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。 \n\n\n```\n\n\n14. Spring中的继承\n```\n<bean id=\"student\" class=\"cn...\" parent=\"person\"/>\n\n---\n\n\n\n","slug":"Spring 学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9w000adcyuk0w1620k","content":"<h2 id=\"1-Spring基本功能详解\"><a href=\"#1-Spring基本功能详解\" class=\"headerlink\" title=\"1.Spring基本功能详解\"></a>1.Spring基本功能详解</h2><ul>\n<li><ol>\n<li>SpringIOC<br>Spring的控制反转：把对象的创建、初始化、销毁等工作交给spring容器来做。由spring容器控制对象的生命周期。<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A.\t启动spring容器</span><br><span class=\"line\">1、\t在类路径下寻找配置文件来实例化容器 </span><br><span class=\"line\">ApplicationContext ctx = new ClassPathXmlApplicationContext(new String[]&#123;&quot;beans.xml&quot;&#125;);可以在整个类路径中寻找xml文件</span><br><span class=\"line\">* 通过这种方式加载。需要将spring的配置文件放到当前项目的classpath路径下</span><br><span class=\"line\">*  classpath路径指的是当前项目的src目录，该目录是java源文件的存放位置。 </span><br><span class=\"line\">2、\t在文件系统路径下寻找配置文件来实例化容器 </span><br><span class=\"line\">ApplicationContext ctx = new FileSystemXmlApplicationContext(new String[]&#123;“d:\\\\beans.xml“&#125;);Spring的配置文件可以指定多个，可以通过String数组传入。</span><br><span class=\"line\">注：经常用第一种方法启动容器</span><br><span class=\"line\">B.\t从spring容器中提取对象</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"2\">\n<li>别名<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans&gt;</span><br><span class=\"line\">\t&lt;alias name=&quot;person&quot; alias=&quot;p&quot;/&gt;</span><br><span class=\"line\">\t&lt;bean name=&quot;person&quot; class=&quot;cn.itcast.aliasspring.Person&quot;/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br><span class=\"line\">通过这样的配置，可以达到在一个地方命名，在多个地方使用不同的名字的效果。</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"3\">\n<li>Spring容器内部对象<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-  1.创建对象的方式</span><br><span class=\"line\">   -  无参构造函数</span><br><span class=\"line\">   &lt;bean id=“personService&quot; class=&quot;cn.itcast.bean.impl.PersonServiceImpl&quot;/&gt;</span><br><span class=\"line\">   -  静态工厂</span><br><span class=\"line\">    &lt;bean id=&quot;personService&quot;  class=&quot;com.itcast.factory.PersonServiceFactory&quot;    factory-method=&quot;createPersonService&quot; /&gt;</span><br><span class=\"line\">    public class PersonServiceFactory &#123;</span><br><span class=\"line\">          public  static PersonService createPersonService()&#123;</span><br><span class=\"line\">                return new PersonServiceImpl();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    -  实例工厂</span><br><span class=\"line\">    记住概念即可</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"4\">\n<li>singleton(默认值) <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在每个Spring IoC容器中一个bean定义只有一个对象实例(共享)。</span><br><span class=\"line\">默认情况下会在容器启动时初始化bean，但我们可以指定Bean节点的lazy-init=“true”来延迟初始化bean，这时候，只有第一次获取bean会才初始化bean。如：</span><br><span class=\"line\">&lt;beans default-lazy-init=&quot;true“ ...&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"5\">\n<li>prototype(原型；样机；典型)<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">允许bean可以被多次实例化(使用一次就创建一个实例) . Spring不能对一个prototype bean的整个生命周期负责.这就意味着清楚prototype作用域的对象并释放任何prototype bean所持有的昂贵资源都是客户端的责任。</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"6\">\n<li>Request<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在一次http请求中,一个bean定义对应一个实例,即每次http请求将会有各自的bean实例, 他们依据某个bean定义创建而成.该作用域仅在基于web的Spring ApplicationContext情形下有效</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"7\">\n<li>Session<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在一次http请求中,一个bean定义对应一个实例,该作用域仅在基于web的Spring ApplicationContext情形下有效</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"8\">\n<li>Global session<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在Global session中,一个bean定义对应一个实例,仅在使用portlet context时有效.该作用域仅在基于web的Spring ApplicationContext情形下有效</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"9\">\n<li>初始化bean时机<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Spring默认在启动时将所有singleton bean提前进行实例化。提前实例化意味着作为初始化的一部分，ApplicationContext会自动创建并配置所有的singleton bean.通常情况下这是件好事。因为这样在配置中有任何错误能立即发现。</span><br><span class=\"line\">Lazy-init=”true or  false”</span><br><span class=\"line\">Lazy-init 为false,spring容器将在启动的时候报错（比较好的一种方式）</span><br><span class=\"line\">Lazy-init 为true,spring容器将在调用该类的时候出错。</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"10\">\n<li>init,destory<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> Spring初始化bean或销毁bean时，有时需要作一些处理工作，因此spring可以在创建和拆卸bean的时候调用bean的两个生命周期方法。</span><br><span class=\"line\">   &lt;bean id=“foo” class=“...Foo”</span><br><span class=\"line\">            init-method=“setup”</span><br><span class=\"line\">            destory-method=“teardown”/&gt;</span><br><span class=\"line\">当foo被载入到Spring容器中时调用init-method方法。当foo从容器中删除时调用destory-method（scope = singleton有效）</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"11\">\n<li>依赖注入(DI)<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 使用构造器注入</span><br><span class=\"line\">    使用xml注入方式</span><br><span class=\"line\">    A. 通过参数的顺序</span><br><span class=\"line\">    &lt;constructor-arg index=&quot;0&quot;&gt;</span><br><span class=\"line\">      &lt;value&gt;张三&lt;/value&gt;</span><br><span class=\"line\">    &lt;/constructor-arg&gt;</span><br><span class=\"line\">    &lt;constructor-arg index=&quot;1&quot;&gt;</span><br><span class=\"line\">           &lt;value&gt;56&lt;/value&gt;</span><br><span class=\"line\">     &lt;/constructor-arg&gt; </span><br><span class=\"line\">    B. 通过参数的类型</span><br><span class=\"line\">    &lt;constructor-arg type=&quot;java.lang.Integer&quot;&gt;</span><br><span class=\"line\">              &lt;value&gt;56&lt;/value&gt;</span><br><span class=\"line\">    &lt;/constructor-arg&gt;</span><br><span class=\"line\">    &lt;constructor-arg type=&quot;java.lang.String&quot;&gt;</span><br><span class=\"line\">          &lt;value&gt;张三&lt;/value&gt;</span><br><span class=\"line\">    &lt;/constructor-arg&gt;</span><br><span class=\"line\">2. 使用属性setting方法进行注入</span><br><span class=\"line\"></span><br><span class=\"line\">    使用xml的注入方式：</span><br><span class=\"line\">    </span><br><span class=\"line\">    A.\t简单Bean的注入</span><br><span class=\"line\">    简单Bean包括两种类型：包装类型和String</span><br><span class=\"line\">    &lt;bean id=&quot;personService&quot;   class=&quot;com.itcast.bean.impl.PersonServiceImpl&quot;&gt;</span><br><span class=\"line\">    &lt;!-- 基本类型,string类型 --&gt;</span><br><span class=\"line\">    &lt;property name=&quot;age&quot; value=&quot;20&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;property name=&quot;name&quot; value=&quot;张无忌&quot;&gt;&lt;/property&gt;                        &lt;/bean&gt;</span><br><span class=\"line\">    B.\t引用其他Bean</span><br><span class=\"line\">    &lt;bean id=&quot;person&quot; class=&quot;com.itcast.bean.Person&quot; /&gt;</span><br><span class=\"line\">     &lt;bean id=&quot;personService&quot;  class=&quot;com.itcast.bean.impl.PersonServiceImpl&quot;&gt;</span><br><span class=\"line\">     &lt;property name=&quot;person&quot; ref=&quot;person&quot; /&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    装配list集合</span><br><span class=\"line\">    &lt;property name=&quot;lists&quot;&gt;</span><br><span class=\"line\">        &lt;list&gt;</span><br><span class=\"line\">            &lt;value&gt;list1&lt;/value&gt;</span><br><span class=\"line\">            &lt;value&gt;list2&lt;/value&gt;</span><br><span class=\"line\">            &lt;ref bean=&quot;person&quot;&gt;</span><br><span class=\"line\">        &lt;/list&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    装配set集合</span><br><span class=\"line\">    &lt;property name=&quot;sets&quot;&gt;</span><br><span class=\"line\">        &lt;set&gt;</span><br><span class=\"line\">            &lt;value&gt;set1&lt;/value&gt;</span><br><span class=\"line\">            &lt;value&gt;set2&lt;/value&gt;</span><br><span class=\"line\">            &lt;ref bean=&quot;person&quot;&gt;</span><br><span class=\"line\">        &lt;/set&gt;</span><br><span class=\"line\">    &lt;/property&gt;    </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    装配map集合</span><br><span class=\"line\">    &lt;property name=&quot;maps&quot;&gt;</span><br><span class=\"line\">             &lt;map&gt;</span><br><span class=\"line\">                  &lt;entry key=&quot;01&quot;&gt;</span><br><span class=\"line\">                          &lt;value&gt;map01&lt;/value&gt;</span><br><span class=\"line\">                  &lt;/entry&gt;</span><br><span class=\"line\">                  &lt;entry key=&quot;02&quot;&gt;</span><br><span class=\"line\">                          &lt;value&gt;map02&lt;/value&gt;</span><br><span class=\"line\">                  &lt;/entry&gt;\t</span><br><span class=\"line\">             &lt;/map&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/property&gt;       </span><br><span class=\"line\">    map中的&lt;entry&gt;的数值和&lt;list&gt;以及&lt;set&gt;的一样，可以使任何有效的属性元素，需要注意的是key值必须是String的。</span><br><span class=\"line\"></span><br><span class=\"line\">    装配properties</span><br><span class=\"line\">    &lt;property name=&quot;props&quot;&gt;</span><br><span class=\"line\">           &lt;props&gt;</span><br><span class=\"line\">             &lt;prop key=&quot;01&quot;&gt;prop1&lt;/prop&gt;</span><br><span class=\"line\">             &lt;prop key=&quot;02&quot;&gt;prop2&lt;/prop&gt;</span><br><span class=\"line\">           &lt;/props&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"12\">\n<li>注解<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">步骤：\t</span><br><span class=\"line\">A.\t在配置文件中，引入context命名空间</span><br><span class=\"line\">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class=\"line\">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class=\"line\">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class=\"line\">xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class=\"line\">http://www.springframework.org/schema/beans/spring- beans-2.5.xsd</span><br><span class=\"line\">http://www.springframework.org/schema/context</span><br><span class=\"line\">http://www.springframework.org/schema/context/spring-context-2.5.xsd&quot;&gt;</span><br><span class=\"line\">B.\t在配置文件中加入context:annotation-config标签</span><br><span class=\"line\">&lt;context:annotation-config/&gt; </span><br><span class=\"line\">这个配置隐式注册了多个对注释进行解析处理的处理器 </span><br><span class=\"line\">AutowiredAnnotationBeanPostProcessor，CommonAnnotationBeanPostProcessor，</span><br><span class=\"line\">PersistenceAnnotationBeanPostProcessor，RequiredAnnotationBeanPostProcessor </span><br><span class=\"line\">注： @Resource注解在spring安装目录的lib\\j2ee\\common-annotations.jar</span><br><span class=\"line\"></span><br><span class=\"line\">1. @Autowired</span><br><span class=\"line\">这两个注解的区别是：@Autowired 默认按类型装配，@Resource默认按名称装配，当找不到与名称匹配的bean才会按类型装配。 </span><br><span class=\"line\">2. @Autowired注解是按类型装配依赖对象，默认情况下它要求依赖对象必须存在，如果允许null值，可以设置它required属性为false。</span><br><span class=\"line\">3. @Qualifier</span><br><span class=\"line\">如果我们想使用按名称装配，可以结合@Qualifier注解一起使用。如下：</span><br><span class=\"line\">4. @Resource</span><br><span class=\"line\">- 1、\t@Resource注解和@Autowired一样，也可以标注在字段或属性的setter方法上.</span><br><span class=\"line\">- 2、\t@Resource注解默认按名称装配。</span><br><span class=\"line\">        名称可以通过@Resource的name属性指定，如果没有指定name属性，</span><br><span class=\"line\">        •\t当注解标注在字段上，即默认取字段的名称作为bean名称寻找依赖对象</span><br><span class=\"line\">        •\t当注解标注在属性的setter方法上，即默认取属性名作为bean名称寻找依赖对象。 </span><br><span class=\"line\">        •\t注意：如果没有指定name属性，并且按照默认的名称找不到依赖对象时， @Resource注解会回退到按类型装配。但一旦指定了name属性，就只能按名称装配了。 </span><br><span class=\"line\"></span><br><span class=\"line\">5. @PostConstruct</span><br><span class=\"line\">指定Bean的初始化方法</span><br><span class=\"line\">6. @PreDestory</span><br><span class=\"line\">指定Bean的销毁方法</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"13\">\n<li>扫描<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">前面的例子我们都是使用XML的bean定义来配置组件。在一个稍大的项目中，通常会有上百个组件，如果这些组件采用xml的bean定义来配置，显然会增加配置文件的体积，查找及维护起来也不太方便。spring2.5为我们引入了组件自动扫描机制，它可以在类路径底下寻找标注了@Component、@Service、@Controller、@Repository注解的类，并把这些类纳入进spring容器中管理。它的作用和在xml文件中使用bean节点配置组件是一样的。要使用自动扫描机制，我们需要打开以下配置信息:</span><br><span class=\"line\">1、引入context命名空间  需要在xml配置文件中配置以下信息： </span><br><span class=\"line\">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class=\"line\">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class=\"line\">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class=\"line\">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class=\"line\">           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</span><br><span class=\"line\">           http://www.springframework.org/schema/context</span><br><span class=\"line\">           http://www.springframework.org/schema/context/spring-context-2.5.xsd&quot;&gt;</span><br><span class=\"line\">          &lt;context:component-scan base-package=&quot;cn.itcast&quot;/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br><span class=\"line\">2、在配置文件中添加context:component-scan标签 </span><br><span class=\"line\">       &lt;context:component-scan base-package=&quot;cn.itcast&quot;/&gt;</span><br><span class=\"line\">       其中base-package为需要扫描的包(含子包)。</span><br><span class=\"line\">注:</span><br><span class=\"line\">1、在使用组件扫描元素时，AutowiredAnnotationBeanPostProcessor 和CommonAnnotationBeanPostProcessor会隐式地被包括进来。 也就是说，连个组件都会被自动检测并织入 - 所有这一切都不需要在XML中提供任何bean配置元数据。 </span><br><span class=\"line\">2、功能介绍</span><br><span class=\"line\">@Service用于标注业务层组件、</span><br><span class=\"line\">@Controller用于标注控制层组件（如struts中的action）、</span><br><span class=\"line\">@Repository用于标注数据访问组件，即DAO组件。</span><br><span class=\"line\">而@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n</ul>\n<ol start=\"14\">\n<li>Spring中的继承<br><code>`</code><bean id=\"student\" class=\"cn...\" parent=\"person\">\n\n</bean></li>\n</ol>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Spring基本功能详解\"><a href=\"#1-Spring基本功能详解\" class=\"headerlink\" title=\"1.Spring基本功能详解\"></a>1.Spring基本功能详解</h2><ul>\n<li><ol>\n<li>SpringIOC<br>Spring的控制反转：把对象的创建、初始化、销毁等工作交给spring容器来做。由spring容器控制对象的生命周期。<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A.\t启动spring容器</span><br><span class=\"line\">1、\t在类路径下寻找配置文件来实例化容器 </span><br><span class=\"line\">ApplicationContext ctx = new ClassPathXmlApplicationContext(new String[]&#123;&quot;beans.xml&quot;&#125;);可以在整个类路径中寻找xml文件</span><br><span class=\"line\">* 通过这种方式加载。需要将spring的配置文件放到当前项目的classpath路径下</span><br><span class=\"line\">*  classpath路径指的是当前项目的src目录，该目录是java源文件的存放位置。 </span><br><span class=\"line\">2、\t在文件系统路径下寻找配置文件来实例化容器 </span><br><span class=\"line\">ApplicationContext ctx = new FileSystemXmlApplicationContext(new String[]&#123;“d:\\\\beans.xml“&#125;);Spring的配置文件可以指定多个，可以通过String数组传入。</span><br><span class=\"line\">注：经常用第一种方法启动容器</span><br><span class=\"line\">B.\t从spring容器中提取对象</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"2\">\n<li>别名<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans&gt;</span><br><span class=\"line\">\t&lt;alias name=&quot;person&quot; alias=&quot;p&quot;/&gt;</span><br><span class=\"line\">\t&lt;bean name=&quot;person&quot; class=&quot;cn.itcast.aliasspring.Person&quot;/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br><span class=\"line\">通过这样的配置，可以达到在一个地方命名，在多个地方使用不同的名字的效果。</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"3\">\n<li>Spring容器内部对象<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-  1.创建对象的方式</span><br><span class=\"line\">   -  无参构造函数</span><br><span class=\"line\">   &lt;bean id=“personService&quot; class=&quot;cn.itcast.bean.impl.PersonServiceImpl&quot;/&gt;</span><br><span class=\"line\">   -  静态工厂</span><br><span class=\"line\">    &lt;bean id=&quot;personService&quot;  class=&quot;com.itcast.factory.PersonServiceFactory&quot;    factory-method=&quot;createPersonService&quot; /&gt;</span><br><span class=\"line\">    public class PersonServiceFactory &#123;</span><br><span class=\"line\">          public  static PersonService createPersonService()&#123;</span><br><span class=\"line\">                return new PersonServiceImpl();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    -  实例工厂</span><br><span class=\"line\">    记住概念即可</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"4\">\n<li>singleton(默认值) <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在每个Spring IoC容器中一个bean定义只有一个对象实例(共享)。</span><br><span class=\"line\">默认情况下会在容器启动时初始化bean，但我们可以指定Bean节点的lazy-init=“true”来延迟初始化bean，这时候，只有第一次获取bean会才初始化bean。如：</span><br><span class=\"line\">&lt;beans default-lazy-init=&quot;true“ ...&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"5\">\n<li>prototype(原型；样机；典型)<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">允许bean可以被多次实例化(使用一次就创建一个实例) . Spring不能对一个prototype bean的整个生命周期负责.这就意味着清楚prototype作用域的对象并释放任何prototype bean所持有的昂贵资源都是客户端的责任。</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"6\">\n<li>Request<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在一次http请求中,一个bean定义对应一个实例,即每次http请求将会有各自的bean实例, 他们依据某个bean定义创建而成.该作用域仅在基于web的Spring ApplicationContext情形下有效</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"7\">\n<li>Session<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在一次http请求中,一个bean定义对应一个实例,该作用域仅在基于web的Spring ApplicationContext情形下有效</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"8\">\n<li>Global session<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在Global session中,一个bean定义对应一个实例,仅在使用portlet context时有效.该作用域仅在基于web的Spring ApplicationContext情形下有效</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"9\">\n<li>初始化bean时机<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Spring默认在启动时将所有singleton bean提前进行实例化。提前实例化意味着作为初始化的一部分，ApplicationContext会自动创建并配置所有的singleton bean.通常情况下这是件好事。因为这样在配置中有任何错误能立即发现。</span><br><span class=\"line\">Lazy-init=”true or  false”</span><br><span class=\"line\">Lazy-init 为false,spring容器将在启动的时候报错（比较好的一种方式）</span><br><span class=\"line\">Lazy-init 为true,spring容器将在调用该类的时候出错。</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"10\">\n<li>init,destory<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> Spring初始化bean或销毁bean时，有时需要作一些处理工作，因此spring可以在创建和拆卸bean的时候调用bean的两个生命周期方法。</span><br><span class=\"line\">   &lt;bean id=“foo” class=“...Foo”</span><br><span class=\"line\">            init-method=“setup”</span><br><span class=\"line\">            destory-method=“teardown”/&gt;</span><br><span class=\"line\">当foo被载入到Spring容器中时调用init-method方法。当foo从容器中删除时调用destory-method（scope = singleton有效）</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"11\">\n<li>依赖注入(DI)<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 使用构造器注入</span><br><span class=\"line\">    使用xml注入方式</span><br><span class=\"line\">    A. 通过参数的顺序</span><br><span class=\"line\">    &lt;constructor-arg index=&quot;0&quot;&gt;</span><br><span class=\"line\">      &lt;value&gt;张三&lt;/value&gt;</span><br><span class=\"line\">    &lt;/constructor-arg&gt;</span><br><span class=\"line\">    &lt;constructor-arg index=&quot;1&quot;&gt;</span><br><span class=\"line\">           &lt;value&gt;56&lt;/value&gt;</span><br><span class=\"line\">     &lt;/constructor-arg&gt; </span><br><span class=\"line\">    B. 通过参数的类型</span><br><span class=\"line\">    &lt;constructor-arg type=&quot;java.lang.Integer&quot;&gt;</span><br><span class=\"line\">              &lt;value&gt;56&lt;/value&gt;</span><br><span class=\"line\">    &lt;/constructor-arg&gt;</span><br><span class=\"line\">    &lt;constructor-arg type=&quot;java.lang.String&quot;&gt;</span><br><span class=\"line\">          &lt;value&gt;张三&lt;/value&gt;</span><br><span class=\"line\">    &lt;/constructor-arg&gt;</span><br><span class=\"line\">2. 使用属性setting方法进行注入</span><br><span class=\"line\"></span><br><span class=\"line\">    使用xml的注入方式：</span><br><span class=\"line\">    </span><br><span class=\"line\">    A.\t简单Bean的注入</span><br><span class=\"line\">    简单Bean包括两种类型：包装类型和String</span><br><span class=\"line\">    &lt;bean id=&quot;personService&quot;   class=&quot;com.itcast.bean.impl.PersonServiceImpl&quot;&gt;</span><br><span class=\"line\">    &lt;!-- 基本类型,string类型 --&gt;</span><br><span class=\"line\">    &lt;property name=&quot;age&quot; value=&quot;20&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;property name=&quot;name&quot; value=&quot;张无忌&quot;&gt;&lt;/property&gt;                        &lt;/bean&gt;</span><br><span class=\"line\">    B.\t引用其他Bean</span><br><span class=\"line\">    &lt;bean id=&quot;person&quot; class=&quot;com.itcast.bean.Person&quot; /&gt;</span><br><span class=\"line\">     &lt;bean id=&quot;personService&quot;  class=&quot;com.itcast.bean.impl.PersonServiceImpl&quot;&gt;</span><br><span class=\"line\">     &lt;property name=&quot;person&quot; ref=&quot;person&quot; /&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    装配list集合</span><br><span class=\"line\">    &lt;property name=&quot;lists&quot;&gt;</span><br><span class=\"line\">        &lt;list&gt;</span><br><span class=\"line\">            &lt;value&gt;list1&lt;/value&gt;</span><br><span class=\"line\">            &lt;value&gt;list2&lt;/value&gt;</span><br><span class=\"line\">            &lt;ref bean=&quot;person&quot;&gt;</span><br><span class=\"line\">        &lt;/list&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    装配set集合</span><br><span class=\"line\">    &lt;property name=&quot;sets&quot;&gt;</span><br><span class=\"line\">        &lt;set&gt;</span><br><span class=\"line\">            &lt;value&gt;set1&lt;/value&gt;</span><br><span class=\"line\">            &lt;value&gt;set2&lt;/value&gt;</span><br><span class=\"line\">            &lt;ref bean=&quot;person&quot;&gt;</span><br><span class=\"line\">        &lt;/set&gt;</span><br><span class=\"line\">    &lt;/property&gt;    </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    装配map集合</span><br><span class=\"line\">    &lt;property name=&quot;maps&quot;&gt;</span><br><span class=\"line\">             &lt;map&gt;</span><br><span class=\"line\">                  &lt;entry key=&quot;01&quot;&gt;</span><br><span class=\"line\">                          &lt;value&gt;map01&lt;/value&gt;</span><br><span class=\"line\">                  &lt;/entry&gt;</span><br><span class=\"line\">                  &lt;entry key=&quot;02&quot;&gt;</span><br><span class=\"line\">                          &lt;value&gt;map02&lt;/value&gt;</span><br><span class=\"line\">                  &lt;/entry&gt;\t</span><br><span class=\"line\">             &lt;/map&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/property&gt;       </span><br><span class=\"line\">    map中的&lt;entry&gt;的数值和&lt;list&gt;以及&lt;set&gt;的一样，可以使任何有效的属性元素，需要注意的是key值必须是String的。</span><br><span class=\"line\"></span><br><span class=\"line\">    装配properties</span><br><span class=\"line\">    &lt;property name=&quot;props&quot;&gt;</span><br><span class=\"line\">           &lt;props&gt;</span><br><span class=\"line\">             &lt;prop key=&quot;01&quot;&gt;prop1&lt;/prop&gt;</span><br><span class=\"line\">             &lt;prop key=&quot;02&quot;&gt;prop2&lt;/prop&gt;</span><br><span class=\"line\">           &lt;/props&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"12\">\n<li>注解<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">步骤：\t</span><br><span class=\"line\">A.\t在配置文件中，引入context命名空间</span><br><span class=\"line\">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class=\"line\">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class=\"line\">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class=\"line\">xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class=\"line\">http://www.springframework.org/schema/beans/spring- beans-2.5.xsd</span><br><span class=\"line\">http://www.springframework.org/schema/context</span><br><span class=\"line\">http://www.springframework.org/schema/context/spring-context-2.5.xsd&quot;&gt;</span><br><span class=\"line\">B.\t在配置文件中加入context:annotation-config标签</span><br><span class=\"line\">&lt;context:annotation-config/&gt; </span><br><span class=\"line\">这个配置隐式注册了多个对注释进行解析处理的处理器 </span><br><span class=\"line\">AutowiredAnnotationBeanPostProcessor，CommonAnnotationBeanPostProcessor，</span><br><span class=\"line\">PersistenceAnnotationBeanPostProcessor，RequiredAnnotationBeanPostProcessor </span><br><span class=\"line\">注： @Resource注解在spring安装目录的lib\\j2ee\\common-annotations.jar</span><br><span class=\"line\"></span><br><span class=\"line\">1. @Autowired</span><br><span class=\"line\">这两个注解的区别是：@Autowired 默认按类型装配，@Resource默认按名称装配，当找不到与名称匹配的bean才会按类型装配。 </span><br><span class=\"line\">2. @Autowired注解是按类型装配依赖对象，默认情况下它要求依赖对象必须存在，如果允许null值，可以设置它required属性为false。</span><br><span class=\"line\">3. @Qualifier</span><br><span class=\"line\">如果我们想使用按名称装配，可以结合@Qualifier注解一起使用。如下：</span><br><span class=\"line\">4. @Resource</span><br><span class=\"line\">- 1、\t@Resource注解和@Autowired一样，也可以标注在字段或属性的setter方法上.</span><br><span class=\"line\">- 2、\t@Resource注解默认按名称装配。</span><br><span class=\"line\">        名称可以通过@Resource的name属性指定，如果没有指定name属性，</span><br><span class=\"line\">        •\t当注解标注在字段上，即默认取字段的名称作为bean名称寻找依赖对象</span><br><span class=\"line\">        •\t当注解标注在属性的setter方法上，即默认取属性名作为bean名称寻找依赖对象。 </span><br><span class=\"line\">        •\t注意：如果没有指定name属性，并且按照默认的名称找不到依赖对象时， @Resource注解会回退到按类型装配。但一旦指定了name属性，就只能按名称装配了。 </span><br><span class=\"line\"></span><br><span class=\"line\">5. @PostConstruct</span><br><span class=\"line\">指定Bean的初始化方法</span><br><span class=\"line\">6. @PreDestory</span><br><span class=\"line\">指定Bean的销毁方法</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n<li><ol start=\"13\">\n<li>扫描<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">前面的例子我们都是使用XML的bean定义来配置组件。在一个稍大的项目中，通常会有上百个组件，如果这些组件采用xml的bean定义来配置，显然会增加配置文件的体积，查找及维护起来也不太方便。spring2.5为我们引入了组件自动扫描机制，它可以在类路径底下寻找标注了@Component、@Service、@Controller、@Repository注解的类，并把这些类纳入进spring容器中管理。它的作用和在xml文件中使用bean节点配置组件是一样的。要使用自动扫描机制，我们需要打开以下配置信息:</span><br><span class=\"line\">1、引入context命名空间  需要在xml配置文件中配置以下信息： </span><br><span class=\"line\">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class=\"line\">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class=\"line\">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class=\"line\">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class=\"line\">           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</span><br><span class=\"line\">           http://www.springframework.org/schema/context</span><br><span class=\"line\">           http://www.springframework.org/schema/context/spring-context-2.5.xsd&quot;&gt;</span><br><span class=\"line\">          &lt;context:component-scan base-package=&quot;cn.itcast&quot;/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br><span class=\"line\">2、在配置文件中添加context:component-scan标签 </span><br><span class=\"line\">       &lt;context:component-scan base-package=&quot;cn.itcast&quot;/&gt;</span><br><span class=\"line\">       其中base-package为需要扫描的包(含子包)。</span><br><span class=\"line\">注:</span><br><span class=\"line\">1、在使用组件扫描元素时，AutowiredAnnotationBeanPostProcessor 和CommonAnnotationBeanPostProcessor会隐式地被包括进来。 也就是说，连个组件都会被自动检测并织入 - 所有这一切都不需要在XML中提供任何bean配置元数据。 </span><br><span class=\"line\">2、功能介绍</span><br><span class=\"line\">@Service用于标注业务层组件、</span><br><span class=\"line\">@Controller用于标注控制层组件（如struts中的action）、</span><br><span class=\"line\">@Repository用于标注数据访问组件，即DAO组件。</span><br><span class=\"line\">而@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n</ul>\n<ol start=\"14\">\n<li>Spring中的继承<br><code>`</code><bean id=\"student\" class=\"cn...\" parent=\"person\">\n\n</bean></li>\n</ol>\n<hr>\n"},{"title":"2017.10.28 Spring学习","date":"2017-10-27T23:55:58.000Z","_content":"注解方式注入\n```\n对于class\n@Component(\"name\")\n=\n<bean id=\"name\" class=\"...Student\">\n@Component\n<bean id=\"student\" class=\"...Student\">\n对于方法\n@Resource\n```\nIoC:把一个类放到Spring容器中, Spring为期创建对象\n创建方式:默认构造函数,静态工程,实例工厂\n默认情况下是单例\n启动单例对象是在容器启动时创建\ninit,destory启动和销毁时使用的方法\nDI给属性赋值,set方法,还可以用构造器,还可以用Resource,Component注入\n---\n注解的继承\n\n---\n静态代理模式:\n- 1.在该系统中,有多少dao就要多少proxy\n- 2.如果目标接口有方法的改动,proxy也得做相应的修改\n\n---\n\n-  导入目标类\n-  导入切面\n-  进行aop的配置\n```\n<bean id=\"personDao\" class=\"com.itheima11.spring.aop.xml.transaction.PersonDaoImpl\"></bean>\n<bean id=\"transaction\" class=\"com.itheima11.spring.aop.xml.transaction.Transaction\"></bean>\n\n\n<aop:config>\n   <!-- \n   \t切入点表达式\n   \t  符合切入点表达式的类要产生代理对象\n   \t  expression就是切入点表达式\n   \t  id 标示符\n    -->\n   <aop:pointcut \n   \texpression=\"execution(* com.itheima11.spring.aop.xml.transaction.PersonDaoImpl.*(..))\" \n   \tid=\"perform\"/>\n   <!-- \n   \tref属性指向切面\n    -->\n   <aop:aspect ref=\"transaction\">\n   \t<!-- \n   \t\t前置通知\n   \t\t   在目标方法执行之前\n   \t -->\n   \t<aop:before method=\"beginTransaction\" pointcut-ref=\"perform\"/>\n   \t<!-- \n   \t\t后置通知\n   \t -->\n   \t<aop:after-returning method=\"commit\" pointcut-ref=\"perform\"/>\n   </aop:aspect>\n</aop:config>\n ```  \n\n```\n只有符合切入点, 才让通知和目标方法结合在一起\nAOP概念\n切面: \n通知:切面中的方法\n连接点:客户端调用哪个方法,那个方法就是连接点\n切入点:if判断句,如下;只有符合切入点,才让通知和目标方法结合在一起;符合切入点表达式的类要产生代理对象\n```\nif(method.getName().equal(\"savePerson\"){\n    this.transaction.beginTransaction();\n    method.invoke(this.target, args);\n    this.transaction.commit();\n}else{\n    method.invoke(this.target, args);\n}\n```\n目标对象:\nAOP对象:代理对象\n织入:形成代理对象代理方法的过程就叫织入\n代理对象的方法=通知+目标对象\n连接点:就是目标接口中的一个方法\n拦截器中invoke方法就是代理对象的方法\nexecution( * com.itheima.spring..service.impl.*.*(..) ))在sping包及子包,知道service包出现 service下的impl包中所有类下所有方法\n有切入点表达式,就很容易定位到类;\nRef属性指向切面;\n```\n导入目标类\n导入切面\n进行aop配置\n\n```\n<bean id=\"personDao\" class=\"com...PersonDaoImpl\"></Bean>\n<bean id=\"transaction\" class=\"com..Transaction\"></bean>\n<aop:config>\n    <aop:pointcut\n    expression=\"execution(* com.ithetma.spring.aop.xml.transaction.PersonDaoImpl.*(..))\"  id=\"perform\"/>\n    <!--ref 指向切面-->\n    <aop:aspect ref=\"transaction\">\n        <aop:before method=\"beginTransaction\" pointcut-ref=\"perform\"/>\n        <aop:after-returning method=\"commit\" \n        pointcut-ref=\"perform\"/>\n    </aop aspect>\n</aop:config>\n```\nintercept:拦截\ninvocation:文件调取；行使","source":"_posts/2017.10.28 Spring学习.md","raw":"---\ntitle: 2017.10.28 Spring学习\ndate: 2017-10-28 07:55:58\ntags:\n---\n注解方式注入\n```\n对于class\n@Component(\"name\")\n=\n<bean id=\"name\" class=\"...Student\">\n@Component\n<bean id=\"student\" class=\"...Student\">\n对于方法\n@Resource\n```\nIoC:把一个类放到Spring容器中, Spring为期创建对象\n创建方式:默认构造函数,静态工程,实例工厂\n默认情况下是单例\n启动单例对象是在容器启动时创建\ninit,destory启动和销毁时使用的方法\nDI给属性赋值,set方法,还可以用构造器,还可以用Resource,Component注入\n---\n注解的继承\n\n---\n静态代理模式:\n- 1.在该系统中,有多少dao就要多少proxy\n- 2.如果目标接口有方法的改动,proxy也得做相应的修改\n\n---\n\n-  导入目标类\n-  导入切面\n-  进行aop的配置\n```\n<bean id=\"personDao\" class=\"com.itheima11.spring.aop.xml.transaction.PersonDaoImpl\"></bean>\n<bean id=\"transaction\" class=\"com.itheima11.spring.aop.xml.transaction.Transaction\"></bean>\n\n\n<aop:config>\n   <!-- \n   \t切入点表达式\n   \t  符合切入点表达式的类要产生代理对象\n   \t  expression就是切入点表达式\n   \t  id 标示符\n    -->\n   <aop:pointcut \n   \texpression=\"execution(* com.itheima11.spring.aop.xml.transaction.PersonDaoImpl.*(..))\" \n   \tid=\"perform\"/>\n   <!-- \n   \tref属性指向切面\n    -->\n   <aop:aspect ref=\"transaction\">\n   \t<!-- \n   \t\t前置通知\n   \t\t   在目标方法执行之前\n   \t -->\n   \t<aop:before method=\"beginTransaction\" pointcut-ref=\"perform\"/>\n   \t<!-- \n   \t\t后置通知\n   \t -->\n   \t<aop:after-returning method=\"commit\" pointcut-ref=\"perform\"/>\n   </aop:aspect>\n</aop:config>\n ```  \n\n```\n只有符合切入点, 才让通知和目标方法结合在一起\nAOP概念\n切面: \n通知:切面中的方法\n连接点:客户端调用哪个方法,那个方法就是连接点\n切入点:if判断句,如下;只有符合切入点,才让通知和目标方法结合在一起;符合切入点表达式的类要产生代理对象\n```\nif(method.getName().equal(\"savePerson\"){\n    this.transaction.beginTransaction();\n    method.invoke(this.target, args);\n    this.transaction.commit();\n}else{\n    method.invoke(this.target, args);\n}\n```\n目标对象:\nAOP对象:代理对象\n织入:形成代理对象代理方法的过程就叫织入\n代理对象的方法=通知+目标对象\n连接点:就是目标接口中的一个方法\n拦截器中invoke方法就是代理对象的方法\nexecution( * com.itheima.spring..service.impl.*.*(..) ))在sping包及子包,知道service包出现 service下的impl包中所有类下所有方法\n有切入点表达式,就很容易定位到类;\nRef属性指向切面;\n```\n导入目标类\n导入切面\n进行aop配置\n\n```\n<bean id=\"personDao\" class=\"com...PersonDaoImpl\"></Bean>\n<bean id=\"transaction\" class=\"com..Transaction\"></bean>\n<aop:config>\n    <aop:pointcut\n    expression=\"execution(* com.ithetma.spring.aop.xml.transaction.PersonDaoImpl.*(..))\"  id=\"perform\"/>\n    <!--ref 指向切面-->\n    <aop:aspect ref=\"transaction\">\n        <aop:before method=\"beginTransaction\" pointcut-ref=\"perform\"/>\n        <aop:after-returning method=\"commit\" \n        pointcut-ref=\"perform\"/>\n    </aop aspect>\n</aop:config>\n```\nintercept:拦截\ninvocation:文件调取；行使","slug":"Spring学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hz9y000bdcyut9xs5ewp","content":"<p>注解方式注入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对于class</span><br><span class=\"line\">@Component(&quot;name&quot;)</span><br><span class=\"line\">=</span><br><span class=\"line\">&lt;bean id=&quot;name&quot; class=&quot;...Student&quot;&gt;</span><br><span class=\"line\">@Component</span><br><span class=\"line\">&lt;bean id=&quot;student&quot; class=&quot;...Student&quot;&gt;</span><br><span class=\"line\">对于方法</span><br><span class=\"line\">@Resource</span><br></pre></td></tr></table></figure></p>\n<p>IoC:把一个类放到Spring容器中, Spring为期创建对象<br>创建方式:默认构造函数,静态工程,实例工厂<br>默认情况下是单例<br>启动单例对象是在容器启动时创建<br>init,destory启动和销毁时使用的方法</p>\n<h2 id=\"DI给属性赋值-set方法-还可以用构造器-还可以用Resource-Component注入\"><a href=\"#DI给属性赋值-set方法-还可以用构造器-还可以用Resource-Component注入\" class=\"headerlink\" title=\"DI给属性赋值,set方法,还可以用构造器,还可以用Resource,Component注入\"></a>DI给属性赋值,set方法,还可以用构造器,还可以用Resource,Component注入</h2><p>注解的继承</p>\n<hr>\n<p>静态代理模式:</p>\n<ul>\n<li>1.在该系统中,有多少dao就要多少proxy</li>\n<li>2.如果目标接口有方法的改动,proxy也得做相应的修改</li>\n</ul>\n<hr>\n<ul>\n<li>导入目标类</li>\n<li>导入切面</li>\n<li>进行aop的配置<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=&quot;personDao&quot; class=&quot;com.itheima11.spring.aop.xml.transaction.PersonDaoImpl&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\">&lt;bean id=&quot;transaction&quot; class=&quot;com.itheima11.spring.aop.xml.transaction.Transaction&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;aop:config&gt;</span><br><span class=\"line\">   &lt;!-- </span><br><span class=\"line\">   \t切入点表达式</span><br><span class=\"line\">   \t  符合切入点表达式的类要产生代理对象</span><br><span class=\"line\">   \t  expression就是切入点表达式</span><br><span class=\"line\">   \t  id 标示符</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">   &lt;aop:pointcut </span><br><span class=\"line\">   \texpression=&quot;execution(* com.itheima11.spring.aop.xml.transaction.PersonDaoImpl.*(..))&quot; </span><br><span class=\"line\">   \tid=&quot;perform&quot;/&gt;</span><br><span class=\"line\">   &lt;!-- </span><br><span class=\"line\">   \tref属性指向切面</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">   &lt;aop:aspect ref=&quot;transaction&quot;&gt;</span><br><span class=\"line\">   \t&lt;!-- </span><br><span class=\"line\">   \t\t前置通知</span><br><span class=\"line\">   \t\t   在目标方法执行之前</span><br><span class=\"line\">   \t --&gt;</span><br><span class=\"line\">   \t&lt;aop:before method=&quot;beginTransaction&quot; pointcut-ref=&quot;perform&quot;/&gt;</span><br><span class=\"line\">   \t&lt;!-- </span><br><span class=\"line\">   \t\t后置通知</span><br><span class=\"line\">   \t --&gt;</span><br><span class=\"line\">   \t&lt;aop:after-returning method=&quot;commit&quot; pointcut-ref=&quot;perform&quot;/&gt;</span><br><span class=\"line\">   &lt;/aop:aspect&gt;</span><br><span class=\"line\">&lt;/aop:config&gt;</span><br><span class=\"line\"> ```</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>只有符合切入点, 才让通知和目标方法结合在一起<br>AOP概念<br>切面:<br>通知:切面中的方法<br>连接点:客户端调用哪个方法,那个方法就是连接点<br>切入点:if判断句,如下;只有符合切入点,才让通知和目标方法结合在一起;符合切入点表达式的类要产生代理对象<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if(method.getName().equal(&quot;savePerson&quot;)&#123;</span><br><span class=\"line\">    this.transaction.beginTransaction();</span><br><span class=\"line\">    method.invoke(this.target, args);</span><br><span class=\"line\">    this.transaction.commit();</span><br><span class=\"line\">&#125;else&#123;</span><br><span class=\"line\">    method.invoke(this.target, args);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>目标对象:<br>AOP对象:代理对象<br>织入:形成代理对象代理方法的过程就叫织入<br>代理对象的方法=通知+目标对象<br>连接点:就是目标接口中的一个方法<br>拦截器中invoke方法就是代理对象的方法<br>execution( <em> com.itheima.spring..service.impl.</em>.*(..) ))在sping包及子包,知道service包出现 service下的impl包中所有类下所有方法<br>有切入点表达式,就很容易定位到类;<br>Ref属性指向切面;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">导入目标类</span><br><span class=\"line\">导入切面</span><br><span class=\"line\">进行aop配置</span><br></pre></td></tr></table></figure></p>\n<p><bean id=\"personDao\" class=\"com...PersonDaoImpl\"></bean></p>\n<p><bean id=\"transaction\" class=\"com..Transaction\"></bean><br><a href=\"aop:config\" target=\"_blank\" rel=\"noopener\">aop:config</a><br>    &lt;aop:pointcut<br>    expression=”execution(<em> com.ithetma.spring.aop.xml.transaction.PersonDaoImpl.</em>(..))”  id=”perform”/&gt;<br>    <!--ref 指向切面--><br>    &lt;aop:aspect ref=”transaction”&gt;<br>        &lt;aop:before method=”beginTransaction” pointcut-ref=”perform”/&gt;<br>        &lt;aop:after-returning method=”commit”<br>        pointcut-ref=”perform”/&gt;<br>    <br>&lt;/aop:config&gt;<br><code>`</code><br>intercept:拦截<br>invocation:文件调取；行使</p>\n","site":{"data":{}},"excerpt":"","more":"<p>注解方式注入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对于class</span><br><span class=\"line\">@Component(&quot;name&quot;)</span><br><span class=\"line\">=</span><br><span class=\"line\">&lt;bean id=&quot;name&quot; class=&quot;...Student&quot;&gt;</span><br><span class=\"line\">@Component</span><br><span class=\"line\">&lt;bean id=&quot;student&quot; class=&quot;...Student&quot;&gt;</span><br><span class=\"line\">对于方法</span><br><span class=\"line\">@Resource</span><br></pre></td></tr></table></figure></p>\n<p>IoC:把一个类放到Spring容器中, Spring为期创建对象<br>创建方式:默认构造函数,静态工程,实例工厂<br>默认情况下是单例<br>启动单例对象是在容器启动时创建<br>init,destory启动和销毁时使用的方法</p>\n<h2 id=\"DI给属性赋值-set方法-还可以用构造器-还可以用Resource-Component注入\"><a href=\"#DI给属性赋值-set方法-还可以用构造器-还可以用Resource-Component注入\" class=\"headerlink\" title=\"DI给属性赋值,set方法,还可以用构造器,还可以用Resource,Component注入\"></a>DI给属性赋值,set方法,还可以用构造器,还可以用Resource,Component注入</h2><p>注解的继承</p>\n<hr>\n<p>静态代理模式:</p>\n<ul>\n<li>1.在该系统中,有多少dao就要多少proxy</li>\n<li>2.如果目标接口有方法的改动,proxy也得做相应的修改</li>\n</ul>\n<hr>\n<ul>\n<li>导入目标类</li>\n<li>导入切面</li>\n<li>进行aop的配置<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=&quot;personDao&quot; class=&quot;com.itheima11.spring.aop.xml.transaction.PersonDaoImpl&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\">&lt;bean id=&quot;transaction&quot; class=&quot;com.itheima11.spring.aop.xml.transaction.Transaction&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;aop:config&gt;</span><br><span class=\"line\">   &lt;!-- </span><br><span class=\"line\">   \t切入点表达式</span><br><span class=\"line\">   \t  符合切入点表达式的类要产生代理对象</span><br><span class=\"line\">   \t  expression就是切入点表达式</span><br><span class=\"line\">   \t  id 标示符</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">   &lt;aop:pointcut </span><br><span class=\"line\">   \texpression=&quot;execution(* com.itheima11.spring.aop.xml.transaction.PersonDaoImpl.*(..))&quot; </span><br><span class=\"line\">   \tid=&quot;perform&quot;/&gt;</span><br><span class=\"line\">   &lt;!-- </span><br><span class=\"line\">   \tref属性指向切面</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">   &lt;aop:aspect ref=&quot;transaction&quot;&gt;</span><br><span class=\"line\">   \t&lt;!-- </span><br><span class=\"line\">   \t\t前置通知</span><br><span class=\"line\">   \t\t   在目标方法执行之前</span><br><span class=\"line\">   \t --&gt;</span><br><span class=\"line\">   \t&lt;aop:before method=&quot;beginTransaction&quot; pointcut-ref=&quot;perform&quot;/&gt;</span><br><span class=\"line\">   \t&lt;!-- </span><br><span class=\"line\">   \t\t后置通知</span><br><span class=\"line\">   \t --&gt;</span><br><span class=\"line\">   \t&lt;aop:after-returning method=&quot;commit&quot; pointcut-ref=&quot;perform&quot;/&gt;</span><br><span class=\"line\">   &lt;/aop:aspect&gt;</span><br><span class=\"line\">&lt;/aop:config&gt;</span><br><span class=\"line\"> ```</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>只有符合切入点, 才让通知和目标方法结合在一起<br>AOP概念<br>切面:<br>通知:切面中的方法<br>连接点:客户端调用哪个方法,那个方法就是连接点<br>切入点:if判断句,如下;只有符合切入点,才让通知和目标方法结合在一起;符合切入点表达式的类要产生代理对象<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if(method.getName().equal(&quot;savePerson&quot;)&#123;</span><br><span class=\"line\">    this.transaction.beginTransaction();</span><br><span class=\"line\">    method.invoke(this.target, args);</span><br><span class=\"line\">    this.transaction.commit();</span><br><span class=\"line\">&#125;else&#123;</span><br><span class=\"line\">    method.invoke(this.target, args);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>目标对象:<br>AOP对象:代理对象<br>织入:形成代理对象代理方法的过程就叫织入<br>代理对象的方法=通知+目标对象<br>连接点:就是目标接口中的一个方法<br>拦截器中invoke方法就是代理对象的方法<br>execution( <em> com.itheima.spring..service.impl.</em>.*(..) ))在sping包及子包,知道service包出现 service下的impl包中所有类下所有方法<br>有切入点表达式,就很容易定位到类;<br>Ref属性指向切面;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">导入目标类</span><br><span class=\"line\">导入切面</span><br><span class=\"line\">进行aop配置</span><br></pre></td></tr></table></figure></p>\n<p><bean id=\"personDao\" class=\"com...PersonDaoImpl\"></bean></p>\n<p><bean id=\"transaction\" class=\"com..Transaction\"></bean><br><a href=\"aop:config\" target=\"_blank\" rel=\"noopener\">aop:config</a><br>    &lt;aop:pointcut<br>    expression=”execution(<em> com.ithetma.spring.aop.xml.transaction.PersonDaoImpl.</em>(..))”  id=”perform”/&gt;<br>    <!--ref 指向切面--><br>    &lt;aop:aspect ref=”transaction”&gt;<br>        &lt;aop:before method=”beginTransaction” pointcut-ref=”perform”/&gt;<br>        &lt;aop:after-returning method=”commit”<br>        pointcut-ref=”perform”/&gt;<br>    <br>&lt;/aop:config&gt;<br><code>`</code><br>intercept:拦截<br>invocation:文件调取；行使</p>\n"},{"title":"2017.10.29 Spring,Struts学习","date":"2017-10-28T23:55:58.000Z","_content":"使用表达式配置切入点:\n常用的表达式:\nexecution(\"* cn.itcast.aop.Book.add(..)\")\nexecution(\"* cn.itcast.aop.Book.*(..)\")\nexecution(\"* *.*(..)\")\n---\n```\n配置切面的方法:\n<aop:config>\n    <aop:poingcut id=\"pointcut1\" expresson=\"cn...(此处为需要添加前置方法的方法)\"></aop:pointcut>\n    <aop:aspect ref=\"beforeMethod\"(此处为上面配置过的目标类)>\n        <aop:before method=\"say\"(此处为要执行那个前置方法) pointcut-ref=\"pointcut1\"></aop:before>\n    </aop:aspect>\n</aop:config>\n```\n```\n配置环绕的方法\n<aop:before method=\"before1\" pointcut-ref=\"pointcut1\"/>\n<aop:after-returning method=\"after1\" pointcut-ref=\"pointcut1\"/>\n<aop:around method=\"around\" pointcut-ref=\"pointcut1\"/>\n\npublic void around1(ProceedingJoinPoint proceedingJoinPoint)  throws Throwable{\n    sout(\"方法之前\");\n    proceedingJoinPoint.proceed();\n    sout(\"方法之后\");\n}\n\n```\n导入log4j\nlog4j.properties放到src目录下面\n设置日志级别\nlog4j.rootLogger=info , stdout 基本信息级别\nlog4j.rootLogger=debug , stdout详细信息级别\n---\n1. Struts2框架应用在javaee中web层\n2. Struts2框架在Struts1和webwork基础上发展的全新框架\n3. struts可以解决的问题:\n---\n配置:\n```\n<struts>\n    <package name=\"hellodemo\" extends=\"struts-default\" namesapce=\"/\">\n        <action name=\"hello\" class=\"cn.itcast.action.HelloAction\">\n            <result name=\"ok\">/hellp.jsp</result>\n        </action>\n    </package>\n</struts>\n\n\n访问路径:127.0.0.1/struts2_day01/hello.action\n配置过滤器:\nweb.xml中配置\n<filter>\n    <filter-name>strut2\n    <filter-class></filter-class>\n</filter>\n<filter-mapping>\n    <filter-name>structs2</filter-name>\n    <url-pattern>/*</url-pattern>\n</filter-mapping>\n</filter>\n\nresult标签:\n根据action的方法返回值,配置到不同的路径里面\n<result name=\"ok\" type=\"\">/hello.jsp</result>\n默认转发,地址栏不变\n```\n分模块开发:引入xml文件,开发中最常见的方式\n```\n<include file=\"cn/itcast/action/hello.xml\"></include>\n```\naction的编写方式有三种\n```\n第一种:创建普通类,这个类不继承任何类,也不实现任何接口.\n\n第二种:创建类实现Action接口(要实现接口,接口中方法必须实现,所以这种用的不多)\n\n第三种:创建类,继承ActionSupport\n```\n访问action的方法:\n```\n有三种方式实现,主要前面两种方式\n1. 使用action标签中的method属性,在这个属性里写执行的action方法\n2. 使用通配符的方式实现\n3. 动态访问方式(不用)\n\n```\n演示错误:\n```\n如果action中有返回值,在配置文件中没有配置, 出现错误.\nno result defined for action and result ok\n\n没有返回值,就return Action.NONE\n```\n```\nAction的方法访问\n1.这是第一种实现方式,但不适合方法多的项目\n<action name=\"updateAction\" class=\"cn...\" method=\"update\"></action>\n2.第二种,通配符方法:{1}用来去*的值\n<action name=\"book_*\" class=\"\" method=\"{1}\"/>\n\n```\n基于aspectj的注解\n```\n增强方法,创建对象,jnx;aop配置,配置切面,用注解方式实现\n1.创建对象\n2.在spring核心配置文件中,开启aop扫描操作\n    <aop:aspectj-autoproxy></aop:aspectj-autoproxy>\n3.在增强的类上面完成注解\n@Before(value = \"execution(* com.Spring_aop.Book.*(..))\")\n\n```\nSpring的jdbcTemplate操作\n1.spring框架一站式框架\n- 1.针对三层,每一层都有解决技术\n- 2.在dao层,使用jdbcTemplate\n3.jdbcTemplate的使用和dbutils使用很相似,都是对数据库进行crud操作.\n```\nDriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource();\ndriverManagerDataSource.setDriverClassName(\"com.mysql.jdbc.Driver\");\ndriverManagerDataSource.setUrl(\"jdbc:mysql://localhost:3306/spring\");\ndriverManagerDataSource.setUsername(\"root\");\ndriverManagerDataSource.setPassword(\"admin\");\n//2.创建jdbc模板对象\nJdbcTemplate jdbcTemplate = new JdbcTemplate(driverManagerDataSource);\n//3.调用里面的方法\nString sql = \"insert into test values(?,?)\";\n//String sql = \"update test set password = ? where username=?\";\n//String sql = \"delete from test  where username=?\";\n\nint rows = jdbcTemplate.update(sql,\"lucy\",\"350\");\n```\n---\n```\nQueryRunner qr = new QueryRunner(datasource);\n返回对象\nrunner.query(sql,new BeanHandler<User>.class)\n返回list\nrunner.query(sql,new BeanListHandler<User>.class)\n\n在dbutils时候,有接口ResultSetHandler\ndbutils提供了不同结果实现类\n2. jdbcTemplate实现查询,有接口RowMapper\njdbcTemplate针对这个接口没有实现类,得到不同的数据需要自己进行数据的封装\n\n```\n```\n查询的具体实现\n1.查询返回某一个值\nselect count(*) from test\n String sql = \"select count(*) from test\";\nInteger count = jdbcTemplate.queryForObject(sql,Integer.class);\n2.查询返回某一个对象\n\nUser user = jdbcTemplate.queryForObject(sql,new MyRowMapper(),\"a\");\n\nclass MyRowMapper implements RowMapper<User>{\n    @Override\n    public User mapRow(ResultSet resultSet, int i) throws SQLException {\n        String username = resultSet.getString(\"username\");\n        String password = resultSet.getString(\"password\");\n        User user = new User();\n        user.setName(username);\n        user.setPassword(password);\n        return user;\n    }\n}\n\n3.查询返回list\nString sql = \"select * from test\";\nList<User> list = jdbcTemplate.query(sql,new MyRowMapper());\n\n```\n---\nString配置连接池和dao使用jdbcTemplate\n```\n1.Spring配置c3p0连接池\njar:c3p0,mchange-commons\n2.创建Spring的配置文件,将一下代码配入配置文件中\nComboPooledDataSource dataSource = new ComboPooledDataSource();\ndataSource.setDriverClass(\"com.mysql.jdbc.Driver\");\ndataSource.setJdbcUrl(\"jdbc:mysql://localhost:3306/spring\");\ndataSource.setUser(\"root\");\ndataSource.setPassword(\"admin\");\n\n```\n将上面的代码用xml实现\n```\n    <!-- 配置c3p0-->\n    <bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\">\n        <!--注入属性值-->\n        <property name=\"driverClass\" value=\"com.mysql.jdbc.Driver\"></property>\n        <property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/spring\"></property>\n        <property name=\"user\" value=\"root\"></property>\n        <property name=\"password\" value=\"admin\"></property>\n    </bean>\n\n    <bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\">\n        <property name=\"dataSource\" ref=\"dataSource\"></property>\n    </bean>\n    <bean id=\"userDao\" class=\"com.Springtest.UserDao\">\n        <property name=\"jdbcTemplate\" ref=\"jdbcTemplate\"></property>\n    </bean>\n    <bean id=\"userService\" class=\"com.Springtest.UserService\">\n        <property ref=\"userDao\" name=\"userDao\"></property>\n    </bean>\n</beans>\n\n```\nSpring事务管理\n```\n事务相关的概念\n1.要么都成功,要么都失败\n2.特性:原子性,一致性,隔离性,持久性\n3.不考虑隔离性,会产生三个不可读的问题\n解决读问题:设置隔离级别\n\nSpring进行事务管理\napi:\n哪些类,那些接口\n两种方式:\n1. 编程式事务管理(不用)\n2. 声明式事务管理(主要)\nxml配置和注解实现\n2.事务管理中的api:\n事务管理器:接口:PlatformTransactionManager\nSpring为不同的持久化框架都提供了不同的platformTransactionManager接口实现\n```\n```\n搭建转账环境\nservice又叫做业务逻辑层\n1.创建数据库表,添加数据\n\n\n```","source":"_posts/2017.10.29 Spring学习.md","raw":"---\ntitle: 2017.10.29 Spring,Struts学习\ndate: 2017-10-29 07:55:58\ntags:\n---\n使用表达式配置切入点:\n常用的表达式:\nexecution(\"* cn.itcast.aop.Book.add(..)\")\nexecution(\"* cn.itcast.aop.Book.*(..)\")\nexecution(\"* *.*(..)\")\n---\n```\n配置切面的方法:\n<aop:config>\n    <aop:poingcut id=\"pointcut1\" expresson=\"cn...(此处为需要添加前置方法的方法)\"></aop:pointcut>\n    <aop:aspect ref=\"beforeMethod\"(此处为上面配置过的目标类)>\n        <aop:before method=\"say\"(此处为要执行那个前置方法) pointcut-ref=\"pointcut1\"></aop:before>\n    </aop:aspect>\n</aop:config>\n```\n```\n配置环绕的方法\n<aop:before method=\"before1\" pointcut-ref=\"pointcut1\"/>\n<aop:after-returning method=\"after1\" pointcut-ref=\"pointcut1\"/>\n<aop:around method=\"around\" pointcut-ref=\"pointcut1\"/>\n\npublic void around1(ProceedingJoinPoint proceedingJoinPoint)  throws Throwable{\n    sout(\"方法之前\");\n    proceedingJoinPoint.proceed();\n    sout(\"方法之后\");\n}\n\n```\n导入log4j\nlog4j.properties放到src目录下面\n设置日志级别\nlog4j.rootLogger=info , stdout 基本信息级别\nlog4j.rootLogger=debug , stdout详细信息级别\n---\n1. Struts2框架应用在javaee中web层\n2. Struts2框架在Struts1和webwork基础上发展的全新框架\n3. struts可以解决的问题:\n---\n配置:\n```\n<struts>\n    <package name=\"hellodemo\" extends=\"struts-default\" namesapce=\"/\">\n        <action name=\"hello\" class=\"cn.itcast.action.HelloAction\">\n            <result name=\"ok\">/hellp.jsp</result>\n        </action>\n    </package>\n</struts>\n\n\n访问路径:127.0.0.1/struts2_day01/hello.action\n配置过滤器:\nweb.xml中配置\n<filter>\n    <filter-name>strut2\n    <filter-class></filter-class>\n</filter>\n<filter-mapping>\n    <filter-name>structs2</filter-name>\n    <url-pattern>/*</url-pattern>\n</filter-mapping>\n</filter>\n\nresult标签:\n根据action的方法返回值,配置到不同的路径里面\n<result name=\"ok\" type=\"\">/hello.jsp</result>\n默认转发,地址栏不变\n```\n分模块开发:引入xml文件,开发中最常见的方式\n```\n<include file=\"cn/itcast/action/hello.xml\"></include>\n```\naction的编写方式有三种\n```\n第一种:创建普通类,这个类不继承任何类,也不实现任何接口.\n\n第二种:创建类实现Action接口(要实现接口,接口中方法必须实现,所以这种用的不多)\n\n第三种:创建类,继承ActionSupport\n```\n访问action的方法:\n```\n有三种方式实现,主要前面两种方式\n1. 使用action标签中的method属性,在这个属性里写执行的action方法\n2. 使用通配符的方式实现\n3. 动态访问方式(不用)\n\n```\n演示错误:\n```\n如果action中有返回值,在配置文件中没有配置, 出现错误.\nno result defined for action and result ok\n\n没有返回值,就return Action.NONE\n```\n```\nAction的方法访问\n1.这是第一种实现方式,但不适合方法多的项目\n<action name=\"updateAction\" class=\"cn...\" method=\"update\"></action>\n2.第二种,通配符方法:{1}用来去*的值\n<action name=\"book_*\" class=\"\" method=\"{1}\"/>\n\n```\n基于aspectj的注解\n```\n增强方法,创建对象,jnx;aop配置,配置切面,用注解方式实现\n1.创建对象\n2.在spring核心配置文件中,开启aop扫描操作\n    <aop:aspectj-autoproxy></aop:aspectj-autoproxy>\n3.在增强的类上面完成注解\n@Before(value = \"execution(* com.Spring_aop.Book.*(..))\")\n\n```\nSpring的jdbcTemplate操作\n1.spring框架一站式框架\n- 1.针对三层,每一层都有解决技术\n- 2.在dao层,使用jdbcTemplate\n3.jdbcTemplate的使用和dbutils使用很相似,都是对数据库进行crud操作.\n```\nDriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource();\ndriverManagerDataSource.setDriverClassName(\"com.mysql.jdbc.Driver\");\ndriverManagerDataSource.setUrl(\"jdbc:mysql://localhost:3306/spring\");\ndriverManagerDataSource.setUsername(\"root\");\ndriverManagerDataSource.setPassword(\"admin\");\n//2.创建jdbc模板对象\nJdbcTemplate jdbcTemplate = new JdbcTemplate(driverManagerDataSource);\n//3.调用里面的方法\nString sql = \"insert into test values(?,?)\";\n//String sql = \"update test set password = ? where username=?\";\n//String sql = \"delete from test  where username=?\";\n\nint rows = jdbcTemplate.update(sql,\"lucy\",\"350\");\n```\n---\n```\nQueryRunner qr = new QueryRunner(datasource);\n返回对象\nrunner.query(sql,new BeanHandler<User>.class)\n返回list\nrunner.query(sql,new BeanListHandler<User>.class)\n\n在dbutils时候,有接口ResultSetHandler\ndbutils提供了不同结果实现类\n2. jdbcTemplate实现查询,有接口RowMapper\njdbcTemplate针对这个接口没有实现类,得到不同的数据需要自己进行数据的封装\n\n```\n```\n查询的具体实现\n1.查询返回某一个值\nselect count(*) from test\n String sql = \"select count(*) from test\";\nInteger count = jdbcTemplate.queryForObject(sql,Integer.class);\n2.查询返回某一个对象\n\nUser user = jdbcTemplate.queryForObject(sql,new MyRowMapper(),\"a\");\n\nclass MyRowMapper implements RowMapper<User>{\n    @Override\n    public User mapRow(ResultSet resultSet, int i) throws SQLException {\n        String username = resultSet.getString(\"username\");\n        String password = resultSet.getString(\"password\");\n        User user = new User();\n        user.setName(username);\n        user.setPassword(password);\n        return user;\n    }\n}\n\n3.查询返回list\nString sql = \"select * from test\";\nList<User> list = jdbcTemplate.query(sql,new MyRowMapper());\n\n```\n---\nString配置连接池和dao使用jdbcTemplate\n```\n1.Spring配置c3p0连接池\njar:c3p0,mchange-commons\n2.创建Spring的配置文件,将一下代码配入配置文件中\nComboPooledDataSource dataSource = new ComboPooledDataSource();\ndataSource.setDriverClass(\"com.mysql.jdbc.Driver\");\ndataSource.setJdbcUrl(\"jdbc:mysql://localhost:3306/spring\");\ndataSource.setUser(\"root\");\ndataSource.setPassword(\"admin\");\n\n```\n将上面的代码用xml实现\n```\n    <!-- 配置c3p0-->\n    <bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\">\n        <!--注入属性值-->\n        <property name=\"driverClass\" value=\"com.mysql.jdbc.Driver\"></property>\n        <property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/spring\"></property>\n        <property name=\"user\" value=\"root\"></property>\n        <property name=\"password\" value=\"admin\"></property>\n    </bean>\n\n    <bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\">\n        <property name=\"dataSource\" ref=\"dataSource\"></property>\n    </bean>\n    <bean id=\"userDao\" class=\"com.Springtest.UserDao\">\n        <property name=\"jdbcTemplate\" ref=\"jdbcTemplate\"></property>\n    </bean>\n    <bean id=\"userService\" class=\"com.Springtest.UserService\">\n        <property ref=\"userDao\" name=\"userDao\"></property>\n    </bean>\n</beans>\n\n```\nSpring事务管理\n```\n事务相关的概念\n1.要么都成功,要么都失败\n2.特性:原子性,一致性,隔离性,持久性\n3.不考虑隔离性,会产生三个不可读的问题\n解决读问题:设置隔离级别\n\nSpring进行事务管理\napi:\n哪些类,那些接口\n两种方式:\n1. 编程式事务管理(不用)\n2. 声明式事务管理(主要)\nxml配置和注解实现\n2.事务管理中的api:\n事务管理器:接口:PlatformTransactionManager\nSpring为不同的持久化框架都提供了不同的platformTransactionManager接口实现\n```\n```\n搭建转账环境\nservice又叫做业务逻辑层\n1.创建数据库表,添加数据\n\n\n```","slug":"Spring学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hza0000cdcyugz4i5lgx","content":"<p>使用表达式配置切入点:<br>常用的表达式:<br>execution(“<em> cn.itcast.aop.Book.add(..)”)<br>execution(“</em> cn.itcast.aop.Book.*(..)”)</p>\n<h2 id=\"execution-“-”\"><a href=\"#execution-“-”\" class=\"headerlink\" title=\"execution(“ .*(..)”)\"></a>execution(“<em> </em>.*(..)”)</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">配置切面的方法:</span><br><span class=\"line\">&lt;aop:config&gt;</span><br><span class=\"line\">    &lt;aop:poingcut id=&quot;pointcut1&quot; expresson=&quot;cn...(此处为需要添加前置方法的方法)&quot;&gt;&lt;/aop:pointcut&gt;</span><br><span class=\"line\">    &lt;aop:aspect ref=&quot;beforeMethod&quot;(此处为上面配置过的目标类)&gt;</span><br><span class=\"line\">        &lt;aop:before method=&quot;say&quot;(此处为要执行那个前置方法) pointcut-ref=&quot;pointcut1&quot;&gt;&lt;/aop:before&gt;</span><br><span class=\"line\">    &lt;/aop:aspect&gt;</span><br><span class=\"line\">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">配置环绕的方法</span><br><span class=\"line\">&lt;aop:before method=&quot;before1&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;</span><br><span class=\"line\">&lt;aop:after-returning method=&quot;after1&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;</span><br><span class=\"line\">&lt;aop:around method=&quot;around&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">public void around1(ProceedingJoinPoint proceedingJoinPoint)  throws Throwable&#123;</span><br><span class=\"line\">    sout(&quot;方法之前&quot;);</span><br><span class=\"line\">    proceedingJoinPoint.proceed();</span><br><span class=\"line\">    sout(&quot;方法之后&quot;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>导入log4j<br>log4j.properties放到src目录下面<br>设置日志级别<br>log4j.rootLogger=info , stdout 基本信息级别</p>\n<h2 id=\"log4j-rootLogger-debug-stdout详细信息级别\"><a href=\"#log4j-rootLogger-debug-stdout详细信息级别\" class=\"headerlink\" title=\"log4j.rootLogger=debug , stdout详细信息级别\"></a>log4j.rootLogger=debug , stdout详细信息级别</h2><ol>\n<li>Struts2框架应用在javaee中web层</li>\n<li>Struts2框架在Struts1和webwork基础上发展的全新框架</li>\n<li>struts可以解决的问题:</li>\n</ol>\n<hr>\n<p>配置:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;struts&gt;</span><br><span class=\"line\">    &lt;package name=&quot;hellodemo&quot; extends=&quot;struts-default&quot; namesapce=&quot;/&quot;&gt;</span><br><span class=\"line\">        &lt;action name=&quot;hello&quot; class=&quot;cn.itcast.action.HelloAction&quot;&gt;</span><br><span class=\"line\">            &lt;result name=&quot;ok&quot;&gt;/hellp.jsp&lt;/result&gt;</span><br><span class=\"line\">        &lt;/action&gt;</span><br><span class=\"line\">    &lt;/package&gt;</span><br><span class=\"line\">&lt;/struts&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">访问路径:127.0.0.1/struts2_day01/hello.action</span><br><span class=\"line\">配置过滤器:</span><br><span class=\"line\">web.xml中配置</span><br><span class=\"line\">&lt;filter&gt;</span><br><span class=\"line\">    &lt;filter-name&gt;strut2</span><br><span class=\"line\">    &lt;filter-class&gt;&lt;/filter-class&gt;</span><br><span class=\"line\">&lt;/filter&gt;</span><br><span class=\"line\">&lt;filter-mapping&gt;</span><br><span class=\"line\">    &lt;filter-name&gt;structs2&lt;/filter-name&gt;</span><br><span class=\"line\">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class=\"line\">&lt;/filter-mapping&gt;</span><br><span class=\"line\">&lt;/filter&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">result标签:</span><br><span class=\"line\">根据action的方法返回值,配置到不同的路径里面</span><br><span class=\"line\">&lt;result name=&quot;ok&quot; type=&quot;&quot;&gt;/hello.jsp&lt;/result&gt;</span><br><span class=\"line\">默认转发,地址栏不变</span><br></pre></td></tr></table></figure></p>\n<p>分模块开发:引入xml文件,开发中最常见的方式<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;include file=&quot;cn/itcast/action/hello.xml&quot;&gt;&lt;/include&gt;</span><br></pre></td></tr></table></figure></p>\n<p>action的编写方式有三种<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">第一种:创建普通类,这个类不继承任何类,也不实现任何接口.</span><br><span class=\"line\"></span><br><span class=\"line\">第二种:创建类实现Action接口(要实现接口,接口中方法必须实现,所以这种用的不多)</span><br><span class=\"line\"></span><br><span class=\"line\">第三种:创建类,继承ActionSupport</span><br></pre></td></tr></table></figure></p>\n<p>访问action的方法:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">有三种方式实现,主要前面两种方式</span><br><span class=\"line\">1. 使用action标签中的method属性,在这个属性里写执行的action方法</span><br><span class=\"line\">2. 使用通配符的方式实现</span><br><span class=\"line\">3. 动态访问方式(不用)</span><br></pre></td></tr></table></figure></p>\n<p>演示错误:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">如果action中有返回值,在配置文件中没有配置, 出现错误.</span><br><span class=\"line\">no result defined for action and result ok</span><br><span class=\"line\"></span><br><span class=\"line\">没有返回值,就return Action.NONE</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Action的方法访问</span><br><span class=\"line\">1.这是第一种实现方式,但不适合方法多的项目</span><br><span class=\"line\">&lt;action name=&quot;updateAction&quot; class=&quot;cn...&quot; method=&quot;update&quot;&gt;&lt;/action&gt;</span><br><span class=\"line\">2.第二种,通配符方法:&#123;1&#125;用来去*的值</span><br><span class=\"line\">&lt;action name=&quot;book_*&quot; class=&quot;&quot; method=&quot;&#123;1&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure>\n<p>基于aspectj的注解<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">增强方法,创建对象,jnx;aop配置,配置切面,用注解方式实现</span><br><span class=\"line\">1.创建对象</span><br><span class=\"line\">2.在spring核心配置文件中,开启aop扫描操作</span><br><span class=\"line\">    &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;</span><br><span class=\"line\">3.在增强的类上面完成注解</span><br><span class=\"line\">@Before(value = &quot;execution(* com.Spring_aop.Book.*(..))&quot;)</span><br></pre></td></tr></table></figure></p>\n<p>Spring的jdbcTemplate操作<br>1.spring框架一站式框架</p>\n<ul>\n<li>1.针对三层,每一层都有解决技术</li>\n<li>2.在dao层,使用jdbcTemplate<br>3.jdbcTemplate的使用和dbutils使用很相似,都是对数据库进行crud操作.<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource();</span><br><span class=\"line\">driverManagerDataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class=\"line\">driverManagerDataSource.setUrl(&quot;jdbc:mysql://localhost:3306/spring&quot;);</span><br><span class=\"line\">driverManagerDataSource.setUsername(&quot;root&quot;);</span><br><span class=\"line\">driverManagerDataSource.setPassword(&quot;admin&quot;);</span><br><span class=\"line\">//2.创建jdbc模板对象</span><br><span class=\"line\">JdbcTemplate jdbcTemplate = new JdbcTemplate(driverManagerDataSource);</span><br><span class=\"line\">//3.调用里面的方法</span><br><span class=\"line\">String sql = &quot;insert into test values(?,?)&quot;;</span><br><span class=\"line\">//String sql = &quot;update test set password = ? where username=?&quot;;</span><br><span class=\"line\">//String sql = &quot;delete from test  where username=?&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">int rows = jdbcTemplate.update(sql,&quot;lucy&quot;,&quot;350&quot;);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">QueryRunner qr = new QueryRunner(datasource);</span><br><span class=\"line\">返回对象</span><br><span class=\"line\">runner.query(sql,new BeanHandler&lt;User&gt;.class)</span><br><span class=\"line\">返回list</span><br><span class=\"line\">runner.query(sql,new BeanListHandler&lt;User&gt;.class)</span><br><span class=\"line\"></span><br><span class=\"line\">在dbutils时候,有接口ResultSetHandler</span><br><span class=\"line\">dbutils提供了不同结果实现类</span><br><span class=\"line\">2. jdbcTemplate实现查询,有接口RowMapper</span><br><span class=\"line\">jdbcTemplate针对这个接口没有实现类,得到不同的数据需要自己进行数据的封装</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">查询的具体实现</span><br><span class=\"line\">1.查询返回某一个值</span><br><span class=\"line\">select count(*) from test</span><br><span class=\"line\"> String sql = &quot;select count(*) from test&quot;;</span><br><span class=\"line\">Integer count = jdbcTemplate.queryForObject(sql,Integer.class);</span><br><span class=\"line\">2.查询返回某一个对象</span><br><span class=\"line\"></span><br><span class=\"line\">User user = jdbcTemplate.queryForObject(sql,new MyRowMapper(),&quot;a&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">class MyRowMapper implements RowMapper&lt;User&gt;&#123;</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public User mapRow(ResultSet resultSet, int i) throws SQLException &#123;</span><br><span class=\"line\">        String username = resultSet.getString(&quot;username&quot;);</span><br><span class=\"line\">        String password = resultSet.getString(&quot;password&quot;);</span><br><span class=\"line\">        User user = new User();</span><br><span class=\"line\">        user.setName(username);</span><br><span class=\"line\">        user.setPassword(password);</span><br><span class=\"line\">        return user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">3.查询返回list</span><br><span class=\"line\">String sql = &quot;select * from test&quot;;</span><br><span class=\"line\">List&lt;User&gt; list = jdbcTemplate.query(sql,new MyRowMapper());</span><br></pre></td></tr></table></figure>\n<hr>\n<p>String配置连接池和dao使用jdbcTemplate<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.Spring配置c3p0连接池</span><br><span class=\"line\">jar:c3p0,mchange-commons</span><br><span class=\"line\">2.创建Spring的配置文件,将一下代码配入配置文件中</span><br><span class=\"line\">ComboPooledDataSource dataSource = new ComboPooledDataSource();</span><br><span class=\"line\">dataSource.setDriverClass(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class=\"line\">dataSource.setJdbcUrl(&quot;jdbc:mysql://localhost:3306/spring&quot;);</span><br><span class=\"line\">dataSource.setUser(&quot;root&quot;);</span><br><span class=\"line\">dataSource.setPassword(&quot;admin&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>将上面的代码用xml实现<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    &lt;!-- 配置c3p0--&gt;</span><br><span class=\"line\">    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;</span><br><span class=\"line\">        &lt;!--注入属性值--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/spring&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;user&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;password&quot; value=&quot;admin&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    &lt;bean id=&quot;userDao&quot; class=&quot;com.Springtest.UserDao&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;jdbcTemplate&quot; ref=&quot;jdbcTemplate&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    &lt;bean id=&quot;userService&quot; class=&quot;com.Springtest.UserService&quot;&gt;</span><br><span class=\"line\">        &lt;property ref=&quot;userDao&quot; name=&quot;userDao&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>\n<p>Spring事务管理<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">事务相关的概念</span><br><span class=\"line\">1.要么都成功,要么都失败</span><br><span class=\"line\">2.特性:原子性,一致性,隔离性,持久性</span><br><span class=\"line\">3.不考虑隔离性,会产生三个不可读的问题</span><br><span class=\"line\">解决读问题:设置隔离级别</span><br><span class=\"line\"></span><br><span class=\"line\">Spring进行事务管理</span><br><span class=\"line\">api:</span><br><span class=\"line\">哪些类,那些接口</span><br><span class=\"line\">两种方式:</span><br><span class=\"line\">1. 编程式事务管理(不用)</span><br><span class=\"line\">2. 声明式事务管理(主要)</span><br><span class=\"line\">xml配置和注解实现</span><br><span class=\"line\">2.事务管理中的api:</span><br><span class=\"line\">事务管理器:接口:PlatformTransactionManager</span><br><span class=\"line\">Spring为不同的持久化框架都提供了不同的platformTransactionManager接口实现</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">搭建转账环境</span><br><span class=\"line\">service又叫做业务逻辑层</span><br><span class=\"line\">1.创建数据库表,添加数据</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>使用表达式配置切入点:<br>常用的表达式:<br>execution(“<em> cn.itcast.aop.Book.add(..)”)<br>execution(“</em> cn.itcast.aop.Book.*(..)”)</p>\n<h2 id=\"execution-“-”\"><a href=\"#execution-“-”\" class=\"headerlink\" title=\"execution(“ .*(..)”)\"></a>execution(“<em> </em>.*(..)”)</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">配置切面的方法:</span><br><span class=\"line\">&lt;aop:config&gt;</span><br><span class=\"line\">    &lt;aop:poingcut id=&quot;pointcut1&quot; expresson=&quot;cn...(此处为需要添加前置方法的方法)&quot;&gt;&lt;/aop:pointcut&gt;</span><br><span class=\"line\">    &lt;aop:aspect ref=&quot;beforeMethod&quot;(此处为上面配置过的目标类)&gt;</span><br><span class=\"line\">        &lt;aop:before method=&quot;say&quot;(此处为要执行那个前置方法) pointcut-ref=&quot;pointcut1&quot;&gt;&lt;/aop:before&gt;</span><br><span class=\"line\">    &lt;/aop:aspect&gt;</span><br><span class=\"line\">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">配置环绕的方法</span><br><span class=\"line\">&lt;aop:before method=&quot;before1&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;</span><br><span class=\"line\">&lt;aop:after-returning method=&quot;after1&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;</span><br><span class=\"line\">&lt;aop:around method=&quot;around&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">public void around1(ProceedingJoinPoint proceedingJoinPoint)  throws Throwable&#123;</span><br><span class=\"line\">    sout(&quot;方法之前&quot;);</span><br><span class=\"line\">    proceedingJoinPoint.proceed();</span><br><span class=\"line\">    sout(&quot;方法之后&quot;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>导入log4j<br>log4j.properties放到src目录下面<br>设置日志级别<br>log4j.rootLogger=info , stdout 基本信息级别</p>\n<h2 id=\"log4j-rootLogger-debug-stdout详细信息级别\"><a href=\"#log4j-rootLogger-debug-stdout详细信息级别\" class=\"headerlink\" title=\"log4j.rootLogger=debug , stdout详细信息级别\"></a>log4j.rootLogger=debug , stdout详细信息级别</h2><ol>\n<li>Struts2框架应用在javaee中web层</li>\n<li>Struts2框架在Struts1和webwork基础上发展的全新框架</li>\n<li>struts可以解决的问题:</li>\n</ol>\n<hr>\n<p>配置:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;struts&gt;</span><br><span class=\"line\">    &lt;package name=&quot;hellodemo&quot; extends=&quot;struts-default&quot; namesapce=&quot;/&quot;&gt;</span><br><span class=\"line\">        &lt;action name=&quot;hello&quot; class=&quot;cn.itcast.action.HelloAction&quot;&gt;</span><br><span class=\"line\">            &lt;result name=&quot;ok&quot;&gt;/hellp.jsp&lt;/result&gt;</span><br><span class=\"line\">        &lt;/action&gt;</span><br><span class=\"line\">    &lt;/package&gt;</span><br><span class=\"line\">&lt;/struts&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">访问路径:127.0.0.1/struts2_day01/hello.action</span><br><span class=\"line\">配置过滤器:</span><br><span class=\"line\">web.xml中配置</span><br><span class=\"line\">&lt;filter&gt;</span><br><span class=\"line\">    &lt;filter-name&gt;strut2</span><br><span class=\"line\">    &lt;filter-class&gt;&lt;/filter-class&gt;</span><br><span class=\"line\">&lt;/filter&gt;</span><br><span class=\"line\">&lt;filter-mapping&gt;</span><br><span class=\"line\">    &lt;filter-name&gt;structs2&lt;/filter-name&gt;</span><br><span class=\"line\">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class=\"line\">&lt;/filter-mapping&gt;</span><br><span class=\"line\">&lt;/filter&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">result标签:</span><br><span class=\"line\">根据action的方法返回值,配置到不同的路径里面</span><br><span class=\"line\">&lt;result name=&quot;ok&quot; type=&quot;&quot;&gt;/hello.jsp&lt;/result&gt;</span><br><span class=\"line\">默认转发,地址栏不变</span><br></pre></td></tr></table></figure></p>\n<p>分模块开发:引入xml文件,开发中最常见的方式<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;include file=&quot;cn/itcast/action/hello.xml&quot;&gt;&lt;/include&gt;</span><br></pre></td></tr></table></figure></p>\n<p>action的编写方式有三种<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">第一种:创建普通类,这个类不继承任何类,也不实现任何接口.</span><br><span class=\"line\"></span><br><span class=\"line\">第二种:创建类实现Action接口(要实现接口,接口中方法必须实现,所以这种用的不多)</span><br><span class=\"line\"></span><br><span class=\"line\">第三种:创建类,继承ActionSupport</span><br></pre></td></tr></table></figure></p>\n<p>访问action的方法:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">有三种方式实现,主要前面两种方式</span><br><span class=\"line\">1. 使用action标签中的method属性,在这个属性里写执行的action方法</span><br><span class=\"line\">2. 使用通配符的方式实现</span><br><span class=\"line\">3. 动态访问方式(不用)</span><br></pre></td></tr></table></figure></p>\n<p>演示错误:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">如果action中有返回值,在配置文件中没有配置, 出现错误.</span><br><span class=\"line\">no result defined for action and result ok</span><br><span class=\"line\"></span><br><span class=\"line\">没有返回值,就return Action.NONE</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Action的方法访问</span><br><span class=\"line\">1.这是第一种实现方式,但不适合方法多的项目</span><br><span class=\"line\">&lt;action name=&quot;updateAction&quot; class=&quot;cn...&quot; method=&quot;update&quot;&gt;&lt;/action&gt;</span><br><span class=\"line\">2.第二种,通配符方法:&#123;1&#125;用来去*的值</span><br><span class=\"line\">&lt;action name=&quot;book_*&quot; class=&quot;&quot; method=&quot;&#123;1&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure>\n<p>基于aspectj的注解<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">增强方法,创建对象,jnx;aop配置,配置切面,用注解方式实现</span><br><span class=\"line\">1.创建对象</span><br><span class=\"line\">2.在spring核心配置文件中,开启aop扫描操作</span><br><span class=\"line\">    &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;</span><br><span class=\"line\">3.在增强的类上面完成注解</span><br><span class=\"line\">@Before(value = &quot;execution(* com.Spring_aop.Book.*(..))&quot;)</span><br></pre></td></tr></table></figure></p>\n<p>Spring的jdbcTemplate操作<br>1.spring框架一站式框架</p>\n<ul>\n<li>1.针对三层,每一层都有解决技术</li>\n<li>2.在dao层,使用jdbcTemplate<br>3.jdbcTemplate的使用和dbutils使用很相似,都是对数据库进行crud操作.<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource();</span><br><span class=\"line\">driverManagerDataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class=\"line\">driverManagerDataSource.setUrl(&quot;jdbc:mysql://localhost:3306/spring&quot;);</span><br><span class=\"line\">driverManagerDataSource.setUsername(&quot;root&quot;);</span><br><span class=\"line\">driverManagerDataSource.setPassword(&quot;admin&quot;);</span><br><span class=\"line\">//2.创建jdbc模板对象</span><br><span class=\"line\">JdbcTemplate jdbcTemplate = new JdbcTemplate(driverManagerDataSource);</span><br><span class=\"line\">//3.调用里面的方法</span><br><span class=\"line\">String sql = &quot;insert into test values(?,?)&quot;;</span><br><span class=\"line\">//String sql = &quot;update test set password = ? where username=?&quot;;</span><br><span class=\"line\">//String sql = &quot;delete from test  where username=?&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">int rows = jdbcTemplate.update(sql,&quot;lucy&quot;,&quot;350&quot;);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">QueryRunner qr = new QueryRunner(datasource);</span><br><span class=\"line\">返回对象</span><br><span class=\"line\">runner.query(sql,new BeanHandler&lt;User&gt;.class)</span><br><span class=\"line\">返回list</span><br><span class=\"line\">runner.query(sql,new BeanListHandler&lt;User&gt;.class)</span><br><span class=\"line\"></span><br><span class=\"line\">在dbutils时候,有接口ResultSetHandler</span><br><span class=\"line\">dbutils提供了不同结果实现类</span><br><span class=\"line\">2. jdbcTemplate实现查询,有接口RowMapper</span><br><span class=\"line\">jdbcTemplate针对这个接口没有实现类,得到不同的数据需要自己进行数据的封装</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">查询的具体实现</span><br><span class=\"line\">1.查询返回某一个值</span><br><span class=\"line\">select count(*) from test</span><br><span class=\"line\"> String sql = &quot;select count(*) from test&quot;;</span><br><span class=\"line\">Integer count = jdbcTemplate.queryForObject(sql,Integer.class);</span><br><span class=\"line\">2.查询返回某一个对象</span><br><span class=\"line\"></span><br><span class=\"line\">User user = jdbcTemplate.queryForObject(sql,new MyRowMapper(),&quot;a&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">class MyRowMapper implements RowMapper&lt;User&gt;&#123;</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public User mapRow(ResultSet resultSet, int i) throws SQLException &#123;</span><br><span class=\"line\">        String username = resultSet.getString(&quot;username&quot;);</span><br><span class=\"line\">        String password = resultSet.getString(&quot;password&quot;);</span><br><span class=\"line\">        User user = new User();</span><br><span class=\"line\">        user.setName(username);</span><br><span class=\"line\">        user.setPassword(password);</span><br><span class=\"line\">        return user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">3.查询返回list</span><br><span class=\"line\">String sql = &quot;select * from test&quot;;</span><br><span class=\"line\">List&lt;User&gt; list = jdbcTemplate.query(sql,new MyRowMapper());</span><br></pre></td></tr></table></figure>\n<hr>\n<p>String配置连接池和dao使用jdbcTemplate<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.Spring配置c3p0连接池</span><br><span class=\"line\">jar:c3p0,mchange-commons</span><br><span class=\"line\">2.创建Spring的配置文件,将一下代码配入配置文件中</span><br><span class=\"line\">ComboPooledDataSource dataSource = new ComboPooledDataSource();</span><br><span class=\"line\">dataSource.setDriverClass(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class=\"line\">dataSource.setJdbcUrl(&quot;jdbc:mysql://localhost:3306/spring&quot;);</span><br><span class=\"line\">dataSource.setUser(&quot;root&quot;);</span><br><span class=\"line\">dataSource.setPassword(&quot;admin&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>将上面的代码用xml实现<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    &lt;!-- 配置c3p0--&gt;</span><br><span class=\"line\">    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;</span><br><span class=\"line\">        &lt;!--注入属性值--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/spring&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;user&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;password&quot; value=&quot;admin&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    &lt;bean id=&quot;userDao&quot; class=&quot;com.Springtest.UserDao&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;jdbcTemplate&quot; ref=&quot;jdbcTemplate&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    &lt;bean id=&quot;userService&quot; class=&quot;com.Springtest.UserService&quot;&gt;</span><br><span class=\"line\">        &lt;property ref=&quot;userDao&quot; name=&quot;userDao&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>\n<p>Spring事务管理<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">事务相关的概念</span><br><span class=\"line\">1.要么都成功,要么都失败</span><br><span class=\"line\">2.特性:原子性,一致性,隔离性,持久性</span><br><span class=\"line\">3.不考虑隔离性,会产生三个不可读的问题</span><br><span class=\"line\">解决读问题:设置隔离级别</span><br><span class=\"line\"></span><br><span class=\"line\">Spring进行事务管理</span><br><span class=\"line\">api:</span><br><span class=\"line\">哪些类,那些接口</span><br><span class=\"line\">两种方式:</span><br><span class=\"line\">1. 编程式事务管理(不用)</span><br><span class=\"line\">2. 声明式事务管理(主要)</span><br><span class=\"line\">xml配置和注解实现</span><br><span class=\"line\">2.事务管理中的api:</span><br><span class=\"line\">事务管理器:接口:PlatformTransactionManager</span><br><span class=\"line\">Spring为不同的持久化框架都提供了不同的platformTransactionManager接口实现</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">搭建转账环境</span><br><span class=\"line\">service又叫做业务逻辑层</span><br><span class=\"line\">1.创建数据库表,添加数据</span><br></pre></td></tr></table></figure>"},{"title":"2017.10.29 操作系统学习","date":"2017-10-28T23:55:58.000Z","_content":"1.知道cpu接口之下是的原理\n- 改cpu管理,改屏幕输出,改系统接口,改内存管理\n---\n从图灵机到通用图灵机\n图灵机:只会一道菜的厨师\n通用图灵机:设置控制器动作,控制器状态,数据对象\n程序>内存>取指>执行\n---\n对于英特尔机:\n\n基本输入输出系统:BIOS\n\n开机时,CS+0xFFFF,IP=0x0000, CS+IP形成地址\n\n寻址0xFFFF0(ROM BISO映射区)\n\n检查RAM 软硬磁盘\n\n将磁盘0磁道0扇区读入0x7c00处(就是操作系统的引导扇区)\n\n从引导扇区读入的512个字节:\n\n启动设备信息被设置在CMOS中\n\n引导扇区代码:bootsect.s(引导扇区,s是汇编语言)\n```\n断寄存器,断点偏移\nmov ax, #BOOTSEG mov ds,ax\nmov ax, #INITSEG mov es,ax\nmov cx,#256(512字节)\nsub si, si sub di, di\nrep movw\njmpi go,INITSET\nboot工作:读setup,读system\n```\n","source":"_posts/2017.10.29 操作系统学习.md","raw":"---\ntitle: 2017.10.29 操作系统学习\ndate: 2017-10-29 07:55:58\ntags:\n---\n1.知道cpu接口之下是的原理\n- 改cpu管理,改屏幕输出,改系统接口,改内存管理\n---\n从图灵机到通用图灵机\n图灵机:只会一道菜的厨师\n通用图灵机:设置控制器动作,控制器状态,数据对象\n程序>内存>取指>执行\n---\n对于英特尔机:\n\n基本输入输出系统:BIOS\n\n开机时,CS+0xFFFF,IP=0x0000, CS+IP形成地址\n\n寻址0xFFFF0(ROM BISO映射区)\n\n检查RAM 软硬磁盘\n\n将磁盘0磁道0扇区读入0x7c00处(就是操作系统的引导扇区)\n\n从引导扇区读入的512个字节:\n\n启动设备信息被设置在CMOS中\n\n引导扇区代码:bootsect.s(引导扇区,s是汇编语言)\n```\n断寄存器,断点偏移\nmov ax, #BOOTSEG mov ds,ax\nmov ax, #INITSEG mov es,ax\nmov cx,#256(512字节)\nsub si, si sub di, di\nrep movw\njmpi go,INITSET\nboot工作:读setup,读system\n```\n","slug":"操作系统学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hza1000ddcyuphrbbmym","content":"<p>1.知道cpu接口之下是的原理</p>\n<ul>\n<li>改cpu管理,改屏幕输出,改系统接口,改内存管理</li>\n</ul>\n<hr>\n<p>从图灵机到通用图灵机<br>图灵机:只会一道菜的厨师<br>通用图灵机:设置控制器动作,控制器状态,数据对象</p>\n<h2 id=\"程序-gt-内存-gt-取指-gt-执行\"><a href=\"#程序-gt-内存-gt-取指-gt-执行\" class=\"headerlink\" title=\"程序&gt;内存&gt;取指&gt;执行\"></a>程序&gt;内存&gt;取指&gt;执行</h2><p>对于英特尔机:</p>\n<p>基本输入输出系统:BIOS</p>\n<p>开机时,CS+0xFFFF,IP=0x0000, CS+IP形成地址</p>\n<p>寻址0xFFFF0(ROM BISO映射区)</p>\n<p>检查RAM 软硬磁盘</p>\n<p>将磁盘0磁道0扇区读入0x7c00处(就是操作系统的引导扇区)</p>\n<p>从引导扇区读入的512个字节:</p>\n<p>启动设备信息被设置在CMOS中</p>\n<p>引导扇区代码:bootsect.s(引导扇区,s是汇编语言)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">断寄存器,断点偏移</span><br><span class=\"line\">mov ax, #BOOTSEG mov ds,ax</span><br><span class=\"line\">mov ax, #INITSEG mov es,ax</span><br><span class=\"line\">mov cx,#256(512字节)</span><br><span class=\"line\">sub si, si sub di, di</span><br><span class=\"line\">rep movw</span><br><span class=\"line\">jmpi go,INITSET</span><br><span class=\"line\">boot工作:读setup,读system</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.知道cpu接口之下是的原理</p>\n<ul>\n<li>改cpu管理,改屏幕输出,改系统接口,改内存管理</li>\n</ul>\n<hr>\n<p>从图灵机到通用图灵机<br>图灵机:只会一道菜的厨师<br>通用图灵机:设置控制器动作,控制器状态,数据对象</p>\n<h2 id=\"程序-gt-内存-gt-取指-gt-执行\"><a href=\"#程序-gt-内存-gt-取指-gt-执行\" class=\"headerlink\" title=\"程序&gt;内存&gt;取指&gt;执行\"></a>程序&gt;内存&gt;取指&gt;执行</h2><p>对于英特尔机:</p>\n<p>基本输入输出系统:BIOS</p>\n<p>开机时,CS+0xFFFF,IP=0x0000, CS+IP形成地址</p>\n<p>寻址0xFFFF0(ROM BISO映射区)</p>\n<p>检查RAM 软硬磁盘</p>\n<p>将磁盘0磁道0扇区读入0x7c00处(就是操作系统的引导扇区)</p>\n<p>从引导扇区读入的512个字节:</p>\n<p>启动设备信息被设置在CMOS中</p>\n<p>引导扇区代码:bootsect.s(引导扇区,s是汇编语言)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">断寄存器,断点偏移</span><br><span class=\"line\">mov ax, #BOOTSEG mov ds,ax</span><br><span class=\"line\">mov ax, #INITSEG mov es,ax</span><br><span class=\"line\">mov cx,#256(512字节)</span><br><span class=\"line\">sub si, si sub di, di</span><br><span class=\"line\">rep movw</span><br><span class=\"line\">jmpi go,INITSET</span><br><span class=\"line\">boot工作:读setup,读system</span><br></pre></td></tr></table></figure></p>\n"},{"title":"2017.10.30 Spring,Struts学习","date":"2017-10-28T23:55:58.000Z","_content":"使用AspectJ的XML配置声明式事务\n```\n1. 配置声明式事务管理器\n创建DataSourceTranscationManager对象\n\n<!--第一步,配置事务管理器-->\n<bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n    <property name=\"dataSource\" ref=\"dataSource\"></property>\n</bean>\n<!--第二步 配置事务的增强-->\n<tx:advice id=\"txadvice\" transaction-manager=\"transactionManager\">\n    <tx:attributes>\n        <!--设置匹配规则-->\n        <tx:method name=\"account*\" propagation=\"REQUIRED\"/>\n        <tx:method name=\"insert*\"/>\n    </tx:attributes>\n</tx:advice>\n<!--第三步 配置切面-->\n<aop:config>\n    <aop:pointcut id=\"pointcut1\" expression=\"execution(* com.Spring_tx.OrdersService.*(..))\"></aop:pointcut>\n    <aop:advisor advice-ref=\"txadvice\" pointcut-ref=\"pointcut1\"></aop:advisor>\n</aop:config>\n```\n```\n注解方式实现:\n<!--第一步,配置事务管理器-->\n<bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n    <property name=\"dataSource\" ref=\"dataSource\"></property>\n</bean>\n<!--第二步-->\n    <tx:annotation-driven transaction-manager=\"transactionManager\"></tx:annotation-driven>\n<!--第三步-->\n找到@Transactional,里面所有方法加事务管理\n\n```\nHibernate框架\n```\nORM思想\n实体类与数据库映射\nHibernate与Spring整合,两个核心配置文件名称和位置没有固定要求\nhibernate.cfg.xml\n```\nHibernate入门学习\n```\n1.让实体类和表一一对应 使用配置文件方式\n\n2. 不需要操作表,只需要操作表对应的实体类对象就可以了\n\n3. hibernate封装的对象session\n\n4. 创建实体类对象\nUser user = new User();\nuser.setUsername(\"lucy\");\nsession.save(user);\n```\n```\n1.hibernate要求实体类中有一个属性唯一的值\n2.使用hibernate时不需要手动创建表,会自动建表\n3.配置实体类和数据库表一一对应关系(使用配置文件实现映射)\n配置名称和位置没有固定要求\n建议:实体类所在包里创建,名称:Hbm.xml\n配置xml首先要引入约束,schema,dtd\n引入约束\n<!DOCTYPE hibernate-mapping PUBLIC\n        \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n        \"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd\">\n```\n然后:hibernate的映射\n```\n<hibernate-mapping>\n    <!--class\n    name:全路径\n    table:数据库表的名称-->\n    <class name=\"cn.itcast.entity.User\" table=\"t_user\">\n        <!--2.配置要求实体类有一个属性唯一值-->\n        <!--id:实体类id属性名称,column:表字段名称-->\n        <id name=\"uid\" column=\"uid\">\n            <!--设置增长策略-->\n            <!--native就是自动增长-->\n            <generator class=\"native\"></generator>\n        </id>\n        <!--配置其他属性和表字段对应-->\n        <property name=\"username\" column=\"username\"></property>\n        <property name=\"password\" column=\"password\"></property>\n        <property name=\"address\" column=\"address\"></property>\n    </class>\n</hibernate-mapping>\n```\nSpring的约束是screma\n4.创建hibernate的核心配置文件\n```\n核心配置文件格式xml\n期名称和位置是固定的\n1.位置:src下面\n名称:hibernate.cfg.xml\n2.引入dtd约束\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!DOCTYPE hibernate-configuration PUBLIC\n        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n        \"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd\">\n3.hibernate操作中只加载核心配置文件,其他配置文件不会加载\n\n```\n```\n1.配置数据库信息\n2.配置hibernate信息\n3.把映射文件放到配置文件中\n<hibernate-configuration>\n    <session-factory>\n        <!--第一部分,必须的-->\n        <property name=\"hibernate.connection.driver_class\" >com.mysql.jdbc.Driver</property>\n        <property name=\"hibernate.connection.url\">jdbc:mysql://localhost:3306/hibernate</property>\n        <property name=\"connection.username\">root</property>\n        <property name=\"connection.password\">admin</property>\n        <!--第二部分,可选-->\n        <!--底层输出sql-->\n        <property name=\"hibernate.show_sql\">true</property>\n        <!--底层输出sql语句格式-->\n        <property name=\"hibernate.format_sql\">true</property>\n        <!--hibernate帮忙创建表-->\n        <!--update如果有表就更新，没表就创建-->\n        <property name=\"hibernate.hbm2ddl.auto\">update</property>\n        <!--配置数据库的方言-->\n        <!--让hibernate识别不同数据库的语句-->\n        <property name=\"hibernate.dialect\">org.hibernate.dialect.MySQLDialect</property>\n        <mapping resource=\"cn/itcast/entity/User.hbm.xml\"></mapping>\n    </session-factory>\n</hibernate-configuration>\n\n```\nhibernate操作的步骤\n```\n1.加载核心配置文件\n2.创建SessionFactory对象\n3.使用SessionFactory创建Session对象(与HTTPSession没有任何关系)\n4.开启事务\n5.写我们具体的逻辑crud\n6.提交事务\n7.关闭资源/连接\n\n        Configuration cfg = new Configuration();\n        cfg.configure();\n        //2. 创建SessionFactory\n        //在这个过程中,会找到映射文件,把表也创建出来\n        SessionFactory sessionFactory = cfg.buildSessionFactory();\n        //3. 创建session对象\n        //如何理解:类似于Connection conn = DriverManager.getConnection\n        Session session = sessionFactory.openSession();\n        //4. 开启事务\n        Transaction transaction = session.beginTransaction();\n        //5. 写具体逻辑\n        User user = new User(x);\n        user.setUid(123456);\n        user.setUsername(\"小王\");\n        user.setPassword(\"123\");\n        user.setAddress(\"美国\");\n        session.save(user);\n        //6. 提交事务\n        transaction.commit();\n        //7. 关闭事务\n        session.close();\n        sessionFactory.close();\n```\nhibernate配置文件详解\n```\n1. hibernate映射文件名称位置不固定\n2.关于映射配置文件\n内部中写的都是实体类相关的\n- 1. class的name属性值是实体类的全路径\n- 2. id标签和property的name都是实体类属性名称\n3.id标签好property标签,column属性可以省略,表的字段自动与实体类属性名称一致\n\n```\nhibernate中核心api的使用\n```\n创建SessionFactory特别耗费资源\n所以在hibernate操作中,建议一个项目创建一个sessionFactory\n具体实现:\n1.写工具类,写静态代码实现\npublic class HibernateUtils {\n    static Configuration cfg = null;\n    static SessionFactory sessionFactory = null;\n    static {\n        //加载核心配置文件\n        cfg = new Configuration();\n        cfg.configure();\n        SessionFactory sessionFactory = cfg.buildSessionFactory();\n    }\n    public static SessionFactory getSessionFactory(){\n        return sessionFactory;\n    }\n}\n\n```\n---\nSession(重点)\n1. 类似于jdbc中的connection\n2. 调用session里面的不同方法实现crud操作\n- 1.添加 save方法\n- 2 修改 update方法\n- 3. 删除方法\n- 4. 根据id查询get方法\n3. 一个项目一般只创建一个SessionFactory.session对象单线程对象,不能共用,只能自己用\n---\nTransaction\nTransaction tx = session.beginTransaction();\ntx.commit();\ntx.rollback();\n事务概念\n- 1.原子性:一种操作一种失败都失败\n- 2.一致性:操作之前之后要一致\n- 3.隔离性:多个事务同时操作不影响\n- 4.持久性:提交数据库后持久性\n---\n```\n实体类的编写规则\n实体类不建议使用基本数据类型,而是包装类\n因为包装类Interger 可以为null,可以为0;\n实体类也叫做持久化类\n\n```\n```\nhibernate主键生成策略\nincrement:每次增量为1\nidentity:数据库支持自动自动增长的类型.适用于代理主键\nsequence:条件是数据库支持序列,如oracle\nnative:根据底层数据库对自动生成标识符\nuuid:32位16进制字符串 column=\"uuid\"\n```\n---\n```\n对实体类crud的操作\n1.添加\n调用sesson save方法\nsesson.save(user);\n2.根据id查询\nUser user = session.get(User.class,1);\n3.修改\n先查询,再修改\nUser user = session.get(User.class,1);\nuser.setUserName(\"newName\");\nsession.update(user);\n4.删除\nUser user = session.get(User.class,1);\nsession.delete(user);\n```\n实体类对象的状态\n```\n瞬态值:\n持久态:\n托管态:\n```\nHibernate的一级缓存\n```\n1. 把数据存在数据库里,数据库本身是文件系统,可以直接用流方式操作文件效率不高\n2. 把数据放在内存中,提高效率\n\nHibernate的缓存特点:\n1.Hibernate的一级缓存\n- 1 默认打开\n- 2 一级缓存有使用范围,从session创建到session关闭的范围.\n- 3 一级缓存中存储数据必须是持久态数据\n2. Hibernate的二级缓存已经没人使用,有一种替代技术,redis\n- 1 默认不打开,需要配置\n- 2 使用范围是整个web范围,SessionFactory范围.一个项目只有这一个对象\n```\n验证方式:\n```\n1.根据uid=1查询\n2.再根据uid=1查询\n验证第二次没有发送sql语句(第二次不查数据库而查一级缓存)\n```\n一级缓存的特性:\n```\n持久态会自动更新数据库\nUser user = session.get(User.class,7)\n把user放在一级缓存快照区\nuser.setUsernamme(\"hanmeimei\")\n修改的是持久态对象的值\n同时修改一级缓存的内容,但不一定修改一级缓存对应的快照区内容.\n最后提交事务,会:\n比较一级缓存和快照区内容是否相同,如果不同会把一级缓存区存放在数据库中\n```\n---\n事务代码规范\n```\n1.不考虑隔离产生的问题\n-1 脏读\n-2 不可重复度\n-3 虚读\n解决方法:\n设置事务隔离级别. 默认级别\n-1 mysql默认隔离级别是repeatable read\n<property name=\"hibernate.connection.isolation\">4</property>\ntry{\n    sessionFactory=HibernateUtils.getSessionFactory();\n    session = sessionFactory.openSession();\n    tx = session.beginTransaction();\n    ...\n    tx.commit();\n}catch(){\n    session.rollback();\n    }\nfinaly{\n    \n}\n\n\n```\nhibernate绑定session\n```\n配置与本地线程绑定的session\n获取本地线程绑定session,关闭session报错\n\n\n```\nstruts2 重点:\n```\n1.Action操作\n- 1.创建继承ActionSupport\n- 2.配置action的访问路径,创建struts.xml的配置文件,其固定在src下面\n- 3.配置多个action访问方法\n- 4.在action获取表单提交数据\n-- 1.获取request对象\n模型驱动(重点)\n--6.配置过滤器\n2.值栈\n-1. 向值栈中放置数据\n- set方法,push方法,定义变量,生成get方法\n\n\n3.拦截器\n- 1. aop和责任链模式\n- 2. 自定义拦截器\n继承MethodFilterInterceptor\n重写方法\n配置拦截器和action的关联\n\n```","source":"_posts/2017.10.30 Spring,Struts学习.md","raw":"---\ntitle: 2017.10.30 Spring,Struts学习\ndate: 2017-10-29 07:55:58\ntags:\n---\n使用AspectJ的XML配置声明式事务\n```\n1. 配置声明式事务管理器\n创建DataSourceTranscationManager对象\n\n<!--第一步,配置事务管理器-->\n<bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n    <property name=\"dataSource\" ref=\"dataSource\"></property>\n</bean>\n<!--第二步 配置事务的增强-->\n<tx:advice id=\"txadvice\" transaction-manager=\"transactionManager\">\n    <tx:attributes>\n        <!--设置匹配规则-->\n        <tx:method name=\"account*\" propagation=\"REQUIRED\"/>\n        <tx:method name=\"insert*\"/>\n    </tx:attributes>\n</tx:advice>\n<!--第三步 配置切面-->\n<aop:config>\n    <aop:pointcut id=\"pointcut1\" expression=\"execution(* com.Spring_tx.OrdersService.*(..))\"></aop:pointcut>\n    <aop:advisor advice-ref=\"txadvice\" pointcut-ref=\"pointcut1\"></aop:advisor>\n</aop:config>\n```\n```\n注解方式实现:\n<!--第一步,配置事务管理器-->\n<bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n    <property name=\"dataSource\" ref=\"dataSource\"></property>\n</bean>\n<!--第二步-->\n    <tx:annotation-driven transaction-manager=\"transactionManager\"></tx:annotation-driven>\n<!--第三步-->\n找到@Transactional,里面所有方法加事务管理\n\n```\nHibernate框架\n```\nORM思想\n实体类与数据库映射\nHibernate与Spring整合,两个核心配置文件名称和位置没有固定要求\nhibernate.cfg.xml\n```\nHibernate入门学习\n```\n1.让实体类和表一一对应 使用配置文件方式\n\n2. 不需要操作表,只需要操作表对应的实体类对象就可以了\n\n3. hibernate封装的对象session\n\n4. 创建实体类对象\nUser user = new User();\nuser.setUsername(\"lucy\");\nsession.save(user);\n```\n```\n1.hibernate要求实体类中有一个属性唯一的值\n2.使用hibernate时不需要手动创建表,会自动建表\n3.配置实体类和数据库表一一对应关系(使用配置文件实现映射)\n配置名称和位置没有固定要求\n建议:实体类所在包里创建,名称:Hbm.xml\n配置xml首先要引入约束,schema,dtd\n引入约束\n<!DOCTYPE hibernate-mapping PUBLIC\n        \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n        \"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd\">\n```\n然后:hibernate的映射\n```\n<hibernate-mapping>\n    <!--class\n    name:全路径\n    table:数据库表的名称-->\n    <class name=\"cn.itcast.entity.User\" table=\"t_user\">\n        <!--2.配置要求实体类有一个属性唯一值-->\n        <!--id:实体类id属性名称,column:表字段名称-->\n        <id name=\"uid\" column=\"uid\">\n            <!--设置增长策略-->\n            <!--native就是自动增长-->\n            <generator class=\"native\"></generator>\n        </id>\n        <!--配置其他属性和表字段对应-->\n        <property name=\"username\" column=\"username\"></property>\n        <property name=\"password\" column=\"password\"></property>\n        <property name=\"address\" column=\"address\"></property>\n    </class>\n</hibernate-mapping>\n```\nSpring的约束是screma\n4.创建hibernate的核心配置文件\n```\n核心配置文件格式xml\n期名称和位置是固定的\n1.位置:src下面\n名称:hibernate.cfg.xml\n2.引入dtd约束\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!DOCTYPE hibernate-configuration PUBLIC\n        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n        \"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd\">\n3.hibernate操作中只加载核心配置文件,其他配置文件不会加载\n\n```\n```\n1.配置数据库信息\n2.配置hibernate信息\n3.把映射文件放到配置文件中\n<hibernate-configuration>\n    <session-factory>\n        <!--第一部分,必须的-->\n        <property name=\"hibernate.connection.driver_class\" >com.mysql.jdbc.Driver</property>\n        <property name=\"hibernate.connection.url\">jdbc:mysql://localhost:3306/hibernate</property>\n        <property name=\"connection.username\">root</property>\n        <property name=\"connection.password\">admin</property>\n        <!--第二部分,可选-->\n        <!--底层输出sql-->\n        <property name=\"hibernate.show_sql\">true</property>\n        <!--底层输出sql语句格式-->\n        <property name=\"hibernate.format_sql\">true</property>\n        <!--hibernate帮忙创建表-->\n        <!--update如果有表就更新，没表就创建-->\n        <property name=\"hibernate.hbm2ddl.auto\">update</property>\n        <!--配置数据库的方言-->\n        <!--让hibernate识别不同数据库的语句-->\n        <property name=\"hibernate.dialect\">org.hibernate.dialect.MySQLDialect</property>\n        <mapping resource=\"cn/itcast/entity/User.hbm.xml\"></mapping>\n    </session-factory>\n</hibernate-configuration>\n\n```\nhibernate操作的步骤\n```\n1.加载核心配置文件\n2.创建SessionFactory对象\n3.使用SessionFactory创建Session对象(与HTTPSession没有任何关系)\n4.开启事务\n5.写我们具体的逻辑crud\n6.提交事务\n7.关闭资源/连接\n\n        Configuration cfg = new Configuration();\n        cfg.configure();\n        //2. 创建SessionFactory\n        //在这个过程中,会找到映射文件,把表也创建出来\n        SessionFactory sessionFactory = cfg.buildSessionFactory();\n        //3. 创建session对象\n        //如何理解:类似于Connection conn = DriverManager.getConnection\n        Session session = sessionFactory.openSession();\n        //4. 开启事务\n        Transaction transaction = session.beginTransaction();\n        //5. 写具体逻辑\n        User user = new User(x);\n        user.setUid(123456);\n        user.setUsername(\"小王\");\n        user.setPassword(\"123\");\n        user.setAddress(\"美国\");\n        session.save(user);\n        //6. 提交事务\n        transaction.commit();\n        //7. 关闭事务\n        session.close();\n        sessionFactory.close();\n```\nhibernate配置文件详解\n```\n1. hibernate映射文件名称位置不固定\n2.关于映射配置文件\n内部中写的都是实体类相关的\n- 1. class的name属性值是实体类的全路径\n- 2. id标签和property的name都是实体类属性名称\n3.id标签好property标签,column属性可以省略,表的字段自动与实体类属性名称一致\n\n```\nhibernate中核心api的使用\n```\n创建SessionFactory特别耗费资源\n所以在hibernate操作中,建议一个项目创建一个sessionFactory\n具体实现:\n1.写工具类,写静态代码实现\npublic class HibernateUtils {\n    static Configuration cfg = null;\n    static SessionFactory sessionFactory = null;\n    static {\n        //加载核心配置文件\n        cfg = new Configuration();\n        cfg.configure();\n        SessionFactory sessionFactory = cfg.buildSessionFactory();\n    }\n    public static SessionFactory getSessionFactory(){\n        return sessionFactory;\n    }\n}\n\n```\n---\nSession(重点)\n1. 类似于jdbc中的connection\n2. 调用session里面的不同方法实现crud操作\n- 1.添加 save方法\n- 2 修改 update方法\n- 3. 删除方法\n- 4. 根据id查询get方法\n3. 一个项目一般只创建一个SessionFactory.session对象单线程对象,不能共用,只能自己用\n---\nTransaction\nTransaction tx = session.beginTransaction();\ntx.commit();\ntx.rollback();\n事务概念\n- 1.原子性:一种操作一种失败都失败\n- 2.一致性:操作之前之后要一致\n- 3.隔离性:多个事务同时操作不影响\n- 4.持久性:提交数据库后持久性\n---\n```\n实体类的编写规则\n实体类不建议使用基本数据类型,而是包装类\n因为包装类Interger 可以为null,可以为0;\n实体类也叫做持久化类\n\n```\n```\nhibernate主键生成策略\nincrement:每次增量为1\nidentity:数据库支持自动自动增长的类型.适用于代理主键\nsequence:条件是数据库支持序列,如oracle\nnative:根据底层数据库对自动生成标识符\nuuid:32位16进制字符串 column=\"uuid\"\n```\n---\n```\n对实体类crud的操作\n1.添加\n调用sesson save方法\nsesson.save(user);\n2.根据id查询\nUser user = session.get(User.class,1);\n3.修改\n先查询,再修改\nUser user = session.get(User.class,1);\nuser.setUserName(\"newName\");\nsession.update(user);\n4.删除\nUser user = session.get(User.class,1);\nsession.delete(user);\n```\n实体类对象的状态\n```\n瞬态值:\n持久态:\n托管态:\n```\nHibernate的一级缓存\n```\n1. 把数据存在数据库里,数据库本身是文件系统,可以直接用流方式操作文件效率不高\n2. 把数据放在内存中,提高效率\n\nHibernate的缓存特点:\n1.Hibernate的一级缓存\n- 1 默认打开\n- 2 一级缓存有使用范围,从session创建到session关闭的范围.\n- 3 一级缓存中存储数据必须是持久态数据\n2. Hibernate的二级缓存已经没人使用,有一种替代技术,redis\n- 1 默认不打开,需要配置\n- 2 使用范围是整个web范围,SessionFactory范围.一个项目只有这一个对象\n```\n验证方式:\n```\n1.根据uid=1查询\n2.再根据uid=1查询\n验证第二次没有发送sql语句(第二次不查数据库而查一级缓存)\n```\n一级缓存的特性:\n```\n持久态会自动更新数据库\nUser user = session.get(User.class,7)\n把user放在一级缓存快照区\nuser.setUsernamme(\"hanmeimei\")\n修改的是持久态对象的值\n同时修改一级缓存的内容,但不一定修改一级缓存对应的快照区内容.\n最后提交事务,会:\n比较一级缓存和快照区内容是否相同,如果不同会把一级缓存区存放在数据库中\n```\n---\n事务代码规范\n```\n1.不考虑隔离产生的问题\n-1 脏读\n-2 不可重复度\n-3 虚读\n解决方法:\n设置事务隔离级别. 默认级别\n-1 mysql默认隔离级别是repeatable read\n<property name=\"hibernate.connection.isolation\">4</property>\ntry{\n    sessionFactory=HibernateUtils.getSessionFactory();\n    session = sessionFactory.openSession();\n    tx = session.beginTransaction();\n    ...\n    tx.commit();\n}catch(){\n    session.rollback();\n    }\nfinaly{\n    \n}\n\n\n```\nhibernate绑定session\n```\n配置与本地线程绑定的session\n获取本地线程绑定session,关闭session报错\n\n\n```\nstruts2 重点:\n```\n1.Action操作\n- 1.创建继承ActionSupport\n- 2.配置action的访问路径,创建struts.xml的配置文件,其固定在src下面\n- 3.配置多个action访问方法\n- 4.在action获取表单提交数据\n-- 1.获取request对象\n模型驱动(重点)\n--6.配置过滤器\n2.值栈\n-1. 向值栈中放置数据\n- set方法,push方法,定义变量,生成get方法\n\n\n3.拦截器\n- 1. aop和责任链模式\n- 2. 自定义拦截器\n继承MethodFilterInterceptor\n重写方法\n配置拦截器和action的关联\n\n```","slug":"Spring,Struts学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hza2000edcyuf5p8kfyz","content":"<p>使用AspectJ的XML配置声明式事务<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 配置声明式事务管理器</span><br><span class=\"line\">创建DataSourceTranscationManager对象</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--第一步,配置事务管理器--&gt;</span><br><span class=\"line\">&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span><br><span class=\"line\">    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\">&lt;!--第二步 配置事务的增强--&gt;</span><br><span class=\"line\">&lt;tx:advice id=&quot;txadvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;</span><br><span class=\"line\">    &lt;tx:attributes&gt;</span><br><span class=\"line\">        &lt;!--设置匹配规则--&gt;</span><br><span class=\"line\">        &lt;tx:method name=&quot;account*&quot; propagation=&quot;REQUIRED&quot;/&gt;</span><br><span class=\"line\">        &lt;tx:method name=&quot;insert*&quot;/&gt;</span><br><span class=\"line\">    &lt;/tx:attributes&gt;</span><br><span class=\"line\">&lt;/tx:advice&gt;</span><br><span class=\"line\">&lt;!--第三步 配置切面--&gt;</span><br><span class=\"line\">&lt;aop:config&gt;</span><br><span class=\"line\">    &lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* com.Spring_tx.OrdersService.*(..))&quot;&gt;&lt;/aop:pointcut&gt;</span><br><span class=\"line\">    &lt;aop:advisor advice-ref=&quot;txadvice&quot; pointcut-ref=&quot;pointcut1&quot;&gt;&lt;/aop:advisor&gt;</span><br><span class=\"line\">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注解方式实现:</span><br><span class=\"line\">&lt;!--第一步,配置事务管理器--&gt;</span><br><span class=\"line\">&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span><br><span class=\"line\">    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\">&lt;!--第二步--&gt;</span><br><span class=\"line\">    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;</span><br><span class=\"line\">&lt;!--第三步--&gt;</span><br><span class=\"line\">找到@Transactional,里面所有方法加事务管理</span><br></pre></td></tr></table></figure>\n<p>Hibernate框架<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ORM思想</span><br><span class=\"line\">实体类与数据库映射</span><br><span class=\"line\">Hibernate与Spring整合,两个核心配置文件名称和位置没有固定要求</span><br><span class=\"line\">hibernate.cfg.xml</span><br></pre></td></tr></table></figure></p>\n<p>Hibernate入门学习<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.让实体类和表一一对应 使用配置文件方式</span><br><span class=\"line\"></span><br><span class=\"line\">2. 不需要操作表,只需要操作表对应的实体类对象就可以了</span><br><span class=\"line\"></span><br><span class=\"line\">3. hibernate封装的对象session</span><br><span class=\"line\"></span><br><span class=\"line\">4. 创建实体类对象</span><br><span class=\"line\">User user = new User();</span><br><span class=\"line\">user.setUsername(&quot;lucy&quot;);</span><br><span class=\"line\">session.save(user);</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.hibernate要求实体类中有一个属性唯一的值</span><br><span class=\"line\">2.使用hibernate时不需要手动创建表,会自动建表</span><br><span class=\"line\">3.配置实体类和数据库表一一对应关系(使用配置文件实现映射)</span><br><span class=\"line\">配置名称和位置没有固定要求</span><br><span class=\"line\">建议:实体类所在包里创建,名称:Hbm.xml</span><br><span class=\"line\">配置xml首先要引入约束,schema,dtd</span><br><span class=\"line\">引入约束</span><br><span class=\"line\">&lt;!DOCTYPE hibernate-mapping PUBLIC</span><br><span class=\"line\">        &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class=\"line\">        &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br></pre></td></tr></table></figure>\n<p>然后:hibernate的映射<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;hibernate-mapping&gt;</span><br><span class=\"line\">    &lt;!--class</span><br><span class=\"line\">    name:全路径</span><br><span class=\"line\">    table:数据库表的名称--&gt;</span><br><span class=\"line\">    &lt;class name=&quot;cn.itcast.entity.User&quot; table=&quot;t_user&quot;&gt;</span><br><span class=\"line\">        &lt;!--2.配置要求实体类有一个属性唯一值--&gt;</span><br><span class=\"line\">        &lt;!--id:实体类id属性名称,column:表字段名称--&gt;</span><br><span class=\"line\">        &lt;id name=&quot;uid&quot; column=&quot;uid&quot;&gt;</span><br><span class=\"line\">            &lt;!--设置增长策略--&gt;</span><br><span class=\"line\">            &lt;!--native就是自动增长--&gt;</span><br><span class=\"line\">            &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span><br><span class=\"line\">        &lt;/id&gt;</span><br><span class=\"line\">        &lt;!--配置其他属性和表字段对应--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;username&quot; column=&quot;username&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;password&quot; column=&quot;password&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;address&quot; column=&quot;address&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/class&gt;</span><br><span class=\"line\">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>\n<p>Spring的约束是screma<br>4.创建hibernate的核心配置文件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">核心配置文件格式xml</span><br><span class=\"line\">期名称和位置是固定的</span><br><span class=\"line\">1.位置:src下面</span><br><span class=\"line\">名称:hibernate.cfg.xml</span><br><span class=\"line\">2.引入dtd约束</span><br><span class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE hibernate-configuration PUBLIC</span><br><span class=\"line\">        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</span><br><span class=\"line\">        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;</span><br><span class=\"line\">3.hibernate操作中只加载核心配置文件,其他配置文件不会加载</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.配置数据库信息</span><br><span class=\"line\">2.配置hibernate信息</span><br><span class=\"line\">3.把映射文件放到配置文件中</span><br><span class=\"line\">&lt;hibernate-configuration&gt;</span><br><span class=\"line\">    &lt;session-factory&gt;</span><br><span class=\"line\">        &lt;!--第一部分,必须的--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.connection.driver_class&quot; &gt;com.mysql.jdbc.Driver&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/hibernate&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;connection.password&quot;&gt;admin&lt;/property&gt;</span><br><span class=\"line\">        &lt;!--第二部分,可选--&gt;</span><br><span class=\"line\">        &lt;!--底层输出sql--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;</span><br><span class=\"line\">        &lt;!--底层输出sql语句格式--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.format_sql&quot;&gt;true&lt;/property&gt;</span><br><span class=\"line\">        &lt;!--hibernate帮忙创建表--&gt;</span><br><span class=\"line\">        &lt;!--update如果有表就更新，没表就创建--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;</span><br><span class=\"line\">        &lt;!--配置数据库的方言--&gt;</span><br><span class=\"line\">        &lt;!--让hibernate识别不同数据库的语句--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;</span><br><span class=\"line\">        &lt;mapping resource=&quot;cn/itcast/entity/User.hbm.xml&quot;&gt;&lt;/mapping&gt;</span><br><span class=\"line\">    &lt;/session-factory&gt;</span><br><span class=\"line\">&lt;/hibernate-configuration&gt;</span><br></pre></td></tr></table></figure>\n<p>hibernate操作的步骤<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.加载核心配置文件</span><br><span class=\"line\">2.创建SessionFactory对象</span><br><span class=\"line\">3.使用SessionFactory创建Session对象(与HTTPSession没有任何关系)</span><br><span class=\"line\">4.开启事务</span><br><span class=\"line\">5.写我们具体的逻辑crud</span><br><span class=\"line\">6.提交事务</span><br><span class=\"line\">7.关闭资源/连接</span><br><span class=\"line\"></span><br><span class=\"line\">        Configuration cfg = new Configuration();</span><br><span class=\"line\">        cfg.configure();</span><br><span class=\"line\">        //2. 创建SessionFactory</span><br><span class=\"line\">        //在这个过程中,会找到映射文件,把表也创建出来</span><br><span class=\"line\">        SessionFactory sessionFactory = cfg.buildSessionFactory();</span><br><span class=\"line\">        //3. 创建session对象</span><br><span class=\"line\">        //如何理解:类似于Connection conn = DriverManager.getConnection</span><br><span class=\"line\">        Session session = sessionFactory.openSession();</span><br><span class=\"line\">        //4. 开启事务</span><br><span class=\"line\">        Transaction transaction = session.beginTransaction();</span><br><span class=\"line\">        //5. 写具体逻辑</span><br><span class=\"line\">        User user = new User(x);</span><br><span class=\"line\">        user.setUid(123456);</span><br><span class=\"line\">        user.setUsername(&quot;小王&quot;);</span><br><span class=\"line\">        user.setPassword(&quot;123&quot;);</span><br><span class=\"line\">        user.setAddress(&quot;美国&quot;);</span><br><span class=\"line\">        session.save(user);</span><br><span class=\"line\">        //6. 提交事务</span><br><span class=\"line\">        transaction.commit();</span><br><span class=\"line\">        //7. 关闭事务</span><br><span class=\"line\">        session.close();</span><br><span class=\"line\">        sessionFactory.close();</span><br></pre></td></tr></table></figure></p>\n<p>hibernate配置文件详解<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. hibernate映射文件名称位置不固定</span><br><span class=\"line\">2.关于映射配置文件</span><br><span class=\"line\">内部中写的都是实体类相关的</span><br><span class=\"line\">- 1. class的name属性值是实体类的全路径</span><br><span class=\"line\">- 2. id标签和property的name都是实体类属性名称</span><br><span class=\"line\">3.id标签好property标签,column属性可以省略,表的字段自动与实体类属性名称一致</span><br></pre></td></tr></table></figure></p>\n<p>hibernate中核心api的使用<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建SessionFactory特别耗费资源</span><br><span class=\"line\">所以在hibernate操作中,建议一个项目创建一个sessionFactory</span><br><span class=\"line\">具体实现:</span><br><span class=\"line\">1.写工具类,写静态代码实现</span><br><span class=\"line\">public class HibernateUtils &#123;</span><br><span class=\"line\">    static Configuration cfg = null;</span><br><span class=\"line\">    static SessionFactory sessionFactory = null;</span><br><span class=\"line\">    static &#123;</span><br><span class=\"line\">        //加载核心配置文件</span><br><span class=\"line\">        cfg = new Configuration();</span><br><span class=\"line\">        cfg.configure();</span><br><span class=\"line\">        SessionFactory sessionFactory = cfg.buildSessionFactory();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    public static SessionFactory getSessionFactory()&#123;</span><br><span class=\"line\">        return sessionFactory;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>Session(重点)</p>\n<ol>\n<li>类似于jdbc中的connection</li>\n<li>调用session里面的不同方法实现crud操作</li>\n</ol>\n<ul>\n<li>1.添加 save方法</li>\n<li>2 修改 update方法</li>\n<li><ol start=\"3\">\n<li>删除方法</li>\n</ol>\n</li>\n<li><ol start=\"4\">\n<li>根据id查询get方法</li>\n</ol>\n</li>\n</ul>\n<ol start=\"3\">\n<li>一个项目一般只创建一个SessionFactory.session对象单线程对象,不能共用,只能自己用</li>\n</ol>\n<hr>\n<p>Transaction<br>Transaction tx = session.beginTransaction();<br>tx.commit();<br>tx.rollback();<br>事务概念</p>\n<ul>\n<li>1.原子性:一种操作一种失败都失败</li>\n<li>2.一致性:操作之前之后要一致</li>\n<li>3.隔离性:多个事务同时操作不影响</li>\n<li>4.持久性:提交数据库后持久性</li>\n</ul>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">实体类的编写规则</span><br><span class=\"line\">实体类不建议使用基本数据类型,而是包装类</span><br><span class=\"line\">因为包装类Interger 可以为null,可以为0;</span><br><span class=\"line\">实体类也叫做持久化类</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hibernate主键生成策略</span><br><span class=\"line\">increment:每次增量为1</span><br><span class=\"line\">identity:数据库支持自动自动增长的类型.适用于代理主键</span><br><span class=\"line\">sequence:条件是数据库支持序列,如oracle</span><br><span class=\"line\">native:根据底层数据库对自动生成标识符</span><br><span class=\"line\">uuid:32位16进制字符串 column=&quot;uuid&quot;</span><br></pre></td></tr></table></figure>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对实体类crud的操作</span><br><span class=\"line\">1.添加</span><br><span class=\"line\">调用sesson save方法</span><br><span class=\"line\">sesson.save(user);</span><br><span class=\"line\">2.根据id查询</span><br><span class=\"line\">User user = session.get(User.class,1);</span><br><span class=\"line\">3.修改</span><br><span class=\"line\">先查询,再修改</span><br><span class=\"line\">User user = session.get(User.class,1);</span><br><span class=\"line\">user.setUserName(&quot;newName&quot;);</span><br><span class=\"line\">session.update(user);</span><br><span class=\"line\">4.删除</span><br><span class=\"line\">User user = session.get(User.class,1);</span><br><span class=\"line\">session.delete(user);</span><br></pre></td></tr></table></figure>\n<p>实体类对象的状态<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">瞬态值:</span><br><span class=\"line\">持久态:</span><br><span class=\"line\">托管态:</span><br></pre></td></tr></table></figure></p>\n<p>Hibernate的一级缓存<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 把数据存在数据库里,数据库本身是文件系统,可以直接用流方式操作文件效率不高</span><br><span class=\"line\">2. 把数据放在内存中,提高效率</span><br><span class=\"line\"></span><br><span class=\"line\">Hibernate的缓存特点:</span><br><span class=\"line\">1.Hibernate的一级缓存</span><br><span class=\"line\">- 1 默认打开</span><br><span class=\"line\">- 2 一级缓存有使用范围,从session创建到session关闭的范围.</span><br><span class=\"line\">- 3 一级缓存中存储数据必须是持久态数据</span><br><span class=\"line\">2. Hibernate的二级缓存已经没人使用,有一种替代技术,redis</span><br><span class=\"line\">- 1 默认不打开,需要配置</span><br><span class=\"line\">- 2 使用范围是整个web范围,SessionFactory范围.一个项目只有这一个对象</span><br></pre></td></tr></table></figure></p>\n<p>验证方式:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.根据uid=1查询</span><br><span class=\"line\">2.再根据uid=1查询</span><br><span class=\"line\">验证第二次没有发送sql语句(第二次不查数据库而查一级缓存)</span><br></pre></td></tr></table></figure></p>\n<p>一级缓存的特性:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">持久态会自动更新数据库</span><br><span class=\"line\">User user = session.get(User.class,7)</span><br><span class=\"line\">把user放在一级缓存快照区</span><br><span class=\"line\">user.setUsernamme(&quot;hanmeimei&quot;)</span><br><span class=\"line\">修改的是持久态对象的值</span><br><span class=\"line\">同时修改一级缓存的内容,但不一定修改一级缓存对应的快照区内容.</span><br><span class=\"line\">最后提交事务,会:</span><br><span class=\"line\">比较一级缓存和快照区内容是否相同,如果不同会把一级缓存区存放在数据库中</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>事务代码规范<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.不考虑隔离产生的问题</span><br><span class=\"line\">-1 脏读</span><br><span class=\"line\">-2 不可重复度</span><br><span class=\"line\">-3 虚读</span><br><span class=\"line\">解决方法:</span><br><span class=\"line\">设置事务隔离级别. 默认级别</span><br><span class=\"line\">-1 mysql默认隔离级别是repeatable read</span><br><span class=\"line\">&lt;property name=&quot;hibernate.connection.isolation&quot;&gt;4&lt;/property&gt;</span><br><span class=\"line\">try&#123;</span><br><span class=\"line\">    sessionFactory=HibernateUtils.getSessionFactory();</span><br><span class=\"line\">    session = sessionFactory.openSession();</span><br><span class=\"line\">    tx = session.beginTransaction();</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    tx.commit();</span><br><span class=\"line\">&#125;catch()&#123;</span><br><span class=\"line\">    session.rollback();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">finaly&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>hibernate绑定session<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">配置与本地线程绑定的session</span><br><span class=\"line\">获取本地线程绑定session,关闭session报错</span><br></pre></td></tr></table></figure></p>\n<p>struts2 重点:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.Action操作</span><br><span class=\"line\">- 1.创建继承ActionSupport</span><br><span class=\"line\">- 2.配置action的访问路径,创建struts.xml的配置文件,其固定在src下面</span><br><span class=\"line\">- 3.配置多个action访问方法</span><br><span class=\"line\">- 4.在action获取表单提交数据</span><br><span class=\"line\">-- 1.获取request对象</span><br><span class=\"line\">模型驱动(重点)</span><br><span class=\"line\">--6.配置过滤器</span><br><span class=\"line\">2.值栈</span><br><span class=\"line\">-1. 向值栈中放置数据</span><br><span class=\"line\">- set方法,push方法,定义变量,生成get方法</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">3.拦截器</span><br><span class=\"line\">- 1. aop和责任链模式</span><br><span class=\"line\">- 2. 自定义拦截器</span><br><span class=\"line\">继承MethodFilterInterceptor</span><br><span class=\"line\">重写方法</span><br><span class=\"line\">配置拦截器和action的关联</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>使用AspectJ的XML配置声明式事务<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 配置声明式事务管理器</span><br><span class=\"line\">创建DataSourceTranscationManager对象</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--第一步,配置事务管理器--&gt;</span><br><span class=\"line\">&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span><br><span class=\"line\">    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\">&lt;!--第二步 配置事务的增强--&gt;</span><br><span class=\"line\">&lt;tx:advice id=&quot;txadvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;</span><br><span class=\"line\">    &lt;tx:attributes&gt;</span><br><span class=\"line\">        &lt;!--设置匹配规则--&gt;</span><br><span class=\"line\">        &lt;tx:method name=&quot;account*&quot; propagation=&quot;REQUIRED&quot;/&gt;</span><br><span class=\"line\">        &lt;tx:method name=&quot;insert*&quot;/&gt;</span><br><span class=\"line\">    &lt;/tx:attributes&gt;</span><br><span class=\"line\">&lt;/tx:advice&gt;</span><br><span class=\"line\">&lt;!--第三步 配置切面--&gt;</span><br><span class=\"line\">&lt;aop:config&gt;</span><br><span class=\"line\">    &lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* com.Spring_tx.OrdersService.*(..))&quot;&gt;&lt;/aop:pointcut&gt;</span><br><span class=\"line\">    &lt;aop:advisor advice-ref=&quot;txadvice&quot; pointcut-ref=&quot;pointcut1&quot;&gt;&lt;/aop:advisor&gt;</span><br><span class=\"line\">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注解方式实现:</span><br><span class=\"line\">&lt;!--第一步,配置事务管理器--&gt;</span><br><span class=\"line\">&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span><br><span class=\"line\">    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\">&lt;!--第二步--&gt;</span><br><span class=\"line\">    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;</span><br><span class=\"line\">&lt;!--第三步--&gt;</span><br><span class=\"line\">找到@Transactional,里面所有方法加事务管理</span><br></pre></td></tr></table></figure>\n<p>Hibernate框架<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ORM思想</span><br><span class=\"line\">实体类与数据库映射</span><br><span class=\"line\">Hibernate与Spring整合,两个核心配置文件名称和位置没有固定要求</span><br><span class=\"line\">hibernate.cfg.xml</span><br></pre></td></tr></table></figure></p>\n<p>Hibernate入门学习<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.让实体类和表一一对应 使用配置文件方式</span><br><span class=\"line\"></span><br><span class=\"line\">2. 不需要操作表,只需要操作表对应的实体类对象就可以了</span><br><span class=\"line\"></span><br><span class=\"line\">3. hibernate封装的对象session</span><br><span class=\"line\"></span><br><span class=\"line\">4. 创建实体类对象</span><br><span class=\"line\">User user = new User();</span><br><span class=\"line\">user.setUsername(&quot;lucy&quot;);</span><br><span class=\"line\">session.save(user);</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.hibernate要求实体类中有一个属性唯一的值</span><br><span class=\"line\">2.使用hibernate时不需要手动创建表,会自动建表</span><br><span class=\"line\">3.配置实体类和数据库表一一对应关系(使用配置文件实现映射)</span><br><span class=\"line\">配置名称和位置没有固定要求</span><br><span class=\"line\">建议:实体类所在包里创建,名称:Hbm.xml</span><br><span class=\"line\">配置xml首先要引入约束,schema,dtd</span><br><span class=\"line\">引入约束</span><br><span class=\"line\">&lt;!DOCTYPE hibernate-mapping PUBLIC</span><br><span class=\"line\">        &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class=\"line\">        &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br></pre></td></tr></table></figure>\n<p>然后:hibernate的映射<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;hibernate-mapping&gt;</span><br><span class=\"line\">    &lt;!--class</span><br><span class=\"line\">    name:全路径</span><br><span class=\"line\">    table:数据库表的名称--&gt;</span><br><span class=\"line\">    &lt;class name=&quot;cn.itcast.entity.User&quot; table=&quot;t_user&quot;&gt;</span><br><span class=\"line\">        &lt;!--2.配置要求实体类有一个属性唯一值--&gt;</span><br><span class=\"line\">        &lt;!--id:实体类id属性名称,column:表字段名称--&gt;</span><br><span class=\"line\">        &lt;id name=&quot;uid&quot; column=&quot;uid&quot;&gt;</span><br><span class=\"line\">            &lt;!--设置增长策略--&gt;</span><br><span class=\"line\">            &lt;!--native就是自动增长--&gt;</span><br><span class=\"line\">            &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span><br><span class=\"line\">        &lt;/id&gt;</span><br><span class=\"line\">        &lt;!--配置其他属性和表字段对应--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;username&quot; column=&quot;username&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;password&quot; column=&quot;password&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;address&quot; column=&quot;address&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/class&gt;</span><br><span class=\"line\">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>\n<p>Spring的约束是screma<br>4.创建hibernate的核心配置文件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">核心配置文件格式xml</span><br><span class=\"line\">期名称和位置是固定的</span><br><span class=\"line\">1.位置:src下面</span><br><span class=\"line\">名称:hibernate.cfg.xml</span><br><span class=\"line\">2.引入dtd约束</span><br><span class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE hibernate-configuration PUBLIC</span><br><span class=\"line\">        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</span><br><span class=\"line\">        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;</span><br><span class=\"line\">3.hibernate操作中只加载核心配置文件,其他配置文件不会加载</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.配置数据库信息</span><br><span class=\"line\">2.配置hibernate信息</span><br><span class=\"line\">3.把映射文件放到配置文件中</span><br><span class=\"line\">&lt;hibernate-configuration&gt;</span><br><span class=\"line\">    &lt;session-factory&gt;</span><br><span class=\"line\">        &lt;!--第一部分,必须的--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.connection.driver_class&quot; &gt;com.mysql.jdbc.Driver&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/hibernate&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;connection.password&quot;&gt;admin&lt;/property&gt;</span><br><span class=\"line\">        &lt;!--第二部分,可选--&gt;</span><br><span class=\"line\">        &lt;!--底层输出sql--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;</span><br><span class=\"line\">        &lt;!--底层输出sql语句格式--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.format_sql&quot;&gt;true&lt;/property&gt;</span><br><span class=\"line\">        &lt;!--hibernate帮忙创建表--&gt;</span><br><span class=\"line\">        &lt;!--update如果有表就更新，没表就创建--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;</span><br><span class=\"line\">        &lt;!--配置数据库的方言--&gt;</span><br><span class=\"line\">        &lt;!--让hibernate识别不同数据库的语句--&gt;</span><br><span class=\"line\">        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;</span><br><span class=\"line\">        &lt;mapping resource=&quot;cn/itcast/entity/User.hbm.xml&quot;&gt;&lt;/mapping&gt;</span><br><span class=\"line\">    &lt;/session-factory&gt;</span><br><span class=\"line\">&lt;/hibernate-configuration&gt;</span><br></pre></td></tr></table></figure>\n<p>hibernate操作的步骤<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.加载核心配置文件</span><br><span class=\"line\">2.创建SessionFactory对象</span><br><span class=\"line\">3.使用SessionFactory创建Session对象(与HTTPSession没有任何关系)</span><br><span class=\"line\">4.开启事务</span><br><span class=\"line\">5.写我们具体的逻辑crud</span><br><span class=\"line\">6.提交事务</span><br><span class=\"line\">7.关闭资源/连接</span><br><span class=\"line\"></span><br><span class=\"line\">        Configuration cfg = new Configuration();</span><br><span class=\"line\">        cfg.configure();</span><br><span class=\"line\">        //2. 创建SessionFactory</span><br><span class=\"line\">        //在这个过程中,会找到映射文件,把表也创建出来</span><br><span class=\"line\">        SessionFactory sessionFactory = cfg.buildSessionFactory();</span><br><span class=\"line\">        //3. 创建session对象</span><br><span class=\"line\">        //如何理解:类似于Connection conn = DriverManager.getConnection</span><br><span class=\"line\">        Session session = sessionFactory.openSession();</span><br><span class=\"line\">        //4. 开启事务</span><br><span class=\"line\">        Transaction transaction = session.beginTransaction();</span><br><span class=\"line\">        //5. 写具体逻辑</span><br><span class=\"line\">        User user = new User(x);</span><br><span class=\"line\">        user.setUid(123456);</span><br><span class=\"line\">        user.setUsername(&quot;小王&quot;);</span><br><span class=\"line\">        user.setPassword(&quot;123&quot;);</span><br><span class=\"line\">        user.setAddress(&quot;美国&quot;);</span><br><span class=\"line\">        session.save(user);</span><br><span class=\"line\">        //6. 提交事务</span><br><span class=\"line\">        transaction.commit();</span><br><span class=\"line\">        //7. 关闭事务</span><br><span class=\"line\">        session.close();</span><br><span class=\"line\">        sessionFactory.close();</span><br></pre></td></tr></table></figure></p>\n<p>hibernate配置文件详解<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. hibernate映射文件名称位置不固定</span><br><span class=\"line\">2.关于映射配置文件</span><br><span class=\"line\">内部中写的都是实体类相关的</span><br><span class=\"line\">- 1. class的name属性值是实体类的全路径</span><br><span class=\"line\">- 2. id标签和property的name都是实体类属性名称</span><br><span class=\"line\">3.id标签好property标签,column属性可以省略,表的字段自动与实体类属性名称一致</span><br></pre></td></tr></table></figure></p>\n<p>hibernate中核心api的使用<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建SessionFactory特别耗费资源</span><br><span class=\"line\">所以在hibernate操作中,建议一个项目创建一个sessionFactory</span><br><span class=\"line\">具体实现:</span><br><span class=\"line\">1.写工具类,写静态代码实现</span><br><span class=\"line\">public class HibernateUtils &#123;</span><br><span class=\"line\">    static Configuration cfg = null;</span><br><span class=\"line\">    static SessionFactory sessionFactory = null;</span><br><span class=\"line\">    static &#123;</span><br><span class=\"line\">        //加载核心配置文件</span><br><span class=\"line\">        cfg = new Configuration();</span><br><span class=\"line\">        cfg.configure();</span><br><span class=\"line\">        SessionFactory sessionFactory = cfg.buildSessionFactory();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    public static SessionFactory getSessionFactory()&#123;</span><br><span class=\"line\">        return sessionFactory;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>Session(重点)</p>\n<ol>\n<li>类似于jdbc中的connection</li>\n<li>调用session里面的不同方法实现crud操作</li>\n</ol>\n<ul>\n<li>1.添加 save方法</li>\n<li>2 修改 update方法</li>\n<li><ol start=\"3\">\n<li>删除方法</li>\n</ol>\n</li>\n<li><ol start=\"4\">\n<li>根据id查询get方法</li>\n</ol>\n</li>\n</ul>\n<ol start=\"3\">\n<li>一个项目一般只创建一个SessionFactory.session对象单线程对象,不能共用,只能自己用</li>\n</ol>\n<hr>\n<p>Transaction<br>Transaction tx = session.beginTransaction();<br>tx.commit();<br>tx.rollback();<br>事务概念</p>\n<ul>\n<li>1.原子性:一种操作一种失败都失败</li>\n<li>2.一致性:操作之前之后要一致</li>\n<li>3.隔离性:多个事务同时操作不影响</li>\n<li>4.持久性:提交数据库后持久性</li>\n</ul>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">实体类的编写规则</span><br><span class=\"line\">实体类不建议使用基本数据类型,而是包装类</span><br><span class=\"line\">因为包装类Interger 可以为null,可以为0;</span><br><span class=\"line\">实体类也叫做持久化类</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hibernate主键生成策略</span><br><span class=\"line\">increment:每次增量为1</span><br><span class=\"line\">identity:数据库支持自动自动增长的类型.适用于代理主键</span><br><span class=\"line\">sequence:条件是数据库支持序列,如oracle</span><br><span class=\"line\">native:根据底层数据库对自动生成标识符</span><br><span class=\"line\">uuid:32位16进制字符串 column=&quot;uuid&quot;</span><br></pre></td></tr></table></figure>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对实体类crud的操作</span><br><span class=\"line\">1.添加</span><br><span class=\"line\">调用sesson save方法</span><br><span class=\"line\">sesson.save(user);</span><br><span class=\"line\">2.根据id查询</span><br><span class=\"line\">User user = session.get(User.class,1);</span><br><span class=\"line\">3.修改</span><br><span class=\"line\">先查询,再修改</span><br><span class=\"line\">User user = session.get(User.class,1);</span><br><span class=\"line\">user.setUserName(&quot;newName&quot;);</span><br><span class=\"line\">session.update(user);</span><br><span class=\"line\">4.删除</span><br><span class=\"line\">User user = session.get(User.class,1);</span><br><span class=\"line\">session.delete(user);</span><br></pre></td></tr></table></figure>\n<p>实体类对象的状态<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">瞬态值:</span><br><span class=\"line\">持久态:</span><br><span class=\"line\">托管态:</span><br></pre></td></tr></table></figure></p>\n<p>Hibernate的一级缓存<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 把数据存在数据库里,数据库本身是文件系统,可以直接用流方式操作文件效率不高</span><br><span class=\"line\">2. 把数据放在内存中,提高效率</span><br><span class=\"line\"></span><br><span class=\"line\">Hibernate的缓存特点:</span><br><span class=\"line\">1.Hibernate的一级缓存</span><br><span class=\"line\">- 1 默认打开</span><br><span class=\"line\">- 2 一级缓存有使用范围,从session创建到session关闭的范围.</span><br><span class=\"line\">- 3 一级缓存中存储数据必须是持久态数据</span><br><span class=\"line\">2. Hibernate的二级缓存已经没人使用,有一种替代技术,redis</span><br><span class=\"line\">- 1 默认不打开,需要配置</span><br><span class=\"line\">- 2 使用范围是整个web范围,SessionFactory范围.一个项目只有这一个对象</span><br></pre></td></tr></table></figure></p>\n<p>验证方式:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.根据uid=1查询</span><br><span class=\"line\">2.再根据uid=1查询</span><br><span class=\"line\">验证第二次没有发送sql语句(第二次不查数据库而查一级缓存)</span><br></pre></td></tr></table></figure></p>\n<p>一级缓存的特性:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">持久态会自动更新数据库</span><br><span class=\"line\">User user = session.get(User.class,7)</span><br><span class=\"line\">把user放在一级缓存快照区</span><br><span class=\"line\">user.setUsernamme(&quot;hanmeimei&quot;)</span><br><span class=\"line\">修改的是持久态对象的值</span><br><span class=\"line\">同时修改一级缓存的内容,但不一定修改一级缓存对应的快照区内容.</span><br><span class=\"line\">最后提交事务,会:</span><br><span class=\"line\">比较一级缓存和快照区内容是否相同,如果不同会把一级缓存区存放在数据库中</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>事务代码规范<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.不考虑隔离产生的问题</span><br><span class=\"line\">-1 脏读</span><br><span class=\"line\">-2 不可重复度</span><br><span class=\"line\">-3 虚读</span><br><span class=\"line\">解决方法:</span><br><span class=\"line\">设置事务隔离级别. 默认级别</span><br><span class=\"line\">-1 mysql默认隔离级别是repeatable read</span><br><span class=\"line\">&lt;property name=&quot;hibernate.connection.isolation&quot;&gt;4&lt;/property&gt;</span><br><span class=\"line\">try&#123;</span><br><span class=\"line\">    sessionFactory=HibernateUtils.getSessionFactory();</span><br><span class=\"line\">    session = sessionFactory.openSession();</span><br><span class=\"line\">    tx = session.beginTransaction();</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    tx.commit();</span><br><span class=\"line\">&#125;catch()&#123;</span><br><span class=\"line\">    session.rollback();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">finaly&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>hibernate绑定session<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">配置与本地线程绑定的session</span><br><span class=\"line\">获取本地线程绑定session,关闭session报错</span><br></pre></td></tr></table></figure></p>\n<p>struts2 重点:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.Action操作</span><br><span class=\"line\">- 1.创建继承ActionSupport</span><br><span class=\"line\">- 2.配置action的访问路径,创建struts.xml的配置文件,其固定在src下面</span><br><span class=\"line\">- 3.配置多个action访问方法</span><br><span class=\"line\">- 4.在action获取表单提交数据</span><br><span class=\"line\">-- 1.获取request对象</span><br><span class=\"line\">模型驱动(重点)</span><br><span class=\"line\">--6.配置过滤器</span><br><span class=\"line\">2.值栈</span><br><span class=\"line\">-1. 向值栈中放置数据</span><br><span class=\"line\">- set方法,push方法,定义变量,生成get方法</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">3.拦截器</span><br><span class=\"line\">- 1. aop和责任链模式</span><br><span class=\"line\">- 2. 自定义拦截器</span><br><span class=\"line\">继承MethodFilterInterceptor</span><br><span class=\"line\">重写方法</span><br><span class=\"line\">配置拦截器和action的关联</span><br></pre></td></tr></table></figure></p>\n"},{"title":"2017.10.31 SpringMVC学习","date":"2017-10-30T23:55:58.000Z","_content":"常见的处理器映射\n```\nBeanNameUrlHandlerMapping\nSimpleUrlHandlerMapping\nControllerClassNameHandlerMapping\nSpringMVC加载是什么时候?\n第一次调用时创建\n默认哪个handlerMapping起作用?\n按照xml配置顺序来处理,将所有controller链接,在Springmvc容器加载时进行初始化.调用时,在这个map找到第一个匹配\n```\n终于配好了controller命令控制器(简单的封装)!!!见下\n```\nMyCommandController类:\npublic class MyCommandController extends\nAbstractCommandController {\n    //初始化构造器,将command类型设置为person;类\n    public MyCommandController(){\n        this.setCommandClass(Person.class);\n    }\n    @Override\n    protected ModelAndView handle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, BindException e) throws Exception {\n        Person p = (Person) o;\n        System.out.println(p);\n        return null;\n    }\n}\nspringmvc-servlet.xml中\n    <bean class=\"controller.MyCommandController\"></bean>\n    <bean class=\"org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping\"></bean>\n\nweb.xml中\n    <servlet>\n        <servlet-name>springmvc</servlet-name>\n        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n        <init-param>\n            <param-name>contextConfigLocation</param-name>\n            <param-value>classpath:springmvc-servlet.xml</param-value>\n        </init-param>\n    </servlet>\n    <servlet-mapping>\n        <servlet-name>springmvc</servlet-name>\n        <url-pattern>*.action</url-pattern>\n    </servlet-mapping>\n```\nSimpleFormController\n有些细节知道之后,配置也就不难了\n\nMyFormController类中:\n```\npublic class MyFormController extends SimpleFormController{\n    public MyFormController(){\n        this.setCommandClass(Person.class);\n    }\n    //form表用post方式提交会默认调用doSubmitAction\n    protected void doSubmitAction(Object command) throws Exception{\n        Person p = (Person)command;\n        super.doSubmitAction(command);\n    }\n}\n\n```\n在springmvc-servlet.xml中\n```\n    //需要配置两个属性,表单页面和成功后的跳转页面\n    <bean class=\"controller.MyFormController\">\n        <property name=\"formView\" value=\"/person/jPersonCreate\"></property>\n        <property name=\"successView\" value=\"/index\"></property>\n    </bean>\n    <bean class=\"org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping\"></bean>\n\n//内部资源解析器\n    <bean id=\"jspViewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n        <property name=\"prefix\" value=\"/pages\"></property>\n        <property name=\"suffix\" value=\".jsp\"></property>\n    </bean>\n```\nWizard向导表单控制器\n填简历时,要填各种数据,一个表单来填不好填写,分开填写\n\nMyWizardController\n```\npublic class MyWizardController extends AbstractWizardFormController {\n\n    public MyWizardController(){\n        this.setCommandClass(Person.class);\n        this.setCommandName(\"person\");//配置它可以获得person数据\n    }\n    @Override\n    protected ModelAndView processCancel(HttpServletRequest request, HttpServletResponse response, Object command, BindException errors) throws Exception {\n        return new ModelAndView(\"/wizard/jPersonInfo\");\n    }\n\n    @Override\n    protected ModelAndView processFinish(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, BindException e) throws Exception {\n        Person p = (Person) o;\n        System.out.println(p);\n        return null;\n    }\n}\n\n```\nspringmvc-servlet.xml\n```\n    <bean class=\"controller.MyWizardController\">\n        <property name=\"pages\">\n            <list>\n                <value>/wizard/jPersonEdu</value>\n                <value>/wizard/jPersonInfo</value>\n                <value>/wizard/jPersonJob</value>\n            </list>\n        </property>\n    </bean>\n```\njPersonEdu\n```\n<tr>\n    <td>name</td>\n    <td><input type=\"text\" name=\"name\" value=\"${person.name}\"/></td>\n</tr>\n<tr>\n    <td>age</td>\n    <td><input type=\"text\" name=\"age\"/></td>\n</tr>\n<tr>\n    <td><input type=\"submit\" name=\"_target1\" value=\"下一页\"></td>\n    <td><input type=\"submit\" name=\"_cancel\" value=\"取消\"></td>\n    <td></td>\n</tr>\n```\n基于注解方式实现springmvc\n\nJDK1.8和Tomcat以及SpringMVC3.2版本不兼容,要用4.0的jar包\n\nMyHomeController\n```\n@Controller\npublic class MyHomeController {\n    @RequestMapping(\"/myhome.action\")\n    public String goHome(HttpServletRequest request){\n        System.out.println(request.getRequestURI());\n        return \"pages/index.jsp\";\n    }\n}\n\n```\nspringmvc-servlet.xml\n```\n    <context:component-scan base-package=\"controller\"></context:component-scan>\n```\nweb.xml没有变化\n","source":"_posts/2017.10.31 SpringMVC学习.md","raw":"---\ntitle: 2017.10.31 SpringMVC学习\ndate: 2017-10-31 07:55:58\ntags:\n---\n常见的处理器映射\n```\nBeanNameUrlHandlerMapping\nSimpleUrlHandlerMapping\nControllerClassNameHandlerMapping\nSpringMVC加载是什么时候?\n第一次调用时创建\n默认哪个handlerMapping起作用?\n按照xml配置顺序来处理,将所有controller链接,在Springmvc容器加载时进行初始化.调用时,在这个map找到第一个匹配\n```\n终于配好了controller命令控制器(简单的封装)!!!见下\n```\nMyCommandController类:\npublic class MyCommandController extends\nAbstractCommandController {\n    //初始化构造器,将command类型设置为person;类\n    public MyCommandController(){\n        this.setCommandClass(Person.class);\n    }\n    @Override\n    protected ModelAndView handle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, BindException e) throws Exception {\n        Person p = (Person) o;\n        System.out.println(p);\n        return null;\n    }\n}\nspringmvc-servlet.xml中\n    <bean class=\"controller.MyCommandController\"></bean>\n    <bean class=\"org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping\"></bean>\n\nweb.xml中\n    <servlet>\n        <servlet-name>springmvc</servlet-name>\n        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n        <init-param>\n            <param-name>contextConfigLocation</param-name>\n            <param-value>classpath:springmvc-servlet.xml</param-value>\n        </init-param>\n    </servlet>\n    <servlet-mapping>\n        <servlet-name>springmvc</servlet-name>\n        <url-pattern>*.action</url-pattern>\n    </servlet-mapping>\n```\nSimpleFormController\n有些细节知道之后,配置也就不难了\n\nMyFormController类中:\n```\npublic class MyFormController extends SimpleFormController{\n    public MyFormController(){\n        this.setCommandClass(Person.class);\n    }\n    //form表用post方式提交会默认调用doSubmitAction\n    protected void doSubmitAction(Object command) throws Exception{\n        Person p = (Person)command;\n        super.doSubmitAction(command);\n    }\n}\n\n```\n在springmvc-servlet.xml中\n```\n    //需要配置两个属性,表单页面和成功后的跳转页面\n    <bean class=\"controller.MyFormController\">\n        <property name=\"formView\" value=\"/person/jPersonCreate\"></property>\n        <property name=\"successView\" value=\"/index\"></property>\n    </bean>\n    <bean class=\"org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping\"></bean>\n\n//内部资源解析器\n    <bean id=\"jspViewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n        <property name=\"prefix\" value=\"/pages\"></property>\n        <property name=\"suffix\" value=\".jsp\"></property>\n    </bean>\n```\nWizard向导表单控制器\n填简历时,要填各种数据,一个表单来填不好填写,分开填写\n\nMyWizardController\n```\npublic class MyWizardController extends AbstractWizardFormController {\n\n    public MyWizardController(){\n        this.setCommandClass(Person.class);\n        this.setCommandName(\"person\");//配置它可以获得person数据\n    }\n    @Override\n    protected ModelAndView processCancel(HttpServletRequest request, HttpServletResponse response, Object command, BindException errors) throws Exception {\n        return new ModelAndView(\"/wizard/jPersonInfo\");\n    }\n\n    @Override\n    protected ModelAndView processFinish(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, BindException e) throws Exception {\n        Person p = (Person) o;\n        System.out.println(p);\n        return null;\n    }\n}\n\n```\nspringmvc-servlet.xml\n```\n    <bean class=\"controller.MyWizardController\">\n        <property name=\"pages\">\n            <list>\n                <value>/wizard/jPersonEdu</value>\n                <value>/wizard/jPersonInfo</value>\n                <value>/wizard/jPersonJob</value>\n            </list>\n        </property>\n    </bean>\n```\njPersonEdu\n```\n<tr>\n    <td>name</td>\n    <td><input type=\"text\" name=\"name\" value=\"${person.name}\"/></td>\n</tr>\n<tr>\n    <td>age</td>\n    <td><input type=\"text\" name=\"age\"/></td>\n</tr>\n<tr>\n    <td><input type=\"submit\" name=\"_target1\" value=\"下一页\"></td>\n    <td><input type=\"submit\" name=\"_cancel\" value=\"取消\"></td>\n    <td></td>\n</tr>\n```\n基于注解方式实现springmvc\n\nJDK1.8和Tomcat以及SpringMVC3.2版本不兼容,要用4.0的jar包\n\nMyHomeController\n```\n@Controller\npublic class MyHomeController {\n    @RequestMapping(\"/myhome.action\")\n    public String goHome(HttpServletRequest request){\n        System.out.println(request.getRequestURI());\n        return \"pages/index.jsp\";\n    }\n}\n\n```\nspringmvc-servlet.xml\n```\n    <context:component-scan base-package=\"controller\"></context:component-scan>\n```\nweb.xml没有变化\n","slug":"SpringMVC学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hza3000fdcyua4qo1m95","content":"<p>常见的处理器映射<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BeanNameUrlHandlerMapping</span><br><span class=\"line\">SimpleUrlHandlerMapping</span><br><span class=\"line\">ControllerClassNameHandlerMapping</span><br><span class=\"line\">SpringMVC加载是什么时候?</span><br><span class=\"line\">第一次调用时创建</span><br><span class=\"line\">默认哪个handlerMapping起作用?</span><br><span class=\"line\">按照xml配置顺序来处理,将所有controller链接,在Springmvc容器加载时进行初始化.调用时,在这个map找到第一个匹配</span><br></pre></td></tr></table></figure></p>\n<p>终于配好了controller命令控制器(简单的封装)!!!见下<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MyCommandController类:</span><br><span class=\"line\">public class MyCommandController extends</span><br><span class=\"line\">AbstractCommandController &#123;</span><br><span class=\"line\">    //初始化构造器,将command类型设置为person;类</span><br><span class=\"line\">    public MyCommandController()&#123;</span><br><span class=\"line\">        this.setCommandClass(Person.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    protected ModelAndView handle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, BindException e) throws Exception &#123;</span><br><span class=\"line\">        Person p = (Person) o;</span><br><span class=\"line\">        System.out.println(p);</span><br><span class=\"line\">        return null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">springmvc-servlet.xml中</span><br><span class=\"line\">    &lt;bean class=&quot;controller.MyCommandController&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\">    &lt;bean class=&quot;org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">web.xml中</span><br><span class=\"line\">    &lt;servlet&gt;</span><br><span class=\"line\">        &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;</span><br><span class=\"line\">        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class=\"line\">        &lt;init-param&gt;</span><br><span class=\"line\">            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class=\"line\">            &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt;</span><br><span class=\"line\">        &lt;/init-param&gt;</span><br><span class=\"line\">    &lt;/servlet&gt;</span><br><span class=\"line\">    &lt;servlet-mapping&gt;</span><br><span class=\"line\">        &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;</span><br><span class=\"line\">        &lt;url-pattern&gt;*.action&lt;/url-pattern&gt;</span><br><span class=\"line\">    &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure></p>\n<p>SimpleFormController<br>有些细节知道之后,配置也就不难了</p>\n<p>MyFormController类中:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyFormController extends SimpleFormController&#123;</span><br><span class=\"line\">    public MyFormController()&#123;</span><br><span class=\"line\">        this.setCommandClass(Person.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //form表用post方式提交会默认调用doSubmitAction</span><br><span class=\"line\">    protected void doSubmitAction(Object command) throws Exception&#123;</span><br><span class=\"line\">        Person p = (Person)command;</span><br><span class=\"line\">        super.doSubmitAction(command);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>在springmvc-servlet.xml中<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    //需要配置两个属性,表单页面和成功后的跳转页面</span><br><span class=\"line\">    &lt;bean class=&quot;controller.MyFormController&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;formView&quot; value=&quot;/person/jPersonCreate&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;successView&quot; value=&quot;/index&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    &lt;bean class=&quot;org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">//内部资源解析器</span><br><span class=\"line\">    &lt;bean id=&quot;jspViewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;prefix&quot; value=&quot;/pages&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>\n<p>Wizard向导表单控制器<br>填简历时,要填各种数据,一个表单来填不好填写,分开填写</p>\n<p>MyWizardController<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyWizardController extends AbstractWizardFormController &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public MyWizardController()&#123;</span><br><span class=\"line\">        this.setCommandClass(Person.class);</span><br><span class=\"line\">        this.setCommandName(&quot;person&quot;);//配置它可以获得person数据</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    protected ModelAndView processCancel(HttpServletRequest request, HttpServletResponse response, Object command, BindException errors) throws Exception &#123;</span><br><span class=\"line\">        return new ModelAndView(&quot;/wizard/jPersonInfo&quot;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    protected ModelAndView processFinish(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, BindException e) throws Exception &#123;</span><br><span class=\"line\">        Person p = (Person) o;</span><br><span class=\"line\">        System.out.println(p);</span><br><span class=\"line\">        return null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>springmvc-servlet.xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean class=&quot;controller.MyWizardController&quot;&gt;</span><br><span class=\"line\">    &lt;property name=&quot;pages&quot;&gt;</span><br><span class=\"line\">        &lt;list&gt;</span><br><span class=\"line\">            &lt;value&gt;/wizard/jPersonEdu&lt;/value&gt;</span><br><span class=\"line\">            &lt;value&gt;/wizard/jPersonInfo&lt;/value&gt;</span><br><span class=\"line\">            &lt;value&gt;/wizard/jPersonJob&lt;/value&gt;</span><br><span class=\"line\">        &lt;/list&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>\n<p>jPersonEdu<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;tr&gt;</span><br><span class=\"line\">    &lt;td&gt;name&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;$&#123;person.name&#125;&quot;/&gt;&lt;/td&gt;</span><br><span class=\"line\">&lt;/tr&gt;</span><br><span class=\"line\">&lt;tr&gt;</span><br><span class=\"line\">    &lt;td&gt;age&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;age&quot;/&gt;&lt;/td&gt;</span><br><span class=\"line\">&lt;/tr&gt;</span><br><span class=\"line\">&lt;tr&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;input type=&quot;submit&quot; name=&quot;_target1&quot; value=&quot;下一页&quot;&gt;&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;input type=&quot;submit&quot; name=&quot;_cancel&quot; value=&quot;取消&quot;&gt;&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;/td&gt;</span><br><span class=\"line\">&lt;/tr&gt;</span><br></pre></td></tr></table></figure></p>\n<p>基于注解方式实现springmvc</p>\n<p>JDK1.8和Tomcat以及SpringMVC3.2版本不兼容,要用4.0的jar包</p>\n<p>MyHomeController<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Controller</span><br><span class=\"line\">public class MyHomeController &#123;</span><br><span class=\"line\">    @RequestMapping(&quot;/myhome.action&quot;)</span><br><span class=\"line\">    public String goHome(HttpServletRequest request)&#123;</span><br><span class=\"line\">        System.out.println(request.getRequestURI());</span><br><span class=\"line\">        return &quot;pages/index.jsp&quot;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>springmvc-servlet.xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;context:component-scan base-package=&quot;controller&quot;&gt;&lt;/context:component-scan&gt;</span><br></pre></td></tr></table></figure></p>\n<p>web.xml没有变化</p>\n","site":{"data":{}},"excerpt":"","more":"<p>常见的处理器映射<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BeanNameUrlHandlerMapping</span><br><span class=\"line\">SimpleUrlHandlerMapping</span><br><span class=\"line\">ControllerClassNameHandlerMapping</span><br><span class=\"line\">SpringMVC加载是什么时候?</span><br><span class=\"line\">第一次调用时创建</span><br><span class=\"line\">默认哪个handlerMapping起作用?</span><br><span class=\"line\">按照xml配置顺序来处理,将所有controller链接,在Springmvc容器加载时进行初始化.调用时,在这个map找到第一个匹配</span><br></pre></td></tr></table></figure></p>\n<p>终于配好了controller命令控制器(简单的封装)!!!见下<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MyCommandController类:</span><br><span class=\"line\">public class MyCommandController extends</span><br><span class=\"line\">AbstractCommandController &#123;</span><br><span class=\"line\">    //初始化构造器,将command类型设置为person;类</span><br><span class=\"line\">    public MyCommandController()&#123;</span><br><span class=\"line\">        this.setCommandClass(Person.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    protected ModelAndView handle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, BindException e) throws Exception &#123;</span><br><span class=\"line\">        Person p = (Person) o;</span><br><span class=\"line\">        System.out.println(p);</span><br><span class=\"line\">        return null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">springmvc-servlet.xml中</span><br><span class=\"line\">    &lt;bean class=&quot;controller.MyCommandController&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\">    &lt;bean class=&quot;org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">web.xml中</span><br><span class=\"line\">    &lt;servlet&gt;</span><br><span class=\"line\">        &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;</span><br><span class=\"line\">        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class=\"line\">        &lt;init-param&gt;</span><br><span class=\"line\">            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class=\"line\">            &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt;</span><br><span class=\"line\">        &lt;/init-param&gt;</span><br><span class=\"line\">    &lt;/servlet&gt;</span><br><span class=\"line\">    &lt;servlet-mapping&gt;</span><br><span class=\"line\">        &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;</span><br><span class=\"line\">        &lt;url-pattern&gt;*.action&lt;/url-pattern&gt;</span><br><span class=\"line\">    &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure></p>\n<p>SimpleFormController<br>有些细节知道之后,配置也就不难了</p>\n<p>MyFormController类中:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyFormController extends SimpleFormController&#123;</span><br><span class=\"line\">    public MyFormController()&#123;</span><br><span class=\"line\">        this.setCommandClass(Person.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //form表用post方式提交会默认调用doSubmitAction</span><br><span class=\"line\">    protected void doSubmitAction(Object command) throws Exception&#123;</span><br><span class=\"line\">        Person p = (Person)command;</span><br><span class=\"line\">        super.doSubmitAction(command);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>在springmvc-servlet.xml中<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    //需要配置两个属性,表单页面和成功后的跳转页面</span><br><span class=\"line\">    &lt;bean class=&quot;controller.MyFormController&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;formView&quot; value=&quot;/person/jPersonCreate&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;successView&quot; value=&quot;/index&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    &lt;bean class=&quot;org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping&quot;&gt;&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">//内部资源解析器</span><br><span class=\"line\">    &lt;bean id=&quot;jspViewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;prefix&quot; value=&quot;/pages&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>\n<p>Wizard向导表单控制器<br>填简历时,要填各种数据,一个表单来填不好填写,分开填写</p>\n<p>MyWizardController<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyWizardController extends AbstractWizardFormController &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public MyWizardController()&#123;</span><br><span class=\"line\">        this.setCommandClass(Person.class);</span><br><span class=\"line\">        this.setCommandName(&quot;person&quot;);//配置它可以获得person数据</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    protected ModelAndView processCancel(HttpServletRequest request, HttpServletResponse response, Object command, BindException errors) throws Exception &#123;</span><br><span class=\"line\">        return new ModelAndView(&quot;/wizard/jPersonInfo&quot;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    protected ModelAndView processFinish(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, BindException e) throws Exception &#123;</span><br><span class=\"line\">        Person p = (Person) o;</span><br><span class=\"line\">        System.out.println(p);</span><br><span class=\"line\">        return null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>springmvc-servlet.xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean class=&quot;controller.MyWizardController&quot;&gt;</span><br><span class=\"line\">    &lt;property name=&quot;pages&quot;&gt;</span><br><span class=\"line\">        &lt;list&gt;</span><br><span class=\"line\">            &lt;value&gt;/wizard/jPersonEdu&lt;/value&gt;</span><br><span class=\"line\">            &lt;value&gt;/wizard/jPersonInfo&lt;/value&gt;</span><br><span class=\"line\">            &lt;value&gt;/wizard/jPersonJob&lt;/value&gt;</span><br><span class=\"line\">        &lt;/list&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>\n<p>jPersonEdu<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;tr&gt;</span><br><span class=\"line\">    &lt;td&gt;name&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;$&#123;person.name&#125;&quot;/&gt;&lt;/td&gt;</span><br><span class=\"line\">&lt;/tr&gt;</span><br><span class=\"line\">&lt;tr&gt;</span><br><span class=\"line\">    &lt;td&gt;age&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;age&quot;/&gt;&lt;/td&gt;</span><br><span class=\"line\">&lt;/tr&gt;</span><br><span class=\"line\">&lt;tr&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;input type=&quot;submit&quot; name=&quot;_target1&quot; value=&quot;下一页&quot;&gt;&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;input type=&quot;submit&quot; name=&quot;_cancel&quot; value=&quot;取消&quot;&gt;&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;/td&gt;</span><br><span class=\"line\">&lt;/tr&gt;</span><br></pre></td></tr></table></figure></p>\n<p>基于注解方式实现springmvc</p>\n<p>JDK1.8和Tomcat以及SpringMVC3.2版本不兼容,要用4.0的jar包</p>\n<p>MyHomeController<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Controller</span><br><span class=\"line\">public class MyHomeController &#123;</span><br><span class=\"line\">    @RequestMapping(&quot;/myhome.action&quot;)</span><br><span class=\"line\">    public String goHome(HttpServletRequest request)&#123;</span><br><span class=\"line\">        System.out.println(request.getRequestURI());</span><br><span class=\"line\">        return &quot;pages/index.jsp&quot;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>springmvc-servlet.xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;context:component-scan base-package=&quot;controller&quot;&gt;&lt;/context:component-scan&gt;</span><br></pre></td></tr></table></figure></p>\n<p>web.xml没有变化</p>\n"},{"title":"2017.10.31 Struts学习","date":"2017-10-30T23:55:58.000Z","_content":"```\naction.class中:\npublic class action {\n    public String say(){\n        System.out.println(\"fdsafdsa\");\n        return \"success\";\n    }\n}\nstruts.xml中\n<struts>\n    <!--开启开发模式-->\n    <constant name=\"struts.devMode\" value=\"true\"></constant>\n    <package name=\"p1\" extends=\"struts-default\">\n        <action name=\"say\" class=\"test.action\" method=\"say\">\n            <result name=\"success\">/success.jsp</result>\n        </action>\n    </package>\n</struts>\n\nweb.xml中\n\n    <filter>\n        <filter-name>struts2</filter-name>\n        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>\n    </filter>\n    <filter-mapping>\n        <filter-name>struts2</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n    \n```\nStruts执行过程简易版:\n```\nie:say.action->tomcat\ntomcat->StrutsPrepareAndExecuteFilter->解析uri得到action元素->在struts.xml中vkdkresult()\n\n```\n用户创建的:struts,action,template\n```\ndefault.properties 该文件在core包中 struts2.core\nstruts-default.xml 该文件在core包中 struts2.core\nstruts-plugin 某个jar包中\nstruts.xml web应用默认配置文件\nstruts.properties struts默认配置文件\nweb.xml 应用配置文件\n```\n代理:我调目标类的方法,先经过代理,再经过被代理对象\n```\n<package> 作用:方便模块化开发\n<struts>\n    <constant name=\"struts.devMode\" value=\"true\"></constant>\n    <package name=\"p1\" extends=\"struts-default\">\n        <action name=\"say\" class=\"test.action\" method=\"say\">\n            <result name=\"success\">/success.jsp</result>\n        </action>\n    </package>\n    <package name=\"order\"></package>\n</struts>\n\nname:唯一,必须.\nextends: 一般都需要.直接或间接继承一个struts-default的包名\n可以继承以上的包如 extends=\"p1\"\nabstract=\"ture\" 说明这是个抽象包,让别人继承,此时没有什么action子元素\nnamespace:名称空间,一般以\"/\"开头,和动作名称一起,构成访问路径\n```\naction详解\n```\n编写动作类方法:继承ActionSupport\n<action name=\"*_*\" class=\"....\" method={1,2}>\n    <result name=\"success\">/{1}{2}.jsp</result>\n</action>\n```\n获取request,response\n```\n1.      \n        System.out.println(ServletActionContext.getRequest());;\n        System.out.println(ServletActionContext.getResponse());;\n        System.out.println(ServletActionContext.getServletContext());;\n\n2.  HttpServletRequest request;\n    HttpServletResponse response;\n\n    @Override\n    public void setServletRequest(HttpServletRequest request) {\n        this.request = request;\n    }\n\n    @Override\n    public void setServletResponse(HttpServletResponse response) {\n        this.response = response;\n    }\n```\nreturn :配置一个结果视图\n```\n        <action name=\"save\"  class=\"test.Demo3Action\" method=\"save\">\n            <result name=\"success\" type=\"redirect\">/jsps/success.jsp</result>\n            <result name=\"error\">/jsps/error.jsp</result>\n        </action>\nname:逻辑视图名称,对应动作方法的返回值\n可以不写,默认success\ntype:指定结果类型,默认dispatcher,就是转发\n其他类型:\nchain: 转发到另一个动作\n如:            <result name=\"success\" type=\"chain\">action1</result>\nredirectAction:重定向到另一个action\nvelocity: \ntream:下载使用\nplainText:以纯文本的展示\ndispathcer: \nfreemarker:\nhttpheader:\nredirect:\n\nchain的另一种写法\n\n```\n(EJB重量级持久层,天然分布式,负载均衡) 但是不够灵活,不能充分适应业务\n多条件查询\n如果使用EntityBean,做查询时,一个查询的条件就得写一个sql,就用了一个SessionBean,新增修改删除给EntityBean,多条件查询交给session.\nHibernate 开发快,无sql语句,面向对象,\nHibernate 与 mybatis区别\nHibernate,java面向对象盛行期.将设计过程全部面向对象开发.ORM.\nibatis:维持原有编程方式,前面面向对象,后面持久层使用sql\nHibernate通过反射,性能很低\nHibernate底层使用sql,就hql转sql无法优化\n","source":"_posts/2017.10.31 Struts学习.md","raw":"---\ntitle: 2017.10.31 Struts学习\ndate: 2017-10-31 07:55:58\ntags:\n---\n```\naction.class中:\npublic class action {\n    public String say(){\n        System.out.println(\"fdsafdsa\");\n        return \"success\";\n    }\n}\nstruts.xml中\n<struts>\n    <!--开启开发模式-->\n    <constant name=\"struts.devMode\" value=\"true\"></constant>\n    <package name=\"p1\" extends=\"struts-default\">\n        <action name=\"say\" class=\"test.action\" method=\"say\">\n            <result name=\"success\">/success.jsp</result>\n        </action>\n    </package>\n</struts>\n\nweb.xml中\n\n    <filter>\n        <filter-name>struts2</filter-name>\n        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>\n    </filter>\n    <filter-mapping>\n        <filter-name>struts2</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n    \n```\nStruts执行过程简易版:\n```\nie:say.action->tomcat\ntomcat->StrutsPrepareAndExecuteFilter->解析uri得到action元素->在struts.xml中vkdkresult()\n\n```\n用户创建的:struts,action,template\n```\ndefault.properties 该文件在core包中 struts2.core\nstruts-default.xml 该文件在core包中 struts2.core\nstruts-plugin 某个jar包中\nstruts.xml web应用默认配置文件\nstruts.properties struts默认配置文件\nweb.xml 应用配置文件\n```\n代理:我调目标类的方法,先经过代理,再经过被代理对象\n```\n<package> 作用:方便模块化开发\n<struts>\n    <constant name=\"struts.devMode\" value=\"true\"></constant>\n    <package name=\"p1\" extends=\"struts-default\">\n        <action name=\"say\" class=\"test.action\" method=\"say\">\n            <result name=\"success\">/success.jsp</result>\n        </action>\n    </package>\n    <package name=\"order\"></package>\n</struts>\n\nname:唯一,必须.\nextends: 一般都需要.直接或间接继承一个struts-default的包名\n可以继承以上的包如 extends=\"p1\"\nabstract=\"ture\" 说明这是个抽象包,让别人继承,此时没有什么action子元素\nnamespace:名称空间,一般以\"/\"开头,和动作名称一起,构成访问路径\n```\naction详解\n```\n编写动作类方法:继承ActionSupport\n<action name=\"*_*\" class=\"....\" method={1,2}>\n    <result name=\"success\">/{1}{2}.jsp</result>\n</action>\n```\n获取request,response\n```\n1.      \n        System.out.println(ServletActionContext.getRequest());;\n        System.out.println(ServletActionContext.getResponse());;\n        System.out.println(ServletActionContext.getServletContext());;\n\n2.  HttpServletRequest request;\n    HttpServletResponse response;\n\n    @Override\n    public void setServletRequest(HttpServletRequest request) {\n        this.request = request;\n    }\n\n    @Override\n    public void setServletResponse(HttpServletResponse response) {\n        this.response = response;\n    }\n```\nreturn :配置一个结果视图\n```\n        <action name=\"save\"  class=\"test.Demo3Action\" method=\"save\">\n            <result name=\"success\" type=\"redirect\">/jsps/success.jsp</result>\n            <result name=\"error\">/jsps/error.jsp</result>\n        </action>\nname:逻辑视图名称,对应动作方法的返回值\n可以不写,默认success\ntype:指定结果类型,默认dispatcher,就是转发\n其他类型:\nchain: 转发到另一个动作\n如:            <result name=\"success\" type=\"chain\">action1</result>\nredirectAction:重定向到另一个action\nvelocity: \ntream:下载使用\nplainText:以纯文本的展示\ndispathcer: \nfreemarker:\nhttpheader:\nredirect:\n\nchain的另一种写法\n\n```\n(EJB重量级持久层,天然分布式,负载均衡) 但是不够灵活,不能充分适应业务\n多条件查询\n如果使用EntityBean,做查询时,一个查询的条件就得写一个sql,就用了一个SessionBean,新增修改删除给EntityBean,多条件查询交给session.\nHibernate 开发快,无sql语句,面向对象,\nHibernate 与 mybatis区别\nHibernate,java面向对象盛行期.将设计过程全部面向对象开发.ORM.\nibatis:维持原有编程方式,前面面向对象,后面持久层使用sql\nHibernate通过反射,性能很低\nHibernate底层使用sql,就hql转sql无法优化\n","slug":"Struts学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hza4000gdcyu0z2givro","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">action.class中:</span><br><span class=\"line\">public class action &#123;</span><br><span class=\"line\">    public String say()&#123;</span><br><span class=\"line\">        System.out.println(&quot;fdsafdsa&quot;);</span><br><span class=\"line\">        return &quot;success&quot;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">struts.xml中</span><br><span class=\"line\">&lt;struts&gt;</span><br><span class=\"line\">    &lt;!--开启开发模式--&gt;</span><br><span class=\"line\">    &lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot;&gt;&lt;/constant&gt;</span><br><span class=\"line\">    &lt;package name=&quot;p1&quot; extends=&quot;struts-default&quot;&gt;</span><br><span class=\"line\">        &lt;action name=&quot;say&quot; class=&quot;test.action&quot; method=&quot;say&quot;&gt;</span><br><span class=\"line\">            &lt;result name=&quot;success&quot;&gt;/success.jsp&lt;/result&gt;</span><br><span class=\"line\">        &lt;/action&gt;</span><br><span class=\"line\">    &lt;/package&gt;</span><br><span class=\"line\">&lt;/struts&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">web.xml中</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;filter&gt;</span><br><span class=\"line\">        &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class=\"line\">        &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;</span><br><span class=\"line\">    &lt;/filter&gt;</span><br><span class=\"line\">    &lt;filter-mapping&gt;</span><br><span class=\"line\">        &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class=\"line\">        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class=\"line\">    &lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>\n<p>Struts执行过程简易版:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ie:say.action-&gt;tomcat</span><br><span class=\"line\">tomcat-&gt;StrutsPrepareAndExecuteFilter-&gt;解析uri得到action元素-&gt;在struts.xml中vkdkresult()</span><br></pre></td></tr></table></figure></p>\n<p>用户创建的:struts,action,template<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">default.properties 该文件在core包中 struts2.core</span><br><span class=\"line\">struts-default.xml 该文件在core包中 struts2.core</span><br><span class=\"line\">struts-plugin 某个jar包中</span><br><span class=\"line\">struts.xml web应用默认配置文件</span><br><span class=\"line\">struts.properties struts默认配置文件</span><br><span class=\"line\">web.xml 应用配置文件</span><br></pre></td></tr></table></figure></p>\n<p>代理:我调目标类的方法,先经过代理,再经过被代理对象<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;package&gt; 作用:方便模块化开发</span><br><span class=\"line\">&lt;struts&gt;</span><br><span class=\"line\">    &lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot;&gt;&lt;/constant&gt;</span><br><span class=\"line\">    &lt;package name=&quot;p1&quot; extends=&quot;struts-default&quot;&gt;</span><br><span class=\"line\">        &lt;action name=&quot;say&quot; class=&quot;test.action&quot; method=&quot;say&quot;&gt;</span><br><span class=\"line\">            &lt;result name=&quot;success&quot;&gt;/success.jsp&lt;/result&gt;</span><br><span class=\"line\">        &lt;/action&gt;</span><br><span class=\"line\">    &lt;/package&gt;</span><br><span class=\"line\">    &lt;package name=&quot;order&quot;&gt;&lt;/package&gt;</span><br><span class=\"line\">&lt;/struts&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">name:唯一,必须.</span><br><span class=\"line\">extends: 一般都需要.直接或间接继承一个struts-default的包名</span><br><span class=\"line\">可以继承以上的包如 extends=&quot;p1&quot;</span><br><span class=\"line\">abstract=&quot;ture&quot; 说明这是个抽象包,让别人继承,此时没有什么action子元素</span><br><span class=\"line\">namespace:名称空间,一般以&quot;/&quot;开头,和动作名称一起,构成访问路径</span><br></pre></td></tr></table></figure></p>\n<p>action详解<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">编写动作类方法:继承ActionSupport</span><br><span class=\"line\">&lt;action name=&quot;*_*&quot; class=&quot;....&quot; method=&#123;1,2&#125;&gt;</span><br><span class=\"line\">    &lt;result name=&quot;success&quot;&gt;/&#123;1&#125;&#123;2&#125;.jsp&lt;/result&gt;</span><br><span class=\"line\">&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>\n<p>获取request,response<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.      </span><br><span class=\"line\">        System.out.println(ServletActionContext.getRequest());;</span><br><span class=\"line\">        System.out.println(ServletActionContext.getResponse());;</span><br><span class=\"line\">        System.out.println(ServletActionContext.getServletContext());;</span><br><span class=\"line\"></span><br><span class=\"line\">2.  HttpServletRequest request;</span><br><span class=\"line\">    HttpServletResponse response;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void setServletRequest(HttpServletRequest request) &#123;</span><br><span class=\"line\">        this.request = request;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void setServletResponse(HttpServletResponse response) &#123;</span><br><span class=\"line\">        this.response = response;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></p>\n<p>return :配置一个结果视图<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">        &lt;action name=&quot;save&quot;  class=&quot;test.Demo3Action&quot; method=&quot;save&quot;&gt;</span><br><span class=\"line\">            &lt;result name=&quot;success&quot; type=&quot;redirect&quot;&gt;/jsps/success.jsp&lt;/result&gt;</span><br><span class=\"line\">            &lt;result name=&quot;error&quot;&gt;/jsps/error.jsp&lt;/result&gt;</span><br><span class=\"line\">        &lt;/action&gt;</span><br><span class=\"line\">name:逻辑视图名称,对应动作方法的返回值</span><br><span class=\"line\">可以不写,默认success</span><br><span class=\"line\">type:指定结果类型,默认dispatcher,就是转发</span><br><span class=\"line\">其他类型:</span><br><span class=\"line\">chain: 转发到另一个动作</span><br><span class=\"line\">如:            &lt;result name=&quot;success&quot; type=&quot;chain&quot;&gt;action1&lt;/result&gt;</span><br><span class=\"line\">redirectAction:重定向到另一个action</span><br><span class=\"line\">velocity: </span><br><span class=\"line\">tream:下载使用</span><br><span class=\"line\">plainText:以纯文本的展示</span><br><span class=\"line\">dispathcer: </span><br><span class=\"line\">freemarker:</span><br><span class=\"line\">httpheader:</span><br><span class=\"line\">redirect:</span><br><span class=\"line\"></span><br><span class=\"line\">chain的另一种写法</span><br></pre></td></tr></table></figure></p>\n<p>(EJB重量级持久层,天然分布式,负载均衡) 但是不够灵活,不能充分适应业务<br>多条件查询<br>如果使用EntityBean,做查询时,一个查询的条件就得写一个sql,就用了一个SessionBean,新增修改删除给EntityBean,多条件查询交给session.<br>Hibernate 开发快,无sql语句,面向对象,<br>Hibernate 与 mybatis区别<br>Hibernate,java面向对象盛行期.将设计过程全部面向对象开发.ORM.<br>ibatis:维持原有编程方式,前面面向对象,后面持久层使用sql<br>Hibernate通过反射,性能很低<br>Hibernate底层使用sql,就hql转sql无法优化</p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">action.class中:</span><br><span class=\"line\">public class action &#123;</span><br><span class=\"line\">    public String say()&#123;</span><br><span class=\"line\">        System.out.println(&quot;fdsafdsa&quot;);</span><br><span class=\"line\">        return &quot;success&quot;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">struts.xml中</span><br><span class=\"line\">&lt;struts&gt;</span><br><span class=\"line\">    &lt;!--开启开发模式--&gt;</span><br><span class=\"line\">    &lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot;&gt;&lt;/constant&gt;</span><br><span class=\"line\">    &lt;package name=&quot;p1&quot; extends=&quot;struts-default&quot;&gt;</span><br><span class=\"line\">        &lt;action name=&quot;say&quot; class=&quot;test.action&quot; method=&quot;say&quot;&gt;</span><br><span class=\"line\">            &lt;result name=&quot;success&quot;&gt;/success.jsp&lt;/result&gt;</span><br><span class=\"line\">        &lt;/action&gt;</span><br><span class=\"line\">    &lt;/package&gt;</span><br><span class=\"line\">&lt;/struts&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">web.xml中</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;filter&gt;</span><br><span class=\"line\">        &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class=\"line\">        &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;</span><br><span class=\"line\">    &lt;/filter&gt;</span><br><span class=\"line\">    &lt;filter-mapping&gt;</span><br><span class=\"line\">        &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class=\"line\">        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class=\"line\">    &lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>\n<p>Struts执行过程简易版:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ie:say.action-&gt;tomcat</span><br><span class=\"line\">tomcat-&gt;StrutsPrepareAndExecuteFilter-&gt;解析uri得到action元素-&gt;在struts.xml中vkdkresult()</span><br></pre></td></tr></table></figure></p>\n<p>用户创建的:struts,action,template<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">default.properties 该文件在core包中 struts2.core</span><br><span class=\"line\">struts-default.xml 该文件在core包中 struts2.core</span><br><span class=\"line\">struts-plugin 某个jar包中</span><br><span class=\"line\">struts.xml web应用默认配置文件</span><br><span class=\"line\">struts.properties struts默认配置文件</span><br><span class=\"line\">web.xml 应用配置文件</span><br></pre></td></tr></table></figure></p>\n<p>代理:我调目标类的方法,先经过代理,再经过被代理对象<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;package&gt; 作用:方便模块化开发</span><br><span class=\"line\">&lt;struts&gt;</span><br><span class=\"line\">    &lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot;&gt;&lt;/constant&gt;</span><br><span class=\"line\">    &lt;package name=&quot;p1&quot; extends=&quot;struts-default&quot;&gt;</span><br><span class=\"line\">        &lt;action name=&quot;say&quot; class=&quot;test.action&quot; method=&quot;say&quot;&gt;</span><br><span class=\"line\">            &lt;result name=&quot;success&quot;&gt;/success.jsp&lt;/result&gt;</span><br><span class=\"line\">        &lt;/action&gt;</span><br><span class=\"line\">    &lt;/package&gt;</span><br><span class=\"line\">    &lt;package name=&quot;order&quot;&gt;&lt;/package&gt;</span><br><span class=\"line\">&lt;/struts&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">name:唯一,必须.</span><br><span class=\"line\">extends: 一般都需要.直接或间接继承一个struts-default的包名</span><br><span class=\"line\">可以继承以上的包如 extends=&quot;p1&quot;</span><br><span class=\"line\">abstract=&quot;ture&quot; 说明这是个抽象包,让别人继承,此时没有什么action子元素</span><br><span class=\"line\">namespace:名称空间,一般以&quot;/&quot;开头,和动作名称一起,构成访问路径</span><br></pre></td></tr></table></figure></p>\n<p>action详解<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">编写动作类方法:继承ActionSupport</span><br><span class=\"line\">&lt;action name=&quot;*_*&quot; class=&quot;....&quot; method=&#123;1,2&#125;&gt;</span><br><span class=\"line\">    &lt;result name=&quot;success&quot;&gt;/&#123;1&#125;&#123;2&#125;.jsp&lt;/result&gt;</span><br><span class=\"line\">&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>\n<p>获取request,response<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.      </span><br><span class=\"line\">        System.out.println(ServletActionContext.getRequest());;</span><br><span class=\"line\">        System.out.println(ServletActionContext.getResponse());;</span><br><span class=\"line\">        System.out.println(ServletActionContext.getServletContext());;</span><br><span class=\"line\"></span><br><span class=\"line\">2.  HttpServletRequest request;</span><br><span class=\"line\">    HttpServletResponse response;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void setServletRequest(HttpServletRequest request) &#123;</span><br><span class=\"line\">        this.request = request;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void setServletResponse(HttpServletResponse response) &#123;</span><br><span class=\"line\">        this.response = response;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></p>\n<p>return :配置一个结果视图<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">        &lt;action name=&quot;save&quot;  class=&quot;test.Demo3Action&quot; method=&quot;save&quot;&gt;</span><br><span class=\"line\">            &lt;result name=&quot;success&quot; type=&quot;redirect&quot;&gt;/jsps/success.jsp&lt;/result&gt;</span><br><span class=\"line\">            &lt;result name=&quot;error&quot;&gt;/jsps/error.jsp&lt;/result&gt;</span><br><span class=\"line\">        &lt;/action&gt;</span><br><span class=\"line\">name:逻辑视图名称,对应动作方法的返回值</span><br><span class=\"line\">可以不写,默认success</span><br><span class=\"line\">type:指定结果类型,默认dispatcher,就是转发</span><br><span class=\"line\">其他类型:</span><br><span class=\"line\">chain: 转发到另一个动作</span><br><span class=\"line\">如:            &lt;result name=&quot;success&quot; type=&quot;chain&quot;&gt;action1&lt;/result&gt;</span><br><span class=\"line\">redirectAction:重定向到另一个action</span><br><span class=\"line\">velocity: </span><br><span class=\"line\">tream:下载使用</span><br><span class=\"line\">plainText:以纯文本的展示</span><br><span class=\"line\">dispathcer: </span><br><span class=\"line\">freemarker:</span><br><span class=\"line\">httpheader:</span><br><span class=\"line\">redirect:</span><br><span class=\"line\"></span><br><span class=\"line\">chain的另一种写法</span><br></pre></td></tr></table></figure></p>\n<p>(EJB重量级持久层,天然分布式,负载均衡) 但是不够灵活,不能充分适应业务<br>多条件查询<br>如果使用EntityBean,做查询时,一个查询的条件就得写一个sql,就用了一个SessionBean,新增修改删除给EntityBean,多条件查询交给session.<br>Hibernate 开发快,无sql语句,面向对象,<br>Hibernate 与 mybatis区别<br>Hibernate,java面向对象盛行期.将设计过程全部面向对象开发.ORM.<br>ibatis:维持原有编程方式,前面面向对象,后面持久层使用sql<br>Hibernate通过反射,性能很低<br>Hibernate底层使用sql,就hql转sql无法优化</p>\n"},{"title":"2017.10.6 读书笔记","date":"2017-10-05T23:55:58.000Z","_content":"1.欧洲文明起源于希腊,经过罗马帝国,中世纪,到近代欧洲.\n\n2.中国文明没有中断, 因而没有反思的机会, 也就没有文艺复兴,宗教改革,科学革命那种再生的动力.\n\n3.中国文化灿烂发光于春秋战国时代, 那是一个科技突破(铁工具)与知识大量释出(士阶级瓦解)的时代,本质上就是周朝诸侯国的一次\"全球化\".","source":"_posts/2017.10.6读书笔记.md","raw":"---\ntitle: 2017.10.6 读书笔记\ndate: 2017-10-6 07:55:58\ntags:\n---\n1.欧洲文明起源于希腊,经过罗马帝国,中世纪,到近代欧洲.\n\n2.中国文明没有中断, 因而没有反思的机会, 也就没有文艺复兴,宗教改革,科学革命那种再生的动力.\n\n3.中国文化灿烂发光于春秋战国时代, 那是一个科技突破(铁工具)与知识大量释出(士阶级瓦解)的时代,本质上就是周朝诸侯国的一次\"全球化\".","slug":"2017-10-6读书笔记","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hza5000hdcyuqyr2cqgn","content":"<p>1.欧洲文明起源于希腊,经过罗马帝国,中世纪,到近代欧洲.</p>\n<p>2.中国文明没有中断, 因而没有反思的机会, 也就没有文艺复兴,宗教改革,科学革命那种再生的动力.</p>\n<p>3.中国文化灿烂发光于春秋战国时代, 那是一个科技突破(铁工具)与知识大量释出(士阶级瓦解)的时代,本质上就是周朝诸侯国的一次”全球化”.</p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.欧洲文明起源于希腊,经过罗马帝国,中世纪,到近代欧洲.</p>\n<p>2.中国文明没有中断, 因而没有反思的机会, 也就没有文艺复兴,宗教改革,科学革命那种再生的动力.</p>\n<p>3.中国文化灿烂发光于春秋战国时代, 那是一个科技突破(铁工具)与知识大量释出(士阶级瓦解)的时代,本质上就是周朝诸侯国的一次”全球化”.</p>\n"},{"title":"2017.10.9 JavaScript学习","date":"2017-10-16T23:55:58.000Z","_content":"1.改变html内容\n\n```\n<p id=\"demo\">改变内容</p>\n\n<script>\n    function m(){\n        x=document.getElementById(\"demo\");\n        x.innerHTML=\"hello javascript\";\n        x.style.color=\"#ff0000\";\n    }\n</script>\n\n<button type=\"button\" onclick=\"m()\">点击这里</button>\n\n```\n---\n\n\n2.验证输入\n```\n<input id=\"demo\" type=\"text\">\n<script>\nfunction myFunction()\n{\n\tvar x=document.getElementById(\"demo\").value;\n\tif(x==\"\"||isNaN(x))\n\t{\n\t\talert(\"不是数字\");\n\t}\n}\n</script>\n<button type=\"button\" onclick=\"myFunction()\">点击这里</button>\n```\n---\n\n3.JavaScript输出\n- 使用 window.alert() 弹出警告框。\n- 使用 document.write() 方法将内容写到 HTML 文档中。\n- 使用 innerHTML 写入到 HTML 元素。\n- 使用 console.log() 写入到浏览器的控制台。\n- \n---\n\n4.javaScript对大小写是敏感的;JavaScript拥有动态数据类型;如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量;\n---\n5.创建数组\n```\nvar cars=new Array();\ncars[0]=\"Saab\";\ncars[1]=\"Volvo\";\ncars[2]=\"BMW\";\n//或者\nvar cars=[\"Saab\",\"Volvo\",\"BMW\"];\n```\n---\n6.JavaScript 对象\n```\nvar person={firstname:\"John\", lastname:\"Doe\", id:5566};\n//对象寻址方式:\nname=person.lastname;\nname=person[\"lastname\"];\n```\n---\n","source":"_posts/2017.10.9 javaScript学习.md","raw":"---\ntitle: 2017.10.9 JavaScript学习\ndate: 2017-10-17 07:55:58\ntags:\n---\n1.改变html内容\n\n```\n<p id=\"demo\">改变内容</p>\n\n<script>\n    function m(){\n        x=document.getElementById(\"demo\");\n        x.innerHTML=\"hello javascript\";\n        x.style.color=\"#ff0000\";\n    }\n</script>\n\n<button type=\"button\" onclick=\"m()\">点击这里</button>\n\n```\n---\n\n\n2.验证输入\n```\n<input id=\"demo\" type=\"text\">\n<script>\nfunction myFunction()\n{\n\tvar x=document.getElementById(\"demo\").value;\n\tif(x==\"\"||isNaN(x))\n\t{\n\t\talert(\"不是数字\");\n\t}\n}\n</script>\n<button type=\"button\" onclick=\"myFunction()\">点击这里</button>\n```\n---\n\n3.JavaScript输出\n- 使用 window.alert() 弹出警告框。\n- 使用 document.write() 方法将内容写到 HTML 文档中。\n- 使用 innerHTML 写入到 HTML 元素。\n- 使用 console.log() 写入到浏览器的控制台。\n- \n---\n\n4.javaScript对大小写是敏感的;JavaScript拥有动态数据类型;如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量;\n---\n5.创建数组\n```\nvar cars=new Array();\ncars[0]=\"Saab\";\ncars[1]=\"Volvo\";\ncars[2]=\"BMW\";\n//或者\nvar cars=[\"Saab\",\"Volvo\",\"BMW\"];\n```\n---\n6.JavaScript 对象\n```\nvar person={firstname:\"John\", lastname:\"Doe\", id:5566};\n//对象寻址方式:\nname=person.lastname;\nname=person[\"lastname\"];\n```\n---\n","slug":"2017-10-9-javaScript学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hza7000idcyurfhwxiyi","content":"<p>1.改变html内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p id=&quot;demo&quot;&gt;改变内容&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    function m()&#123;</span><br><span class=\"line\">        x=document.getElementById(&quot;demo&quot;);</span><br><span class=\"line\">        x.innerHTML=&quot;hello javascript&quot;;</span><br><span class=\"line\">        x.style.color=&quot;#ff0000&quot;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;button type=&quot;button&quot; onclick=&quot;m()&quot;&gt;点击这里&lt;/button&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>2.验证输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input id=&quot;demo&quot; type=&quot;text&quot;&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">function myFunction()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tvar x=document.getElementById(&quot;demo&quot;).value;</span><br><span class=\"line\">\tif(x==&quot;&quot;||isNaN(x))</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\talert(&quot;不是数字&quot;);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;button type=&quot;button&quot; onclick=&quot;myFunction()&quot;&gt;点击这里&lt;/button&gt;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>3.JavaScript输出</p>\n<ul>\n<li>使用 window.alert() 弹出警告框。</li>\n<li>使用 document.write() 方法将内容写到 HTML 文档中。</li>\n<li>使用 innerHTML 写入到 HTML 元素。</li>\n<li>使用 console.log() 写入到浏览器的控制台。</li>\n<li></li>\n</ul>\n<hr>\n<h2 id=\"4-javaScript对大小写是敏感的-JavaScript拥有动态数据类型-如果变量在函数内没有声明（没有使用-var-关键字），该变量为全局变量\"><a href=\"#4-javaScript对大小写是敏感的-JavaScript拥有动态数据类型-如果变量在函数内没有声明（没有使用-var-关键字），该变量为全局变量\" class=\"headerlink\" title=\"4.javaScript对大小写是敏感的;JavaScript拥有动态数据类型;如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量;\"></a>4.javaScript对大小写是敏感的;JavaScript拥有动态数据类型;如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量;</h2><p>5.创建数组<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var cars=new Array();</span><br><span class=\"line\">cars[0]=&quot;Saab&quot;;</span><br><span class=\"line\">cars[1]=&quot;Volvo&quot;;</span><br><span class=\"line\">cars[2]=&quot;BMW&quot;;</span><br><span class=\"line\">//或者</span><br><span class=\"line\">var cars=[&quot;Saab&quot;,&quot;Volvo&quot;,&quot;BMW&quot;];</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>6.JavaScript 对象<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var person=&#123;firstname:&quot;John&quot;, lastname:&quot;Doe&quot;, id:5566&#125;;</span><br><span class=\"line\">//对象寻址方式:</span><br><span class=\"line\">name=person.lastname;</span><br><span class=\"line\">name=person[&quot;lastname&quot;];</span><br></pre></td></tr></table></figure></p>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<p>1.改变html内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p id=&quot;demo&quot;&gt;改变内容&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    function m()&#123;</span><br><span class=\"line\">        x=document.getElementById(&quot;demo&quot;);</span><br><span class=\"line\">        x.innerHTML=&quot;hello javascript&quot;;</span><br><span class=\"line\">        x.style.color=&quot;#ff0000&quot;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;button type=&quot;button&quot; onclick=&quot;m()&quot;&gt;点击这里&lt;/button&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>2.验证输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input id=&quot;demo&quot; type=&quot;text&quot;&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">function myFunction()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tvar x=document.getElementById(&quot;demo&quot;).value;</span><br><span class=\"line\">\tif(x==&quot;&quot;||isNaN(x))</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\talert(&quot;不是数字&quot;);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;button type=&quot;button&quot; onclick=&quot;myFunction()&quot;&gt;点击这里&lt;/button&gt;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>3.JavaScript输出</p>\n<ul>\n<li>使用 window.alert() 弹出警告框。</li>\n<li>使用 document.write() 方法将内容写到 HTML 文档中。</li>\n<li>使用 innerHTML 写入到 HTML 元素。</li>\n<li>使用 console.log() 写入到浏览器的控制台。</li>\n<li></li>\n</ul>\n<hr>\n<h2 id=\"4-javaScript对大小写是敏感的-JavaScript拥有动态数据类型-如果变量在函数内没有声明（没有使用-var-关键字），该变量为全局变量\"><a href=\"#4-javaScript对大小写是敏感的-JavaScript拥有动态数据类型-如果变量在函数内没有声明（没有使用-var-关键字），该变量为全局变量\" class=\"headerlink\" title=\"4.javaScript对大小写是敏感的;JavaScript拥有动态数据类型;如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量;\"></a>4.javaScript对大小写是敏感的;JavaScript拥有动态数据类型;如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量;</h2><p>5.创建数组<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var cars=new Array();</span><br><span class=\"line\">cars[0]=&quot;Saab&quot;;</span><br><span class=\"line\">cars[1]=&quot;Volvo&quot;;</span><br><span class=\"line\">cars[2]=&quot;BMW&quot;;</span><br><span class=\"line\">//或者</span><br><span class=\"line\">var cars=[&quot;Saab&quot;,&quot;Volvo&quot;,&quot;BMW&quot;];</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>6.JavaScript 对象<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var person=&#123;firstname:&quot;John&quot;, lastname:&quot;Doe&quot;, id:5566&#125;;</span><br><span class=\"line\">//对象寻址方式:</span><br><span class=\"line\">name=person.lastname;</span><br><span class=\"line\">name=person[&quot;lastname&quot;];</span><br></pre></td></tr></table></figure></p>\n<hr>\n"},{"title":"2017.11.1 SpringMVC整合spring学习","date":"2017-10-30T23:55:58.000Z","_content":"和spring框架整合:他们分家\n```\nSpring负责管理service,dao;\nSpringmvc负责controller;\n\n注解\n@Controller 标识类为Controller,无需继承任何一个controller\n在controller中将一个集合给页面访问,Model对象,他是一个map,页面就可以按jstl方式访问\n标识每一个\n```\nredirect 不要request\n日期的特殊处理\n```\n    @InitBinder\n    public void initBinder(WebDataBinder binder){\n        DateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\n        dateFormat.setLenient(true);\n        binder.registerCustomEditor(Date.class,new CustomDateEditor(dateFormat,true));\n    }\n```\nspringmvc标签\n```\nstruts2标签非常丰富,远远超过springmvc\n文件上传\n使用标签\n<%@ taglib prefix=\"sf\" uri=\"http://www.springframework.org/tags/form\" %>\n<sf:form action=\"/person/update.action\" method=\"post\" modelAttribute=\"person\">\n\n<sf:hidden path=\"id\"/>\n<sf:input path=\"name\"/>\n\n</sf:form>\n\n\n```\n\n\n\n文件上传\n","source":"_posts/2017.11.1 SpringMVC整合spring学习.md","raw":"---\ntitle: 2017.11.1 SpringMVC整合spring学习\ndate: 2017-10-31 07:55:58\ntags:\n---\n和spring框架整合:他们分家\n```\nSpring负责管理service,dao;\nSpringmvc负责controller;\n\n注解\n@Controller 标识类为Controller,无需继承任何一个controller\n在controller中将一个集合给页面访问,Model对象,他是一个map,页面就可以按jstl方式访问\n标识每一个\n```\nredirect 不要request\n日期的特殊处理\n```\n    @InitBinder\n    public void initBinder(WebDataBinder binder){\n        DateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\n        dateFormat.setLenient(true);\n        binder.registerCustomEditor(Date.class,new CustomDateEditor(dateFormat,true));\n    }\n```\nspringmvc标签\n```\nstruts2标签非常丰富,远远超过springmvc\n文件上传\n使用标签\n<%@ taglib prefix=\"sf\" uri=\"http://www.springframework.org/tags/form\" %>\n<sf:form action=\"/person/update.action\" method=\"post\" modelAttribute=\"person\">\n\n<sf:hidden path=\"id\"/>\n<sf:input path=\"name\"/>\n\n</sf:form>\n\n\n```\n\n\n\n文件上传\n","slug":"2017-11-1-SpringMVC整合spring学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzae000jdcyuiuom2k82","content":"<p>和spring框架整合:他们分家<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Spring负责管理service,dao;</span><br><span class=\"line\">Springmvc负责controller;</span><br><span class=\"line\"></span><br><span class=\"line\">注解</span><br><span class=\"line\">@Controller 标识类为Controller,无需继承任何一个controller</span><br><span class=\"line\">在controller中将一个集合给页面访问,Model对象,他是一个map,页面就可以按jstl方式访问</span><br><span class=\"line\">标识每一个</span><br></pre></td></tr></table></figure></p>\n<p>redirect 不要request<br>日期的特殊处理<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@InitBinder</span><br><span class=\"line\">public void initBinder(WebDataBinder binder)&#123;</span><br><span class=\"line\">    DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class=\"line\">    dateFormat.setLenient(true);</span><br><span class=\"line\">    binder.registerCustomEditor(Date.class,new CustomDateEditor(dateFormat,true));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>springmvc标签<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">struts2标签非常丰富,远远超过springmvc</span><br><span class=\"line\">文件上传</span><br><span class=\"line\">使用标签</span><br><span class=\"line\">&lt;%@ taglib prefix=&quot;sf&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;</span><br><span class=\"line\">&lt;sf:form action=&quot;/person/update.action&quot; method=&quot;post&quot; modelAttribute=&quot;person&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;sf:hidden path=&quot;id&quot;/&gt;</span><br><span class=\"line\">&lt;sf:input path=&quot;name&quot;/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/sf:form&gt;</span><br></pre></td></tr></table></figure></p>\n<p>文件上传</p>\n","site":{"data":{}},"excerpt":"","more":"<p>和spring框架整合:他们分家<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Spring负责管理service,dao;</span><br><span class=\"line\">Springmvc负责controller;</span><br><span class=\"line\"></span><br><span class=\"line\">注解</span><br><span class=\"line\">@Controller 标识类为Controller,无需继承任何一个controller</span><br><span class=\"line\">在controller中将一个集合给页面访问,Model对象,他是一个map,页面就可以按jstl方式访问</span><br><span class=\"line\">标识每一个</span><br></pre></td></tr></table></figure></p>\n<p>redirect 不要request<br>日期的特殊处理<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@InitBinder</span><br><span class=\"line\">public void initBinder(WebDataBinder binder)&#123;</span><br><span class=\"line\">    DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class=\"line\">    dateFormat.setLenient(true);</span><br><span class=\"line\">    binder.registerCustomEditor(Date.class,new CustomDateEditor(dateFormat,true));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>springmvc标签<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">struts2标签非常丰富,远远超过springmvc</span><br><span class=\"line\">文件上传</span><br><span class=\"line\">使用标签</span><br><span class=\"line\">&lt;%@ taglib prefix=&quot;sf&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;</span><br><span class=\"line\">&lt;sf:form action=&quot;/person/update.action&quot; method=&quot;post&quot; modelAttribute=&quot;person&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;sf:hidden path=&quot;id&quot;/&gt;</span><br><span class=\"line\">&lt;sf:input path=&quot;name&quot;/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/sf:form&gt;</span><br></pre></td></tr></table></figure></p>\n<p>文件上传</p>\n"},{"title":"2017.11.18 css学习","date":"2017-11-17T23:55:58.000Z","_content":"块级元素:div h1 p\n内联元素:a b strong i input span\n---\n取消边框间隔:\nborder-collapse: collapse;\n---\ndisplay:inline\ndisplay:block","source":"_posts/2017.11.18 css学习.md","raw":"---\ntitle: 2017.11.18 css学习\ndate: 2017-11-18 07:55:58\ntags:\n---\n块级元素:div h1 p\n内联元素:a b strong i input span\n---\n取消边框间隔:\nborder-collapse: collapse;\n---\ndisplay:inline\ndisplay:block","slug":"css学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzaf000kdcyuxapeaiqi","content":"<p>块级元素:div h1 p</p>\n<h2 id=\"内联元素-a-b-strong-i-input-span\"><a href=\"#内联元素-a-b-strong-i-input-span\" class=\"headerlink\" title=\"内联元素:a b strong i input span\"></a>内联元素:a b strong i input span</h2><p>取消边框间隔:</p>\n<h2 id=\"border-collapse-collapse\"><a href=\"#border-collapse-collapse\" class=\"headerlink\" title=\"border-collapse: collapse;\"></a>border-collapse: collapse;</h2><p>display:inline<br>display:block</p>\n","site":{"data":{}},"excerpt":"","more":"<p>块级元素:div h1 p</p>\n<h2 id=\"内联元素-a-b-strong-i-input-span\"><a href=\"#内联元素-a-b-strong-i-input-span\" class=\"headerlink\" title=\"内联元素:a b strong i input span\"></a>内联元素:a b strong i input span</h2><p>取消边框间隔:</p>\n<h2 id=\"border-collapse-collapse\"><a href=\"#border-collapse-collapse\" class=\"headerlink\" title=\"border-collapse: collapse;\"></a>border-collapse: collapse;</h2><p>display:inline<br>display:block</p>\n"},{"title":"2017.11.2 mybatis学习","date":"2017-11-01T23:55:58.000Z","_content":"Hibernate与mybatis区别\n```\nHibernate,将整个过程面向对象开发,orm.\nibatis,维持原有的编程方式,前部分面向对象,持久层使用sql语句,面向过程\n1.底层使用sql,将hql转sql 无法优化\n2.Hibernate通过反射,性能低\n3.ibatis基于jdbc的轻量级封装,还是使用sql\n\n```\nWhat is MyBatis?\n```\nHibernate:po对象, 映射文件 User.hbm.xml(写表和实体对象的属性之间关系,对象之间的关系) 核心配置文件hibernate.cfg.xml,SessionFactory(session)\n\nMybatis:po对象,映射文件(UserMapper.xml,写CRUD等SQL语句),对象之间的关系,只有(一,多),核心配置文件(sqlMapConfig.xml),SqlSessionFactory (SqlSession)\n```\nPersonMapper.xml建立映射，位置和名称可以变\n```\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"cn.itcast.mapper.PersonMapper\">\n    <select id=\"find\" resultType=\"cn.itcast.domain.Person\">\n        SELECT * FROM person\n    </select>\n</mapper>\n```\n### SqlSessionFactory是线程安全的,SqlSession是线程不安全的\nsqlMapConfig.xml\n```\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n    <environments default=\"test\">\n        <environment id=\"test\">\n            <!--事务:JDBC/MANAGED 自己管理区(交给容器管理)-->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!--POOLED UNPOOLED JNDI -->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n                <property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatisdb?charsetEncoding=utf8\"/>\n                <property name=\"username\" value=\"root\"/>\n                <property name=\"password\" value=\"admin\"/>\n            </dataSource>\n        </environment>\n        <environment id=\"deploy\">\n            <!--事务:JDBC/MANAGED 自己管理区(交给容器管理)-->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!--POOLED UNPOOLED JNDI -->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n                <property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatisdb?charsetEncoding=utf8\"/>\n                <property name=\"username\" value=\"root\"/>\n                <property name=\"password\" value=\"admin\"/>\n            </dataSource>\n        </environment>\n    </environments>\n\n\n//此处为映射上面的mapper.xml\n    <mappers>\n        <mapper resource=\"cn/itcast/mapper/PersonMapper.xml\"></mapper>\n    </mappers>\n</configuration>\n```\n测试:\n```\n    private SqlSessionFactory factory;\n\n    @Before\n    public void init() throws IOException {\n        String resource = \"sqlMapConfig.xml\";\n        InputStream inputStream = Resources.getResourceAsStream(resource);\n        factory = new SqlSessionFactoryBuilder().build(inputStream);\n        }\n\n    @Test\n    public void findAll()  throws IOException {\n        SqlSession session = factory.openSession();\n\n        List<Person> personList = session.selectList(\"cn.itcast.mapper.PersonMapper.find\");\n        System.out.println(personList.size());\n        for (int i = 0; i < personList.size(); i++) {\n            System.out.println(personList.get(i));\n        }\n    }\n```\nMybatis最强大功能 resultMap\n插入数据\n```\n    public void testInsert(){\n        SqlSession session = factory.openSession();\n        Person p = new Person();\n        p.setAge(13);\n        p.setId(5);\n        p.setName(\"dasdas\");\n        p.setRemark(\"chengdu\");\n        session.insert(\"cn.itcast.mapper.PersonMapper.insert\",p);\n        session.commit();\n        System.out.println(\"finish\");\n    }\n    \n        <insert id=\"insert\" parameterType=\"cn.itcast.domain.Person\">\n        insert into person\n        (id,user_name,age,remark)\n        VALUES\n        (#{id},#{name},#{age},#{remark})\n        </insert>\n\n```\n简化方法:\n1.sql片段\n```\n<!--SQL片段-->\n<sql id=\"cols\">id,user_name,age,remark</sql>\n\n```\n使用:\n```\n<select id=\"find\" resultMap=\"personRM\">\n    SELECT <include refid=\"cols\"/> FROM person\n</select>\n```\n2.在sqlMapConfig.xml中,配置typeAliases\n```\n    <typeAliases>\n        <typeAlias type=\"cn.itcast.domain.Person\" alias=\"Person\"></typeAlias>\n    </typeAliases>\n\n\n```\n在personMapper.xml中\n```\n<insert id=\"insert\" parameterType=\"Person\">\n    insert into person\n    (id,user_name,age,remark)\n    VALUES\n    (#{id},#{name},#{age},#{remark})\n</insert>\n\n```\n动态SQL语句(拼组合查询条件)\n传参:map和po对象实体,查询条件封装\nwhere 条件,能够自动去除and\n```\n<select id=\"find\" parameterType=\"map\" resultMap=\"personRM\">\n    SELECT <include refid=\"cols\"/> from person\n   <where>\n    <if test=\"name!= null\"/> and user_name like #{name}\n    <if test=\"age!= null\"/>and age=#{age}\n    </where>\n</select>\n```\n```\npublic void testFind(){\n    SqlSession session = factory.openSession();\n\n    Map<String,Object> paramap = new HashMap<>();\n    paramap.put(\"name\",\"t%\");\n    paramap.put(\"age\",30);\n    List<Person> list = session.selectList(\"cn.itcast.mapper.PersonMapper.find\",paramap);\n    System.out.println(list.size());\n}\n```\n同样的,还有set标签,能够自动去除逗号\n```\n<set>\n    <if test=\"name!=null\">user_name=#{name},</if>\n    <if test=\"age!=null\">user_age=#{age},</if>\n</set>\n```\n还有foreach标签:\n```\n    <delete id=\"deleteArray\" parameterType=\"int\">\n        delete from person\n        WHERE id IN\n        (\n        <foreach collection=\"array\" item=\"id\" separator=\",\">\n            #{id}\n        </foreach>\n        )\n    </delete>\n```\n```\n    public void testDelateArray(){\n        SqlSession session = factory.openSession();\n        int[] array = {1,2};\n        session.delete(\"cn.itcast.mapper.PersonMapper.deleteArray\",array);\n    }\n```\n特殊字符:\n```\nand age<=\n写为:\n<![CDATA[and age <=]]>\n```\n面向对象:\n```\n需求:人员可以有扩展信息\n扩展person_info拓展用户的信息,例如\n人员和扩展信息表\n对一,对多\n\n对一:\n结果集中有重名字段\n<mapper namespace=\"cn.itcast.mapper.PersonInfoMapper\">\n    <resultMap id=\"personInfoRM\" type=\"cn.itcast.domain.PersonInfo\">\n    <id property=\"id\" column=\"ID\"/>\n    <result property=\"name\" column=\"USER_NAME\"/>\n    <result property=\"age\" column=\"AGE\"/>\n    </resultMap>\n    \n    <resultMap id=\"personPersonInfoRM\" type=\"cn.itcast.domain.Person\" extends=\"personInfoRM\">\n        <association property=\"personInfo\" javaType=\"cn.itcast.domain.PersonInfo\">\n        <result property=\"id\" column=\"INFOID\"/>\n        <result property=\"station\" column=\"STATION\"/>\n        <result property=\"joinDate\" column=\"JOIN_DATE\"/>\n        <association/>\n    </resultMap>\n```\n```\n    <select id=\"findPersonInfo\" parameterType=\"map\" resultMap=\"personPersonInfoRM\">\nSELECT\n        p.id,p.user_name,p.age,p.remark,\n        i.id AS infoid,i.station,i.join_date\nFROM\n        (SELECT id,user_name,age,remark FROM person) p\n        LEFT JOIN\n        (SELECT id,station,join_date FROM person_info) i\n        ON p.id=i.id\n<where>\n    <if test=\"name!=null\">user_name=#{name}</if>\n</where>\n    </select>\n```\n","source":"_posts/2017.11.2 mybatis学习.md","raw":"---\ntitle: 2017.11.2 mybatis学习\ndate: 2017-11-2 07:55:58\ntags:\n---\nHibernate与mybatis区别\n```\nHibernate,将整个过程面向对象开发,orm.\nibatis,维持原有的编程方式,前部分面向对象,持久层使用sql语句,面向过程\n1.底层使用sql,将hql转sql 无法优化\n2.Hibernate通过反射,性能低\n3.ibatis基于jdbc的轻量级封装,还是使用sql\n\n```\nWhat is MyBatis?\n```\nHibernate:po对象, 映射文件 User.hbm.xml(写表和实体对象的属性之间关系,对象之间的关系) 核心配置文件hibernate.cfg.xml,SessionFactory(session)\n\nMybatis:po对象,映射文件(UserMapper.xml,写CRUD等SQL语句),对象之间的关系,只有(一,多),核心配置文件(sqlMapConfig.xml),SqlSessionFactory (SqlSession)\n```\nPersonMapper.xml建立映射，位置和名称可以变\n```\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"cn.itcast.mapper.PersonMapper\">\n    <select id=\"find\" resultType=\"cn.itcast.domain.Person\">\n        SELECT * FROM person\n    </select>\n</mapper>\n```\n### SqlSessionFactory是线程安全的,SqlSession是线程不安全的\nsqlMapConfig.xml\n```\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n    <environments default=\"test\">\n        <environment id=\"test\">\n            <!--事务:JDBC/MANAGED 自己管理区(交给容器管理)-->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!--POOLED UNPOOLED JNDI -->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n                <property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatisdb?charsetEncoding=utf8\"/>\n                <property name=\"username\" value=\"root\"/>\n                <property name=\"password\" value=\"admin\"/>\n            </dataSource>\n        </environment>\n        <environment id=\"deploy\">\n            <!--事务:JDBC/MANAGED 自己管理区(交给容器管理)-->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!--POOLED UNPOOLED JNDI -->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n                <property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatisdb?charsetEncoding=utf8\"/>\n                <property name=\"username\" value=\"root\"/>\n                <property name=\"password\" value=\"admin\"/>\n            </dataSource>\n        </environment>\n    </environments>\n\n\n//此处为映射上面的mapper.xml\n    <mappers>\n        <mapper resource=\"cn/itcast/mapper/PersonMapper.xml\"></mapper>\n    </mappers>\n</configuration>\n```\n测试:\n```\n    private SqlSessionFactory factory;\n\n    @Before\n    public void init() throws IOException {\n        String resource = \"sqlMapConfig.xml\";\n        InputStream inputStream = Resources.getResourceAsStream(resource);\n        factory = new SqlSessionFactoryBuilder().build(inputStream);\n        }\n\n    @Test\n    public void findAll()  throws IOException {\n        SqlSession session = factory.openSession();\n\n        List<Person> personList = session.selectList(\"cn.itcast.mapper.PersonMapper.find\");\n        System.out.println(personList.size());\n        for (int i = 0; i < personList.size(); i++) {\n            System.out.println(personList.get(i));\n        }\n    }\n```\nMybatis最强大功能 resultMap\n插入数据\n```\n    public void testInsert(){\n        SqlSession session = factory.openSession();\n        Person p = new Person();\n        p.setAge(13);\n        p.setId(5);\n        p.setName(\"dasdas\");\n        p.setRemark(\"chengdu\");\n        session.insert(\"cn.itcast.mapper.PersonMapper.insert\",p);\n        session.commit();\n        System.out.println(\"finish\");\n    }\n    \n        <insert id=\"insert\" parameterType=\"cn.itcast.domain.Person\">\n        insert into person\n        (id,user_name,age,remark)\n        VALUES\n        (#{id},#{name},#{age},#{remark})\n        </insert>\n\n```\n简化方法:\n1.sql片段\n```\n<!--SQL片段-->\n<sql id=\"cols\">id,user_name,age,remark</sql>\n\n```\n使用:\n```\n<select id=\"find\" resultMap=\"personRM\">\n    SELECT <include refid=\"cols\"/> FROM person\n</select>\n```\n2.在sqlMapConfig.xml中,配置typeAliases\n```\n    <typeAliases>\n        <typeAlias type=\"cn.itcast.domain.Person\" alias=\"Person\"></typeAlias>\n    </typeAliases>\n\n\n```\n在personMapper.xml中\n```\n<insert id=\"insert\" parameterType=\"Person\">\n    insert into person\n    (id,user_name,age,remark)\n    VALUES\n    (#{id},#{name},#{age},#{remark})\n</insert>\n\n```\n动态SQL语句(拼组合查询条件)\n传参:map和po对象实体,查询条件封装\nwhere 条件,能够自动去除and\n```\n<select id=\"find\" parameterType=\"map\" resultMap=\"personRM\">\n    SELECT <include refid=\"cols\"/> from person\n   <where>\n    <if test=\"name!= null\"/> and user_name like #{name}\n    <if test=\"age!= null\"/>and age=#{age}\n    </where>\n</select>\n```\n```\npublic void testFind(){\n    SqlSession session = factory.openSession();\n\n    Map<String,Object> paramap = new HashMap<>();\n    paramap.put(\"name\",\"t%\");\n    paramap.put(\"age\",30);\n    List<Person> list = session.selectList(\"cn.itcast.mapper.PersonMapper.find\",paramap);\n    System.out.println(list.size());\n}\n```\n同样的,还有set标签,能够自动去除逗号\n```\n<set>\n    <if test=\"name!=null\">user_name=#{name},</if>\n    <if test=\"age!=null\">user_age=#{age},</if>\n</set>\n```\n还有foreach标签:\n```\n    <delete id=\"deleteArray\" parameterType=\"int\">\n        delete from person\n        WHERE id IN\n        (\n        <foreach collection=\"array\" item=\"id\" separator=\",\">\n            #{id}\n        </foreach>\n        )\n    </delete>\n```\n```\n    public void testDelateArray(){\n        SqlSession session = factory.openSession();\n        int[] array = {1,2};\n        session.delete(\"cn.itcast.mapper.PersonMapper.deleteArray\",array);\n    }\n```\n特殊字符:\n```\nand age<=\n写为:\n<![CDATA[and age <=]]>\n```\n面向对象:\n```\n需求:人员可以有扩展信息\n扩展person_info拓展用户的信息,例如\n人员和扩展信息表\n对一,对多\n\n对一:\n结果集中有重名字段\n<mapper namespace=\"cn.itcast.mapper.PersonInfoMapper\">\n    <resultMap id=\"personInfoRM\" type=\"cn.itcast.domain.PersonInfo\">\n    <id property=\"id\" column=\"ID\"/>\n    <result property=\"name\" column=\"USER_NAME\"/>\n    <result property=\"age\" column=\"AGE\"/>\n    </resultMap>\n    \n    <resultMap id=\"personPersonInfoRM\" type=\"cn.itcast.domain.Person\" extends=\"personInfoRM\">\n        <association property=\"personInfo\" javaType=\"cn.itcast.domain.PersonInfo\">\n        <result property=\"id\" column=\"INFOID\"/>\n        <result property=\"station\" column=\"STATION\"/>\n        <result property=\"joinDate\" column=\"JOIN_DATE\"/>\n        <association/>\n    </resultMap>\n```\n```\n    <select id=\"findPersonInfo\" parameterType=\"map\" resultMap=\"personPersonInfoRM\">\nSELECT\n        p.id,p.user_name,p.age,p.remark,\n        i.id AS infoid,i.station,i.join_date\nFROM\n        (SELECT id,user_name,age,remark FROM person) p\n        LEFT JOIN\n        (SELECT id,station,join_date FROM person_info) i\n        ON p.id=i.id\n<where>\n    <if test=\"name!=null\">user_name=#{name}</if>\n</where>\n    </select>\n```\n","slug":"2017-11-2-mybatis学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzag000ldcyua5q1oi46","content":"<p>Hibernate与mybatis区别<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hibernate,将整个过程面向对象开发,orm.</span><br><span class=\"line\">ibatis,维持原有的编程方式,前部分面向对象,持久层使用sql语句,面向过程</span><br><span class=\"line\">1.底层使用sql,将hql转sql 无法优化</span><br><span class=\"line\">2.Hibernate通过反射,性能低</span><br><span class=\"line\">3.ibatis基于jdbc的轻量级封装,还是使用sql</span><br></pre></td></tr></table></figure></p>\n<p>What is MyBatis?<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hibernate:po对象, 映射文件 User.hbm.xml(写表和实体对象的属性之间关系,对象之间的关系) 核心配置文件hibernate.cfg.xml,SessionFactory(session)</span><br><span class=\"line\"></span><br><span class=\"line\">Mybatis:po对象,映射文件(UserMapper.xml,写CRUD等SQL语句),对象之间的关系,只有(一,多),核心配置文件(sqlMapConfig.xml),SqlSessionFactory (SqlSession)</span><br></pre></td></tr></table></figure></p>\n<p>PersonMapper.xml建立映射，位置和名称可以变<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class=\"line\">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class=\"line\">&lt;mapper namespace=&quot;cn.itcast.mapper.PersonMapper&quot;&gt;</span><br><span class=\"line\">    &lt;select id=&quot;find&quot; resultType=&quot;cn.itcast.domain.Person&quot;&gt;</span><br><span class=\"line\">        SELECT * FROM person</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"SqlSessionFactory是线程安全的-SqlSession是线程不安全的\"><a href=\"#SqlSessionFactory是线程安全的-SqlSession是线程不安全的\" class=\"headerlink\" title=\"SqlSessionFactory是线程安全的,SqlSession是线程不安全的\"></a>SqlSessionFactory是线程安全的,SqlSession是线程不安全的</h3><p>sqlMapConfig.xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE configuration</span><br><span class=\"line\">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class=\"line\">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;environments default=&quot;test&quot;&gt;</span><br><span class=\"line\">        &lt;environment id=&quot;test&quot;&gt;</span><br><span class=\"line\">            &lt;!--事务:JDBC/MANAGED 自己管理区(交给容器管理)--&gt;</span><br><span class=\"line\">            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!--POOLED UNPOOLED JNDI --&gt;</span><br><span class=\"line\">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class=\"line\">                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatisdb?charsetEncoding=utf8&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;password&quot; value=&quot;admin&quot;/&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">        &lt;environment id=&quot;deploy&quot;&gt;</span><br><span class=\"line\">            &lt;!--事务:JDBC/MANAGED 自己管理区(交给容器管理)--&gt;</span><br><span class=\"line\">            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!--POOLED UNPOOLED JNDI --&gt;</span><br><span class=\"line\">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class=\"line\">                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatisdb?charsetEncoding=utf8&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;password&quot; value=&quot;admin&quot;/&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">    &lt;/environments&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">//此处为映射上面的mapper.xml</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;mapper resource=&quot;cn/itcast/mapper/PersonMapper.xml&quot;&gt;&lt;/mapper&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>\n<p>测试:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private SqlSessionFactory factory;</span><br><span class=\"line\"></span><br><span class=\"line\">@Before</span><br><span class=\"line\">public void init() throws IOException &#123;</span><br><span class=\"line\">    String resource = &quot;sqlMapConfig.xml&quot;;</span><br><span class=\"line\">    InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class=\"line\">    factory = new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@Test</span><br><span class=\"line\">public void findAll()  throws IOException &#123;</span><br><span class=\"line\">    SqlSession session = factory.openSession();</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Person&gt; personList = session.selectList(&quot;cn.itcast.mapper.PersonMapper.find&quot;);</span><br><span class=\"line\">    System.out.println(personList.size());</span><br><span class=\"line\">    for (int i = 0; i &lt; personList.size(); i++) &#123;</span><br><span class=\"line\">        System.out.println(personList.get(i));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Mybatis最强大功能 resultMap<br>插入数据<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void testInsert()&#123;</span><br><span class=\"line\">    SqlSession session = factory.openSession();</span><br><span class=\"line\">    Person p = new Person();</span><br><span class=\"line\">    p.setAge(13);</span><br><span class=\"line\">    p.setId(5);</span><br><span class=\"line\">    p.setName(&quot;dasdas&quot;);</span><br><span class=\"line\">    p.setRemark(&quot;chengdu&quot;);</span><br><span class=\"line\">    session.insert(&quot;cn.itcast.mapper.PersonMapper.insert&quot;,p);</span><br><span class=\"line\">    session.commit();</span><br><span class=\"line\">    System.out.println(&quot;finish&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;insert id=&quot;insert&quot; parameterType=&quot;cn.itcast.domain.Person&quot;&gt;</span><br><span class=\"line\">    insert into person</span><br><span class=\"line\">    (id,user_name,age,remark)</span><br><span class=\"line\">    VALUES</span><br><span class=\"line\">    (#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;,#&#123;remark&#125;)</span><br><span class=\"line\">    &lt;/insert&gt;</span><br></pre></td></tr></table></figure></p>\n<p>简化方法:<br>1.sql片段<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--SQL片段--&gt;</span><br><span class=\"line\">&lt;sql id=&quot;cols&quot;&gt;id,user_name,age,remark&lt;/sql&gt;</span><br></pre></td></tr></table></figure></p>\n<p>使用:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;select id=&quot;find&quot; resultMap=&quot;personRM&quot;&gt;</span><br><span class=\"line\">    SELECT &lt;include refid=&quot;cols&quot;/&gt; FROM person</span><br><span class=\"line\">&lt;/select&gt;</span><br></pre></td></tr></table></figure></p>\n<p>2.在sqlMapConfig.xml中,配置typeAliases<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;typeAliases&gt;</span><br><span class=\"line\">    &lt;typeAlias type=&quot;cn.itcast.domain.Person&quot; alias=&quot;Person&quot;&gt;&lt;/typeAlias&gt;</span><br><span class=\"line\">&lt;/typeAliases&gt;</span><br></pre></td></tr></table></figure></p>\n<p>在personMapper.xml中<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;insert id=&quot;insert&quot; parameterType=&quot;Person&quot;&gt;</span><br><span class=\"line\">    insert into person</span><br><span class=\"line\">    (id,user_name,age,remark)</span><br><span class=\"line\">    VALUES</span><br><span class=\"line\">    (#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;,#&#123;remark&#125;)</span><br><span class=\"line\">&lt;/insert&gt;</span><br></pre></td></tr></table></figure></p>\n<p>动态SQL语句(拼组合查询条件)<br>传参:map和po对象实体,查询条件封装<br>where 条件,能够自动去除and<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;select id=&quot;find&quot; parameterType=&quot;map&quot; resultMap=&quot;personRM&quot;&gt;</span><br><span class=\"line\">    SELECT &lt;include refid=&quot;cols&quot;/&gt; from person</span><br><span class=\"line\">   &lt;where&gt;</span><br><span class=\"line\">    &lt;if test=&quot;name!= null&quot;/&gt; and user_name like #&#123;name&#125;</span><br><span class=\"line\">    &lt;if test=&quot;age!= null&quot;/&gt;and age=#&#123;age&#125;</span><br><span class=\"line\">    &lt;/where&gt;</span><br><span class=\"line\">&lt;/select&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void testFind()&#123;</span><br><span class=\"line\">    SqlSession session = factory.openSession();</span><br><span class=\"line\"></span><br><span class=\"line\">    Map&lt;String,Object&gt; paramap = new HashMap&lt;&gt;();</span><br><span class=\"line\">    paramap.put(&quot;name&quot;,&quot;t%&quot;);</span><br><span class=\"line\">    paramap.put(&quot;age&quot;,30);</span><br><span class=\"line\">    List&lt;Person&gt; list = session.selectList(&quot;cn.itcast.mapper.PersonMapper.find&quot;,paramap);</span><br><span class=\"line\">    System.out.println(list.size());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>同样的,还有set标签,能够自动去除逗号<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;set&gt;</span><br><span class=\"line\">    &lt;if test=&quot;name!=null&quot;&gt;user_name=#&#123;name&#125;,&lt;/if&gt;</span><br><span class=\"line\">    &lt;if test=&quot;age!=null&quot;&gt;user_age=#&#123;age&#125;,&lt;/if&gt;</span><br><span class=\"line\">&lt;/set&gt;</span><br></pre></td></tr></table></figure></p>\n<p>还有foreach标签:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;delete id=&quot;deleteArray&quot; parameterType=&quot;int&quot;&gt;</span><br><span class=\"line\">    delete from person</span><br><span class=\"line\">    WHERE id IN</span><br><span class=\"line\">    (</span><br><span class=\"line\">    &lt;foreach collection=&quot;array&quot; item=&quot;id&quot; separator=&quot;,&quot;&gt;</span><br><span class=\"line\">        #&#123;id&#125;</span><br><span class=\"line\">    &lt;/foreach&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">&lt;/delete&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void testDelateArray()&#123;</span><br><span class=\"line\">    SqlSession session = factory.openSession();</span><br><span class=\"line\">    int[] array = &#123;1,2&#125;;</span><br><span class=\"line\">    session.delete(&quot;cn.itcast.mapper.PersonMapper.deleteArray&quot;,array);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>特殊字符:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">and age&lt;=</span><br><span class=\"line\">写为:</span><br><span class=\"line\">&lt;![CDATA[and age &lt;=]]&gt;</span><br></pre></td></tr></table></figure></p>\n<p>面向对象:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需求:人员可以有扩展信息</span><br><span class=\"line\">扩展person_info拓展用户的信息,例如</span><br><span class=\"line\">人员和扩展信息表</span><br><span class=\"line\">对一,对多</span><br><span class=\"line\"></span><br><span class=\"line\">对一:</span><br><span class=\"line\">结果集中有重名字段</span><br><span class=\"line\">&lt;mapper namespace=&quot;cn.itcast.mapper.PersonInfoMapper&quot;&gt;</span><br><span class=\"line\">    &lt;resultMap id=&quot;personInfoRM&quot; type=&quot;cn.itcast.domain.PersonInfo&quot;&gt;</span><br><span class=\"line\">    &lt;id property=&quot;id&quot; column=&quot;ID&quot;/&gt;</span><br><span class=\"line\">    &lt;result property=&quot;name&quot; column=&quot;USER_NAME&quot;/&gt;</span><br><span class=\"line\">    &lt;result property=&quot;age&quot; column=&quot;AGE&quot;/&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;resultMap id=&quot;personPersonInfoRM&quot; type=&quot;cn.itcast.domain.Person&quot; extends=&quot;personInfoRM&quot;&gt;</span><br><span class=\"line\">        &lt;association property=&quot;personInfo&quot; javaType=&quot;cn.itcast.domain.PersonInfo&quot;&gt;</span><br><span class=\"line\">        &lt;result property=&quot;id&quot; column=&quot;INFOID&quot;/&gt;</span><br><span class=\"line\">        &lt;result property=&quot;station&quot; column=&quot;STATION&quot;/&gt;</span><br><span class=\"line\">        &lt;result property=&quot;joinDate&quot; column=&quot;JOIN_DATE&quot;/&gt;</span><br><span class=\"line\">        &lt;association/&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    &lt;select id=&quot;findPersonInfo&quot; parameterType=&quot;map&quot; resultMap=&quot;personPersonInfoRM&quot;&gt;</span><br><span class=\"line\">SELECT</span><br><span class=\"line\">        p.id,p.user_name,p.age,p.remark,</span><br><span class=\"line\">        i.id AS infoid,i.station,i.join_date</span><br><span class=\"line\">FROM</span><br><span class=\"line\">        (SELECT id,user_name,age,remark FROM person) p</span><br><span class=\"line\">        LEFT JOIN</span><br><span class=\"line\">        (SELECT id,station,join_date FROM person_info) i</span><br><span class=\"line\">        ON p.id=i.id</span><br><span class=\"line\">&lt;where&gt;</span><br><span class=\"line\">    &lt;if test=&quot;name!=null&quot;&gt;user_name=#&#123;name&#125;&lt;/if&gt;</span><br><span class=\"line\">&lt;/where&gt;</span><br><span class=\"line\">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>Hibernate与mybatis区别<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hibernate,将整个过程面向对象开发,orm.</span><br><span class=\"line\">ibatis,维持原有的编程方式,前部分面向对象,持久层使用sql语句,面向过程</span><br><span class=\"line\">1.底层使用sql,将hql转sql 无法优化</span><br><span class=\"line\">2.Hibernate通过反射,性能低</span><br><span class=\"line\">3.ibatis基于jdbc的轻量级封装,还是使用sql</span><br></pre></td></tr></table></figure></p>\n<p>What is MyBatis?<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hibernate:po对象, 映射文件 User.hbm.xml(写表和实体对象的属性之间关系,对象之间的关系) 核心配置文件hibernate.cfg.xml,SessionFactory(session)</span><br><span class=\"line\"></span><br><span class=\"line\">Mybatis:po对象,映射文件(UserMapper.xml,写CRUD等SQL语句),对象之间的关系,只有(一,多),核心配置文件(sqlMapConfig.xml),SqlSessionFactory (SqlSession)</span><br></pre></td></tr></table></figure></p>\n<p>PersonMapper.xml建立映射，位置和名称可以变<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class=\"line\">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class=\"line\">&lt;mapper namespace=&quot;cn.itcast.mapper.PersonMapper&quot;&gt;</span><br><span class=\"line\">    &lt;select id=&quot;find&quot; resultType=&quot;cn.itcast.domain.Person&quot;&gt;</span><br><span class=\"line\">        SELECT * FROM person</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"SqlSessionFactory是线程安全的-SqlSession是线程不安全的\"><a href=\"#SqlSessionFactory是线程安全的-SqlSession是线程不安全的\" class=\"headerlink\" title=\"SqlSessionFactory是线程安全的,SqlSession是线程不安全的\"></a>SqlSessionFactory是线程安全的,SqlSession是线程不安全的</h3><p>sqlMapConfig.xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE configuration</span><br><span class=\"line\">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class=\"line\">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;environments default=&quot;test&quot;&gt;</span><br><span class=\"line\">        &lt;environment id=&quot;test&quot;&gt;</span><br><span class=\"line\">            &lt;!--事务:JDBC/MANAGED 自己管理区(交给容器管理)--&gt;</span><br><span class=\"line\">            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!--POOLED UNPOOLED JNDI --&gt;</span><br><span class=\"line\">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class=\"line\">                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatisdb?charsetEncoding=utf8&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;password&quot; value=&quot;admin&quot;/&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">        &lt;environment id=&quot;deploy&quot;&gt;</span><br><span class=\"line\">            &lt;!--事务:JDBC/MANAGED 自己管理区(交给容器管理)--&gt;</span><br><span class=\"line\">            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!--POOLED UNPOOLED JNDI --&gt;</span><br><span class=\"line\">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class=\"line\">                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatisdb?charsetEncoding=utf8&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class=\"line\">                &lt;property name=&quot;password&quot; value=&quot;admin&quot;/&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">    &lt;/environments&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">//此处为映射上面的mapper.xml</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;mapper resource=&quot;cn/itcast/mapper/PersonMapper.xml&quot;&gt;&lt;/mapper&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>\n<p>测试:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private SqlSessionFactory factory;</span><br><span class=\"line\"></span><br><span class=\"line\">@Before</span><br><span class=\"line\">public void init() throws IOException &#123;</span><br><span class=\"line\">    String resource = &quot;sqlMapConfig.xml&quot;;</span><br><span class=\"line\">    InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class=\"line\">    factory = new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@Test</span><br><span class=\"line\">public void findAll()  throws IOException &#123;</span><br><span class=\"line\">    SqlSession session = factory.openSession();</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Person&gt; personList = session.selectList(&quot;cn.itcast.mapper.PersonMapper.find&quot;);</span><br><span class=\"line\">    System.out.println(personList.size());</span><br><span class=\"line\">    for (int i = 0; i &lt; personList.size(); i++) &#123;</span><br><span class=\"line\">        System.out.println(personList.get(i));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Mybatis最强大功能 resultMap<br>插入数据<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void testInsert()&#123;</span><br><span class=\"line\">    SqlSession session = factory.openSession();</span><br><span class=\"line\">    Person p = new Person();</span><br><span class=\"line\">    p.setAge(13);</span><br><span class=\"line\">    p.setId(5);</span><br><span class=\"line\">    p.setName(&quot;dasdas&quot;);</span><br><span class=\"line\">    p.setRemark(&quot;chengdu&quot;);</span><br><span class=\"line\">    session.insert(&quot;cn.itcast.mapper.PersonMapper.insert&quot;,p);</span><br><span class=\"line\">    session.commit();</span><br><span class=\"line\">    System.out.println(&quot;finish&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;insert id=&quot;insert&quot; parameterType=&quot;cn.itcast.domain.Person&quot;&gt;</span><br><span class=\"line\">    insert into person</span><br><span class=\"line\">    (id,user_name,age,remark)</span><br><span class=\"line\">    VALUES</span><br><span class=\"line\">    (#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;,#&#123;remark&#125;)</span><br><span class=\"line\">    &lt;/insert&gt;</span><br></pre></td></tr></table></figure></p>\n<p>简化方法:<br>1.sql片段<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--SQL片段--&gt;</span><br><span class=\"line\">&lt;sql id=&quot;cols&quot;&gt;id,user_name,age,remark&lt;/sql&gt;</span><br></pre></td></tr></table></figure></p>\n<p>使用:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;select id=&quot;find&quot; resultMap=&quot;personRM&quot;&gt;</span><br><span class=\"line\">    SELECT &lt;include refid=&quot;cols&quot;/&gt; FROM person</span><br><span class=\"line\">&lt;/select&gt;</span><br></pre></td></tr></table></figure></p>\n<p>2.在sqlMapConfig.xml中,配置typeAliases<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;typeAliases&gt;</span><br><span class=\"line\">    &lt;typeAlias type=&quot;cn.itcast.domain.Person&quot; alias=&quot;Person&quot;&gt;&lt;/typeAlias&gt;</span><br><span class=\"line\">&lt;/typeAliases&gt;</span><br></pre></td></tr></table></figure></p>\n<p>在personMapper.xml中<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;insert id=&quot;insert&quot; parameterType=&quot;Person&quot;&gt;</span><br><span class=\"line\">    insert into person</span><br><span class=\"line\">    (id,user_name,age,remark)</span><br><span class=\"line\">    VALUES</span><br><span class=\"line\">    (#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;,#&#123;remark&#125;)</span><br><span class=\"line\">&lt;/insert&gt;</span><br></pre></td></tr></table></figure></p>\n<p>动态SQL语句(拼组合查询条件)<br>传参:map和po对象实体,查询条件封装<br>where 条件,能够自动去除and<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;select id=&quot;find&quot; parameterType=&quot;map&quot; resultMap=&quot;personRM&quot;&gt;</span><br><span class=\"line\">    SELECT &lt;include refid=&quot;cols&quot;/&gt; from person</span><br><span class=\"line\">   &lt;where&gt;</span><br><span class=\"line\">    &lt;if test=&quot;name!= null&quot;/&gt; and user_name like #&#123;name&#125;</span><br><span class=\"line\">    &lt;if test=&quot;age!= null&quot;/&gt;and age=#&#123;age&#125;</span><br><span class=\"line\">    &lt;/where&gt;</span><br><span class=\"line\">&lt;/select&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void testFind()&#123;</span><br><span class=\"line\">    SqlSession session = factory.openSession();</span><br><span class=\"line\"></span><br><span class=\"line\">    Map&lt;String,Object&gt; paramap = new HashMap&lt;&gt;();</span><br><span class=\"line\">    paramap.put(&quot;name&quot;,&quot;t%&quot;);</span><br><span class=\"line\">    paramap.put(&quot;age&quot;,30);</span><br><span class=\"line\">    List&lt;Person&gt; list = session.selectList(&quot;cn.itcast.mapper.PersonMapper.find&quot;,paramap);</span><br><span class=\"line\">    System.out.println(list.size());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>同样的,还有set标签,能够自动去除逗号<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;set&gt;</span><br><span class=\"line\">    &lt;if test=&quot;name!=null&quot;&gt;user_name=#&#123;name&#125;,&lt;/if&gt;</span><br><span class=\"line\">    &lt;if test=&quot;age!=null&quot;&gt;user_age=#&#123;age&#125;,&lt;/if&gt;</span><br><span class=\"line\">&lt;/set&gt;</span><br></pre></td></tr></table></figure></p>\n<p>还有foreach标签:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;delete id=&quot;deleteArray&quot; parameterType=&quot;int&quot;&gt;</span><br><span class=\"line\">    delete from person</span><br><span class=\"line\">    WHERE id IN</span><br><span class=\"line\">    (</span><br><span class=\"line\">    &lt;foreach collection=&quot;array&quot; item=&quot;id&quot; separator=&quot;,&quot;&gt;</span><br><span class=\"line\">        #&#123;id&#125;</span><br><span class=\"line\">    &lt;/foreach&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">&lt;/delete&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void testDelateArray()&#123;</span><br><span class=\"line\">    SqlSession session = factory.openSession();</span><br><span class=\"line\">    int[] array = &#123;1,2&#125;;</span><br><span class=\"line\">    session.delete(&quot;cn.itcast.mapper.PersonMapper.deleteArray&quot;,array);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>特殊字符:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">and age&lt;=</span><br><span class=\"line\">写为:</span><br><span class=\"line\">&lt;![CDATA[and age &lt;=]]&gt;</span><br></pre></td></tr></table></figure></p>\n<p>面向对象:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需求:人员可以有扩展信息</span><br><span class=\"line\">扩展person_info拓展用户的信息,例如</span><br><span class=\"line\">人员和扩展信息表</span><br><span class=\"line\">对一,对多</span><br><span class=\"line\"></span><br><span class=\"line\">对一:</span><br><span class=\"line\">结果集中有重名字段</span><br><span class=\"line\">&lt;mapper namespace=&quot;cn.itcast.mapper.PersonInfoMapper&quot;&gt;</span><br><span class=\"line\">    &lt;resultMap id=&quot;personInfoRM&quot; type=&quot;cn.itcast.domain.PersonInfo&quot;&gt;</span><br><span class=\"line\">    &lt;id property=&quot;id&quot; column=&quot;ID&quot;/&gt;</span><br><span class=\"line\">    &lt;result property=&quot;name&quot; column=&quot;USER_NAME&quot;/&gt;</span><br><span class=\"line\">    &lt;result property=&quot;age&quot; column=&quot;AGE&quot;/&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;resultMap id=&quot;personPersonInfoRM&quot; type=&quot;cn.itcast.domain.Person&quot; extends=&quot;personInfoRM&quot;&gt;</span><br><span class=\"line\">        &lt;association property=&quot;personInfo&quot; javaType=&quot;cn.itcast.domain.PersonInfo&quot;&gt;</span><br><span class=\"line\">        &lt;result property=&quot;id&quot; column=&quot;INFOID&quot;/&gt;</span><br><span class=\"line\">        &lt;result property=&quot;station&quot; column=&quot;STATION&quot;/&gt;</span><br><span class=\"line\">        &lt;result property=&quot;joinDate&quot; column=&quot;JOIN_DATE&quot;/&gt;</span><br><span class=\"line\">        &lt;association/&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    &lt;select id=&quot;findPersonInfo&quot; parameterType=&quot;map&quot; resultMap=&quot;personPersonInfoRM&quot;&gt;</span><br><span class=\"line\">SELECT</span><br><span class=\"line\">        p.id,p.user_name,p.age,p.remark,</span><br><span class=\"line\">        i.id AS infoid,i.station,i.join_date</span><br><span class=\"line\">FROM</span><br><span class=\"line\">        (SELECT id,user_name,age,remark FROM person) p</span><br><span class=\"line\">        LEFT JOIN</span><br><span class=\"line\">        (SELECT id,station,join_date FROM person_info) i</span><br><span class=\"line\">        ON p.id=i.id</span><br><span class=\"line\">&lt;where&gt;</span><br><span class=\"line\">    &lt;if test=&quot;name!=null&quot;&gt;user_name=#&#123;name&#125;&lt;/if&gt;</span><br><span class=\"line\">&lt;/where&gt;</span><br><span class=\"line\">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>\n"},{"title":"2017.11.21 操作系统学习","date":"2017-11-20T23:55:58.000Z","_content":"操作系统管理哪些硬件?\ncpu管理 , 内存管理, 终端管理, 磁盘管理, 文件管理,\n 网络管理, 电源管理, 多核管理\n \n ---\n Collections.synchronizedList初次使用\n ```\n 如果多个线程同时访问一个ArrayList实例，而其中至少一个线程从结构上修改了列表，那么它就必须保持外部同步。（结构上的修改是指任何添加或删除一个或多个元素的操作，或者显式调整底层数组的大小；仅仅设置元素的值不是结构上的修改。）这一般通过对自然封装该列表的对象进行同步操作来完成。如果不存在这样的对象，则应该使用Collections.synchronizedList方法将该列表“包装”起来。这最好在创建时完成，以防止意外对列表进行不同步的访问\n 如:\n List<String> ips = Collections.synchronizedList(new ArrayList<>());\n ```\n java多线程池的支持——ThreadPoolExecutor\n\njava的线程池支持主要通过ThreadPoolExecutor来实现，我们使用的ExecutorService的各种线程池策略都是基于ThreadPoolExecutor实现的，所以ThreadPoolExecutor十分重要。要弄明白各种线程池策略，必须先弄明白ThreadPoolExecutor。\n\n","source":"_posts/2017.11.21 多线程学习.md","raw":"---\ntitle: 2017.11.21 操作系统学习\ndate: 2017-11-21 07:55:58\ntags:\n---\n操作系统管理哪些硬件?\ncpu管理 , 内存管理, 终端管理, 磁盘管理, 文件管理,\n 网络管理, 电源管理, 多核管理\n \n ---\n Collections.synchronizedList初次使用\n ```\n 如果多个线程同时访问一个ArrayList实例，而其中至少一个线程从结构上修改了列表，那么它就必须保持外部同步。（结构上的修改是指任何添加或删除一个或多个元素的操作，或者显式调整底层数组的大小；仅仅设置元素的值不是结构上的修改。）这一般通过对自然封装该列表的对象进行同步操作来完成。如果不存在这样的对象，则应该使用Collections.synchronizedList方法将该列表“包装”起来。这最好在创建时完成，以防止意外对列表进行不同步的访问\n 如:\n List<String> ips = Collections.synchronizedList(new ArrayList<>());\n ```\n java多线程池的支持——ThreadPoolExecutor\n\njava的线程池支持主要通过ThreadPoolExecutor来实现，我们使用的ExecutorService的各种线程池策略都是基于ThreadPoolExecutor实现的，所以ThreadPoolExecutor十分重要。要弄明白各种线程池策略，必须先弄明白ThreadPoolExecutor。\n\n","slug":"多线程学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzah000mdcyugd8lhrcf","content":"<p>操作系统管理哪些硬件?<br>cpu管理 , 内存管理, 终端管理, 磁盘管理, 文件管理,<br> 网络管理, 电源管理, 多核管理</p>\n<hr>\n<p> Collections.synchronizedList初次使用<br> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">如果多个线程同时访问一个ArrayList实例，而其中至少一个线程从结构上修改了列表，那么它就必须保持外部同步。（结构上的修改是指任何添加或删除一个或多个元素的操作，或者显式调整底层数组的大小；仅仅设置元素的值不是结构上的修改。）这一般通过对自然封装该列表的对象进行同步操作来完成。如果不存在这样的对象，则应该使用Collections.synchronizedList方法将该列表“包装”起来。这最好在创建时完成，以防止意外对列表进行不同步的访问</span><br><span class=\"line\">如:</span><br><span class=\"line\">List&lt;String&gt; ips = Collections.synchronizedList(new ArrayList&lt;&gt;());</span><br></pre></td></tr></table></figure></p>\n<p> java多线程池的支持——ThreadPoolExecutor</p>\n<p>java的线程池支持主要通过ThreadPoolExecutor来实现，我们使用的ExecutorService的各种线程池策略都是基于ThreadPoolExecutor实现的，所以ThreadPoolExecutor十分重要。要弄明白各种线程池策略，必须先弄明白ThreadPoolExecutor。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>操作系统管理哪些硬件?<br>cpu管理 , 内存管理, 终端管理, 磁盘管理, 文件管理,<br> 网络管理, 电源管理, 多核管理</p>\n<hr>\n<p> Collections.synchronizedList初次使用<br> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">如果多个线程同时访问一个ArrayList实例，而其中至少一个线程从结构上修改了列表，那么它就必须保持外部同步。（结构上的修改是指任何添加或删除一个或多个元素的操作，或者显式调整底层数组的大小；仅仅设置元素的值不是结构上的修改。）这一般通过对自然封装该列表的对象进行同步操作来完成。如果不存在这样的对象，则应该使用Collections.synchronizedList方法将该列表“包装”起来。这最好在创建时完成，以防止意外对列表进行不同步的访问</span><br><span class=\"line\">如:</span><br><span class=\"line\">List&lt;String&gt; ips = Collections.synchronizedList(new ArrayList&lt;&gt;());</span><br></pre></td></tr></table></figure></p>\n<p> java多线程池的支持——ThreadPoolExecutor</p>\n<p>java的线程池支持主要通过ThreadPoolExecutor来实现，我们使用的ExecutorService的各种线程池策略都是基于ThreadPoolExecutor实现的，所以ThreadPoolExecutor十分重要。要弄明白各种线程池策略，必须先弄明白ThreadPoolExecutor。</p>\n"},{"title":"2017.11.3 mybatis学习","date":"2017-11-01T23:55:58.000Z","_content":"接口开发:\n直接使用sqlsession提供的selectList...他们调用方式不习惯,命名空间.id,无法在编译时提示语法错误,运行时才报错\nmybatis在3.0之后,对接口进行开发.\n通过命名空间定位mapper文件,找到mapper的文件,所有的方法就可以初始化了.通过id找到一个具体的sql去执行\n```\n1.接口名称必须与mapper文件名称相同\n2.接口的包路径和命名空间一致,接口文件和mapper文件在一起\n3.接口中要声明的方法名和某个sql配置的id属性一致\n\n\n```","source":"_posts/2017.11.3 mybatis学习.md","raw":"---\ntitle: 2017.11.3 mybatis学习\ndate: 2017-11-2 07:55:58\ntags:\n---\n接口开发:\n直接使用sqlsession提供的selectList...他们调用方式不习惯,命名空间.id,无法在编译时提示语法错误,运行时才报错\nmybatis在3.0之后,对接口进行开发.\n通过命名空间定位mapper文件,找到mapper的文件,所有的方法就可以初始化了.通过id找到一个具体的sql去执行\n```\n1.接口名称必须与mapper文件名称相同\n2.接口的包路径和命名空间一致,接口文件和mapper文件在一起\n3.接口中要声明的方法名和某个sql配置的id属性一致\n\n\n```","slug":"2017-11-3-mybatis学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzai000ndcyumrkl9tck","content":"<p>接口开发:<br>直接使用sqlsession提供的selectList…他们调用方式不习惯,命名空间.id,无法在编译时提示语法错误,运行时才报错<br>mybatis在3.0之后,对接口进行开发.<br>通过命名空间定位mapper文件,找到mapper的文件,所有的方法就可以初始化了.通过id找到一个具体的sql去执行<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.接口名称必须与mapper文件名称相同</span><br><span class=\"line\">2.接口的包路径和命名空间一致,接口文件和mapper文件在一起</span><br><span class=\"line\">3.接口中要声明的方法名和某个sql配置的id属性一致</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>接口开发:<br>直接使用sqlsession提供的selectList…他们调用方式不习惯,命名空间.id,无法在编译时提示语法错误,运行时才报错<br>mybatis在3.0之后,对接口进行开发.<br>通过命名空间定位mapper文件,找到mapper的文件,所有的方法就可以初始化了.通过id找到一个具体的sql去执行<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.接口名称必须与mapper文件名称相同</span><br><span class=\"line\">2.接口的包路径和命名空间一致,接口文件和mapper文件在一起</span><br><span class=\"line\">3.接口中要声明的方法名和某个sql配置的id属性一致</span><br></pre></td></tr></table></figure></p>\n"},{"title":"2017.11.9 ssm学习","date":"2017-11-01T23:55:58.000Z","_content":"web.xml中需要配置:\n```\n1.spring的配置文件\n<context-param>\n    <param-name>contextConfigLocation</param-name>\n    <param-value>classpath:applicationContext.xml></param-value>\n</context-param>\n<listener>\n    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n</listener>\n```\n```\n2.中文过滤器\n  <filter>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>\n    <init-param>\n      <param-name>encoding</param-name>\n      <param-value>utf-8</param-value>\n    </init-param>\n  </filter>\n  <filter-mapping>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <url-pattern>/*</url-pattern>\n  </filter-mapping>\n\n```\n```\n3.spring mvc核心:分发servlet\n  <servlet>\n    <servlet-name>mvc-dispatcher</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    <!-- spring mvc的配置文件 -->\n    <init-param>\n      <param-name>contextConfigLocation</param-name>\n      <param-value>classpath:springMVC.xml</param-value>\n    </init-param>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n  <servlet-mapping>\n    <servlet-name>mvc-dispatcher</servlet-name>\n    <url-pattern>/</url-pattern>\n  </servlet-mapping>\n```\n```\nspring的配置文件中:\n    <context:annotation-config />\n    <context:component-scan base-package=\"com.how2java.tmall.service\" />\n    \n    1.导入数据库配置文件\n        <context:property-placeholder location=\"classpath:jdbc.properties\"/>\n    2.配置数据库连接池\n        <bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\" init-method=\"init\" destroy-method=\"close\">\n        <!-- 基本属性 url、user、password -->\n        <property name=\"url\" value=\"${jdbc.url}\" />\n        <property name=\"username\" value=\"${jdbc.username}\" />\n        <property name=\"password\" value=\"${jdbc.password}\" />\n\n        <!-- 配置初始化大小、最小、最大 -->\n        <property name=\"initialSize\" value=\"1\" />\n        <property name=\"minIdle\" value=\"1\" />\n        <property name=\"maxActive\" value=\"20\" />\n\n        <!-- 配置获取连接等待超时的时间 -->\n        <property name=\"maxWait\" value=\"60000\" />\n\n        <!-- 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒 -->\n        <property name=\"timeBetweenEvictionRunsMillis\" value=\"60000\" />\n\n        <!-- 配置一个连接在池中最小生存的时间，单位是毫秒 -->\n        <property name=\"minEvictableIdleTimeMillis\" value=\"300000\" />\n\n        <property name=\"validationQuery\" value=\"SELECT 1\" />\n        <property name=\"testWhileIdle\" value=\"true\" />\n        <property name=\"testOnBorrow\" value=\"false\" />\n        <property name=\"testOnReturn\" value=\"false\" />\n\n        <!-- 打开PSCache，并且指定每个连接上PSCache的大小 -->\n        <property name=\"poolPreparedStatements\" value=\"true\" />\n        <property name=\"maxPoolPreparedStatementPerConnectionSize\"\n                  value=\"20\" />\n    </bean>\n    3.mybatis的sessionFactory配置\n    <bean id=\"sqlSession\" class=\"org.mybatis.spring.SqlSessionFactoryBean\">\n        <property name=\"typeAliasesPackage\" value=\"com.how2java.tmall.pojo\" />\n        <property name=\"dataSource\" ref=\"dataSource\"/>\n        <property name=\"mapperLocations\" value=\"classpath:mapper/*.xml\"/>\n        <!--分页插件，目前先注释，后面重构的时候才会使用\n        <property name=\"plugins\">\n            <array>\n                <bean class=\"com.github.pagehelper.PageInterceptor\">\n                    <property name=\"properties\">\n                        <value>\n                        </value>\n                    </property>\n                </bean>\n            </array>\n        </property>\n        -->\n    </bean>\n    3.mybatis的mapper文件识别\n    <bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\">\n        <property name=\"basePackage\" value=\"com.how2java.tmall.mapper\"/>\n    </bean>\n```\n```\nSPringMVC的配置\n    <!--启动注解识别-->\n    <context:annotation-config/>\n\n    <context:component-scan base-package=\"com.how2java.tmall.controller\">\n        <context:include-filter type=\"annotation\"\n                                expression=\"org.springframework.stereotype.Controller\"/>\n    </context:component-scan>\n\n    <mvc:annotation-driven />\n\n    <!--开通静态资源的访问-->\n    <mvc:default-servlet-handler />\n\n    <!-- 视图定位 -->\n    <bean\n            class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n        <property name=\"viewClass\"\n                  value=\"org.springframework.web.servlet.view.JstlView\" />\n        <property name=\"prefix\" value=\"/WEB-INF/jsp/\" />\n        <property name=\"suffix\" value=\".jsp\" />\n    </bean>\n\n    <!-- 对上传文件的解析-->\n    <bean id=\"multipartResolver\" class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"/>\n</beans>\n\n```\n","source":"_posts/2017.11.9 ssm学习.md","raw":"---\ntitle: 2017.11.9 ssm学习\ndate: 2017-11-2 07:55:58\ntags:\n---\nweb.xml中需要配置:\n```\n1.spring的配置文件\n<context-param>\n    <param-name>contextConfigLocation</param-name>\n    <param-value>classpath:applicationContext.xml></param-value>\n</context-param>\n<listener>\n    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n</listener>\n```\n```\n2.中文过滤器\n  <filter>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>\n    <init-param>\n      <param-name>encoding</param-name>\n      <param-value>utf-8</param-value>\n    </init-param>\n  </filter>\n  <filter-mapping>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <url-pattern>/*</url-pattern>\n  </filter-mapping>\n\n```\n```\n3.spring mvc核心:分发servlet\n  <servlet>\n    <servlet-name>mvc-dispatcher</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    <!-- spring mvc的配置文件 -->\n    <init-param>\n      <param-name>contextConfigLocation</param-name>\n      <param-value>classpath:springMVC.xml</param-value>\n    </init-param>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n  <servlet-mapping>\n    <servlet-name>mvc-dispatcher</servlet-name>\n    <url-pattern>/</url-pattern>\n  </servlet-mapping>\n```\n```\nspring的配置文件中:\n    <context:annotation-config />\n    <context:component-scan base-package=\"com.how2java.tmall.service\" />\n    \n    1.导入数据库配置文件\n        <context:property-placeholder location=\"classpath:jdbc.properties\"/>\n    2.配置数据库连接池\n        <bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\" init-method=\"init\" destroy-method=\"close\">\n        <!-- 基本属性 url、user、password -->\n        <property name=\"url\" value=\"${jdbc.url}\" />\n        <property name=\"username\" value=\"${jdbc.username}\" />\n        <property name=\"password\" value=\"${jdbc.password}\" />\n\n        <!-- 配置初始化大小、最小、最大 -->\n        <property name=\"initialSize\" value=\"1\" />\n        <property name=\"minIdle\" value=\"1\" />\n        <property name=\"maxActive\" value=\"20\" />\n\n        <!-- 配置获取连接等待超时的时间 -->\n        <property name=\"maxWait\" value=\"60000\" />\n\n        <!-- 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒 -->\n        <property name=\"timeBetweenEvictionRunsMillis\" value=\"60000\" />\n\n        <!-- 配置一个连接在池中最小生存的时间，单位是毫秒 -->\n        <property name=\"minEvictableIdleTimeMillis\" value=\"300000\" />\n\n        <property name=\"validationQuery\" value=\"SELECT 1\" />\n        <property name=\"testWhileIdle\" value=\"true\" />\n        <property name=\"testOnBorrow\" value=\"false\" />\n        <property name=\"testOnReturn\" value=\"false\" />\n\n        <!-- 打开PSCache，并且指定每个连接上PSCache的大小 -->\n        <property name=\"poolPreparedStatements\" value=\"true\" />\n        <property name=\"maxPoolPreparedStatementPerConnectionSize\"\n                  value=\"20\" />\n    </bean>\n    3.mybatis的sessionFactory配置\n    <bean id=\"sqlSession\" class=\"org.mybatis.spring.SqlSessionFactoryBean\">\n        <property name=\"typeAliasesPackage\" value=\"com.how2java.tmall.pojo\" />\n        <property name=\"dataSource\" ref=\"dataSource\"/>\n        <property name=\"mapperLocations\" value=\"classpath:mapper/*.xml\"/>\n        <!--分页插件，目前先注释，后面重构的时候才会使用\n        <property name=\"plugins\">\n            <array>\n                <bean class=\"com.github.pagehelper.PageInterceptor\">\n                    <property name=\"properties\">\n                        <value>\n                        </value>\n                    </property>\n                </bean>\n            </array>\n        </property>\n        -->\n    </bean>\n    3.mybatis的mapper文件识别\n    <bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\">\n        <property name=\"basePackage\" value=\"com.how2java.tmall.mapper\"/>\n    </bean>\n```\n```\nSPringMVC的配置\n    <!--启动注解识别-->\n    <context:annotation-config/>\n\n    <context:component-scan base-package=\"com.how2java.tmall.controller\">\n        <context:include-filter type=\"annotation\"\n                                expression=\"org.springframework.stereotype.Controller\"/>\n    </context:component-scan>\n\n    <mvc:annotation-driven />\n\n    <!--开通静态资源的访问-->\n    <mvc:default-servlet-handler />\n\n    <!-- 视图定位 -->\n    <bean\n            class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n        <property name=\"viewClass\"\n                  value=\"org.springframework.web.servlet.view.JstlView\" />\n        <property name=\"prefix\" value=\"/WEB-INF/jsp/\" />\n        <property name=\"suffix\" value=\".jsp\" />\n    </bean>\n\n    <!-- 对上传文件的解析-->\n    <bean id=\"multipartResolver\" class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"/>\n</beans>\n\n```\n","slug":"2017-11-9-ssm学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzaj000odcyuhckj3qx6","content":"<p>web.xml中需要配置:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.spring的配置文件</span><br><span class=\"line\">&lt;context-param&gt;</span><br><span class=\"line\">    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class=\"line\">    &lt;param-value&gt;classpath:applicationContext.xml&gt;&lt;/param-value&gt;</span><br><span class=\"line\">&lt;/context-param&gt;</span><br><span class=\"line\">&lt;listener&gt;</span><br><span class=\"line\">    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br><span class=\"line\">&lt;/listener&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2.中文过滤器</span><br><span class=\"line\">  &lt;filter&gt;</span><br><span class=\"line\">    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;</span><br><span class=\"line\">    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;</span><br><span class=\"line\">    &lt;init-param&gt;</span><br><span class=\"line\">      &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class=\"line\">      &lt;param-value&gt;utf-8&lt;/param-value&gt;</span><br><span class=\"line\">    &lt;/init-param&gt;</span><br><span class=\"line\">  &lt;/filter&gt;</span><br><span class=\"line\">  &lt;filter-mapping&gt;</span><br><span class=\"line\">    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;</span><br><span class=\"line\">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class=\"line\">  &lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">3.spring mvc核心:分发servlet</span><br><span class=\"line\">  &lt;servlet&gt;</span><br><span class=\"line\">    &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;</span><br><span class=\"line\">    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class=\"line\">    &lt;!-- spring mvc的配置文件 --&gt;</span><br><span class=\"line\">    &lt;init-param&gt;</span><br><span class=\"line\">      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class=\"line\">      &lt;param-value&gt;classpath:springMVC.xml&lt;/param-value&gt;</span><br><span class=\"line\">    &lt;/init-param&gt;</span><br><span class=\"line\">    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span class=\"line\">  &lt;/servlet&gt;</span><br><span class=\"line\">  &lt;servlet-mapping&gt;</span><br><span class=\"line\">    &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;</span><br><span class=\"line\">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><br><span class=\"line\">  &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring的配置文件中:</span><br><span class=\"line\">    &lt;context:annotation-config /&gt;</span><br><span class=\"line\">    &lt;context:component-scan base-package=&quot;com.how2java.tmall.service&quot; /&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    1.导入数据库配置文件</span><br><span class=\"line\">        &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt;</span><br><span class=\"line\">    2.配置数据库连接池</span><br><span class=\"line\">        &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot; init-method=&quot;init&quot; destroy-method=&quot;close&quot;&gt;</span><br><span class=\"line\">        &lt;!-- 基本属性 url、user、password --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 配置初始化大小、最小、最大 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;initialSize&quot; value=&quot;1&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;minIdle&quot; value=&quot;1&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;maxActive&quot; value=&quot;20&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 配置获取连接等待超时的时间 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;maxWait&quot; value=&quot;60000&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;timeBetweenEvictionRunsMillis&quot; value=&quot;60000&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 配置一个连接在池中最小生存的时间，单位是毫秒 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;minEvictableIdleTimeMillis&quot; value=&quot;300000&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;property name=&quot;validationQuery&quot; value=&quot;SELECT 1&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;testWhileIdle&quot; value=&quot;true&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;testOnBorrow&quot; value=&quot;false&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;testOnReturn&quot; value=&quot;false&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 打开PSCache，并且指定每个连接上PSCache的大小 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;poolPreparedStatements&quot; value=&quot;true&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;maxPoolPreparedStatementPerConnectionSize&quot;</span><br><span class=\"line\">                  value=&quot;20&quot; /&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    3.mybatis的sessionFactory配置</span><br><span class=\"line\">    &lt;bean id=&quot;sqlSession&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;com.how2java.tmall.pojo&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;</span><br><span class=\"line\">        &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mapper/*.xml&quot;/&gt;</span><br><span class=\"line\">        &lt;!--分页插件，目前先注释，后面重构的时候才会使用</span><br><span class=\"line\">        &lt;property name=&quot;plugins&quot;&gt;</span><br><span class=\"line\">            &lt;array&gt;</span><br><span class=\"line\">                &lt;bean class=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;</span><br><span class=\"line\">                    &lt;property name=&quot;properties&quot;&gt;</span><br><span class=\"line\">                        &lt;value&gt;</span><br><span class=\"line\">                        &lt;/value&gt;</span><br><span class=\"line\">                    &lt;/property&gt;</span><br><span class=\"line\">                &lt;/bean&gt;</span><br><span class=\"line\">            &lt;/array&gt;</span><br><span class=\"line\">        &lt;/property&gt;</span><br><span class=\"line\">        --&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    3.mybatis的mapper文件识别</span><br><span class=\"line\">    &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;basePackage&quot; value=&quot;com.how2java.tmall.mapper&quot;/&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SPringMVC的配置</span><br><span class=\"line\">    &lt;!--启动注解识别--&gt;</span><br><span class=\"line\">    &lt;context:annotation-config/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;context:component-scan base-package=&quot;com.how2java.tmall.controller&quot;&gt;</span><br><span class=\"line\">        &lt;context:include-filter type=&quot;annotation&quot;</span><br><span class=\"line\">                                expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</span><br><span class=\"line\">    &lt;/context:component-scan&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;mvc:annotation-driven /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--开通静态资源的访问--&gt;</span><br><span class=\"line\">    &lt;mvc:default-servlet-handler /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- 视图定位 --&gt;</span><br><span class=\"line\">    &lt;bean</span><br><span class=\"line\">            class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;viewClass&quot;</span><br><span class=\"line\">                  value=&quot;org.springframework.web.servlet.view.JstlView&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- 对上传文件的解析--&gt;</span><br><span class=\"line\">    &lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>web.xml中需要配置:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.spring的配置文件</span><br><span class=\"line\">&lt;context-param&gt;</span><br><span class=\"line\">    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class=\"line\">    &lt;param-value&gt;classpath:applicationContext.xml&gt;&lt;/param-value&gt;</span><br><span class=\"line\">&lt;/context-param&gt;</span><br><span class=\"line\">&lt;listener&gt;</span><br><span class=\"line\">    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br><span class=\"line\">&lt;/listener&gt;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2.中文过滤器</span><br><span class=\"line\">  &lt;filter&gt;</span><br><span class=\"line\">    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;</span><br><span class=\"line\">    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;</span><br><span class=\"line\">    &lt;init-param&gt;</span><br><span class=\"line\">      &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class=\"line\">      &lt;param-value&gt;utf-8&lt;/param-value&gt;</span><br><span class=\"line\">    &lt;/init-param&gt;</span><br><span class=\"line\">  &lt;/filter&gt;</span><br><span class=\"line\">  &lt;filter-mapping&gt;</span><br><span class=\"line\">    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;</span><br><span class=\"line\">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class=\"line\">  &lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">3.spring mvc核心:分发servlet</span><br><span class=\"line\">  &lt;servlet&gt;</span><br><span class=\"line\">    &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;</span><br><span class=\"line\">    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class=\"line\">    &lt;!-- spring mvc的配置文件 --&gt;</span><br><span class=\"line\">    &lt;init-param&gt;</span><br><span class=\"line\">      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class=\"line\">      &lt;param-value&gt;classpath:springMVC.xml&lt;/param-value&gt;</span><br><span class=\"line\">    &lt;/init-param&gt;</span><br><span class=\"line\">    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span class=\"line\">  &lt;/servlet&gt;</span><br><span class=\"line\">  &lt;servlet-mapping&gt;</span><br><span class=\"line\">    &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;</span><br><span class=\"line\">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><br><span class=\"line\">  &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring的配置文件中:</span><br><span class=\"line\">    &lt;context:annotation-config /&gt;</span><br><span class=\"line\">    &lt;context:component-scan base-package=&quot;com.how2java.tmall.service&quot; /&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    1.导入数据库配置文件</span><br><span class=\"line\">        &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt;</span><br><span class=\"line\">    2.配置数据库连接池</span><br><span class=\"line\">        &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot; init-method=&quot;init&quot; destroy-method=&quot;close&quot;&gt;</span><br><span class=\"line\">        &lt;!-- 基本属性 url、user、password --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 配置初始化大小、最小、最大 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;initialSize&quot; value=&quot;1&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;minIdle&quot; value=&quot;1&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;maxActive&quot; value=&quot;20&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 配置获取连接等待超时的时间 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;maxWait&quot; value=&quot;60000&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;timeBetweenEvictionRunsMillis&quot; value=&quot;60000&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 配置一个连接在池中最小生存的时间，单位是毫秒 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;minEvictableIdleTimeMillis&quot; value=&quot;300000&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;property name=&quot;validationQuery&quot; value=&quot;SELECT 1&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;testWhileIdle&quot; value=&quot;true&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;testOnBorrow&quot; value=&quot;false&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;testOnReturn&quot; value=&quot;false&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- 打开PSCache，并且指定每个连接上PSCache的大小 --&gt;</span><br><span class=\"line\">        &lt;property name=&quot;poolPreparedStatements&quot; value=&quot;true&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;maxPoolPreparedStatementPerConnectionSize&quot;</span><br><span class=\"line\">                  value=&quot;20&quot; /&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    3.mybatis的sessionFactory配置</span><br><span class=\"line\">    &lt;bean id=&quot;sqlSession&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;com.how2java.tmall.pojo&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;</span><br><span class=\"line\">        &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mapper/*.xml&quot;/&gt;</span><br><span class=\"line\">        &lt;!--分页插件，目前先注释，后面重构的时候才会使用</span><br><span class=\"line\">        &lt;property name=&quot;plugins&quot;&gt;</span><br><span class=\"line\">            &lt;array&gt;</span><br><span class=\"line\">                &lt;bean class=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;</span><br><span class=\"line\">                    &lt;property name=&quot;properties&quot;&gt;</span><br><span class=\"line\">                        &lt;value&gt;</span><br><span class=\"line\">                        &lt;/value&gt;</span><br><span class=\"line\">                    &lt;/property&gt;</span><br><span class=\"line\">                &lt;/bean&gt;</span><br><span class=\"line\">            &lt;/array&gt;</span><br><span class=\"line\">        &lt;/property&gt;</span><br><span class=\"line\">        --&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">    3.mybatis的mapper文件识别</span><br><span class=\"line\">    &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;basePackage&quot; value=&quot;com.how2java.tmall.mapper&quot;/&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SPringMVC的配置</span><br><span class=\"line\">    &lt;!--启动注解识别--&gt;</span><br><span class=\"line\">    &lt;context:annotation-config/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;context:component-scan base-package=&quot;com.how2java.tmall.controller&quot;&gt;</span><br><span class=\"line\">        &lt;context:include-filter type=&quot;annotation&quot;</span><br><span class=\"line\">                                expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</span><br><span class=\"line\">    &lt;/context:component-scan&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;mvc:annotation-driven /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--开通静态资源的访问--&gt;</span><br><span class=\"line\">    &lt;mvc:default-servlet-handler /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- 视图定位 --&gt;</span><br><span class=\"line\">    &lt;bean</span><br><span class=\"line\">            class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class=\"line\">        &lt;property name=&quot;viewClass&quot;</span><br><span class=\"line\">                  value=&quot;org.springframework.web.servlet.view.JstlView&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot; /&gt;</span><br><span class=\"line\">        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- 对上传文件的解析--&gt;</span><br><span class=\"line\">    &lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n"},{"title":"2017.12.25 spring注解详解","date":"2017-12-24T23:55:58.000Z","_content":"```\n1、@controller 控制器（注入服务）\n2、@service 服务（注入dao）\n3、@repository dao（实现dao访问）\n4、@component （把普通pojo实例化到spring容器中，相当于配置文件中的<bean id=\"\" class=\"\"/>）\n```\n\n```\n @Component,@Service,@Controller,@Repository注解的类，并把这些类纳入进spring容器中管理。 \n下面写这个是引入component的扫描组件 \n<context:component-scan base-package=”com.mmnc”>    \n\n其中base-package为需要扫描的包（含所有子包） \n       1、@Service用于标注业务层组件 \n       2、@Controller用于标注控制层组件(如struts中的action) \n       3、@Repository用于标注数据访问组件，即DAO组件. \n       4、@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。    \n           @Service public class UserServiceImpl implements UserService { } \n           @Repository public class UserDaoImpl implements UserDao { } getBean的默认名称是类名（头字母小写），如果想自定义，可以@Service(“***”)               这样来指定，这种bean默认是单例的，如果想改变，可以使用@Service(“beanName”) \n           @Scope(“prototype”)来改变。可以使用以下方式指定初始化方法和销毁方法（方法名任意）： @PostConstruct public void init() { } \n```","source":"_posts/2017.12.25 spring注解详解.md","raw":"---\ntitle: 2017.12.25 spring注解详解\ndate: 2017.12.25 07:55:58\ntags:\n---\n```\n1、@controller 控制器（注入服务）\n2、@service 服务（注入dao）\n3、@repository dao（实现dao访问）\n4、@component （把普通pojo实例化到spring容器中，相当于配置文件中的<bean id=\"\" class=\"\"/>）\n```\n\n```\n @Component,@Service,@Controller,@Repository注解的类，并把这些类纳入进spring容器中管理。 \n下面写这个是引入component的扫描组件 \n<context:component-scan base-package=”com.mmnc”>    \n\n其中base-package为需要扫描的包（含所有子包） \n       1、@Service用于标注业务层组件 \n       2、@Controller用于标注控制层组件(如struts中的action) \n       3、@Repository用于标注数据访问组件，即DAO组件. \n       4、@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。    \n           @Service public class UserServiceImpl implements UserService { } \n           @Repository public class UserDaoImpl implements UserDao { } getBean的默认名称是类名（头字母小写），如果想自定义，可以@Service(“***”)               这样来指定，这种bean默认是单例的，如果想改变，可以使用@Service(“beanName”) \n           @Scope(“prototype”)来改变。可以使用以下方式指定初始化方法和销毁方法（方法名任意）： @PostConstruct public void init() { } \n```","slug":"spring注解详解","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzak000pdcyu2o6az6b3","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1、@controller 控制器（注入服务）</span><br><span class=\"line\">2、@service 服务（注入dao）</span><br><span class=\"line\">3、@repository dao（实现dao访问）</span><br><span class=\"line\">4、@component （把普通pojo实例化到spring容器中，相当于配置文件中的&lt;bean id=&quot;&quot; class=&quot;&quot;/&gt;）</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> @Component,@Service,@Controller,@Repository注解的类，并把这些类纳入进spring容器中管理。 </span><br><span class=\"line\">下面写这个是引入component的扫描组件 </span><br><span class=\"line\">&lt;context:component-scan base-package=”com.mmnc”&gt;    </span><br><span class=\"line\"></span><br><span class=\"line\">其中base-package为需要扫描的包（含所有子包） </span><br><span class=\"line\">       1、@Service用于标注业务层组件 </span><br><span class=\"line\">       2、@Controller用于标注控制层组件(如struts中的action) </span><br><span class=\"line\">       3、@Repository用于标注数据访问组件，即DAO组件. </span><br><span class=\"line\">       4、@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。    </span><br><span class=\"line\">           @Service public class UserServiceImpl implements UserService &#123; &#125; </span><br><span class=\"line\">           @Repository public class UserDaoImpl implements UserDao &#123; &#125; getBean的默认名称是类名（头字母小写），如果想自定义，可以@Service(“***”)               这样来指定，这种bean默认是单例的，如果想改变，可以使用@Service(“beanName”) </span><br><span class=\"line\">           @Scope(“prototype”)来改变。可以使用以下方式指定初始化方法和销毁方法（方法名任意）： @PostConstruct public void init() &#123; &#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1、@controller 控制器（注入服务）</span><br><span class=\"line\">2、@service 服务（注入dao）</span><br><span class=\"line\">3、@repository dao（实现dao访问）</span><br><span class=\"line\">4、@component （把普通pojo实例化到spring容器中，相当于配置文件中的&lt;bean id=&quot;&quot; class=&quot;&quot;/&gt;）</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> @Component,@Service,@Controller,@Repository注解的类，并把这些类纳入进spring容器中管理。 </span><br><span class=\"line\">下面写这个是引入component的扫描组件 </span><br><span class=\"line\">&lt;context:component-scan base-package=”com.mmnc”&gt;    </span><br><span class=\"line\"></span><br><span class=\"line\">其中base-package为需要扫描的包（含所有子包） </span><br><span class=\"line\">       1、@Service用于标注业务层组件 </span><br><span class=\"line\">       2、@Controller用于标注控制层组件(如struts中的action) </span><br><span class=\"line\">       3、@Repository用于标注数据访问组件，即DAO组件. </span><br><span class=\"line\">       4、@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。    </span><br><span class=\"line\">           @Service public class UserServiceImpl implements UserService &#123; &#125; </span><br><span class=\"line\">           @Repository public class UserDaoImpl implements UserDao &#123; &#125; getBean的默认名称是类名（头字母小写），如果想自定义，可以@Service(“***”)               这样来指定，这种bean默认是单例的，如果想改变，可以使用@Service(“beanName”) </span><br><span class=\"line\">           @Scope(“prototype”)来改变。可以使用以下方式指定初始化方法和销毁方法（方法名任意）： @PostConstruct public void init() &#123; &#125;</span><br></pre></td></tr></table></figure>"},{"title":"2017.9.18 斗地主记牌器思路","date":"2017-09-17T23:55:58.000Z","_content":"前两日玩欢乐斗地主,豆子输得精光, 不叹牌面差,就怕牌技差, 很多时候就算赢面也能给打输.所以就想写一个记牌器的辅助工具,知道剩余的牌, 稍微能好一些吧.\n于是用按键精灵手机助手,搞了24个小时,回想起来真的是各种坑...\n---\n整体思路:\n1. 玩家和上下家的首牌位置固定, 每张牌的宽度固定,所以可以精确到每张牌位置取图取数.\n2. 建立剩余牌的数组,在屏幕前端实时showMessage\n3. 开局抢地主前识别玩家手牌,开局后检测上下家出的牌,用两个字符串代表上次的牌与这次的牌,如果不相同说明玩家刚刚出了牌,就记录到数组中,如果相同或者等于空,说明检测到的还是之前的牌,或者还没出牌,就不做变动.\n4.程序的bug在于, 上次检测到AA,这次只检测到A,就会重复计算A,A的剩余个数出现负值.改进方法是:\n-   将玩家的出牌记录下来,如果重复计算就可以看得到\n-   提高数字识别率\n\n最后的结果: 总会错一两个牌的剩余个数,但总体可以使用.\n\n---\n\n","source":"_posts/2017.9.18学习.md","raw":"---\ntitle: 2017.9.18 斗地主记牌器思路\ndate: 2017-9-18 07:55:58\ntags:\n---\n前两日玩欢乐斗地主,豆子输得精光, 不叹牌面差,就怕牌技差, 很多时候就算赢面也能给打输.所以就想写一个记牌器的辅助工具,知道剩余的牌, 稍微能好一些吧.\n于是用按键精灵手机助手,搞了24个小时,回想起来真的是各种坑...\n---\n整体思路:\n1. 玩家和上下家的首牌位置固定, 每张牌的宽度固定,所以可以精确到每张牌位置取图取数.\n2. 建立剩余牌的数组,在屏幕前端实时showMessage\n3. 开局抢地主前识别玩家手牌,开局后检测上下家出的牌,用两个字符串代表上次的牌与这次的牌,如果不相同说明玩家刚刚出了牌,就记录到数组中,如果相同或者等于空,说明检测到的还是之前的牌,或者还没出牌,就不做变动.\n4.程序的bug在于, 上次检测到AA,这次只检测到A,就会重复计算A,A的剩余个数出现负值.改进方法是:\n-   将玩家的出牌记录下来,如果重复计算就可以看得到\n-   提高数字识别率\n\n最后的结果: 总会错一两个牌的剩余个数,但总体可以使用.\n\n---\n\n","slug":"2017-9-18学习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzal000qdcyuz6iklj2i","content":"<p>前两日玩欢乐斗地主,豆子输得精光, 不叹牌面差,就怕牌技差, 很多时候就算赢面也能给打输.所以就想写一个记牌器的辅助工具,知道剩余的牌, 稍微能好一些吧.</p>\n<h2 id=\"于是用按键精灵手机助手-搞了24个小时-回想起来真的是各种坑…\"><a href=\"#于是用按键精灵手机助手-搞了24个小时-回想起来真的是各种坑…\" class=\"headerlink\" title=\"于是用按键精灵手机助手,搞了24个小时,回想起来真的是各种坑…\"></a>于是用按键精灵手机助手,搞了24个小时,回想起来真的是各种坑…</h2><p>整体思路:</p>\n<ol>\n<li>玩家和上下家的首牌位置固定, 每张牌的宽度固定,所以可以精确到每张牌位置取图取数.</li>\n<li>建立剩余牌的数组,在屏幕前端实时showMessage</li>\n<li>开局抢地主前识别玩家手牌,开局后检测上下家出的牌,用两个字符串代表上次的牌与这次的牌,如果不相同说明玩家刚刚出了牌,就记录到数组中,如果相同或者等于空,说明检测到的还是之前的牌,或者还没出牌,就不做变动.<br>4.程序的bug在于, 上次检测到AA,这次只检测到A,就会重复计算A,A的剩余个数出现负值.改进方法是:</li>\n</ol>\n<ul>\n<li>将玩家的出牌记录下来,如果重复计算就可以看得到</li>\n<li>提高数字识别率</li>\n</ul>\n<p>最后的结果: 总会错一两个牌的剩余个数,但总体可以使用.</p>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<p>前两日玩欢乐斗地主,豆子输得精光, 不叹牌面差,就怕牌技差, 很多时候就算赢面也能给打输.所以就想写一个记牌器的辅助工具,知道剩余的牌, 稍微能好一些吧.</p>\n<h2 id=\"于是用按键精灵手机助手-搞了24个小时-回想起来真的是各种坑…\"><a href=\"#于是用按键精灵手机助手-搞了24个小时-回想起来真的是各种坑…\" class=\"headerlink\" title=\"于是用按键精灵手机助手,搞了24个小时,回想起来真的是各种坑…\"></a>于是用按键精灵手机助手,搞了24个小时,回想起来真的是各种坑…</h2><p>整体思路:</p>\n<ol>\n<li>玩家和上下家的首牌位置固定, 每张牌的宽度固定,所以可以精确到每张牌位置取图取数.</li>\n<li>建立剩余牌的数组,在屏幕前端实时showMessage</li>\n<li>开局抢地主前识别玩家手牌,开局后检测上下家出的牌,用两个字符串代表上次的牌与这次的牌,如果不相同说明玩家刚刚出了牌,就记录到数组中,如果相同或者等于空,说明检测到的还是之前的牌,或者还没出牌,就不做变动.<br>4.程序的bug在于, 上次检测到AA,这次只检测到A,就会重复计算A,A的剩余个数出现负值.改进方法是:</li>\n</ol>\n<ul>\n<li>将玩家的出牌记录下来,如果重复计算就可以看得到</li>\n<li>提高数字识别率</li>\n</ul>\n<p>最后的结果: 总会错一两个牌的剩余个数,但总体可以使用.</p>\n<hr>\n"},{"title":"2017.9.23 java爬虫","date":"2017-09-23T03:35:17.000Z","keywords":"爬虫","_content":"以前用过python爬虫,现在觉得java做起来好像也挺容易的,就自己尝试一下,遇到了一下问题,大多都解决了\n\n总结如下:<!--more-->\n---\n\n1.idea导入jar包的方法:\n1. 不通过拖拽的方式\n    1. 按Ctrl+Alt+Shift+S进入Project Structure\n    2. 找到Modules->Dependencies\n    3. 点击绿色的+添加jar包\n2.  通过拖拽的方式\n    1. 把jar包拖入项目\n    2. 右键jar包->add as Library\n\n\n---\n\n2.正则匹配前后满足条件的String\n1. 不匹配前后\n    1. 前:(?<=pattern)\n    2. 后:(?=pattern)\n2. 匹配前后\n    1. (?:pattern)\n    \n---\n\n3.全局匹配\n```java\n    while(m.find()){\n        system.out.println(m.group(0));//group(0)是总,group(1)-group(n)是分;groupcount()返回匹配的个数,即n的值\n    }\n\n```\n4.非贪婪匹配\n1.默认贪婪匹配,但*,+后加上?,就为非贪婪匹配;","source":"_posts/2017.9.23    温故而知新.md","raw":"---\ntitle:\t2017.9.23 java爬虫\ndate:\t2017-9-23 11:35:17\ntags:\tjava\nkeywords:\t爬虫\n---\n以前用过python爬虫,现在觉得java做起来好像也挺容易的,就自己尝试一下,遇到了一下问题,大多都解决了\n\n总结如下:<!--more-->\n---\n\n1.idea导入jar包的方法:\n1. 不通过拖拽的方式\n    1. 按Ctrl+Alt+Shift+S进入Project Structure\n    2. 找到Modules->Dependencies\n    3. 点击绿色的+添加jar包\n2.  通过拖拽的方式\n    1. 把jar包拖入项目\n    2. 右键jar包->add as Library\n\n\n---\n\n2.正则匹配前后满足条件的String\n1. 不匹配前后\n    1. 前:(?<=pattern)\n    2. 后:(?=pattern)\n2. 匹配前后\n    1. (?:pattern)\n    \n---\n\n3.全局匹配\n```java\n    while(m.find()){\n        system.out.println(m.group(0));//group(0)是总,group(1)-group(n)是分;groupcount()返回匹配的个数,即n的值\n    }\n\n```\n4.非贪婪匹配\n1.默认贪婪匹配,但*,+后加上?,就为非贪婪匹配;","slug":"2017-9-23-温故而知新","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzam000rdcyulj3ucujb","content":"<p>以前用过python爬虫,现在觉得java做起来好像也挺容易的,就自己尝试一下,遇到了一下问题,大多都解决了</p>\n<h2 id=\"总结如下\"><a href=\"#总结如下\" class=\"headerlink\" title=\"总结如下:\"></a>总结如下:<a id=\"more\"></a></h2><p>1.idea导入jar包的方法:</p>\n<ol>\n<li>不通过拖拽的方式<ol>\n<li>按Ctrl+Alt+Shift+S进入Project Structure</li>\n<li>找到Modules-&gt;Dependencies</li>\n<li>点击绿色的+添加jar包</li>\n</ol>\n</li>\n<li>通过拖拽的方式<ol>\n<li>把jar包拖入项目</li>\n<li>右键jar包-&gt;add as Library</li>\n</ol>\n</li>\n</ol>\n<hr>\n<p>2.正则匹配前后满足条件的String</p>\n<ol>\n<li>不匹配前后<ol>\n<li>前:(?&lt;=pattern)</li>\n<li>后:(?=pattern)</li>\n</ol>\n</li>\n<li>匹配前后<ol>\n<li>(?:pattern)</li>\n</ol>\n</li>\n</ol>\n<hr>\n<p>3.全局匹配<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span>(m.find())&#123;</span><br><span class=\"line\">    system.out.println(m.group(<span class=\"number\">0</span>));<span class=\"comment\">//group(0)是总,group(1)-group(n)是分;groupcount()返回匹配的个数,即n的值</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>4.非贪婪匹配<br>1.默认贪婪匹配,但*,+后加上?,就为非贪婪匹配;</p>\n","site":{"data":{}},"excerpt":"<p>以前用过python爬虫,现在觉得java做起来好像也挺容易的,就自己尝试一下,遇到了一下问题,大多都解决了</p>\n<h2 id=\"总结如下\"><a href=\"#总结如下\" class=\"headerlink\" title=\"总结如下:\"></a>总结如下:","more":"</h2><p>1.idea导入jar包的方法:</p>\n<ol>\n<li>不通过拖拽的方式<ol>\n<li>按Ctrl+Alt+Shift+S进入Project Structure</li>\n<li>找到Modules-&gt;Dependencies</li>\n<li>点击绿色的+添加jar包</li>\n</ol>\n</li>\n<li>通过拖拽的方式<ol>\n<li>把jar包拖入项目</li>\n<li>右键jar包-&gt;add as Library</li>\n</ol>\n</li>\n</ol>\n<hr>\n<p>2.正则匹配前后满足条件的String</p>\n<ol>\n<li>不匹配前后<ol>\n<li>前:(?&lt;=pattern)</li>\n<li>后:(?=pattern)</li>\n</ol>\n</li>\n<li>匹配前后<ol>\n<li>(?:pattern)</li>\n</ol>\n</li>\n</ol>\n<hr>\n<p>3.全局匹配<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span>(m.find())&#123;</span><br><span class=\"line\">    system.out.println(m.group(<span class=\"number\">0</span>));<span class=\"comment\">//group(0)是总,group(1)-group(n)是分;groupcount()返回匹配的个数,即n的值</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>4.非贪婪匹配<br>1.默认贪婪匹配,但*,+后加上?,就为非贪婪匹配;</p>"},{"title":"2017.9.23 数据库操作","date":"2017-09-23T03:35:17.000Z","keywords":"数据库","_content":"\n以前看过的数据库操作,都是走马观花,今天重新敲了一遍,方便以后复习. 代码如下:<!--more-->\n\n```\nimport java.sql.*;\n\npublic class delete {\n    static final String JDBC_DRIVER = \"com.mysql.jdbc.Driver\";\n    static final String DB_URL = \"jdbc:mysql://localhost:3306/runoob\";\n    static final String USER = \"root\";\n    static final String PASS = \"admin\";\n\n\n    public static void main(String[] args) {\n        delete t = new delete();\n        try {\n            t.delete();\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n    }\n    public void delete() throws ClassNotFoundException {\n\n\n\n        Class.forName(JDBC_DRIVER);\n        System.out.println(\"成功加载驱动\");\n\n        Connection conn;\n        try {\n            conn = DriverManager.getConnection(DB_URL,USER,PASS);\n            Statement stmt = conn.createStatement();\n            System.out.println(\"成功连接数据库\");\n            //显示\n            String sql = \"select * from websites\";\n            ResultSet rs = stmt.executeQuery(sql);\n            while (rs.next()){\n                System.out.print(rs.getInt(1)+\" \");\n                System.out.print(rs.getString(2)+\" \");\n                System.out.print(rs.getString(3)+\" \");\n                System.out.println(rs.getString(4));\n            }\n            //修改\n            String sql2 = \"update websites set name=? where id = ?\";\n            PreparedStatement pst = conn.prepareStatement(sql2);\n            pst.setString(1,\"菜鸟\");\n            pst.setInt(2,3);\n            pst.executeUpdate();\n            //删除\n            String sql3 = \"delete from websites where id =?\";\n            pst = conn.prepareStatement(sql3);\n            pst.setInt(1,5);\n            pst.executeUpdate();\n\n\n            rs.close();\n            stmt.close();\n            conn.close();\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n\n\n\n    }\n}\n\n\n```\n\n2.修改已存在的表\n```\nalter table newpic change id id int(10) auto_increment primary key;\n```\n3.删除数据后让id从1开始增长\n```\ntruncate table 表名;\n```\n4.查看表结构\n\n```\ndesc tableName;\n\n```\n\n5.查看之前操作的信息\n```\ndesc select * from tableName where i = 3 \\G//\\G是转置,后面不需要分号\n\n```\n\n6.添加普通索引\n```\nlater table t2 add index In_name(name);\n```\n\n7.删除普通索引\n```\nalter table t2 drop index in_named;//对表结构的操作都是alter\n```\n8.查看表中所有的索引\n```\nshow index from t2;\n```\n9.后期维护数据表字段添加字段\n```\nalter table t1 add age int ;\n```\n10.修改字段\n```\nalter table t1 modify age int not null default 20;\n```\n11.删除字段\n```\nalter table t1 drop age;\n```\n12.修改列名\n```\nalter table t1 change name username varchar(30);\n```\n13.修改表名\n```\nalter table t1 rename t2\n```\n14.多表联查\n```\nselect * form t_person p ,t_address,d where p.pid = a.pid and p.pid = 1;//起别名,取交集\n```\n","source":"_posts/2017.9.23 数据库操作.md","raw":"---\ntitle:\t2017.9.23 数据库操作\ndate:\t2017-9-23 11:35:17\ntags:\tjava\nkeywords:\t数据库\n---\n\n以前看过的数据库操作,都是走马观花,今天重新敲了一遍,方便以后复习. 代码如下:<!--more-->\n\n```\nimport java.sql.*;\n\npublic class delete {\n    static final String JDBC_DRIVER = \"com.mysql.jdbc.Driver\";\n    static final String DB_URL = \"jdbc:mysql://localhost:3306/runoob\";\n    static final String USER = \"root\";\n    static final String PASS = \"admin\";\n\n\n    public static void main(String[] args) {\n        delete t = new delete();\n        try {\n            t.delete();\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n    }\n    public void delete() throws ClassNotFoundException {\n\n\n\n        Class.forName(JDBC_DRIVER);\n        System.out.println(\"成功加载驱动\");\n\n        Connection conn;\n        try {\n            conn = DriverManager.getConnection(DB_URL,USER,PASS);\n            Statement stmt = conn.createStatement();\n            System.out.println(\"成功连接数据库\");\n            //显示\n            String sql = \"select * from websites\";\n            ResultSet rs = stmt.executeQuery(sql);\n            while (rs.next()){\n                System.out.print(rs.getInt(1)+\" \");\n                System.out.print(rs.getString(2)+\" \");\n                System.out.print(rs.getString(3)+\" \");\n                System.out.println(rs.getString(4));\n            }\n            //修改\n            String sql2 = \"update websites set name=? where id = ?\";\n            PreparedStatement pst = conn.prepareStatement(sql2);\n            pst.setString(1,\"菜鸟\");\n            pst.setInt(2,3);\n            pst.executeUpdate();\n            //删除\n            String sql3 = \"delete from websites where id =?\";\n            pst = conn.prepareStatement(sql3);\n            pst.setInt(1,5);\n            pst.executeUpdate();\n\n\n            rs.close();\n            stmt.close();\n            conn.close();\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n\n\n\n    }\n}\n\n\n```\n\n2.修改已存在的表\n```\nalter table newpic change id id int(10) auto_increment primary key;\n```\n3.删除数据后让id从1开始增长\n```\ntruncate table 表名;\n```\n4.查看表结构\n\n```\ndesc tableName;\n\n```\n\n5.查看之前操作的信息\n```\ndesc select * from tableName where i = 3 \\G//\\G是转置,后面不需要分号\n\n```\n\n6.添加普通索引\n```\nlater table t2 add index In_name(name);\n```\n\n7.删除普通索引\n```\nalter table t2 drop index in_named;//对表结构的操作都是alter\n```\n8.查看表中所有的索引\n```\nshow index from t2;\n```\n9.后期维护数据表字段添加字段\n```\nalter table t1 add age int ;\n```\n10.修改字段\n```\nalter table t1 modify age int not null default 20;\n```\n11.删除字段\n```\nalter table t1 drop age;\n```\n12.修改列名\n```\nalter table t1 change name username varchar(30);\n```\n13.修改表名\n```\nalter table t1 rename t2\n```\n14.多表联查\n```\nselect * form t_person p ,t_address,d where p.pid = a.pid and p.pid = 1;//起别名,取交集\n```\n","slug":"2017-9-23-数据库操作","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzaq000sdcyuqyd6ua59","content":"<p>以前看过的数据库操作,都是走马观花,今天重新敲了一遍,方便以后复习. 代码如下:<a id=\"more\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.sql.*;</span><br><span class=\"line\"></span><br><span class=\"line\">public class delete &#123;</span><br><span class=\"line\">    static final String JDBC_DRIVER = &quot;com.mysql.jdbc.Driver&quot;;</span><br><span class=\"line\">    static final String DB_URL = &quot;jdbc:mysql://localhost:3306/runoob&quot;;</span><br><span class=\"line\">    static final String USER = &quot;root&quot;;</span><br><span class=\"line\">    static final String PASS = &quot;admin&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        delete t = new delete();</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            t.delete();</span><br><span class=\"line\">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    public void delete() throws ClassNotFoundException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        Class.forName(JDBC_DRIVER);</span><br><span class=\"line\">        System.out.println(&quot;成功加载驱动&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">        Connection conn;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            conn = DriverManager.getConnection(DB_URL,USER,PASS);</span><br><span class=\"line\">            Statement stmt = conn.createStatement();</span><br><span class=\"line\">            System.out.println(&quot;成功连接数据库&quot;);</span><br><span class=\"line\">            //显示</span><br><span class=\"line\">            String sql = &quot;select * from websites&quot;;</span><br><span class=\"line\">            ResultSet rs = stmt.executeQuery(sql);</span><br><span class=\"line\">            while (rs.next())&#123;</span><br><span class=\"line\">                System.out.print(rs.getInt(1)+&quot; &quot;);</span><br><span class=\"line\">                System.out.print(rs.getString(2)+&quot; &quot;);</span><br><span class=\"line\">                System.out.print(rs.getString(3)+&quot; &quot;);</span><br><span class=\"line\">                System.out.println(rs.getString(4));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            //修改</span><br><span class=\"line\">            String sql2 = &quot;update websites set name=? where id = ?&quot;;</span><br><span class=\"line\">            PreparedStatement pst = conn.prepareStatement(sql2);</span><br><span class=\"line\">            pst.setString(1,&quot;菜鸟&quot;);</span><br><span class=\"line\">            pst.setInt(2,3);</span><br><span class=\"line\">            pst.executeUpdate();</span><br><span class=\"line\">            //删除</span><br><span class=\"line\">            String sql3 = &quot;delete from websites where id =?&quot;;</span><br><span class=\"line\">            pst = conn.prepareStatement(sql3);</span><br><span class=\"line\">            pst.setInt(1,5);</span><br><span class=\"line\">            pst.executeUpdate();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            rs.close();</span><br><span class=\"line\">            stmt.close();</span><br><span class=\"line\">            conn.close();</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; catch (SQLException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2.修改已存在的表<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table newpic change id id int(10) auto_increment primary key;</span><br></pre></td></tr></table></figure></p>\n<p>3.删除数据后让id从1开始增长<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">truncate table 表名;</span><br></pre></td></tr></table></figure></p>\n<p>4.查看表结构</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc tableName;</span><br></pre></td></tr></table></figure>\n<p>5.查看之前操作的信息<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc select * from tableName where i = 3 \\G//\\G是转置,后面不需要分号</span><br></pre></td></tr></table></figure></p>\n<p>6.添加普通索引<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">later table t2 add index In_name(name);</span><br></pre></td></tr></table></figure></p>\n<p>7.删除普通索引<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t2 drop index in_named;//对表结构的操作都是alter</span><br></pre></td></tr></table></figure></p>\n<p>8.查看表中所有的索引<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show index from t2;</span><br></pre></td></tr></table></figure></p>\n<p>9.后期维护数据表字段添加字段<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 add age int ;</span><br></pre></td></tr></table></figure></p>\n<p>10.修改字段<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 modify age int not null default 20;</span><br></pre></td></tr></table></figure></p>\n<p>11.删除字段<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 drop age;</span><br></pre></td></tr></table></figure></p>\n<p>12.修改列名<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 change name username varchar(30);</span><br></pre></td></tr></table></figure></p>\n<p>13.修改表名<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 rename t2</span><br></pre></td></tr></table></figure></p>\n<p>14.多表联查<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * form t_person p ,t_address,d where p.pid = a.pid and p.pid = 1;//起别名,取交集</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<p>以前看过的数据库操作,都是走马观花,今天重新敲了一遍,方便以后复习. 代码如下:","more":"</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.sql.*;</span><br><span class=\"line\"></span><br><span class=\"line\">public class delete &#123;</span><br><span class=\"line\">    static final String JDBC_DRIVER = &quot;com.mysql.jdbc.Driver&quot;;</span><br><span class=\"line\">    static final String DB_URL = &quot;jdbc:mysql://localhost:3306/runoob&quot;;</span><br><span class=\"line\">    static final String USER = &quot;root&quot;;</span><br><span class=\"line\">    static final String PASS = &quot;admin&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        delete t = new delete();</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            t.delete();</span><br><span class=\"line\">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    public void delete() throws ClassNotFoundException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        Class.forName(JDBC_DRIVER);</span><br><span class=\"line\">        System.out.println(&quot;成功加载驱动&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">        Connection conn;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            conn = DriverManager.getConnection(DB_URL,USER,PASS);</span><br><span class=\"line\">            Statement stmt = conn.createStatement();</span><br><span class=\"line\">            System.out.println(&quot;成功连接数据库&quot;);</span><br><span class=\"line\">            //显示</span><br><span class=\"line\">            String sql = &quot;select * from websites&quot;;</span><br><span class=\"line\">            ResultSet rs = stmt.executeQuery(sql);</span><br><span class=\"line\">            while (rs.next())&#123;</span><br><span class=\"line\">                System.out.print(rs.getInt(1)+&quot; &quot;);</span><br><span class=\"line\">                System.out.print(rs.getString(2)+&quot; &quot;);</span><br><span class=\"line\">                System.out.print(rs.getString(3)+&quot; &quot;);</span><br><span class=\"line\">                System.out.println(rs.getString(4));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            //修改</span><br><span class=\"line\">            String sql2 = &quot;update websites set name=? where id = ?&quot;;</span><br><span class=\"line\">            PreparedStatement pst = conn.prepareStatement(sql2);</span><br><span class=\"line\">            pst.setString(1,&quot;菜鸟&quot;);</span><br><span class=\"line\">            pst.setInt(2,3);</span><br><span class=\"line\">            pst.executeUpdate();</span><br><span class=\"line\">            //删除</span><br><span class=\"line\">            String sql3 = &quot;delete from websites where id =?&quot;;</span><br><span class=\"line\">            pst = conn.prepareStatement(sql3);</span><br><span class=\"line\">            pst.setInt(1,5);</span><br><span class=\"line\">            pst.executeUpdate();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            rs.close();</span><br><span class=\"line\">            stmt.close();</span><br><span class=\"line\">            conn.close();</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; catch (SQLException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2.修改已存在的表<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table newpic change id id int(10) auto_increment primary key;</span><br></pre></td></tr></table></figure></p>\n<p>3.删除数据后让id从1开始增长<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">truncate table 表名;</span><br></pre></td></tr></table></figure></p>\n<p>4.查看表结构</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc tableName;</span><br></pre></td></tr></table></figure>\n<p>5.查看之前操作的信息<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc select * from tableName where i = 3 \\G//\\G是转置,后面不需要分号</span><br></pre></td></tr></table></figure></p>\n<p>6.添加普通索引<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">later table t2 add index In_name(name);</span><br></pre></td></tr></table></figure></p>\n<p>7.删除普通索引<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t2 drop index in_named;//对表结构的操作都是alter</span><br></pre></td></tr></table></figure></p>\n<p>8.查看表中所有的索引<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show index from t2;</span><br></pre></td></tr></table></figure></p>\n<p>9.后期维护数据表字段添加字段<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 add age int ;</span><br></pre></td></tr></table></figure></p>\n<p>10.修改字段<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 modify age int not null default 20;</span><br></pre></td></tr></table></figure></p>\n<p>11.删除字段<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 drop age;</span><br></pre></td></tr></table></figure></p>\n<p>12.修改列名<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 change name username varchar(30);</span><br></pre></td></tr></table></figure></p>\n<p>13.修改表名<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t1 rename t2</span><br></pre></td></tr></table></figure></p>\n<p>14.多表联查<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * form t_person p ,t_address,d where p.pid = a.pid and p.pid = 1;//起别名,取交集</span><br></pre></td></tr></table></figure></p>"},{"title":"2017.9.24 多线程与文件下载","date":"2017-09-24T03:35:17.000Z","keywords":"多线程","_content":"\n1.文件下载:\n\n---\n\n```\n    public void download(String<!--more--> urlString,String filename,String savePath) throws IOException {\n        //构造URL\n        URL url = new URL(urlString);\n        //打开链接\n        URLConnection con = url.openConnection();\n        //设置请求超时为5s\n        con.setConnectTimeout(5*1000);\n        //输入流\n        InputStream is = con.getInputStream();\n        //1k的缓冲数据\n        byte[] bs = new byte[1024];\n        //读取到的数据长度\n        int len;\n        File sf = new File(savePath);\n        if (sf.exists()){\n            sf.mkdirs();\n        }\n        OutputStream os = new FileOutputStream(sf.getPath()+\"\\\\\"+filename+\".jpg\");\n        //开始读数\n        while((len = is.read(bs)) != -1){\n            os.write(bs,0,len);\n        }\n        os.close();\n        is.close();\n    }\n```\n\n2.多线程\n\n---\n\n```\n        //批量创建实例\n        downpic[] arr = new downpic[threadNum];\n        //批量创建多线程\n        Thread[] thArr = new Thread[threadNum];\n        //给示例赋值\n        for (int i = 0; i < threadNum; i++) {\n            arr[i] = new downpic(picNum/threadNum*i,picNum/threadNum);\n        }\n        //批量开始线程\n        for (int i = 0; i < threadNum; i++) {\n            thArr[i] = new Thread(arr[i]);\n            thArr[i].start();\n        }\n```","source":"_posts/2017.9.24多线程与文件下载.md","raw":"---\ntitle:\t2017.9.24 多线程与文件下载\ndate:\t2017-9-24 11:35:17\ntags:\tjava,多线程\nkeywords:\t多线程\n---\n\n1.文件下载:\n\n---\n\n```\n    public void download(String<!--more--> urlString,String filename,String savePath) throws IOException {\n        //构造URL\n        URL url = new URL(urlString);\n        //打开链接\n        URLConnection con = url.openConnection();\n        //设置请求超时为5s\n        con.setConnectTimeout(5*1000);\n        //输入流\n        InputStream is = con.getInputStream();\n        //1k的缓冲数据\n        byte[] bs = new byte[1024];\n        //读取到的数据长度\n        int len;\n        File sf = new File(savePath);\n        if (sf.exists()){\n            sf.mkdirs();\n        }\n        OutputStream os = new FileOutputStream(sf.getPath()+\"\\\\\"+filename+\".jpg\");\n        //开始读数\n        while((len = is.read(bs)) != -1){\n            os.write(bs,0,len);\n        }\n        os.close();\n        is.close();\n    }\n```\n\n2.多线程\n\n---\n\n```\n        //批量创建实例\n        downpic[] arr = new downpic[threadNum];\n        //批量创建多线程\n        Thread[] thArr = new Thread[threadNum];\n        //给示例赋值\n        for (int i = 0; i < threadNum; i++) {\n            arr[i] = new downpic(picNum/threadNum*i,picNum/threadNum);\n        }\n        //批量开始线程\n        for (int i = 0; i < threadNum; i++) {\n            thArr[i] = new Thread(arr[i]);\n            thArr[i].start();\n        }\n```","slug":"2017-9-24多线程与文件下载","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzb0000udcyuhq5vfp76","content":"<p>1.文件下载:</p>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void download(String&lt;!--more--&gt; urlString,String filename,String savePath) throws IOException &#123;</span><br><span class=\"line\">    //构造URL</span><br><span class=\"line\">    URL url = new URL(urlString);</span><br><span class=\"line\">    //打开链接</span><br><span class=\"line\">    URLConnection con = url.openConnection();</span><br><span class=\"line\">    //设置请求超时为5s</span><br><span class=\"line\">    con.setConnectTimeout(5*1000);</span><br><span class=\"line\">    //输入流</span><br><span class=\"line\">    InputStream is = con.getInputStream();</span><br><span class=\"line\">    //1k的缓冲数据</span><br><span class=\"line\">    byte[] bs = new byte[1024];</span><br><span class=\"line\">    //读取到的数据长度</span><br><span class=\"line\">    int len;</span><br><span class=\"line\">    File sf = new File(savePath);</span><br><span class=\"line\">    if (sf.exists())&#123;</span><br><span class=\"line\">        sf.mkdirs();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    OutputStream os = new FileOutputStream(sf.getPath()+&quot;\\\\&quot;+filename+&quot;.jpg&quot;);</span><br><span class=\"line\">    //开始读数</span><br><span class=\"line\">    while((len = is.read(bs)) != -1)&#123;</span><br><span class=\"line\">        os.write(bs,0,len);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    os.close();</span><br><span class=\"line\">    is.close();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2.多线程</p>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//批量创建实例</span><br><span class=\"line\">downpic[] arr = new downpic[threadNum];</span><br><span class=\"line\">//批量创建多线程</span><br><span class=\"line\">Thread[] thArr = new Thread[threadNum];</span><br><span class=\"line\">//给示例赋值</span><br><span class=\"line\">for (int i = 0; i &lt; threadNum; i++) &#123;</span><br><span class=\"line\">    arr[i] = new downpic(picNum/threadNum*i,picNum/threadNum);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//批量开始线程</span><br><span class=\"line\">for (int i = 0; i &lt; threadNum; i++) &#123;</span><br><span class=\"line\">    thArr[i] = new Thread(arr[i]);</span><br><span class=\"line\">    thArr[i].start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>1.文件下载:</p>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void download(String&lt;!--more--&gt; urlString,String filename,String savePath) throws IOException &#123;</span><br><span class=\"line\">    //构造URL</span><br><span class=\"line\">    URL url = new URL(urlString);</span><br><span class=\"line\">    //打开链接</span><br><span class=\"line\">    URLConnection con = url.openConnection();</span><br><span class=\"line\">    //设置请求超时为5s</span><br><span class=\"line\">    con.setConnectTimeout(5*1000);</span><br><span class=\"line\">    //输入流</span><br><span class=\"line\">    InputStream is = con.getInputStream();</span><br><span class=\"line\">    //1k的缓冲数据</span><br><span class=\"line\">    byte[] bs = new byte[1024];</span><br><span class=\"line\">    //读取到的数据长度</span><br><span class=\"line\">    int len;</span><br><span class=\"line\">    File sf = new File(savePath);</span><br><span class=\"line\">    if (sf.exists())&#123;</span><br><span class=\"line\">        sf.mkdirs();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    OutputStream os = new FileOutputStream(sf.getPath()+&quot;\\\\&quot;+filename+&quot;.jpg&quot;);</span><br><span class=\"line\">    //开始读数</span><br><span class=\"line\">    while((len = is.read(bs)) != -1)&#123;</span><br><span class=\"line\">        os.write(bs,0,len);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    os.close();</span><br><span class=\"line\">    is.close();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2.多线程</p>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//批量创建实例</span><br><span class=\"line\">downpic[] arr = new downpic[threadNum];</span><br><span class=\"line\">//批量创建多线程</span><br><span class=\"line\">Thread[] thArr = new Thread[threadNum];</span><br><span class=\"line\">//给示例赋值</span><br><span class=\"line\">for (int i = 0; i &lt; threadNum; i++) &#123;</span><br><span class=\"line\">    arr[i] = new downpic(picNum/threadNum*i,picNum/threadNum);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//批量开始线程</span><br><span class=\"line\">for (int i = 0; i &lt; threadNum; i++) &#123;</span><br><span class=\"line\">    thArr[i] = new Thread(arr[i]);</span><br><span class=\"line\">    thArr[i].start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"2017.9.30 Tomcat servlet复习","date":"2017-09-29T23:55:58.000Z","_content":"1.tomcat的conf文件下service.xml中配置默认端口8080\n\n---\n\n2.tomcat目录层次结构\n- bin  存放启动和关闭Tomcat的脚本文件\n- conf tomcat的配置文件\n- lib  tomcat所需jar包\n- logs 日志文件\n- temp 运行时临时文件\n- webapps 供外界访问的web资源存放目录\n- work 工作目录\n- \n\n---\n\n3.进入服务器conf中的server.xml 中,配置\ncontext代表web应用,path是虚拟路径,docBase是应用位置\n修改service后需要重启服务器.\n\n\n```\n<Context path=\"/itcast\" docBase=\"c:\\news\"/>\n```\n这种配置需要重启服务器\n\n---\n\n4.配置缺省web应用\n```\n<Context path=\"\" docBase=\"c:\\news\"/>\n```\n但这样会覆盖原来的页面\n\n---\n\n5.web.xml文件是web应用中最重要的配置文件,必须放在WEB-INF目录中. 他的作用有\n- 将某个web资源配置为网站首页\n- 将servlet程序映射到某个url地址\n- 为web应用配置监听器\n- 为web应用配置过滤器\n- \n\n---\n\n6.web应用的组成结构\n\n- 根目录: html,jsp,css,js文件\n- WEB-INF目录: (外界无法访问,由web服务器直接访问)\n    \n    -classes java类\n    \n    -lib jar包\n\n    -web.xml\n    \n---\n    \n7.配置虚拟主机service.xml中,增加\n```\n<Host name=\"www.sina.com\" appBase=\"c:\\sina\">\n    <Context path=\"/mail\" docBase=\"c:\\sina/mail\"/>\n</Host>\n```\n然后在hosts文件中配置192.168.1.1 www.sina.com\n\n---\n\n8.配置web应用的首页\n```\n<welcome-file-list>\n    <welcome-file>.html</welcome-file>\n</welcome-file-list>\n```\n9.\n\n\n","source":"_posts/2017.9.30Tomcat,servlet复习.md","raw":"---\ntitle: 2017.9.30 Tomcat servlet复习\ndate: 2017-9-30 07:55:58\ntags:\n---\n1.tomcat的conf文件下service.xml中配置默认端口8080\n\n---\n\n2.tomcat目录层次结构\n- bin  存放启动和关闭Tomcat的脚本文件\n- conf tomcat的配置文件\n- lib  tomcat所需jar包\n- logs 日志文件\n- temp 运行时临时文件\n- webapps 供外界访问的web资源存放目录\n- work 工作目录\n- \n\n---\n\n3.进入服务器conf中的server.xml 中,配置\ncontext代表web应用,path是虚拟路径,docBase是应用位置\n修改service后需要重启服务器.\n\n\n```\n<Context path=\"/itcast\" docBase=\"c:\\news\"/>\n```\n这种配置需要重启服务器\n\n---\n\n4.配置缺省web应用\n```\n<Context path=\"\" docBase=\"c:\\news\"/>\n```\n但这样会覆盖原来的页面\n\n---\n\n5.web.xml文件是web应用中最重要的配置文件,必须放在WEB-INF目录中. 他的作用有\n- 将某个web资源配置为网站首页\n- 将servlet程序映射到某个url地址\n- 为web应用配置监听器\n- 为web应用配置过滤器\n- \n\n---\n\n6.web应用的组成结构\n\n- 根目录: html,jsp,css,js文件\n- WEB-INF目录: (外界无法访问,由web服务器直接访问)\n    \n    -classes java类\n    \n    -lib jar包\n\n    -web.xml\n    \n---\n    \n7.配置虚拟主机service.xml中,增加\n```\n<Host name=\"www.sina.com\" appBase=\"c:\\sina\">\n    <Context path=\"/mail\" docBase=\"c:\\sina/mail\"/>\n</Host>\n```\n然后在hosts文件中配置192.168.1.1 www.sina.com\n\n---\n\n8.配置web应用的首页\n```\n<welcome-file-list>\n    <welcome-file>.html</welcome-file>\n</welcome-file-list>\n```\n9.\n\n\n","slug":"2017-9-30Tomcat-servlet复习","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzb6000vdcyuyte5kgin","content":"<p>1.tomcat的conf文件下service.xml中配置默认端口8080</p>\n<hr>\n<p>2.tomcat目录层次结构</p>\n<ul>\n<li>bin  存放启动和关闭Tomcat的脚本文件</li>\n<li>conf tomcat的配置文件</li>\n<li>lib  tomcat所需jar包</li>\n<li>logs 日志文件</li>\n<li>temp 运行时临时文件</li>\n<li>webapps 供外界访问的web资源存放目录</li>\n<li>work 工作目录</li>\n<li></li>\n</ul>\n<hr>\n<p>3.进入服务器conf中的server.xml 中,配置<br>context代表web应用,path是虚拟路径,docBase是应用位置<br>修改service后需要重启服务器.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Context path=&quot;/itcast&quot; docBase=&quot;c:\\news&quot;/&gt;</span><br></pre></td></tr></table></figure>\n<p>这种配置需要重启服务器</p>\n<hr>\n<p>4.配置缺省web应用<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Context path=&quot;&quot; docBase=&quot;c:\\news&quot;/&gt;</span><br></pre></td></tr></table></figure></p>\n<p>但这样会覆盖原来的页面</p>\n<hr>\n<p>5.web.xml文件是web应用中最重要的配置文件,必须放在WEB-INF目录中. 他的作用有</p>\n<ul>\n<li>将某个web资源配置为网站首页</li>\n<li>将servlet程序映射到某个url地址</li>\n<li>为web应用配置监听器</li>\n<li>为web应用配置过滤器</li>\n<li></li>\n</ul>\n<hr>\n<p>6.web应用的组成结构</p>\n<ul>\n<li>根目录: html,jsp,css,js文件</li>\n<li><p>WEB-INF目录: (外界无法访问,由web服务器直接访问)</p>\n<p>  -classes java类</p>\n<p>  -lib jar包</p>\n<p>  -web.xml</p>\n</li>\n</ul>\n<hr>\n<p>7.配置虚拟主机service.xml中,增加<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Host name=&quot;www.sina.com&quot; appBase=&quot;c:\\sina&quot;&gt;</span><br><span class=\"line\">    &lt;Context path=&quot;/mail&quot; docBase=&quot;c:\\sina/mail&quot;/&gt;</span><br><span class=\"line\">&lt;/Host&gt;</span><br></pre></td></tr></table></figure></p>\n<p>然后在hosts文件中配置192.168.1.1 <a href=\"http://www.sina.com\" target=\"_blank\" rel=\"noopener\">www.sina.com</a></p>\n<hr>\n<p>8.配置web应用的首页<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;welcome-file-list&gt;</span><br><span class=\"line\">    &lt;welcome-file&gt;.html&lt;/welcome-file&gt;</span><br><span class=\"line\">&lt;/welcome-file-list&gt;</span><br></pre></td></tr></table></figure></p>\n<p>9.</p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.tomcat的conf文件下service.xml中配置默认端口8080</p>\n<hr>\n<p>2.tomcat目录层次结构</p>\n<ul>\n<li>bin  存放启动和关闭Tomcat的脚本文件</li>\n<li>conf tomcat的配置文件</li>\n<li>lib  tomcat所需jar包</li>\n<li>logs 日志文件</li>\n<li>temp 运行时临时文件</li>\n<li>webapps 供外界访问的web资源存放目录</li>\n<li>work 工作目录</li>\n<li></li>\n</ul>\n<hr>\n<p>3.进入服务器conf中的server.xml 中,配置<br>context代表web应用,path是虚拟路径,docBase是应用位置<br>修改service后需要重启服务器.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Context path=&quot;/itcast&quot; docBase=&quot;c:\\news&quot;/&gt;</span><br></pre></td></tr></table></figure>\n<p>这种配置需要重启服务器</p>\n<hr>\n<p>4.配置缺省web应用<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Context path=&quot;&quot; docBase=&quot;c:\\news&quot;/&gt;</span><br></pre></td></tr></table></figure></p>\n<p>但这样会覆盖原来的页面</p>\n<hr>\n<p>5.web.xml文件是web应用中最重要的配置文件,必须放在WEB-INF目录中. 他的作用有</p>\n<ul>\n<li>将某个web资源配置为网站首页</li>\n<li>将servlet程序映射到某个url地址</li>\n<li>为web应用配置监听器</li>\n<li>为web应用配置过滤器</li>\n<li></li>\n</ul>\n<hr>\n<p>6.web应用的组成结构</p>\n<ul>\n<li>根目录: html,jsp,css,js文件</li>\n<li><p>WEB-INF目录: (外界无法访问,由web服务器直接访问)</p>\n<p>  -classes java类</p>\n<p>  -lib jar包</p>\n<p>  -web.xml</p>\n</li>\n</ul>\n<hr>\n<p>7.配置虚拟主机service.xml中,增加<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Host name=&quot;www.sina.com&quot; appBase=&quot;c:\\sina&quot;&gt;</span><br><span class=\"line\">    &lt;Context path=&quot;/mail&quot; docBase=&quot;c:\\sina/mail&quot;/&gt;</span><br><span class=\"line\">&lt;/Host&gt;</span><br></pre></td></tr></table></figure></p>\n<p>然后在hosts文件中配置192.168.1.1 <a href=\"http://www.sina.com\" target=\"_blank\" rel=\"noopener\">www.sina.com</a></p>\n<hr>\n<p>8.配置web应用的首页<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;welcome-file-list&gt;</span><br><span class=\"line\">    &lt;welcome-file&gt;.html&lt;/welcome-file&gt;</span><br><span class=\"line\">&lt;/welcome-file-list&gt;</span><br></pre></td></tr></table></figure></p>\n<p>9.</p>\n"},{"title":"linux任务jobs详解","date":"2018-05-10T13:22:26.000Z","_content":"# 为什么用到jobs\n关于linux的前台后台,一直很迷惑,趁着qqbot的需求,好好的学习一波!主要参考[这里](https://blog.csdn.net/q_l_s/article/details/44117969)以及[这里](https://www.ibm.com/developerworks/cn/linux/l-cn-nohup/)~\n# jobs相关命令\n1. & 最常被用到,用在命令最后, 让进程在后台运行\n2. jobs 查看后台运行的进程\n3. fg %n 让后台运行的进程n到前台来\n4. bg %n 让进程n到后台去\n5. ctrl+z 将前台的命令放到后台暂停执行\n6. ctrl+c 强制中断程序的执行/当执行输入某些命令时，使用ctrl+c会自动进入新命令输入。\n7. Ctrl-s 暂停屏幕输出【锁住终端】\n8. Ctrl-q 恢复屏幕输出【解锁终端】\n9. Ctrl-o Discard output\n10. Ctrl-l 清屏，【是字母L的小写】等同于Clear\n11. Ctrl+a 切换到命令行开始\n12. Ctrl+e 切换到命令行末尾\n13. Ctrl+u 清除剪切光标之前的内容\n14. Ctrl+k 清除剪切光标及光标之后的内容\n15. Ctrl+y 在光标处粘贴剪切的内容\n16. ps -ef|grep qqbot 查找qqbot的进程号\n17. ctrl z>bg %1 将当前运行的进程放在后台\n","source":"_posts/2018.05.10 linux任务jobs详解.md","raw":"---\ntitle: linux任务jobs详解\ndate: 2018-05-10 21:22:26\ntags:\n---\n# 为什么用到jobs\n关于linux的前台后台,一直很迷惑,趁着qqbot的需求,好好的学习一波!主要参考[这里](https://blog.csdn.net/q_l_s/article/details/44117969)以及[这里](https://www.ibm.com/developerworks/cn/linux/l-cn-nohup/)~\n# jobs相关命令\n1. & 最常被用到,用在命令最后, 让进程在后台运行\n2. jobs 查看后台运行的进程\n3. fg %n 让后台运行的进程n到前台来\n4. bg %n 让进程n到后台去\n5. ctrl+z 将前台的命令放到后台暂停执行\n6. ctrl+c 强制中断程序的执行/当执行输入某些命令时，使用ctrl+c会自动进入新命令输入。\n7. Ctrl-s 暂停屏幕输出【锁住终端】\n8. Ctrl-q 恢复屏幕输出【解锁终端】\n9. Ctrl-o Discard output\n10. Ctrl-l 清屏，【是字母L的小写】等同于Clear\n11. Ctrl+a 切换到命令行开始\n12. Ctrl+e 切换到命令行末尾\n13. Ctrl+u 清除剪切光标之前的内容\n14. Ctrl+k 清除剪切光标及光标之后的内容\n15. Ctrl+y 在光标处粘贴剪切的内容\n16. ps -ef|grep qqbot 查找qqbot的进程号\n17. ctrl z>bg %1 将当前运行的进程放在后台\n","slug":"linux任务jobs详解","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzb8000wdcyu6o065wz7","content":"<h1 id=\"为什么用到jobs\"><a href=\"#为什么用到jobs\" class=\"headerlink\" title=\"为什么用到jobs\"></a>为什么用到jobs</h1><p>关于linux的前台后台,一直很迷惑,趁着qqbot的需求,好好的学习一波!主要参考<a href=\"https://blog.csdn.net/q_l_s/article/details/44117969\" target=\"_blank\" rel=\"noopener\">这里</a>以及<a href=\"https://www.ibm.com/developerworks/cn/linux/l-cn-nohup/\" target=\"_blank\" rel=\"noopener\">这里</a>~</p>\n<h1 id=\"jobs相关命令\"><a href=\"#jobs相关命令\" class=\"headerlink\" title=\"jobs相关命令\"></a>jobs相关命令</h1><ol>\n<li>&amp; 最常被用到,用在命令最后, 让进程在后台运行</li>\n<li>jobs 查看后台运行的进程</li>\n<li>fg %n 让后台运行的进程n到前台来</li>\n<li>bg %n 让进程n到后台去</li>\n<li>ctrl+z 将前台的命令放到后台暂停执行</li>\n<li>ctrl+c 强制中断程序的执行/当执行输入某些命令时，使用ctrl+c会自动进入新命令输入。</li>\n<li>Ctrl-s 暂停屏幕输出【锁住终端】</li>\n<li>Ctrl-q 恢复屏幕输出【解锁终端】</li>\n<li>Ctrl-o Discard output</li>\n<li>Ctrl-l 清屏，【是字母L的小写】等同于Clear</li>\n<li>Ctrl+a 切换到命令行开始</li>\n<li>Ctrl+e 切换到命令行末尾</li>\n<li>Ctrl+u 清除剪切光标之前的内容</li>\n<li>Ctrl+k 清除剪切光标及光标之后的内容</li>\n<li>Ctrl+y 在光标处粘贴剪切的内容</li>\n<li>ps -ef|grep qqbot 查找qqbot的进程号</li>\n<li>ctrl z&gt;bg %1 将当前运行的进程放在后台</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"为什么用到jobs\"><a href=\"#为什么用到jobs\" class=\"headerlink\" title=\"为什么用到jobs\"></a>为什么用到jobs</h1><p>关于linux的前台后台,一直很迷惑,趁着qqbot的需求,好好的学习一波!主要参考<a href=\"https://blog.csdn.net/q_l_s/article/details/44117969\" target=\"_blank\" rel=\"noopener\">这里</a>以及<a href=\"https://www.ibm.com/developerworks/cn/linux/l-cn-nohup/\" target=\"_blank\" rel=\"noopener\">这里</a>~</p>\n<h1 id=\"jobs相关命令\"><a href=\"#jobs相关命令\" class=\"headerlink\" title=\"jobs相关命令\"></a>jobs相关命令</h1><ol>\n<li>&amp; 最常被用到,用在命令最后, 让进程在后台运行</li>\n<li>jobs 查看后台运行的进程</li>\n<li>fg %n 让后台运行的进程n到前台来</li>\n<li>bg %n 让进程n到后台去</li>\n<li>ctrl+z 将前台的命令放到后台暂停执行</li>\n<li>ctrl+c 强制中断程序的执行/当执行输入某些命令时，使用ctrl+c会自动进入新命令输入。</li>\n<li>Ctrl-s 暂停屏幕输出【锁住终端】</li>\n<li>Ctrl-q 恢复屏幕输出【解锁终端】</li>\n<li>Ctrl-o Discard output</li>\n<li>Ctrl-l 清屏，【是字母L的小写】等同于Clear</li>\n<li>Ctrl+a 切换到命令行开始</li>\n<li>Ctrl+e 切换到命令行末尾</li>\n<li>Ctrl+u 清除剪切光标之前的内容</li>\n<li>Ctrl+k 清除剪切光标及光标之后的内容</li>\n<li>Ctrl+y 在光标处粘贴剪切的内容</li>\n<li>ps -ef|grep qqbot 查找qqbot的进程号</li>\n<li>ctrl z&gt;bg %1 将当前运行的进程放在后台</li>\n</ol>\n"},{"title":"qqbot学习记录","date":"2018-05-10T09:44:10.000Z","_content":"# 业务需求:linux及时发送信息给自己\n如果能用qq发送,就是最舒服的方法了,毕竟qq可以及时接受消息,而且可以无限发送消息,并同时发给多个人.\n接下来,在亚辉的帮助下,找到了[pandolia的github](https://github.com/pandolia/qqbot),按着教程一步一步就可以实现想要的功能.\n# 安装qqbot\n```\npip install qqbot\n```\n如果无法使用pip命令,则安装pip即可:\n```\n wget https://bootstrap.pypa.io/get-pip.py\n python get-pip.py\n pip -V　　#查看pip版本\n```\n# 安装后的配置\n因为qq目前只支持扫码登陆,而服务器没有图形界面, 所以默认的登陆方式就无法使用. 我查看了软件的目录, 找到了配置文件. 发现可以把二维码发送到自己的邮箱,然后完成扫码登陆.需要修改的地方为:qq号,邮箱,服务授权码,其他某些地方也可以按需修改.\n```\n{\n\n    # QQBot 的配置文件\n    # 使用 qqbot -u somebody 启动程序时，依次加载：\n    #     根配置 -> 默认配置 -> 用户 somebody 的配置 -> 命令行参数配置\n    # 使用 qqbot 启动程序时，依次加载：\n    #     根配置 -> 默认配置 -> 命令行参数配置\n    \n    # 用户 somebody 的配置\n    \"somebody\" : {\n        \n        # QQBot-term （HTTP-API） 服务器端口号（该服务器监听 IP 为 127.0.0.1 ）\n        # 设置为 0 则不会开启本服务器（此时 qq 命令和 HTTP-API 接口都无法使用）。\n        \"termServerPort\" : 8188,\n        \n        # 二维码 http 服务器 ip，请设置为公网 ip 或空字符串\n        \"httpServerIP\" : \"\",\n        \n        # 二维码 http 服务器端口号\n        \"httpServerPort\" : 8189,\n        \n        # 自动登录的 QQ 号\n        \"qq\" : \"3497303033\",\n        \n        # 接收二维码图片的邮箱账号\n        \"mailAccount\" : \"3497303033@qq.com\",\n        \n        # 该邮箱的 IMAP/SMTP 服务授权码\n        \"mailAuthCode\" : \"feregfgftrasdsew\",\n        \n        # 是否以文本模式显示二维码\n        \"cmdQrcode\" : False,\n    \n        # 显示/关闭调试信息\n        \"debug\" : False,\n\n        # QQBot 掉线后自动重启\n        \"restartOnOffline\" : False,\n        \n        # 在后台运行 qqbot ( daemon 模式)\n        \"daemon\": False,\n        \n        # 完成全部联系人列表获取之后才启动 QQBot \n        \"startAfterFetch\" : False,\n        \n        # 插件目录\n        \"pluginPath\" : \".\",\n        \n        # 启动时需加载的插件\n        \"plugins\" : [],\n        \n        # 插件的配置（由用户自定义）\n        \"pluginsConf\" : {},\n    \n    },\n    \n    # 可以在 默认配置 中配置所有用户都通用的设置\n    \"默认配置\" : {\n        \"qq\" : \"\",\n        \"pluginPath\" : \"\",\n        \"plugins\" : [\n            'qqbot.plugins.sampleslots',\n            'qqbot.plugins.schedrestart',\n        ],\n        \"pluginsConf\" : {\n            'qqbot.plugins.schedrestart': '8:00',\n        }\n    },\n    \n    # # 注意：根配置是固定的，用户无法修改（在本文件中修改根配置不会生效）\n    # \"根配置\" : {\n    #     \"termServerPort\" : 8188,\n    #     \"httpServerIP\" : \"\",\n    #     \"httpServerPort\" : 8189,\n    #     \"qq\" : \"\",\n    #     \"mailAccount\" : \"\",\n    #     \"mailAuthCode\" : \"\",\n    #     \"cmdQrcode\" : False,\n    #     \"debug\" : False,\n    #     \"restartOnOffline\" : False,\n    #     \"daemon\" : False,\n    #     \"startAfterFetch\" : False,\n    #     \"pluginPath\" : \"\",\n    #     \"plugins\" : [],\n    #     \"pluginsConf\" : {}\n    # },\n\n}\n```\n# 发送消息\n启动之后就可以打开另一个命令窗口通过命令:qq send buddy 周欣 message 来发送消息了!\n# 其他命令\n还有很多命令可以用,暂时只用到这些.以后有机会在研究.","source":"_posts/2018.05.10 qqbot学习记录.md","raw":"---\ntitle: qqbot学习记录\ndate: 2018-05-10 17:44:10\ntags:\n---\n# 业务需求:linux及时发送信息给自己\n如果能用qq发送,就是最舒服的方法了,毕竟qq可以及时接受消息,而且可以无限发送消息,并同时发给多个人.\n接下来,在亚辉的帮助下,找到了[pandolia的github](https://github.com/pandolia/qqbot),按着教程一步一步就可以实现想要的功能.\n# 安装qqbot\n```\npip install qqbot\n```\n如果无法使用pip命令,则安装pip即可:\n```\n wget https://bootstrap.pypa.io/get-pip.py\n python get-pip.py\n pip -V　　#查看pip版本\n```\n# 安装后的配置\n因为qq目前只支持扫码登陆,而服务器没有图形界面, 所以默认的登陆方式就无法使用. 我查看了软件的目录, 找到了配置文件. 发现可以把二维码发送到自己的邮箱,然后完成扫码登陆.需要修改的地方为:qq号,邮箱,服务授权码,其他某些地方也可以按需修改.\n```\n{\n\n    # QQBot 的配置文件\n    # 使用 qqbot -u somebody 启动程序时，依次加载：\n    #     根配置 -> 默认配置 -> 用户 somebody 的配置 -> 命令行参数配置\n    # 使用 qqbot 启动程序时，依次加载：\n    #     根配置 -> 默认配置 -> 命令行参数配置\n    \n    # 用户 somebody 的配置\n    \"somebody\" : {\n        \n        # QQBot-term （HTTP-API） 服务器端口号（该服务器监听 IP 为 127.0.0.1 ）\n        # 设置为 0 则不会开启本服务器（此时 qq 命令和 HTTP-API 接口都无法使用）。\n        \"termServerPort\" : 8188,\n        \n        # 二维码 http 服务器 ip，请设置为公网 ip 或空字符串\n        \"httpServerIP\" : \"\",\n        \n        # 二维码 http 服务器端口号\n        \"httpServerPort\" : 8189,\n        \n        # 自动登录的 QQ 号\n        \"qq\" : \"3497303033\",\n        \n        # 接收二维码图片的邮箱账号\n        \"mailAccount\" : \"3497303033@qq.com\",\n        \n        # 该邮箱的 IMAP/SMTP 服务授权码\n        \"mailAuthCode\" : \"feregfgftrasdsew\",\n        \n        # 是否以文本模式显示二维码\n        \"cmdQrcode\" : False,\n    \n        # 显示/关闭调试信息\n        \"debug\" : False,\n\n        # QQBot 掉线后自动重启\n        \"restartOnOffline\" : False,\n        \n        # 在后台运行 qqbot ( daemon 模式)\n        \"daemon\": False,\n        \n        # 完成全部联系人列表获取之后才启动 QQBot \n        \"startAfterFetch\" : False,\n        \n        # 插件目录\n        \"pluginPath\" : \".\",\n        \n        # 启动时需加载的插件\n        \"plugins\" : [],\n        \n        # 插件的配置（由用户自定义）\n        \"pluginsConf\" : {},\n    \n    },\n    \n    # 可以在 默认配置 中配置所有用户都通用的设置\n    \"默认配置\" : {\n        \"qq\" : \"\",\n        \"pluginPath\" : \"\",\n        \"plugins\" : [\n            'qqbot.plugins.sampleslots',\n            'qqbot.plugins.schedrestart',\n        ],\n        \"pluginsConf\" : {\n            'qqbot.plugins.schedrestart': '8:00',\n        }\n    },\n    \n    # # 注意：根配置是固定的，用户无法修改（在本文件中修改根配置不会生效）\n    # \"根配置\" : {\n    #     \"termServerPort\" : 8188,\n    #     \"httpServerIP\" : \"\",\n    #     \"httpServerPort\" : 8189,\n    #     \"qq\" : \"\",\n    #     \"mailAccount\" : \"\",\n    #     \"mailAuthCode\" : \"\",\n    #     \"cmdQrcode\" : False,\n    #     \"debug\" : False,\n    #     \"restartOnOffline\" : False,\n    #     \"daemon\" : False,\n    #     \"startAfterFetch\" : False,\n    #     \"pluginPath\" : \"\",\n    #     \"plugins\" : [],\n    #     \"pluginsConf\" : {}\n    # },\n\n}\n```\n# 发送消息\n启动之后就可以打开另一个命令窗口通过命令:qq send buddy 周欣 message 来发送消息了!\n# 其他命令\n还有很多命令可以用,暂时只用到这些.以后有机会在研究.","slug":"qqbot学习记录","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbb000zdcyuy6h2473a","content":"<h1 id=\"业务需求-linux及时发送信息给自己\"><a href=\"#业务需求-linux及时发送信息给自己\" class=\"headerlink\" title=\"业务需求:linux及时发送信息给自己\"></a>业务需求:linux及时发送信息给自己</h1><p>如果能用qq发送,就是最舒服的方法了,毕竟qq可以及时接受消息,而且可以无限发送消息,并同时发给多个人.<br>接下来,在亚辉的帮助下,找到了<a href=\"https://github.com/pandolia/qqbot\" target=\"_blank\" rel=\"noopener\">pandolia的github</a>,按着教程一步一步就可以实现想要的功能.</p>\n<h1 id=\"安装qqbot\"><a href=\"#安装qqbot\" class=\"headerlink\" title=\"安装qqbot\"></a>安装qqbot</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install qqbot</span><br></pre></td></tr></table></figure>\n<p>如果无法使用pip命令,则安装pip即可:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://bootstrap.pypa.io/get-pip.py</span><br><span class=\"line\">python get-pip.py</span><br><span class=\"line\">pip -V　　#查看pip版本</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"安装后的配置\"><a href=\"#安装后的配置\" class=\"headerlink\" title=\"安装后的配置\"></a>安装后的配置</h1><p>因为qq目前只支持扫码登陆,而服务器没有图形界面, 所以默认的登陆方式就无法使用. 我查看了软件的目录, 找到了配置文件. 发现可以把二维码发送到自己的邮箱,然后完成扫码登陆.需要修改的地方为:qq号,邮箱,服务授权码,其他某些地方也可以按需修改.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    # QQBot 的配置文件</span><br><span class=\"line\">    # 使用 qqbot -u somebody 启动程序时，依次加载：</span><br><span class=\"line\">    #     根配置 -&gt; 默认配置 -&gt; 用户 somebody 的配置 -&gt; 命令行参数配置</span><br><span class=\"line\">    # 使用 qqbot 启动程序时，依次加载：</span><br><span class=\"line\">    #     根配置 -&gt; 默认配置 -&gt; 命令行参数配置</span><br><span class=\"line\">    </span><br><span class=\"line\">    # 用户 somebody 的配置</span><br><span class=\"line\">    &quot;somebody&quot; : &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        # QQBot-term （HTTP-API） 服务器端口号（该服务器监听 IP 为 127.0.0.1 ）</span><br><span class=\"line\">        # 设置为 0 则不会开启本服务器（此时 qq 命令和 HTTP-API 接口都无法使用）。</span><br><span class=\"line\">        &quot;termServerPort&quot; : 8188,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 二维码 http 服务器 ip，请设置为公网 ip 或空字符串</span><br><span class=\"line\">        &quot;httpServerIP&quot; : &quot;&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 二维码 http 服务器端口号</span><br><span class=\"line\">        &quot;httpServerPort&quot; : 8189,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 自动登录的 QQ 号</span><br><span class=\"line\">        &quot;qq&quot; : &quot;3497303033&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 接收二维码图片的邮箱账号</span><br><span class=\"line\">        &quot;mailAccount&quot; : &quot;3497303033@qq.com&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 该邮箱的 IMAP/SMTP 服务授权码</span><br><span class=\"line\">        &quot;mailAuthCode&quot; : &quot;feregfgftrasdsew&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 是否以文本模式显示二维码</span><br><span class=\"line\">        &quot;cmdQrcode&quot; : False,</span><br><span class=\"line\">    </span><br><span class=\"line\">        # 显示/关闭调试信息</span><br><span class=\"line\">        &quot;debug&quot; : False,</span><br><span class=\"line\"></span><br><span class=\"line\">        # QQBot 掉线后自动重启</span><br><span class=\"line\">        &quot;restartOnOffline&quot; : False,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 在后台运行 qqbot ( daemon 模式)</span><br><span class=\"line\">        &quot;daemon&quot;: False,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 完成全部联系人列表获取之后才启动 QQBot </span><br><span class=\"line\">        &quot;startAfterFetch&quot; : False,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 插件目录</span><br><span class=\"line\">        &quot;pluginPath&quot; : &quot;.&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 启动时需加载的插件</span><br><span class=\"line\">        &quot;plugins&quot; : [],</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 插件的配置（由用户自定义）</span><br><span class=\"line\">        &quot;pluginsConf&quot; : &#123;&#125;,</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    </span><br><span class=\"line\">    # 可以在 默认配置 中配置所有用户都通用的设置</span><br><span class=\"line\">    &quot;默认配置&quot; : &#123;</span><br><span class=\"line\">        &quot;qq&quot; : &quot;&quot;,</span><br><span class=\"line\">        &quot;pluginPath&quot; : &quot;&quot;,</span><br><span class=\"line\">        &quot;plugins&quot; : [</span><br><span class=\"line\">            &apos;qqbot.plugins.sampleslots&apos;,</span><br><span class=\"line\">            &apos;qqbot.plugins.schedrestart&apos;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        &quot;pluginsConf&quot; : &#123;</span><br><span class=\"line\">            &apos;qqbot.plugins.schedrestart&apos;: &apos;8:00&apos;,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    </span><br><span class=\"line\">    # # 注意：根配置是固定的，用户无法修改（在本文件中修改根配置不会生效）</span><br><span class=\"line\">    # &quot;根配置&quot; : &#123;</span><br><span class=\"line\">    #     &quot;termServerPort&quot; : 8188,</span><br><span class=\"line\">    #     &quot;httpServerIP&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;httpServerPort&quot; : 8189,</span><br><span class=\"line\">    #     &quot;qq&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;mailAccount&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;mailAuthCode&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;cmdQrcode&quot; : False,</span><br><span class=\"line\">    #     &quot;debug&quot; : False,</span><br><span class=\"line\">    #     &quot;restartOnOffline&quot; : False,</span><br><span class=\"line\">    #     &quot;daemon&quot; : False,</span><br><span class=\"line\">    #     &quot;startAfterFetch&quot; : False,</span><br><span class=\"line\">    #     &quot;pluginPath&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;plugins&quot; : [],</span><br><span class=\"line\">    #     &quot;pluginsConf&quot; : &#123;&#125;</span><br><span class=\"line\">    # &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"发送消息\"><a href=\"#发送消息\" class=\"headerlink\" title=\"发送消息\"></a>发送消息</h1><p>启动之后就可以打开另一个命令窗口通过命令:qq send buddy 周欣 message 来发送消息了!</p>\n<h1 id=\"其他命令\"><a href=\"#其他命令\" class=\"headerlink\" title=\"其他命令\"></a>其他命令</h1><p>还有很多命令可以用,暂时只用到这些.以后有机会在研究.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"业务需求-linux及时发送信息给自己\"><a href=\"#业务需求-linux及时发送信息给自己\" class=\"headerlink\" title=\"业务需求:linux及时发送信息给自己\"></a>业务需求:linux及时发送信息给自己</h1><p>如果能用qq发送,就是最舒服的方法了,毕竟qq可以及时接受消息,而且可以无限发送消息,并同时发给多个人.<br>接下来,在亚辉的帮助下,找到了<a href=\"https://github.com/pandolia/qqbot\" target=\"_blank\" rel=\"noopener\">pandolia的github</a>,按着教程一步一步就可以实现想要的功能.</p>\n<h1 id=\"安装qqbot\"><a href=\"#安装qqbot\" class=\"headerlink\" title=\"安装qqbot\"></a>安装qqbot</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install qqbot</span><br></pre></td></tr></table></figure>\n<p>如果无法使用pip命令,则安装pip即可:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://bootstrap.pypa.io/get-pip.py</span><br><span class=\"line\">python get-pip.py</span><br><span class=\"line\">pip -V　　#查看pip版本</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"安装后的配置\"><a href=\"#安装后的配置\" class=\"headerlink\" title=\"安装后的配置\"></a>安装后的配置</h1><p>因为qq目前只支持扫码登陆,而服务器没有图形界面, 所以默认的登陆方式就无法使用. 我查看了软件的目录, 找到了配置文件. 发现可以把二维码发送到自己的邮箱,然后完成扫码登陆.需要修改的地方为:qq号,邮箱,服务授权码,其他某些地方也可以按需修改.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    # QQBot 的配置文件</span><br><span class=\"line\">    # 使用 qqbot -u somebody 启动程序时，依次加载：</span><br><span class=\"line\">    #     根配置 -&gt; 默认配置 -&gt; 用户 somebody 的配置 -&gt; 命令行参数配置</span><br><span class=\"line\">    # 使用 qqbot 启动程序时，依次加载：</span><br><span class=\"line\">    #     根配置 -&gt; 默认配置 -&gt; 命令行参数配置</span><br><span class=\"line\">    </span><br><span class=\"line\">    # 用户 somebody 的配置</span><br><span class=\"line\">    &quot;somebody&quot; : &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        # QQBot-term （HTTP-API） 服务器端口号（该服务器监听 IP 为 127.0.0.1 ）</span><br><span class=\"line\">        # 设置为 0 则不会开启本服务器（此时 qq 命令和 HTTP-API 接口都无法使用）。</span><br><span class=\"line\">        &quot;termServerPort&quot; : 8188,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 二维码 http 服务器 ip，请设置为公网 ip 或空字符串</span><br><span class=\"line\">        &quot;httpServerIP&quot; : &quot;&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 二维码 http 服务器端口号</span><br><span class=\"line\">        &quot;httpServerPort&quot; : 8189,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 自动登录的 QQ 号</span><br><span class=\"line\">        &quot;qq&quot; : &quot;3497303033&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 接收二维码图片的邮箱账号</span><br><span class=\"line\">        &quot;mailAccount&quot; : &quot;3497303033@qq.com&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 该邮箱的 IMAP/SMTP 服务授权码</span><br><span class=\"line\">        &quot;mailAuthCode&quot; : &quot;feregfgftrasdsew&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 是否以文本模式显示二维码</span><br><span class=\"line\">        &quot;cmdQrcode&quot; : False,</span><br><span class=\"line\">    </span><br><span class=\"line\">        # 显示/关闭调试信息</span><br><span class=\"line\">        &quot;debug&quot; : False,</span><br><span class=\"line\"></span><br><span class=\"line\">        # QQBot 掉线后自动重启</span><br><span class=\"line\">        &quot;restartOnOffline&quot; : False,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 在后台运行 qqbot ( daemon 模式)</span><br><span class=\"line\">        &quot;daemon&quot;: False,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 完成全部联系人列表获取之后才启动 QQBot </span><br><span class=\"line\">        &quot;startAfterFetch&quot; : False,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 插件目录</span><br><span class=\"line\">        &quot;pluginPath&quot; : &quot;.&quot;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 启动时需加载的插件</span><br><span class=\"line\">        &quot;plugins&quot; : [],</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 插件的配置（由用户自定义）</span><br><span class=\"line\">        &quot;pluginsConf&quot; : &#123;&#125;,</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    </span><br><span class=\"line\">    # 可以在 默认配置 中配置所有用户都通用的设置</span><br><span class=\"line\">    &quot;默认配置&quot; : &#123;</span><br><span class=\"line\">        &quot;qq&quot; : &quot;&quot;,</span><br><span class=\"line\">        &quot;pluginPath&quot; : &quot;&quot;,</span><br><span class=\"line\">        &quot;plugins&quot; : [</span><br><span class=\"line\">            &apos;qqbot.plugins.sampleslots&apos;,</span><br><span class=\"line\">            &apos;qqbot.plugins.schedrestart&apos;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        &quot;pluginsConf&quot; : &#123;</span><br><span class=\"line\">            &apos;qqbot.plugins.schedrestart&apos;: &apos;8:00&apos;,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    </span><br><span class=\"line\">    # # 注意：根配置是固定的，用户无法修改（在本文件中修改根配置不会生效）</span><br><span class=\"line\">    # &quot;根配置&quot; : &#123;</span><br><span class=\"line\">    #     &quot;termServerPort&quot; : 8188,</span><br><span class=\"line\">    #     &quot;httpServerIP&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;httpServerPort&quot; : 8189,</span><br><span class=\"line\">    #     &quot;qq&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;mailAccount&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;mailAuthCode&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;cmdQrcode&quot; : False,</span><br><span class=\"line\">    #     &quot;debug&quot; : False,</span><br><span class=\"line\">    #     &quot;restartOnOffline&quot; : False,</span><br><span class=\"line\">    #     &quot;daemon&quot; : False,</span><br><span class=\"line\">    #     &quot;startAfterFetch&quot; : False,</span><br><span class=\"line\">    #     &quot;pluginPath&quot; : &quot;&quot;,</span><br><span class=\"line\">    #     &quot;plugins&quot; : [],</span><br><span class=\"line\">    #     &quot;pluginsConf&quot; : &#123;&#125;</span><br><span class=\"line\">    # &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"发送消息\"><a href=\"#发送消息\" class=\"headerlink\" title=\"发送消息\"></a>发送消息</h1><p>启动之后就可以打开另一个命令窗口通过命令:qq send buddy 周欣 message 来发送消息了!</p>\n<h1 id=\"其他命令\"><a href=\"#其他命令\" class=\"headerlink\" title=\"其他命令\"></a>其他命令</h1><p>还有很多命令可以用,暂时只用到这些.以后有机会在研究.</p>\n"},{"title":"删除excel多余100多w的空行","date":"2018-05-10T09:33:01.000Z","_content":"# 很多操作很简单, 但一直懒得去搜怎么做\n今天破天荒地搜了一下, 其实很简单:\n```\n把所有空行选中-->删除空行-->保存-->重新打开-->done!\n```","source":"_posts/2018.05.10 删除excel多余100多w的空行.md","raw":"---\ntitle: 删除excel多余100多w的空行\ndate: 2018-05-10 17:33:01\ntags:\n---\n# 很多操作很简单, 但一直懒得去搜怎么做\n今天破天荒地搜了一下, 其实很简单:\n```\n把所有空行选中-->删除空行-->保存-->重新打开-->done!\n```","slug":"删除excel多余100多w的空行","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbc0010dcyusor25bor","content":"<h1 id=\"很多操作很简单-但一直懒得去搜怎么做\"><a href=\"#很多操作很简单-但一直懒得去搜怎么做\" class=\"headerlink\" title=\"很多操作很简单, 但一直懒得去搜怎么做\"></a>很多操作很简单, 但一直懒得去搜怎么做</h1><p>今天破天荒地搜了一下, 其实很简单:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">把所有空行选中--&gt;删除空行--&gt;保存--&gt;重新打开--&gt;done!</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"很多操作很简单-但一直懒得去搜怎么做\"><a href=\"#很多操作很简单-但一直懒得去搜怎么做\" class=\"headerlink\" title=\"很多操作很简单, 但一直懒得去搜怎么做\"></a>很多操作很简单, 但一直懒得去搜怎么做</h1><p>今天破天荒地搜了一下, 其实很简单:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">把所有空行选中--&gt;删除空行--&gt;保存--&gt;重新打开--&gt;done!</span><br></pre></td></tr></table></figure></p>\n"},{"title":"破解安卓手机内微信聊天记录","date":"2018-05-10T02:30:42.000Z","_content":"# 6.8号更新\n手机换了之后,重新root需要清除数据,所以不想再折腾手机,于是准备换用模拟器.\n先用的网易mumu,但装过微信就一直闪退.所以换作夜神模拟器.\n夜神模拟器连接adb的方法是:\n1.打开夜神模拟器，打开设置，调成手机模式，初次进入的话，进入设置，点击版本号5次，可以激活使用开发者模式，进入后打开USB调试功能\n\n2.打开文件资源管理器，进入夜神模拟器的安装位置，在地址栏输入cmd，回车，会打开cmd窗口，进入的路径就是夜神模拟器的安装位置。我的默认安装位置：C:\\Program Files (x86)\\Nox\\bin\n\n3.输入nox_adb.exe connect 127.0.0.1:62001即可以连接到adb\n\n或者是 adb connect 127.0.0.1:52001\n\nadb connect 127.0.0.1:62001\n4. 输入adb shell 即可操作\n\n\n# why\n微信不支持云同步, 换了手机聊天记录都没了.一直都有想要把微信记录备份下来的想法. 虽然微信客户可以备份,但不能查看,所以今早花了2个小时研究了一下. 主要参考了两个文章:[逆向之旅](https://blog.csdn.net/jiangwei0910410003/article/details/52238891)和[Android 获取取手机中微信聊天记录](https://blog.csdn.net/f2006116/article/details/51073202)\n\n# 安装adb,获取数据库\n.db文件无法在手机中找到,所以先安装了adb,![图片](https://img-blog.csdn.net/20160819140615444?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n```\nadb shell\nsu\n//下面就是数据库存放的位置\ncd /data/data/com.tencent.mm/MicroMsg/a375d47ad7f69337779a1b7ea3638a76/EnMicroMsg.db\n//将数据库从手机中copy出来,此操作不能在shell中进行 需exit退出到cmd中\nadb pull /data/data/com.tencent.mm/MicroMsg/a375d47ad7f69337779a1b7ea3638a76/EnMicroMsg.db /User/cyz/Desktop\n```\n# 破解数据库库\n我们拿到的是SQLite数据库,并被加了密.可以用sqlcipher.exe软件解密,[点此下载](http://7xivx9.com1.z0.glb.clouddn.com/wxsqlcipher.exe).\n密码的组成为:IMEI + 微信UIN 的 MD5值（32位小写）前7位.\n1. 获取IMEI码:手机拨号输入 *#06# 显示出来的即是所需 IMEI\n2. 登陆微信网页版, 打开F12并用微信发送一条消息,搜索uin就能看到自己的uin码,一般是9位.\n到此,我们获取了设备的 IMEI(如12345) 和 微信账号的 UIN(如67890) 码，下面来计算 32 位 MD5 消息摘要值，使用 MD5 在线加密的网站就可以，则要加密的字符串为 IMEI+UIN，即 1234567890，加密后就会得到四种 MD5 值，我们需要的是32位长度小写的.\n取该 MD5 值前 7 位，即为密钥。接下来，打开 sqlcipher.exe ，File->Open Database， 选择 EnMicroMsg.db 文件，打开后就可以看到让我们输入密钥，输入刚才的7位密钥，点击OK.\n我们的聊天记录在表message中, 切换到Browse Data,然后切换到message表,就可以看到所有的聊天记录了. 点击File>export>CSV就可以把数据导出来了.excel可以直接读取.\n# 写在后面\n简单的操作, 理解其中的逻辑, 一步一步做出结果, 还是有些小难度的, 但做出来也很有成就感!\n\n\n\n\n","source":"_posts/2018.05.10 破解安卓手机内微信聊天记录安卓手机内微信聊天记录.md","raw":"---\ntitle: 破解安卓手机内微信聊天记录\ndate: 2018-05-10 10:30:42\ntags: 微信 安卓\n---\n# 6.8号更新\n手机换了之后,重新root需要清除数据,所以不想再折腾手机,于是准备换用模拟器.\n先用的网易mumu,但装过微信就一直闪退.所以换作夜神模拟器.\n夜神模拟器连接adb的方法是:\n1.打开夜神模拟器，打开设置，调成手机模式，初次进入的话，进入设置，点击版本号5次，可以激活使用开发者模式，进入后打开USB调试功能\n\n2.打开文件资源管理器，进入夜神模拟器的安装位置，在地址栏输入cmd，回车，会打开cmd窗口，进入的路径就是夜神模拟器的安装位置。我的默认安装位置：C:\\Program Files (x86)\\Nox\\bin\n\n3.输入nox_adb.exe connect 127.0.0.1:62001即可以连接到adb\n\n或者是 adb connect 127.0.0.1:52001\n\nadb connect 127.0.0.1:62001\n4. 输入adb shell 即可操作\n\n\n# why\n微信不支持云同步, 换了手机聊天记录都没了.一直都有想要把微信记录备份下来的想法. 虽然微信客户可以备份,但不能查看,所以今早花了2个小时研究了一下. 主要参考了两个文章:[逆向之旅](https://blog.csdn.net/jiangwei0910410003/article/details/52238891)和[Android 获取取手机中微信聊天记录](https://blog.csdn.net/f2006116/article/details/51073202)\n\n# 安装adb,获取数据库\n.db文件无法在手机中找到,所以先安装了adb,![图片](https://img-blog.csdn.net/20160819140615444?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n```\nadb shell\nsu\n//下面就是数据库存放的位置\ncd /data/data/com.tencent.mm/MicroMsg/a375d47ad7f69337779a1b7ea3638a76/EnMicroMsg.db\n//将数据库从手机中copy出来,此操作不能在shell中进行 需exit退出到cmd中\nadb pull /data/data/com.tencent.mm/MicroMsg/a375d47ad7f69337779a1b7ea3638a76/EnMicroMsg.db /User/cyz/Desktop\n```\n# 破解数据库库\n我们拿到的是SQLite数据库,并被加了密.可以用sqlcipher.exe软件解密,[点此下载](http://7xivx9.com1.z0.glb.clouddn.com/wxsqlcipher.exe).\n密码的组成为:IMEI + 微信UIN 的 MD5值（32位小写）前7位.\n1. 获取IMEI码:手机拨号输入 *#06# 显示出来的即是所需 IMEI\n2. 登陆微信网页版, 打开F12并用微信发送一条消息,搜索uin就能看到自己的uin码,一般是9位.\n到此,我们获取了设备的 IMEI(如12345) 和 微信账号的 UIN(如67890) 码，下面来计算 32 位 MD5 消息摘要值，使用 MD5 在线加密的网站就可以，则要加密的字符串为 IMEI+UIN，即 1234567890，加密后就会得到四种 MD5 值，我们需要的是32位长度小写的.\n取该 MD5 值前 7 位，即为密钥。接下来，打开 sqlcipher.exe ，File->Open Database， 选择 EnMicroMsg.db 文件，打开后就可以看到让我们输入密钥，输入刚才的7位密钥，点击OK.\n我们的聊天记录在表message中, 切换到Browse Data,然后切换到message表,就可以看到所有的聊天记录了. 点击File>export>CSV就可以把数据导出来了.excel可以直接读取.\n# 写在后面\n简单的操作, 理解其中的逻辑, 一步一步做出结果, 还是有些小难度的, 但做出来也很有成就感!\n\n\n\n\n","slug":"破解安卓手机内微信聊天记录安卓手机内微信聊天记录","published":1,"updated":"2018-11-02T06:24:46.030Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbe0013dcyuuprkyy9i","content":"<h1 id=\"6-8号更新\"><a href=\"#6-8号更新\" class=\"headerlink\" title=\"6.8号更新\"></a>6.8号更新</h1><p>手机换了之后,重新root需要清除数据,所以不想再折腾手机,于是准备换用模拟器.<br>先用的网易mumu,但装过微信就一直闪退.所以换作夜神模拟器.<br>夜神模拟器连接adb的方法是:<br>1.打开夜神模拟器，打开设置，调成手机模式，初次进入的话，进入设置，点击版本号5次，可以激活使用开发者模式，进入后打开USB调试功能</p>\n<p>2.打开文件资源管理器，进入夜神模拟器的安装位置，在地址栏输入cmd，回车，会打开cmd窗口，进入的路径就是夜神模拟器的安装位置。我的默认安装位置：C:\\Program Files (x86)\\Nox\\bin</p>\n<p>3.输入nox_adb.exe connect 127.0.0.1:62001即可以连接到adb</p>\n<p>或者是 adb connect 127.0.0.1:52001</p>\n<p>adb connect 127.0.0.1:62001</p>\n<ol start=\"4\">\n<li>输入adb shell 即可操作</li>\n</ol>\n<h1 id=\"why\"><a href=\"#why\" class=\"headerlink\" title=\"why\"></a>why</h1><p>微信不支持云同步, 换了手机聊天记录都没了.一直都有想要把微信记录备份下来的想法. 虽然微信客户可以备份,但不能查看,所以今早花了2个小时研究了一下. 主要参考了两个文章:<a href=\"https://blog.csdn.net/jiangwei0910410003/article/details/52238891\" target=\"_blank\" rel=\"noopener\">逆向之旅</a>和<a href=\"https://blog.csdn.net/f2006116/article/details/51073202\" target=\"_blank\" rel=\"noopener\">Android 获取取手机中微信聊天记录</a></p>\n<h1 id=\"安装adb-获取数据库\"><a href=\"#安装adb-获取数据库\" class=\"headerlink\" title=\"安装adb,获取数据库\"></a>安装adb,获取数据库</h1><p>.db文件无法在手机中找到,所以先安装了adb,<img src=\"https://img-blog.csdn.net/20160819140615444?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"图片\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb shell</span><br><span class=\"line\">su</span><br><span class=\"line\">//下面就是数据库存放的位置</span><br><span class=\"line\">cd /data/data/com.tencent.mm/MicroMsg/a375d47ad7f69337779a1b7ea3638a76/EnMicroMsg.db</span><br><span class=\"line\">//将数据库从手机中copy出来,此操作不能在shell中进行 需exit退出到cmd中</span><br><span class=\"line\">adb pull /data/data/com.tencent.mm/MicroMsg/a375d47ad7f69337779a1b7ea3638a76/EnMicroMsg.db /User/cyz/Desktop</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"破解数据库库\"><a href=\"#破解数据库库\" class=\"headerlink\" title=\"破解数据库库\"></a>破解数据库库</h1><p>我们拿到的是SQLite数据库,并被加了密.可以用sqlcipher.exe软件解密,<a href=\"http://7xivx9.com1.z0.glb.clouddn.com/wxsqlcipher.exe\" target=\"_blank\" rel=\"noopener\">点此下载</a>.<br>密码的组成为:IMEI + 微信UIN 的 MD5值（32位小写）前7位.</p>\n<ol>\n<li>获取IMEI码:手机拨号输入 *#06# 显示出来的即是所需 IMEI</li>\n<li>登陆微信网页版, 打开F12并用微信发送一条消息,搜索uin就能看到自己的uin码,一般是9位.<br>到此,我们获取了设备的 IMEI(如12345) 和 微信账号的 UIN(如67890) 码，下面来计算 32 位 MD5 消息摘要值，使用 MD5 在线加密的网站就可以，则要加密的字符串为 IMEI+UIN，即 1234567890，加密后就会得到四种 MD5 值，我们需要的是32位长度小写的.<br>取该 MD5 值前 7 位，即为密钥。接下来，打开 sqlcipher.exe ，File-&gt;Open Database， 选择 EnMicroMsg.db 文件，打开后就可以看到让我们输入密钥，输入刚才的7位密钥，点击OK.<br>我们的聊天记录在表message中, 切换到Browse Data,然后切换到message表,就可以看到所有的聊天记录了. 点击File&gt;export&gt;CSV就可以把数据导出来了.excel可以直接读取.<h1 id=\"写在后面\"><a href=\"#写在后面\" class=\"headerlink\" title=\"写在后面\"></a>写在后面</h1>简单的操作, 理解其中的逻辑, 一步一步做出结果, 还是有些小难度的, 但做出来也很有成就感!</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"6-8号更新\"><a href=\"#6-8号更新\" class=\"headerlink\" title=\"6.8号更新\"></a>6.8号更新</h1><p>手机换了之后,重新root需要清除数据,所以不想再折腾手机,于是准备换用模拟器.<br>先用的网易mumu,但装过微信就一直闪退.所以换作夜神模拟器.<br>夜神模拟器连接adb的方法是:<br>1.打开夜神模拟器，打开设置，调成手机模式，初次进入的话，进入设置，点击版本号5次，可以激活使用开发者模式，进入后打开USB调试功能</p>\n<p>2.打开文件资源管理器，进入夜神模拟器的安装位置，在地址栏输入cmd，回车，会打开cmd窗口，进入的路径就是夜神模拟器的安装位置。我的默认安装位置：C:\\Program Files (x86)\\Nox\\bin</p>\n<p>3.输入nox_adb.exe connect 127.0.0.1:62001即可以连接到adb</p>\n<p>或者是 adb connect 127.0.0.1:52001</p>\n<p>adb connect 127.0.0.1:62001</p>\n<ol start=\"4\">\n<li>输入adb shell 即可操作</li>\n</ol>\n<h1 id=\"why\"><a href=\"#why\" class=\"headerlink\" title=\"why\"></a>why</h1><p>微信不支持云同步, 换了手机聊天记录都没了.一直都有想要把微信记录备份下来的想法. 虽然微信客户可以备份,但不能查看,所以今早花了2个小时研究了一下. 主要参考了两个文章:<a href=\"https://blog.csdn.net/jiangwei0910410003/article/details/52238891\" target=\"_blank\" rel=\"noopener\">逆向之旅</a>和<a href=\"https://blog.csdn.net/f2006116/article/details/51073202\" target=\"_blank\" rel=\"noopener\">Android 获取取手机中微信聊天记录</a></p>\n<h1 id=\"安装adb-获取数据库\"><a href=\"#安装adb-获取数据库\" class=\"headerlink\" title=\"安装adb,获取数据库\"></a>安装adb,获取数据库</h1><p>.db文件无法在手机中找到,所以先安装了adb,<img src=\"https://img-blog.csdn.net/20160819140615444?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"图片\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb shell</span><br><span class=\"line\">su</span><br><span class=\"line\">//下面就是数据库存放的位置</span><br><span class=\"line\">cd /data/data/com.tencent.mm/MicroMsg/a375d47ad7f69337779a1b7ea3638a76/EnMicroMsg.db</span><br><span class=\"line\">//将数据库从手机中copy出来,此操作不能在shell中进行 需exit退出到cmd中</span><br><span class=\"line\">adb pull /data/data/com.tencent.mm/MicroMsg/a375d47ad7f69337779a1b7ea3638a76/EnMicroMsg.db /User/cyz/Desktop</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"破解数据库库\"><a href=\"#破解数据库库\" class=\"headerlink\" title=\"破解数据库库\"></a>破解数据库库</h1><p>我们拿到的是SQLite数据库,并被加了密.可以用sqlcipher.exe软件解密,<a href=\"http://7xivx9.com1.z0.glb.clouddn.com/wxsqlcipher.exe\" target=\"_blank\" rel=\"noopener\">点此下载</a>.<br>密码的组成为:IMEI + 微信UIN 的 MD5值（32位小写）前7位.</p>\n<ol>\n<li>获取IMEI码:手机拨号输入 *#06# 显示出来的即是所需 IMEI</li>\n<li>登陆微信网页版, 打开F12并用微信发送一条消息,搜索uin就能看到自己的uin码,一般是9位.<br>到此,我们获取了设备的 IMEI(如12345) 和 微信账号的 UIN(如67890) 码，下面来计算 32 位 MD5 消息摘要值，使用 MD5 在线加密的网站就可以，则要加密的字符串为 IMEI+UIN，即 1234567890，加密后就会得到四种 MD5 值，我们需要的是32位长度小写的.<br>取该 MD5 值前 7 位，即为密钥。接下来，打开 sqlcipher.exe ，File-&gt;Open Database， 选择 EnMicroMsg.db 文件，打开后就可以看到让我们输入密钥，输入刚才的7位密钥，点击OK.<br>我们的聊天记录在表message中, 切换到Browse Data,然后切换到message表,就可以看到所有的聊天记录了. 点击File&gt;export&gt;CSV就可以把数据导出来了.excel可以直接读取.<h1 id=\"写在后面\"><a href=\"#写在后面\" class=\"headerlink\" title=\"写在后面\"></a>写在后面</h1>简单的操作, 理解其中的逻辑, 一步一步做出结果, 还是有些小难度的, 但做出来也很有成就感!</li>\n</ol>\n"},{"title":"idea创建maven一直loading_archetype_list","date":"2018-05-11T02:48:09.000Z","_content":"# 苦恼的小问题\n小问题都有如下的特征\n1. 偶尔发生,没有明确的解决办法\n2. 懒得去搜怎么解决,但遇到又被弄得很烦躁\n3. 只能在忍受不了的时候狠下心去搜索办法.\n# 解决办法\n```\nSetting---->Build Tools → Maven → Importing, set VM options for importer to -Xmx1024m (默认的是-Xmx512m )\n```\n![图解](http://images2015.cnblogs.com/blog/785703/201602/785703-20160227212621846-1044991160.png)\n如果不行,再找其他办法","source":"_posts/2018.05.11 idea创建maven一直loading-archetype-list.md","raw":"---\ntitle: idea创建maven一直loading_archetype_list\ndate: 2018-05-11 10:48:09\ntags:\n---\n# 苦恼的小问题\n小问题都有如下的特征\n1. 偶尔发生,没有明确的解决办法\n2. 懒得去搜怎么解决,但遇到又被弄得很烦躁\n3. 只能在忍受不了的时候狠下心去搜索办法.\n# 解决办法\n```\nSetting---->Build Tools → Maven → Importing, set VM options for importer to -Xmx1024m (默认的是-Xmx512m )\n```\n![图解](http://images2015.cnblogs.com/blog/785703/201602/785703-20160227212621846-1044991160.png)\n如果不行,再找其他办法","slug":"idea创建maven一直loading-archetype-list","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbf0014dcyu6l6xfsbt","content":"<h1 id=\"苦恼的小问题\"><a href=\"#苦恼的小问题\" class=\"headerlink\" title=\"苦恼的小问题\"></a>苦恼的小问题</h1><p>小问题都有如下的特征</p>\n<ol>\n<li>偶尔发生,没有明确的解决办法</li>\n<li>懒得去搜怎么解决,但遇到又被弄得很烦躁</li>\n<li>只能在忍受不了的时候狠下心去搜索办法.<h1 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Setting----&gt;Build Tools → Maven → Importing, set VM options for importer to -Xmx1024m (默认的是-Xmx512m )</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><img src=\"http://images2015.cnblogs.com/blog/785703/201602/785703-20160227212621846-1044991160.png\" alt=\"图解\"><br>如果不行,再找其他办法</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"苦恼的小问题\"><a href=\"#苦恼的小问题\" class=\"headerlink\" title=\"苦恼的小问题\"></a>苦恼的小问题</h1><p>小问题都有如下的特征</p>\n<ol>\n<li>偶尔发生,没有明确的解决办法</li>\n<li>懒得去搜怎么解决,但遇到又被弄得很烦躁</li>\n<li>只能在忍受不了的时候狠下心去搜索办法.<h1 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Setting----&gt;Build Tools → Maven → Importing, set VM options for importer to -Xmx1024m (默认的是-Xmx512m )</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><img src=\"http://images2015.cnblogs.com/blog/785703/201602/785703-20160227212621846-1044991160.png\" alt=\"图解\"><br>如果不行,再找其他办法</p>\n"},{"title":"markdown常用的语法总结","date":"2018-05-11T02:59:12.000Z","_content":"# why?\n目前只会用markdown基本的语法,很笨拙.所以找个机会系统的学习记忆一下相关内容.[这里讲的更详细](https://www.appinn.com/markdown/#list)\n# 区块元素\n## 段落和换行\n一个 Markdown 段落是由一个或多个连续的文本行组成，它的前后要有一个以上的空行（空行的定义是显示上看起来像是空的，便会被视为空行。比方说，若某一行只包含空格和制表符，则该行也会被视为空行）。普通段落不该用空格或制表符来缩进。\n如果你确实想要依赖 Markdown 来插入 <br /> 标签的话，在插入处先按入两个以上的空格然后回车\n## 区块引用嵌套\n> This is the first level of quoting.\n>\n> > This is nested blockquote.\n>\n> Back to the first level.\n## 列表\nMarkdown 支持有序列表和无序列表。\n无序列表使用星号、加号或是减号作为列表标记：\n* Red\n+ Green\n- Blue\n有序列表则使用数字接着一个英文句点：\n1. Bird\n2. McHale\n3. Parish\n## 列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符：\n1.\tThis is a list item with two paragraphs. Lorem ipsum dolor\n    sit amet, consectetuer adipiscing elit. Aliquam hendrerit\n    mi posuere lectus.\n\tVestibulum enim wisi, viverra nec, fringilla in, laoreet\n    vitae, risus. Donec sit amet nisl. Aliquam semper ipsum\n    sit amet velit.\n2.  Suspendisse id sem consectetuer libero luctus adipiscing.\n## 分割线\n你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。\n## 强调\nMarkdown 使用星号（*）和底线（_）作为标记强调字词的符号，被 * 或 _ 包围的字词会被转成用 <em> 标签包围，用两个 * 或 _ 包起来的话，则会被转成 <strong>\n\n\n\n\n","source":"_posts/2018.05.11 markdown常用的语法总结.md","raw":"---\ntitle: markdown常用的语法总结\ndate: 2018-05-11 10:59:12\ntags:\n---\n# why?\n目前只会用markdown基本的语法,很笨拙.所以找个机会系统的学习记忆一下相关内容.[这里讲的更详细](https://www.appinn.com/markdown/#list)\n# 区块元素\n## 段落和换行\n一个 Markdown 段落是由一个或多个连续的文本行组成，它的前后要有一个以上的空行（空行的定义是显示上看起来像是空的，便会被视为空行。比方说，若某一行只包含空格和制表符，则该行也会被视为空行）。普通段落不该用空格或制表符来缩进。\n如果你确实想要依赖 Markdown 来插入 <br /> 标签的话，在插入处先按入两个以上的空格然后回车\n## 区块引用嵌套\n> This is the first level of quoting.\n>\n> > This is nested blockquote.\n>\n> Back to the first level.\n## 列表\nMarkdown 支持有序列表和无序列表。\n无序列表使用星号、加号或是减号作为列表标记：\n* Red\n+ Green\n- Blue\n有序列表则使用数字接着一个英文句点：\n1. Bird\n2. McHale\n3. Parish\n## 列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符：\n1.\tThis is a list item with two paragraphs. Lorem ipsum dolor\n    sit amet, consectetuer adipiscing elit. Aliquam hendrerit\n    mi posuere lectus.\n\tVestibulum enim wisi, viverra nec, fringilla in, laoreet\n    vitae, risus. Donec sit amet nisl. Aliquam semper ipsum\n    sit amet velit.\n2.  Suspendisse id sem consectetuer libero luctus adipiscing.\n## 分割线\n你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。\n## 强调\nMarkdown 使用星号（*）和底线（_）作为标记强调字词的符号，被 * 或 _ 包围的字词会被转成用 <em> 标签包围，用两个 * 或 _ 包起来的话，则会被转成 <strong>\n\n\n\n\n","slug":"markdown常用的语法总结","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbg0016dcyugkbe39za","content":"<h1 id=\"why\"><a href=\"#why\" class=\"headerlink\" title=\"why?\"></a>why?</h1><p>目前只会用markdown基本的语法,很笨拙.所以找个机会系统的学习记忆一下相关内容.<a href=\"https://www.appinn.com/markdown/#list\" target=\"_blank\" rel=\"noopener\">这里讲的更详细</a></p>\n<h1 id=\"区块元素\"><a href=\"#区块元素\" class=\"headerlink\" title=\"区块元素\"></a>区块元素</h1><h2 id=\"段落和换行\"><a href=\"#段落和换行\" class=\"headerlink\" title=\"段落和换行\"></a>段落和换行</h2><p>一个 Markdown 段落是由一个或多个连续的文本行组成，它的前后要有一个以上的空行（空行的定义是显示上看起来像是空的，便会被视为空行。比方说，若某一行只包含空格和制表符，则该行也会被视为空行）。普通段落不该用空格或制表符来缩进。<br>如果你确实想要依赖 Markdown 来插入 <br> 标签的话，在插入处先按入两个以上的空格然后回车</p>\n<h2 id=\"区块引用嵌套\"><a href=\"#区块引用嵌套\" class=\"headerlink\" title=\"区块引用嵌套\"></a>区块引用嵌套</h2><blockquote>\n<p>This is the first level of quoting.</p>\n<blockquote>\n<p>This is nested blockquote.</p>\n</blockquote>\n<p>Back to the first level.</p>\n</blockquote>\n<h2 id=\"列表\"><a href=\"#列表\" class=\"headerlink\" title=\"列表\"></a>列表</h2><p>Markdown 支持有序列表和无序列表。<br>无序列表使用星号、加号或是减号作为列表标记：</p>\n<ul>\n<li>Red</li>\n</ul>\n<ul>\n<li>Green</li>\n</ul>\n<ul>\n<li>Blue<br>有序列表则使用数字接着一个英文句点：</li>\n</ul>\n<ol>\n<li>Bird</li>\n<li>McHale</li>\n<li>Parish<h2 id=\"列表项目可以包含多个段落，每个项目下的段落都必须缩进-4-个空格或是-1-个制表符：\"><a href=\"#列表项目可以包含多个段落，每个项目下的段落都必须缩进-4-个空格或是-1-个制表符：\" class=\"headerlink\" title=\"列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符：\"></a>列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符：</h2></li>\n<li>This is a list item with two paragraphs. Lorem ipsum dolor<br>sit amet, consectetuer adipiscing elit. Aliquam hendrerit<br>mi posuere lectus.<br>Vestibulum enim wisi, viverra nec, fringilla in, laoreet<br>vitae, risus. Donec sit amet nisl. Aliquam semper ipsum<br>sit amet velit.</li>\n<li>Suspendisse id sem consectetuer libero luctus adipiscing.<h2 id=\"分割线\"><a href=\"#分割线\" class=\"headerlink\" title=\"分割线\"></a>分割线</h2>你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。<h2 id=\"强调\"><a href=\"#强调\" class=\"headerlink\" title=\"强调\"></a>强调</h2>Markdown 使用星号（<em>）和底线（_）作为标记强调字词的符号，被 </em> 或 _ 包围的字词会被转成用 <em> 标签包围，用两个 * 或 _ 包起来的话，则会被转成 <strong></strong></em></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"why\"><a href=\"#why\" class=\"headerlink\" title=\"why?\"></a>why?</h1><p>目前只会用markdown基本的语法,很笨拙.所以找个机会系统的学习记忆一下相关内容.<a href=\"https://www.appinn.com/markdown/#list\" target=\"_blank\" rel=\"noopener\">这里讲的更详细</a></p>\n<h1 id=\"区块元素\"><a href=\"#区块元素\" class=\"headerlink\" title=\"区块元素\"></a>区块元素</h1><h2 id=\"段落和换行\"><a href=\"#段落和换行\" class=\"headerlink\" title=\"段落和换行\"></a>段落和换行</h2><p>一个 Markdown 段落是由一个或多个连续的文本行组成，它的前后要有一个以上的空行（空行的定义是显示上看起来像是空的，便会被视为空行。比方说，若某一行只包含空格和制表符，则该行也会被视为空行）。普通段落不该用空格或制表符来缩进。<br>如果你确实想要依赖 Markdown 来插入 <br> 标签的话，在插入处先按入两个以上的空格然后回车</p>\n<h2 id=\"区块引用嵌套\"><a href=\"#区块引用嵌套\" class=\"headerlink\" title=\"区块引用嵌套\"></a>区块引用嵌套</h2><blockquote>\n<p>This is the first level of quoting.</p>\n<blockquote>\n<p>This is nested blockquote.</p>\n</blockquote>\n<p>Back to the first level.</p>\n</blockquote>\n<h2 id=\"列表\"><a href=\"#列表\" class=\"headerlink\" title=\"列表\"></a>列表</h2><p>Markdown 支持有序列表和无序列表。<br>无序列表使用星号、加号或是减号作为列表标记：</p>\n<ul>\n<li>Red</li>\n</ul>\n<ul>\n<li>Green</li>\n</ul>\n<ul>\n<li>Blue<br>有序列表则使用数字接着一个英文句点：</li>\n</ul>\n<ol>\n<li>Bird</li>\n<li>McHale</li>\n<li>Parish<h2 id=\"列表项目可以包含多个段落，每个项目下的段落都必须缩进-4-个空格或是-1-个制表符：\"><a href=\"#列表项目可以包含多个段落，每个项目下的段落都必须缩进-4-个空格或是-1-个制表符：\" class=\"headerlink\" title=\"列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符：\"></a>列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符：</h2></li>\n<li>This is a list item with two paragraphs. Lorem ipsum dolor<br>sit amet, consectetuer adipiscing elit. Aliquam hendrerit<br>mi posuere lectus.<br>Vestibulum enim wisi, viverra nec, fringilla in, laoreet<br>vitae, risus. Donec sit amet nisl. Aliquam semper ipsum<br>sit amet velit.</li>\n<li>Suspendisse id sem consectetuer libero luctus adipiscing.<h2 id=\"分割线\"><a href=\"#分割线\" class=\"headerlink\" title=\"分割线\"></a>分割线</h2>你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。<h2 id=\"强调\"><a href=\"#强调\" class=\"headerlink\" title=\"强调\"></a>强调</h2>Markdown 使用星号（<em>）和底线（_）作为标记强调字词的符号，被 </em> 或 _ 包围的字词会被转成用 <em> 标签包围，用两个 * 或 _ 包起来的话，则会被转成 <strong></strong></em></li>\n</ol>\n"},{"title":"深入理解java编码问题","date":"2018-05-11T02:55:35.000Z","_content":"本文参考自[深入分析 Java 中的中文编码问题 ](https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/index.html)\n# 几种常见的编码格式(科普知识)\n* ASCII码\n学过计算机的人都知道 ASCII 码，总共有 128 个，用一个字节的低 7 位表示，0~31 是控制字符如换行回车删除等；32~126 是打印字符，可以通过键盘输入并且能够显示出来。\n+ ISO-8859-1\n128 个字符显然是不够用的，于是 ISO 组织在 ASCII 码基础上又制定了一些列标准用来扩展 ASCII 编码，它们是 ISO-8859-1~ISO-8859-15，其中 ISO-8859-1 涵盖了大多数西欧语言字符，所有应用的最广泛。ISO-8859-1 仍然是单字节编码，它总共能表示 256 个字符。\n* GB2312\n它的全称是《信息交换用汉字编码字符集 基本集》，它是双字节编码，总的编码范围是 A1-F7，其中从 A1-A9 是符号区，总共包含 682 个符号，从 B0-F7 是汉字区，包含 6763 个汉字。\n* GBK\n全称叫《汉字内码扩展规范》，是国家技术监督局为 windows95 所制定的新的汉字内码规范，它的出现是为了扩展 GB2312，加入更多的汉字，它的编码范围是 8140~FEFE（去掉 XX7F）总共有 23940 个码位，它能表示 21003 个汉字，它的编码是和 GB2312 兼容的，也就是说用 GB2312 编码的汉字可以用 GBK 来解码，并且不会有乱码。\n* UTF-8\nUTF-16统一采用两个字节表示一个字符，虽然在表示上非常简单方便，但是也有其缺点，有很大一部分字符用一个字节就可以表示的现在要两个字节表示，存储空间放大了一倍，在现在的网络带宽还非常有限的今天，这样会增大网络传输的流量，而且也没必要。而 UTF-8 采用了一种变长技术，每个编码区域有不同的字码长度。不同类型的字符可以是由 1~6 个字节组成。\n# java需要编码的场景\n## I/O 操作中存在的编码\n我们知道涉及到编码的地方一般都在字符到字节或者字节到字符的转换上，而需要这种转换的场景主要是在 I/O 的时候，这个 I/O 包括磁盘 I/O 和网络 I/O，关于网络 I/O 部分在后面将主要以 Web 应用为例介绍。下图是 Java 中处理 I/O 问题的接口：\n[InputStream](https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image002.png)\nReader 类是 Java 的 I/O 中读字符的父类，而 InputStream 类是读字节的父类，InputStreamReader 类就是关联字节到字符的桥梁，它负责在 I/O 过程中处理读取字节到字符的转换，而具体字节到字符的解码实现它由 StreamDecoder 去实现，在 StreamDecoder 解码过程中必须由用户指定 Charset 编码格式。值得注意的是如果你没有指定 Charset，将使用本地环境中的默认字符集，例如在中文环境中将使用 GBK 编码。\n写的情况也是类似，字符的父类是 Writer，字节的父类是 OutputStream，通过 OutputStreamWriter 转换字符到字节。如下图所示：\n[OutputStreamWriter](https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image004.png)\n\n如下面一段代码, 实现了文件的读写功能\n```\nString file = \"c:stream.txt\";\nString charset=\"utf-8\";\nFileOutputStream outputStream = new FileOutputStream(file);\nOutputStreamWriter writer = new OutputStreamWriter(outputStream,charset);\ntry{\nwriter.write(\"中文字符\");\n\t}finaly{\n\twriter.close();\n}\n//字节>字符\nFileInputStream inputStream = new FileInputStream(file);\nInputStreamReader reader = new InputStreamReader(inputStream,charset);\nStringBuffer sb = new StringBuffer();\nchar[] buf = new char[64];\nint count = 0;\ntry{\n\twhile((count=reader.read(buf))!=-1){\n\t\tsb.append(buf,0,count);\n\t}\n}finaly{\n\treader.close();\n}\n\n```\n# 内存操作中的编码\n在 Java 开发中除了 I/O 涉及到编码外，最常用的应该就是在内存中进行字符到字节的数据类型的转换，Java 中用 String 表示字符串，所以 String 类就提供转换到字节的方法，也支持将字节转换为字符串的构造函数。如下代码示例：\n```\nString s = \"这是一段中文字符串\"; \nbyte[] b = s.getBytes(\"UTF-8\"); \nString n = new String(b,\"UTF-8\");\n```\nCharset 提供 encode 与 decode 分别对应 char[] 到 byte[] 的编码和 byte[] 到 char[] 的解码。如下代码所示：\n```\nCharset charset = Charset.forName(\"UTF-8\"); \nByteBuffer byteBuffer = charset.encode(string); \nCharBuffer charBuffer = charset.decode(byteBuffer);\n```\nString 编码\n```\npublic static void encode() { \n       String name = \"I am 君山\"; \n       toHex(name.toCharArray()); \n       try { \n           byte[] iso8859 = name.getBytes(\"ISO-8859-1\"); \n           toHex(iso8859); \n           byte[] gb2312 = name.getBytes(\"GB2312\"); \n           toHex(gb2312); \n           byte[] gbk = name.getBytes(\"GBK\"); \n           toHex(gbk); \n           byte[] utf16 = name.getBytes(\"UTF-16\"); \n           toHex(utf16); \n           byte[] utf8 = name.getBytes(\"UTF-8\"); \n           toHex(utf8); \n       } catch (UnsupportedEncodingException e) { \n           e.printStackTrace(); \n       } \n}\n```\n我们把 name 字符串按照前面说的几种编码格式进行编码转化成 byte 数组，然后以 16 进制输出，我们先看一下 Java 是如何进行编码的。\n下面是 Java 中编码需要用到的类图\n图 1. Java 编码类图\n[Java 编码类图](https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image007.jpg)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2018.05.11 深入理解java编码问题.md","raw":"---\ntitle: 深入理解java编码问题\ndate: 2018-05-11 10:55:35\ntags:\n---\n本文参考自[深入分析 Java 中的中文编码问题 ](https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/index.html)\n# 几种常见的编码格式(科普知识)\n* ASCII码\n学过计算机的人都知道 ASCII 码，总共有 128 个，用一个字节的低 7 位表示，0~31 是控制字符如换行回车删除等；32~126 是打印字符，可以通过键盘输入并且能够显示出来。\n+ ISO-8859-1\n128 个字符显然是不够用的，于是 ISO 组织在 ASCII 码基础上又制定了一些列标准用来扩展 ASCII 编码，它们是 ISO-8859-1~ISO-8859-15，其中 ISO-8859-1 涵盖了大多数西欧语言字符，所有应用的最广泛。ISO-8859-1 仍然是单字节编码，它总共能表示 256 个字符。\n* GB2312\n它的全称是《信息交换用汉字编码字符集 基本集》，它是双字节编码，总的编码范围是 A1-F7，其中从 A1-A9 是符号区，总共包含 682 个符号，从 B0-F7 是汉字区，包含 6763 个汉字。\n* GBK\n全称叫《汉字内码扩展规范》，是国家技术监督局为 windows95 所制定的新的汉字内码规范，它的出现是为了扩展 GB2312，加入更多的汉字，它的编码范围是 8140~FEFE（去掉 XX7F）总共有 23940 个码位，它能表示 21003 个汉字，它的编码是和 GB2312 兼容的，也就是说用 GB2312 编码的汉字可以用 GBK 来解码，并且不会有乱码。\n* UTF-8\nUTF-16统一采用两个字节表示一个字符，虽然在表示上非常简单方便，但是也有其缺点，有很大一部分字符用一个字节就可以表示的现在要两个字节表示，存储空间放大了一倍，在现在的网络带宽还非常有限的今天，这样会增大网络传输的流量，而且也没必要。而 UTF-8 采用了一种变长技术，每个编码区域有不同的字码长度。不同类型的字符可以是由 1~6 个字节组成。\n# java需要编码的场景\n## I/O 操作中存在的编码\n我们知道涉及到编码的地方一般都在字符到字节或者字节到字符的转换上，而需要这种转换的场景主要是在 I/O 的时候，这个 I/O 包括磁盘 I/O 和网络 I/O，关于网络 I/O 部分在后面将主要以 Web 应用为例介绍。下图是 Java 中处理 I/O 问题的接口：\n[InputStream](https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image002.png)\nReader 类是 Java 的 I/O 中读字符的父类，而 InputStream 类是读字节的父类，InputStreamReader 类就是关联字节到字符的桥梁，它负责在 I/O 过程中处理读取字节到字符的转换，而具体字节到字符的解码实现它由 StreamDecoder 去实现，在 StreamDecoder 解码过程中必须由用户指定 Charset 编码格式。值得注意的是如果你没有指定 Charset，将使用本地环境中的默认字符集，例如在中文环境中将使用 GBK 编码。\n写的情况也是类似，字符的父类是 Writer，字节的父类是 OutputStream，通过 OutputStreamWriter 转换字符到字节。如下图所示：\n[OutputStreamWriter](https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image004.png)\n\n如下面一段代码, 实现了文件的读写功能\n```\nString file = \"c:stream.txt\";\nString charset=\"utf-8\";\nFileOutputStream outputStream = new FileOutputStream(file);\nOutputStreamWriter writer = new OutputStreamWriter(outputStream,charset);\ntry{\nwriter.write(\"中文字符\");\n\t}finaly{\n\twriter.close();\n}\n//字节>字符\nFileInputStream inputStream = new FileInputStream(file);\nInputStreamReader reader = new InputStreamReader(inputStream,charset);\nStringBuffer sb = new StringBuffer();\nchar[] buf = new char[64];\nint count = 0;\ntry{\n\twhile((count=reader.read(buf))!=-1){\n\t\tsb.append(buf,0,count);\n\t}\n}finaly{\n\treader.close();\n}\n\n```\n# 内存操作中的编码\n在 Java 开发中除了 I/O 涉及到编码外，最常用的应该就是在内存中进行字符到字节的数据类型的转换，Java 中用 String 表示字符串，所以 String 类就提供转换到字节的方法，也支持将字节转换为字符串的构造函数。如下代码示例：\n```\nString s = \"这是一段中文字符串\"; \nbyte[] b = s.getBytes(\"UTF-8\"); \nString n = new String(b,\"UTF-8\");\n```\nCharset 提供 encode 与 decode 分别对应 char[] 到 byte[] 的编码和 byte[] 到 char[] 的解码。如下代码所示：\n```\nCharset charset = Charset.forName(\"UTF-8\"); \nByteBuffer byteBuffer = charset.encode(string); \nCharBuffer charBuffer = charset.decode(byteBuffer);\n```\nString 编码\n```\npublic static void encode() { \n       String name = \"I am 君山\"; \n       toHex(name.toCharArray()); \n       try { \n           byte[] iso8859 = name.getBytes(\"ISO-8859-1\"); \n           toHex(iso8859); \n           byte[] gb2312 = name.getBytes(\"GB2312\"); \n           toHex(gb2312); \n           byte[] gbk = name.getBytes(\"GBK\"); \n           toHex(gbk); \n           byte[] utf16 = name.getBytes(\"UTF-16\"); \n           toHex(utf16); \n           byte[] utf8 = name.getBytes(\"UTF-8\"); \n           toHex(utf8); \n       } catch (UnsupportedEncodingException e) { \n           e.printStackTrace(); \n       } \n}\n```\n我们把 name 字符串按照前面说的几种编码格式进行编码转化成 byte 数组，然后以 16 进制输出，我们先看一下 Java 是如何进行编码的。\n下面是 Java 中编码需要用到的类图\n图 1. Java 编码类图\n[Java 编码类图](https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image007.jpg)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"深入理解java编码问题","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbh0018dcyuq14d9bm5","content":"<p>本文参考自<a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/index.html\" target=\"_blank\" rel=\"noopener\">深入分析 Java 中的中文编码问题 </a></p>\n<h1 id=\"几种常见的编码格式-科普知识\"><a href=\"#几种常见的编码格式-科普知识\" class=\"headerlink\" title=\"几种常见的编码格式(科普知识)\"></a>几种常见的编码格式(科普知识)</h1><ul>\n<li>ASCII码<br>学过计算机的人都知道 ASCII 码，总共有 128 个，用一个字节的低 7 位表示，0~31 是控制字符如换行回车删除等；32~126 是打印字符，可以通过键盘输入并且能够显示出来。</li>\n</ul>\n<ul>\n<li>ISO-8859-1<br>128 个字符显然是不够用的，于是 ISO 组织在 ASCII 码基础上又制定了一些列标准用来扩展 ASCII 编码，它们是 ISO-8859-1~ISO-8859-15，其中 ISO-8859-1 涵盖了大多数西欧语言字符，所有应用的最广泛。ISO-8859-1 仍然是单字节编码，它总共能表示 256 个字符。</li>\n</ul>\n<ul>\n<li>GB2312<br>它的全称是《信息交换用汉字编码字符集 基本集》，它是双字节编码，总的编码范围是 A1-F7，其中从 A1-A9 是符号区，总共包含 682 个符号，从 B0-F7 是汉字区，包含 6763 个汉字。</li>\n<li>GBK<br>全称叫《汉字内码扩展规范》，是国家技术监督局为 windows95 所制定的新的汉字内码规范，它的出现是为了扩展 GB2312，加入更多的汉字，它的编码范围是 8140~FEFE（去掉 XX7F）总共有 23940 个码位，它能表示 21003 个汉字，它的编码是和 GB2312 兼容的，也就是说用 GB2312 编码的汉字可以用 GBK 来解码，并且不会有乱码。</li>\n<li>UTF-8<br>UTF-16统一采用两个字节表示一个字符，虽然在表示上非常简单方便，但是也有其缺点，有很大一部分字符用一个字节就可以表示的现在要两个字节表示，存储空间放大了一倍，在现在的网络带宽还非常有限的今天，这样会增大网络传输的流量，而且也没必要。而 UTF-8 采用了一种变长技术，每个编码区域有不同的字码长度。不同类型的字符可以是由 1~6 个字节组成。<h1 id=\"java需要编码的场景\"><a href=\"#java需要编码的场景\" class=\"headerlink\" title=\"java需要编码的场景\"></a>java需要编码的场景</h1><h2 id=\"I-O-操作中存在的编码\"><a href=\"#I-O-操作中存在的编码\" class=\"headerlink\" title=\"I/O 操作中存在的编码\"></a>I/O 操作中存在的编码</h2>我们知道涉及到编码的地方一般都在字符到字节或者字节到字符的转换上，而需要这种转换的场景主要是在 I/O 的时候，这个 I/O 包括磁盘 I/O 和网络 I/O，关于网络 I/O 部分在后面将主要以 Web 应用为例介绍。下图是 Java 中处理 I/O 问题的接口：<br><a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image002.png\" target=\"_blank\" rel=\"noopener\">InputStream</a><br>Reader 类是 Java 的 I/O 中读字符的父类，而 InputStream 类是读字节的父类，InputStreamReader 类就是关联字节到字符的桥梁，它负责在 I/O 过程中处理读取字节到字符的转换，而具体字节到字符的解码实现它由 StreamDecoder 去实现，在 StreamDecoder 解码过程中必须由用户指定 Charset 编码格式。值得注意的是如果你没有指定 Charset，将使用本地环境中的默认字符集，例如在中文环境中将使用 GBK 编码。<br>写的情况也是类似，字符的父类是 Writer，字节的父类是 OutputStream，通过 OutputStreamWriter 转换字符到字节。如下图所示：<br><a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image004.png\" target=\"_blank\" rel=\"noopener\">OutputStreamWriter</a></li>\n</ul>\n<p>如下面一段代码, 实现了文件的读写功能<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String file = &quot;c:stream.txt&quot;;</span><br><span class=\"line\">String charset=&quot;utf-8&quot;;</span><br><span class=\"line\">FileOutputStream outputStream = new FileOutputStream(file);</span><br><span class=\"line\">OutputStreamWriter writer = new OutputStreamWriter(outputStream,charset);</span><br><span class=\"line\">try&#123;</span><br><span class=\"line\">writer.write(&quot;中文字符&quot;);</span><br><span class=\"line\">\t&#125;finaly&#123;</span><br><span class=\"line\">\twriter.close();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//字节&gt;字符</span><br><span class=\"line\">FileInputStream inputStream = new FileInputStream(file);</span><br><span class=\"line\">InputStreamReader reader = new InputStreamReader(inputStream,charset);</span><br><span class=\"line\">StringBuffer sb = new StringBuffer();</span><br><span class=\"line\">char[] buf = new char[64];</span><br><span class=\"line\">int count = 0;</span><br><span class=\"line\">try&#123;</span><br><span class=\"line\">\twhile((count=reader.read(buf))!=-1)&#123;</span><br><span class=\"line\">\t\tsb.append(buf,0,count);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;finaly&#123;</span><br><span class=\"line\">\treader.close();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"内存操作中的编码\"><a href=\"#内存操作中的编码\" class=\"headerlink\" title=\"内存操作中的编码\"></a>内存操作中的编码</h1><p>在 Java 开发中除了 I/O 涉及到编码外，最常用的应该就是在内存中进行字符到字节的数据类型的转换，Java 中用 String 表示字符串，所以 String 类就提供转换到字节的方法，也支持将字节转换为字符串的构造函数。如下代码示例：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = &quot;这是一段中文字符串&quot;; </span><br><span class=\"line\">byte[] b = s.getBytes(&quot;UTF-8&quot;); </span><br><span class=\"line\">String n = new String(b,&quot;UTF-8&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>Charset 提供 encode 与 decode 分别对应 char[] 到 byte[] 的编码和 byte[] 到 char[] 的解码。如下代码所示：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Charset charset = Charset.forName(&quot;UTF-8&quot;); </span><br><span class=\"line\">ByteBuffer byteBuffer = charset.encode(string); </span><br><span class=\"line\">CharBuffer charBuffer = charset.decode(byteBuffer);</span><br></pre></td></tr></table></figure></p>\n<p>String 编码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void encode() &#123; </span><br><span class=\"line\">       String name = &quot;I am 君山&quot;; </span><br><span class=\"line\">       toHex(name.toCharArray()); </span><br><span class=\"line\">       try &#123; </span><br><span class=\"line\">           byte[] iso8859 = name.getBytes(&quot;ISO-8859-1&quot;); </span><br><span class=\"line\">           toHex(iso8859); </span><br><span class=\"line\">           byte[] gb2312 = name.getBytes(&quot;GB2312&quot;); </span><br><span class=\"line\">           toHex(gb2312); </span><br><span class=\"line\">           byte[] gbk = name.getBytes(&quot;GBK&quot;); </span><br><span class=\"line\">           toHex(gbk); </span><br><span class=\"line\">           byte[] utf16 = name.getBytes(&quot;UTF-16&quot;); </span><br><span class=\"line\">           toHex(utf16); </span><br><span class=\"line\">           byte[] utf8 = name.getBytes(&quot;UTF-8&quot;); </span><br><span class=\"line\">           toHex(utf8); </span><br><span class=\"line\">       &#125; catch (UnsupportedEncodingException e) &#123; </span><br><span class=\"line\">           e.printStackTrace(); </span><br><span class=\"line\">       &#125; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>我们把 name 字符串按照前面说的几种编码格式进行编码转化成 byte 数组，然后以 16 进制输出，我们先看一下 Java 是如何进行编码的。<br>下面是 Java 中编码需要用到的类图<br>图 1. Java 编码类图<br><a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image007.jpg\" target=\"_blank\" rel=\"noopener\">Java 编码类图</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>本文参考自<a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/index.html\" target=\"_blank\" rel=\"noopener\">深入分析 Java 中的中文编码问题 </a></p>\n<h1 id=\"几种常见的编码格式-科普知识\"><a href=\"#几种常见的编码格式-科普知识\" class=\"headerlink\" title=\"几种常见的编码格式(科普知识)\"></a>几种常见的编码格式(科普知识)</h1><ul>\n<li>ASCII码<br>学过计算机的人都知道 ASCII 码，总共有 128 个，用一个字节的低 7 位表示，0~31 是控制字符如换行回车删除等；32~126 是打印字符，可以通过键盘输入并且能够显示出来。</li>\n</ul>\n<ul>\n<li>ISO-8859-1<br>128 个字符显然是不够用的，于是 ISO 组织在 ASCII 码基础上又制定了一些列标准用来扩展 ASCII 编码，它们是 ISO-8859-1~ISO-8859-15，其中 ISO-8859-1 涵盖了大多数西欧语言字符，所有应用的最广泛。ISO-8859-1 仍然是单字节编码，它总共能表示 256 个字符。</li>\n</ul>\n<ul>\n<li>GB2312<br>它的全称是《信息交换用汉字编码字符集 基本集》，它是双字节编码，总的编码范围是 A1-F7，其中从 A1-A9 是符号区，总共包含 682 个符号，从 B0-F7 是汉字区，包含 6763 个汉字。</li>\n<li>GBK<br>全称叫《汉字内码扩展规范》，是国家技术监督局为 windows95 所制定的新的汉字内码规范，它的出现是为了扩展 GB2312，加入更多的汉字，它的编码范围是 8140~FEFE（去掉 XX7F）总共有 23940 个码位，它能表示 21003 个汉字，它的编码是和 GB2312 兼容的，也就是说用 GB2312 编码的汉字可以用 GBK 来解码，并且不会有乱码。</li>\n<li>UTF-8<br>UTF-16统一采用两个字节表示一个字符，虽然在表示上非常简单方便，但是也有其缺点，有很大一部分字符用一个字节就可以表示的现在要两个字节表示，存储空间放大了一倍，在现在的网络带宽还非常有限的今天，这样会增大网络传输的流量，而且也没必要。而 UTF-8 采用了一种变长技术，每个编码区域有不同的字码长度。不同类型的字符可以是由 1~6 个字节组成。<h1 id=\"java需要编码的场景\"><a href=\"#java需要编码的场景\" class=\"headerlink\" title=\"java需要编码的场景\"></a>java需要编码的场景</h1><h2 id=\"I-O-操作中存在的编码\"><a href=\"#I-O-操作中存在的编码\" class=\"headerlink\" title=\"I/O 操作中存在的编码\"></a>I/O 操作中存在的编码</h2>我们知道涉及到编码的地方一般都在字符到字节或者字节到字符的转换上，而需要这种转换的场景主要是在 I/O 的时候，这个 I/O 包括磁盘 I/O 和网络 I/O，关于网络 I/O 部分在后面将主要以 Web 应用为例介绍。下图是 Java 中处理 I/O 问题的接口：<br><a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image002.png\" target=\"_blank\" rel=\"noopener\">InputStream</a><br>Reader 类是 Java 的 I/O 中读字符的父类，而 InputStream 类是读字节的父类，InputStreamReader 类就是关联字节到字符的桥梁，它负责在 I/O 过程中处理读取字节到字符的转换，而具体字节到字符的解码实现它由 StreamDecoder 去实现，在 StreamDecoder 解码过程中必须由用户指定 Charset 编码格式。值得注意的是如果你没有指定 Charset，将使用本地环境中的默认字符集，例如在中文环境中将使用 GBK 编码。<br>写的情况也是类似，字符的父类是 Writer，字节的父类是 OutputStream，通过 OutputStreamWriter 转换字符到字节。如下图所示：<br><a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image004.png\" target=\"_blank\" rel=\"noopener\">OutputStreamWriter</a></li>\n</ul>\n<p>如下面一段代码, 实现了文件的读写功能<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String file = &quot;c:stream.txt&quot;;</span><br><span class=\"line\">String charset=&quot;utf-8&quot;;</span><br><span class=\"line\">FileOutputStream outputStream = new FileOutputStream(file);</span><br><span class=\"line\">OutputStreamWriter writer = new OutputStreamWriter(outputStream,charset);</span><br><span class=\"line\">try&#123;</span><br><span class=\"line\">writer.write(&quot;中文字符&quot;);</span><br><span class=\"line\">\t&#125;finaly&#123;</span><br><span class=\"line\">\twriter.close();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//字节&gt;字符</span><br><span class=\"line\">FileInputStream inputStream = new FileInputStream(file);</span><br><span class=\"line\">InputStreamReader reader = new InputStreamReader(inputStream,charset);</span><br><span class=\"line\">StringBuffer sb = new StringBuffer();</span><br><span class=\"line\">char[] buf = new char[64];</span><br><span class=\"line\">int count = 0;</span><br><span class=\"line\">try&#123;</span><br><span class=\"line\">\twhile((count=reader.read(buf))!=-1)&#123;</span><br><span class=\"line\">\t\tsb.append(buf,0,count);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;finaly&#123;</span><br><span class=\"line\">\treader.close();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"内存操作中的编码\"><a href=\"#内存操作中的编码\" class=\"headerlink\" title=\"内存操作中的编码\"></a>内存操作中的编码</h1><p>在 Java 开发中除了 I/O 涉及到编码外，最常用的应该就是在内存中进行字符到字节的数据类型的转换，Java 中用 String 表示字符串，所以 String 类就提供转换到字节的方法，也支持将字节转换为字符串的构造函数。如下代码示例：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = &quot;这是一段中文字符串&quot;; </span><br><span class=\"line\">byte[] b = s.getBytes(&quot;UTF-8&quot;); </span><br><span class=\"line\">String n = new String(b,&quot;UTF-8&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>Charset 提供 encode 与 decode 分别对应 char[] 到 byte[] 的编码和 byte[] 到 char[] 的解码。如下代码所示：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Charset charset = Charset.forName(&quot;UTF-8&quot;); </span><br><span class=\"line\">ByteBuffer byteBuffer = charset.encode(string); </span><br><span class=\"line\">CharBuffer charBuffer = charset.decode(byteBuffer);</span><br></pre></td></tr></table></figure></p>\n<p>String 编码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void encode() &#123; </span><br><span class=\"line\">       String name = &quot;I am 君山&quot;; </span><br><span class=\"line\">       toHex(name.toCharArray()); </span><br><span class=\"line\">       try &#123; </span><br><span class=\"line\">           byte[] iso8859 = name.getBytes(&quot;ISO-8859-1&quot;); </span><br><span class=\"line\">           toHex(iso8859); </span><br><span class=\"line\">           byte[] gb2312 = name.getBytes(&quot;GB2312&quot;); </span><br><span class=\"line\">           toHex(gb2312); </span><br><span class=\"line\">           byte[] gbk = name.getBytes(&quot;GBK&quot;); </span><br><span class=\"line\">           toHex(gbk); </span><br><span class=\"line\">           byte[] utf16 = name.getBytes(&quot;UTF-16&quot;); </span><br><span class=\"line\">           toHex(utf16); </span><br><span class=\"line\">           byte[] utf8 = name.getBytes(&quot;UTF-8&quot;); </span><br><span class=\"line\">           toHex(utf8); </span><br><span class=\"line\">       &#125; catch (UnsupportedEncodingException e) &#123; </span><br><span class=\"line\">           e.printStackTrace(); </span><br><span class=\"line\">       &#125; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>我们把 name 字符串按照前面说的几种编码格式进行编码转化成 byte 数组，然后以 16 进制输出，我们先看一下 Java 是如何进行编码的。<br>下面是 Java 中编码需要用到的类图<br>图 1. Java 编码类图<br><a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/image007.jpg\" target=\"_blank\" rel=\"noopener\">Java 编码类图</a></p>\n"},{"title":"linux下安装java环境配置步骤详述","date":"2018-05-12T08:45:37.000Z","_content":"# 被linux搞了\nlinux默认可以运行java命令, 但不能用javac命令, 而且找不到java在哪里, 搞不懂.索性直接删除了原java环境,根据[这篇文章](https://www.cnblogs.com/zeze/p/5902124.html)成功搭建了java环境.\n## 下载jdk\n官网下载后,通过ftp传送到了服务器. 然后移动到java目录下.\n```\ncp /home/wwwroot/jdk-8u60-linux-x64.tar.gz /etc/java/\n```\n## 解压\ntar -zxvf jdk-8u60-linux-x64.tar.gz\n## 安装完毕为他建立一个链接以节省目录长度\nln -s /etc/java/jdk-8u60/ /etc/jdk\n## 编辑配置文件,配置环境变量\n```\nvim /etc/profile\n\n通过$进入最后一行\n添加如下内容\nJAVA_HOME=/etc/jdk\nCLASSPATH=$JAVA_HOME/lib/\nPATH=$PATH:$JAVA_HOME/bin\nexport PATH JAVA_HOME CLASSPATH\n```\n## 执行命令\n```\nsource /etc/profile\n```\n## 查看安装情况\n直接javac 测试\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2018.05.12 linux下安装java环境配置步骤详述.md","raw":"---\ntitle: linux下安装java环境配置步骤详述\ndate: 2018-05-12 16:45:37\ntags: linux\n---\n# 被linux搞了\nlinux默认可以运行java命令, 但不能用javac命令, 而且找不到java在哪里, 搞不懂.索性直接删除了原java环境,根据[这篇文章](https://www.cnblogs.com/zeze/p/5902124.html)成功搭建了java环境.\n## 下载jdk\n官网下载后,通过ftp传送到了服务器. 然后移动到java目录下.\n```\ncp /home/wwwroot/jdk-8u60-linux-x64.tar.gz /etc/java/\n```\n## 解压\ntar -zxvf jdk-8u60-linux-x64.tar.gz\n## 安装完毕为他建立一个链接以节省目录长度\nln -s /etc/java/jdk-8u60/ /etc/jdk\n## 编辑配置文件,配置环境变量\n```\nvim /etc/profile\n\n通过$进入最后一行\n添加如下内容\nJAVA_HOME=/etc/jdk\nCLASSPATH=$JAVA_HOME/lib/\nPATH=$PATH:$JAVA_HOME/bin\nexport PATH JAVA_HOME CLASSPATH\n```\n## 执行命令\n```\nsource /etc/profile\n```\n## 查看安装情况\n直接javac 测试\n\n\n\n\n\n\n\n\n\n\n\n","slug":"linux下安装java环境配置步骤详述","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbi0019dcyuhp2ag2ur","content":"<h1 id=\"被linux搞了\"><a href=\"#被linux搞了\" class=\"headerlink\" title=\"被linux搞了\"></a>被linux搞了</h1><p>linux默认可以运行java命令, 但不能用javac命令, 而且找不到java在哪里, 搞不懂.索性直接删除了原java环境,根据<a href=\"https://www.cnblogs.com/zeze/p/5902124.html\" target=\"_blank\" rel=\"noopener\">这篇文章</a>成功搭建了java环境.</p>\n<h2 id=\"下载jdk\"><a href=\"#下载jdk\" class=\"headerlink\" title=\"下载jdk\"></a>下载jdk</h2><p>官网下载后,通过ftp传送到了服务器. 然后移动到java目录下.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp /home/wwwroot/jdk-8u60-linux-x64.tar.gz /etc/java/</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h2><p>tar -zxvf jdk-8u60-linux-x64.tar.gz</p>\n<h2 id=\"安装完毕为他建立一个链接以节省目录长度\"><a href=\"#安装完毕为他建立一个链接以节省目录长度\" class=\"headerlink\" title=\"安装完毕为他建立一个链接以节省目录长度\"></a>安装完毕为他建立一个链接以节省目录长度</h2><p>ln -s /etc/java/jdk-8u60/ /etc/jdk</p>\n<h2 id=\"编辑配置文件-配置环境变量\"><a href=\"#编辑配置文件-配置环境变量\" class=\"headerlink\" title=\"编辑配置文件,配置环境变量\"></a>编辑配置文件,配置环境变量</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\">通过$进入最后一行</span><br><span class=\"line\">添加如下内容</span><br><span class=\"line\">JAVA_HOME=/etc/jdk</span><br><span class=\"line\">CLASSPATH=$JAVA_HOME/lib/</span><br><span class=\"line\">PATH=$PATH:$JAVA_HOME/bin</span><br><span class=\"line\">export PATH JAVA_HOME CLASSPATH</span><br></pre></td></tr></table></figure>\n<h2 id=\"执行命令\"><a href=\"#执行命令\" class=\"headerlink\" title=\"执行命令\"></a>执行命令</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n<h2 id=\"查看安装情况\"><a href=\"#查看安装情况\" class=\"headerlink\" title=\"查看安装情况\"></a>查看安装情况</h2><p>直接javac 测试</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"被linux搞了\"><a href=\"#被linux搞了\" class=\"headerlink\" title=\"被linux搞了\"></a>被linux搞了</h1><p>linux默认可以运行java命令, 但不能用javac命令, 而且找不到java在哪里, 搞不懂.索性直接删除了原java环境,根据<a href=\"https://www.cnblogs.com/zeze/p/5902124.html\" target=\"_blank\" rel=\"noopener\">这篇文章</a>成功搭建了java环境.</p>\n<h2 id=\"下载jdk\"><a href=\"#下载jdk\" class=\"headerlink\" title=\"下载jdk\"></a>下载jdk</h2><p>官网下载后,通过ftp传送到了服务器. 然后移动到java目录下.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp /home/wwwroot/jdk-8u60-linux-x64.tar.gz /etc/java/</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h2><p>tar -zxvf jdk-8u60-linux-x64.tar.gz</p>\n<h2 id=\"安装完毕为他建立一个链接以节省目录长度\"><a href=\"#安装完毕为他建立一个链接以节省目录长度\" class=\"headerlink\" title=\"安装完毕为他建立一个链接以节省目录长度\"></a>安装完毕为他建立一个链接以节省目录长度</h2><p>ln -s /etc/java/jdk-8u60/ /etc/jdk</p>\n<h2 id=\"编辑配置文件-配置环境变量\"><a href=\"#编辑配置文件-配置环境变量\" class=\"headerlink\" title=\"编辑配置文件,配置环境变量\"></a>编辑配置文件,配置环境变量</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\">通过$进入最后一行</span><br><span class=\"line\">添加如下内容</span><br><span class=\"line\">JAVA_HOME=/etc/jdk</span><br><span class=\"line\">CLASSPATH=$JAVA_HOME/lib/</span><br><span class=\"line\">PATH=$PATH:$JAVA_HOME/bin</span><br><span class=\"line\">export PATH JAVA_HOME CLASSPATH</span><br></pre></td></tr></table></figure>\n<h2 id=\"执行命令\"><a href=\"#执行命令\" class=\"headerlink\" title=\"执行命令\"></a>执行命令</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n<h2 id=\"查看安装情况\"><a href=\"#查看安装情况\" class=\"headerlink\" title=\"查看安装情况\"></a>查看安装情况</h2><p>直接javac 测试</p>\n"},{"title":"FastJSON简单使用","date":"2018-05-13T12:06:34.000Z","_content":"# 需求\n根据[api](https://github.com/UESTC-BBS/API-Docs/wiki/Mobcent-API#apphash-%E5%BF%85%E5%A1%AB)想做一个实时读取论坛信息的小程序,读取api之后需解析json, 之前亚辉说过FastJSON比较好用, 所以就用到了[这个](https://blog.csdn.net/flysun3344/article/details/54707965)学习了教程. 用完之后总结记录一下.\n## FastJSON\nFastJSON是一个Java语言编写的高性能，功能完善，完全支持http://json.org的标准的JSON库.\n如果使用Maven,在pom.xml文件中加入以下依赖.\n```\n <dependency>\n     <groupId>com.alibaba</groupId>\n     <artifactId>fastjson</artifactId>\n     <version>1.1.23</version>\n </dependency>\n```\n## 序列化\n一直觉得序列化很神秘, 用过才发现序列化就是把JavaBean对象转成JSON格式的字符串。\ncom.alibaba.fastjson.JSON提供了许多方法（多态）实现序列化。\n\n### 例1\n```\n List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();\n         \n Map<String, Object> map1 = new HashMap<String, Object>();\n map1.put(\"key1\", \"One\");\n map1.put(\"key2\", \"Two\");\n         \n Map<String, Object> map2 = new HashMap<String, Object>();\n map2.put(\"key1\", \"Three\");\n map2.put(\"key2\", \"Four\");\n         \n list.add(map1);\n list.add(map2);\n         \n String listJson = JSON.toJSONString(list);\n```\n输出结果\n```\n[{\"key1\":\"One\",\"key2\":\"Two\"},{\"key3\":\"Three\",\"key4\":\"Four\"}]\n```\n### 例2\n```\n User user = new User();\n user.setUserName(\"李四\");\n user.setAge(24);\n         \n String userJson = JSON.toJSONString(user);\n```\n输出结果\n```\n{\"age\":24,\"userName\":\"李四\"}\n```\n## 反序列化\n 反序列化就是把JSON格式的字符串转化为Java Bean对象。\ncom.alibaba.fastjson.JSON提供了许多方法（多态）实现反序列化。\n### 将例1反序列化\n```\n List<Map> list1 = JSON.parseArray(listJson, Map.class);\n          \n for(Map<String, Object> map : list1){\n     System.out.println(map.get(\"key1\"));\n     System.out.println(map.get(\"key2\"));         \n }\n```\n## JSONObject，JSONArray\nJSONObject，JSONArray是JSON的两个子类。\n\nJSONObject相当于Map<String, Object>，\n\nJSONArray相当于List<Object>。\n\n\n\n","source":"_posts/2018.05.13 FastJSON简单使用.md","raw":"---\ntitle: FastJSON简单使用\ndate: 2018-05-13 20:06:34\ntags:\n---\n# 需求\n根据[api](https://github.com/UESTC-BBS/API-Docs/wiki/Mobcent-API#apphash-%E5%BF%85%E5%A1%AB)想做一个实时读取论坛信息的小程序,读取api之后需解析json, 之前亚辉说过FastJSON比较好用, 所以就用到了[这个](https://blog.csdn.net/flysun3344/article/details/54707965)学习了教程. 用完之后总结记录一下.\n## FastJSON\nFastJSON是一个Java语言编写的高性能，功能完善，完全支持http://json.org的标准的JSON库.\n如果使用Maven,在pom.xml文件中加入以下依赖.\n```\n <dependency>\n     <groupId>com.alibaba</groupId>\n     <artifactId>fastjson</artifactId>\n     <version>1.1.23</version>\n </dependency>\n```\n## 序列化\n一直觉得序列化很神秘, 用过才发现序列化就是把JavaBean对象转成JSON格式的字符串。\ncom.alibaba.fastjson.JSON提供了许多方法（多态）实现序列化。\n\n### 例1\n```\n List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();\n         \n Map<String, Object> map1 = new HashMap<String, Object>();\n map1.put(\"key1\", \"One\");\n map1.put(\"key2\", \"Two\");\n         \n Map<String, Object> map2 = new HashMap<String, Object>();\n map2.put(\"key1\", \"Three\");\n map2.put(\"key2\", \"Four\");\n         \n list.add(map1);\n list.add(map2);\n         \n String listJson = JSON.toJSONString(list);\n```\n输出结果\n```\n[{\"key1\":\"One\",\"key2\":\"Two\"},{\"key3\":\"Three\",\"key4\":\"Four\"}]\n```\n### 例2\n```\n User user = new User();\n user.setUserName(\"李四\");\n user.setAge(24);\n         \n String userJson = JSON.toJSONString(user);\n```\n输出结果\n```\n{\"age\":24,\"userName\":\"李四\"}\n```\n## 反序列化\n 反序列化就是把JSON格式的字符串转化为Java Bean对象。\ncom.alibaba.fastjson.JSON提供了许多方法（多态）实现反序列化。\n### 将例1反序列化\n```\n List<Map> list1 = JSON.parseArray(listJson, Map.class);\n          \n for(Map<String, Object> map : list1){\n     System.out.println(map.get(\"key1\"));\n     System.out.println(map.get(\"key2\"));         \n }\n```\n## JSONObject，JSONArray\nJSONObject，JSONArray是JSON的两个子类。\n\nJSONObject相当于Map<String, Object>，\n\nJSONArray相当于List<Object>。\n\n\n\n","slug":"FastJSON简单使用","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbj001bdcyubixijbch","content":"<h1 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h1><p>根据<a href=\"https://github.com/UESTC-BBS/API-Docs/wiki/Mobcent-API#apphash-%E5%BF%85%E5%A1%AB\" target=\"_blank\" rel=\"noopener\">api</a>想做一个实时读取论坛信息的小程序,读取api之后需解析json, 之前亚辉说过FastJSON比较好用, 所以就用到了<a href=\"https://blog.csdn.net/flysun3344/article/details/54707965\" target=\"_blank\" rel=\"noopener\">这个</a>学习了教程. 用完之后总结记录一下.</p>\n<h2 id=\"FastJSON\"><a href=\"#FastJSON\" class=\"headerlink\" title=\"FastJSON\"></a>FastJSON</h2><p>FastJSON是一个Java语言编写的高性能，功能完善，完全支持<a href=\"http://json.org的标准的JSON库\" target=\"_blank\" rel=\"noopener\">http://json.org的标准的JSON库</a>.<br>如果使用Maven,在pom.xml文件中加入以下依赖.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;1.1.23&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"序列化\"><a href=\"#序列化\" class=\"headerlink\" title=\"序列化\"></a>序列化</h2><p>一直觉得序列化很神秘, 用过才发现序列化就是把JavaBean对象转成JSON格式的字符串。<br>com.alibaba.fastjson.JSON提供了许多方法（多态）实现序列化。</p>\n<h3 id=\"例1\"><a href=\"#例1\" class=\"headerlink\" title=\"例1\"></a>例1</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Map&lt;String, Object&gt;&gt; list = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();</span><br><span class=\"line\">        </span><br><span class=\"line\">Map&lt;String, Object&gt; map1 = new HashMap&lt;String, Object&gt;();</span><br><span class=\"line\">map1.put(&quot;key1&quot;, &quot;One&quot;);</span><br><span class=\"line\">map1.put(&quot;key2&quot;, &quot;Two&quot;);</span><br><span class=\"line\">        </span><br><span class=\"line\">Map&lt;String, Object&gt; map2 = new HashMap&lt;String, Object&gt;();</span><br><span class=\"line\">map2.put(&quot;key1&quot;, &quot;Three&quot;);</span><br><span class=\"line\">map2.put(&quot;key2&quot;, &quot;Four&quot;);</span><br><span class=\"line\">        </span><br><span class=\"line\">list.add(map1);</span><br><span class=\"line\">list.add(map2);</span><br><span class=\"line\">        </span><br><span class=\"line\">String listJson = JSON.toJSONString(list);</span><br></pre></td></tr></table></figure>\n<p>输出结果<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[&#123;&quot;key1&quot;:&quot;One&quot;,&quot;key2&quot;:&quot;Two&quot;&#125;,&#123;&quot;key3&quot;:&quot;Three&quot;,&quot;key4&quot;:&quot;Four&quot;&#125;]</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"例2\"><a href=\"#例2\" class=\"headerlink\" title=\"例2\"></a>例2</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User user = new User();</span><br><span class=\"line\">user.setUserName(&quot;李四&quot;);</span><br><span class=\"line\">user.setAge(24);</span><br><span class=\"line\">        </span><br><span class=\"line\">String userJson = JSON.toJSONString(user);</span><br></pre></td></tr></table></figure>\n<p>输出结果<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;age&quot;:24,&quot;userName&quot;:&quot;李四&quot;&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"反序列化\"><a href=\"#反序列化\" class=\"headerlink\" title=\"反序列化\"></a>反序列化</h2><p> 反序列化就是把JSON格式的字符串转化为Java Bean对象。<br>com.alibaba.fastjson.JSON提供了许多方法（多态）实现反序列化。</p>\n<h3 id=\"将例1反序列化\"><a href=\"#将例1反序列化\" class=\"headerlink\" title=\"将例1反序列化\"></a>将例1反序列化</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Map&gt; list1 = JSON.parseArray(listJson, Map.class);</span><br><span class=\"line\">         </span><br><span class=\"line\">for(Map&lt;String, Object&gt; map : list1)&#123;</span><br><span class=\"line\">    System.out.println(map.get(&quot;key1&quot;));</span><br><span class=\"line\">    System.out.println(map.get(&quot;key2&quot;));         </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"JSONObject，JSONArray\"><a href=\"#JSONObject，JSONArray\" class=\"headerlink\" title=\"JSONObject，JSONArray\"></a>JSONObject，JSONArray</h2><p>JSONObject，JSONArray是JSON的两个子类。</p>\n<p>JSONObject相当于Map&lt;String, Object&gt;，</p>\n<p>JSONArray相当于List<object>。</object></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h1><p>根据<a href=\"https://github.com/UESTC-BBS/API-Docs/wiki/Mobcent-API#apphash-%E5%BF%85%E5%A1%AB\" target=\"_blank\" rel=\"noopener\">api</a>想做一个实时读取论坛信息的小程序,读取api之后需解析json, 之前亚辉说过FastJSON比较好用, 所以就用到了<a href=\"https://blog.csdn.net/flysun3344/article/details/54707965\" target=\"_blank\" rel=\"noopener\">这个</a>学习了教程. 用完之后总结记录一下.</p>\n<h2 id=\"FastJSON\"><a href=\"#FastJSON\" class=\"headerlink\" title=\"FastJSON\"></a>FastJSON</h2><p>FastJSON是一个Java语言编写的高性能，功能完善，完全支持<a href=\"http://json.org的标准的JSON库\" target=\"_blank\" rel=\"noopener\">http://json.org的标准的JSON库</a>.<br>如果使用Maven,在pom.xml文件中加入以下依赖.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;1.1.23&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"序列化\"><a href=\"#序列化\" class=\"headerlink\" title=\"序列化\"></a>序列化</h2><p>一直觉得序列化很神秘, 用过才发现序列化就是把JavaBean对象转成JSON格式的字符串。<br>com.alibaba.fastjson.JSON提供了许多方法（多态）实现序列化。</p>\n<h3 id=\"例1\"><a href=\"#例1\" class=\"headerlink\" title=\"例1\"></a>例1</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Map&lt;String, Object&gt;&gt; list = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();</span><br><span class=\"line\">        </span><br><span class=\"line\">Map&lt;String, Object&gt; map1 = new HashMap&lt;String, Object&gt;();</span><br><span class=\"line\">map1.put(&quot;key1&quot;, &quot;One&quot;);</span><br><span class=\"line\">map1.put(&quot;key2&quot;, &quot;Two&quot;);</span><br><span class=\"line\">        </span><br><span class=\"line\">Map&lt;String, Object&gt; map2 = new HashMap&lt;String, Object&gt;();</span><br><span class=\"line\">map2.put(&quot;key1&quot;, &quot;Three&quot;);</span><br><span class=\"line\">map2.put(&quot;key2&quot;, &quot;Four&quot;);</span><br><span class=\"line\">        </span><br><span class=\"line\">list.add(map1);</span><br><span class=\"line\">list.add(map2);</span><br><span class=\"line\">        </span><br><span class=\"line\">String listJson = JSON.toJSONString(list);</span><br></pre></td></tr></table></figure>\n<p>输出结果<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[&#123;&quot;key1&quot;:&quot;One&quot;,&quot;key2&quot;:&quot;Two&quot;&#125;,&#123;&quot;key3&quot;:&quot;Three&quot;,&quot;key4&quot;:&quot;Four&quot;&#125;]</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"例2\"><a href=\"#例2\" class=\"headerlink\" title=\"例2\"></a>例2</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User user = new User();</span><br><span class=\"line\">user.setUserName(&quot;李四&quot;);</span><br><span class=\"line\">user.setAge(24);</span><br><span class=\"line\">        </span><br><span class=\"line\">String userJson = JSON.toJSONString(user);</span><br></pre></td></tr></table></figure>\n<p>输出结果<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;age&quot;:24,&quot;userName&quot;:&quot;李四&quot;&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"反序列化\"><a href=\"#反序列化\" class=\"headerlink\" title=\"反序列化\"></a>反序列化</h2><p> 反序列化就是把JSON格式的字符串转化为Java Bean对象。<br>com.alibaba.fastjson.JSON提供了许多方法（多态）实现反序列化。</p>\n<h3 id=\"将例1反序列化\"><a href=\"#将例1反序列化\" class=\"headerlink\" title=\"将例1反序列化\"></a>将例1反序列化</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Map&gt; list1 = JSON.parseArray(listJson, Map.class);</span><br><span class=\"line\">         </span><br><span class=\"line\">for(Map&lt;String, Object&gt; map : list1)&#123;</span><br><span class=\"line\">    System.out.println(map.get(&quot;key1&quot;));</span><br><span class=\"line\">    System.out.println(map.get(&quot;key2&quot;));         </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"JSONObject，JSONArray\"><a href=\"#JSONObject，JSONArray\" class=\"headerlink\" title=\"JSONObject，JSONArray\"></a>JSONObject，JSONArray</h2><p>JSONObject，JSONArray是JSON的两个子类。</p>\n<p>JSONObject相当于Map&lt;String, Object&gt;，</p>\n<p>JSONArray相当于List<object>。</object></p>\n"},{"title":"idea编译项目为jar","date":"2018-05-15T06:34:50.000Z","_content":"# 全是坑啊\n被折磨了一上午, 也没弄把自己的项目打包成jar. 各种坑.\n# 默认就好\n搜索 idea打包为jar, 每一个都让new folder named lib,然后把引用到的jar放到lib中, Class Path中每个jar都加上\"jar/\". 但屡试屡败.\n后来单独建了个空项目去摸索,发现只需要按照默认的, 不改变引用jar包的位置, 直接就可以运行了!\n# Project Settings\n* Project\n* Modules\n* Libraries\n* Facets : (事物的)面\n* Artifacts: 一个项目资源的组合体。例如，一个已编译的java类的集合，一个已打包的java应用。\n这些概念还需要以后加强理解\n","source":"_posts/2018.05.15 idea编译项目为jar.md","raw":"---\ntitle: idea编译项目为jar\ndate: 2018-05-15 14:34:50\ntags: jar java \n---\n# 全是坑啊\n被折磨了一上午, 也没弄把自己的项目打包成jar. 各种坑.\n# 默认就好\n搜索 idea打包为jar, 每一个都让new folder named lib,然后把引用到的jar放到lib中, Class Path中每个jar都加上\"jar/\". 但屡试屡败.\n后来单独建了个空项目去摸索,发现只需要按照默认的, 不改变引用jar包的位置, 直接就可以运行了!\n# Project Settings\n* Project\n* Modules\n* Libraries\n* Facets : (事物的)面\n* Artifacts: 一个项目资源的组合体。例如，一个已编译的java类的集合，一个已打包的java应用。\n这些概念还需要以后加强理解\n","slug":"idea编译项目为jar","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbk001ddcyue7hxgg5p","content":"<h1 id=\"全是坑啊\"><a href=\"#全是坑啊\" class=\"headerlink\" title=\"全是坑啊\"></a>全是坑啊</h1><p>被折磨了一上午, 也没弄把自己的项目打包成jar. 各种坑.</p>\n<h1 id=\"默认就好\"><a href=\"#默认就好\" class=\"headerlink\" title=\"默认就好\"></a>默认就好</h1><p>搜索 idea打包为jar, 每一个都让new folder named lib,然后把引用到的jar放到lib中, Class Path中每个jar都加上”jar/“. 但屡试屡败.<br>后来单独建了个空项目去摸索,发现只需要按照默认的, 不改变引用jar包的位置, 直接就可以运行了!</p>\n<h1 id=\"Project-Settings\"><a href=\"#Project-Settings\" class=\"headerlink\" title=\"Project Settings\"></a>Project Settings</h1><ul>\n<li>Project</li>\n<li>Modules</li>\n<li>Libraries</li>\n<li>Facets : (事物的)面</li>\n<li>Artifacts: 一个项目资源的组合体。例如，一个已编译的java类的集合，一个已打包的java应用。<br>这些概念还需要以后加强理解</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"全是坑啊\"><a href=\"#全是坑啊\" class=\"headerlink\" title=\"全是坑啊\"></a>全是坑啊</h1><p>被折磨了一上午, 也没弄把自己的项目打包成jar. 各种坑.</p>\n<h1 id=\"默认就好\"><a href=\"#默认就好\" class=\"headerlink\" title=\"默认就好\"></a>默认就好</h1><p>搜索 idea打包为jar, 每一个都让new folder named lib,然后把引用到的jar放到lib中, Class Path中每个jar都加上”jar/“. 但屡试屡败.<br>后来单独建了个空项目去摸索,发现只需要按照默认的, 不改变引用jar包的位置, 直接就可以运行了!</p>\n<h1 id=\"Project-Settings\"><a href=\"#Project-Settings\" class=\"headerlink\" title=\"Project Settings\"></a>Project Settings</h1><ul>\n<li>Project</li>\n<li>Modules</li>\n<li>Libraries</li>\n<li>Facets : (事物的)面</li>\n<li>Artifacts: 一个项目资源的组合体。例如，一个已编译的java类的集合，一个已打包的java应用。<br>这些概念还需要以后加强理解</li>\n</ul>\n"},{"title":"Comparator与Comparable","date":"2018-05-24T06:57:12.000Z","_content":"# 先聊聊学习这个过程\n学习分为主动和被动学习. 按着学校课程规定的来, 是被动学习, \"学习\"先入为主, 先人根据他们的经验, 给后人铺好路子, 构造了一条普适的高效的学习路线, 按部就班就能得到最好的效果. 如果学习者跟得上队伍, 那就会有所获. 主动学习是没有别人铺好的道路, 或者需要自己寻找前人铺好的路子. 这种学习过程一般是要经过: 自己的兴趣主导>自己学习>新的研究发现>和志同道合的人共同讨论 来达成.\n\n# Comparable接口用在bean上\n```\nclass Student implements Comparable<Student>{\n    private String name;\n    private int age;\n    private float score;\n\t\n\t@Override\n    public int compareTo(Student o) {\n        // TODO Auto-generated method stub\n        if(this.score>o.score)//score是private的，为什么能够直接调用,这是因为在Student类内部\n            return -1;//由高到底排序\n        else if(this.score<o.score)\n            return 1;\n        else{\n            if(this.age>o.age)\n                return 1;//由底到高排序\n            else if(this.age<o.age)\n                return -1;\n            else\n                return 0;\n        }\n    }\n}\n```\n# Comparator用在集合外部\n在设计类的时候，往往没有考虑到让类实现Comparable接口，那么我们就需要用到另外的一个比较器接口Comparator。\n对于简单的比较,往往只需要实现Comparator内部类即可.\n```\npublic class ComparableDemo02 {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        Student stu[]={new Student(\"zhangsan\",20,90.0f),\n                new Student(\"lisi\",22,90.0f),\n                new Student(\"wangwu\",20,99.0f),\n                new Student(\"sunliu\",22,100.0f)};\n        java.util.Arrays.sort(stu,new StudentComparator());\n        for(Student s:stu)\n        {\n            System.out.println(s);\n        }\n    }\n\n}\n```\n","source":"_posts/2018.05.24 Comparator与Comparable.md","raw":"---\ntitle: Comparator与Comparable\ndate: 2018-05-24 14:57:12\ntags:\n---\n# 先聊聊学习这个过程\n学习分为主动和被动学习. 按着学校课程规定的来, 是被动学习, \"学习\"先入为主, 先人根据他们的经验, 给后人铺好路子, 构造了一条普适的高效的学习路线, 按部就班就能得到最好的效果. 如果学习者跟得上队伍, 那就会有所获. 主动学习是没有别人铺好的道路, 或者需要自己寻找前人铺好的路子. 这种学习过程一般是要经过: 自己的兴趣主导>自己学习>新的研究发现>和志同道合的人共同讨论 来达成.\n\n# Comparable接口用在bean上\n```\nclass Student implements Comparable<Student>{\n    private String name;\n    private int age;\n    private float score;\n\t\n\t@Override\n    public int compareTo(Student o) {\n        // TODO Auto-generated method stub\n        if(this.score>o.score)//score是private的，为什么能够直接调用,这是因为在Student类内部\n            return -1;//由高到底排序\n        else if(this.score<o.score)\n            return 1;\n        else{\n            if(this.age>o.age)\n                return 1;//由底到高排序\n            else if(this.age<o.age)\n                return -1;\n            else\n                return 0;\n        }\n    }\n}\n```\n# Comparator用在集合外部\n在设计类的时候，往往没有考虑到让类实现Comparable接口，那么我们就需要用到另外的一个比较器接口Comparator。\n对于简单的比较,往往只需要实现Comparator内部类即可.\n```\npublic class ComparableDemo02 {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        Student stu[]={new Student(\"zhangsan\",20,90.0f),\n                new Student(\"lisi\",22,90.0f),\n                new Student(\"wangwu\",20,99.0f),\n                new Student(\"sunliu\",22,100.0f)};\n        java.util.Arrays.sort(stu,new StudentComparator());\n        for(Student s:stu)\n        {\n            System.out.println(s);\n        }\n    }\n\n}\n```\n","slug":"Comparator与Comparable","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbm001edcyuv6fhre2k","content":"<h1 id=\"先聊聊学习这个过程\"><a href=\"#先聊聊学习这个过程\" class=\"headerlink\" title=\"先聊聊学习这个过程\"></a>先聊聊学习这个过程</h1><p>学习分为主动和被动学习. 按着学校课程规定的来, 是被动学习, “学习”先入为主, 先人根据他们的经验, 给后人铺好路子, 构造了一条普适的高效的学习路线, 按部就班就能得到最好的效果. 如果学习者跟得上队伍, 那就会有所获. 主动学习是没有别人铺好的道路, 或者需要自己寻找前人铺好的路子. 这种学习过程一般是要经过: 自己的兴趣主导&gt;自己学习&gt;新的研究发现&gt;和志同道合的人共同讨论 来达成.</p>\n<h1 id=\"Comparable接口用在bean上\"><a href=\"#Comparable接口用在bean上\" class=\"headerlink\" title=\"Comparable接口用在bean上\"></a>Comparable接口用在bean上</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Student implements Comparable&lt;Student&gt;&#123;</span><br><span class=\"line\">    private String name;</span><br><span class=\"line\">    private int age;</span><br><span class=\"line\">    private float score;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@Override</span><br><span class=\"line\">    public int compareTo(Student o) &#123;</span><br><span class=\"line\">        // TODO Auto-generated method stub</span><br><span class=\"line\">        if(this.score&gt;o.score)//score是private的，为什么能够直接调用,这是因为在Student类内部</span><br><span class=\"line\">            return -1;//由高到底排序</span><br><span class=\"line\">        else if(this.score&lt;o.score)</span><br><span class=\"line\">            return 1;</span><br><span class=\"line\">        else&#123;</span><br><span class=\"line\">            if(this.age&gt;o.age)</span><br><span class=\"line\">                return 1;//由底到高排序</span><br><span class=\"line\">            else if(this.age&lt;o.age)</span><br><span class=\"line\">                return -1;</span><br><span class=\"line\">            else</span><br><span class=\"line\">                return 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"Comparator用在集合外部\"><a href=\"#Comparator用在集合外部\" class=\"headerlink\" title=\"Comparator用在集合外部\"></a>Comparator用在集合外部</h1><p>在设计类的时候，往往没有考虑到让类实现Comparable接口，那么我们就需要用到另外的一个比较器接口Comparator。<br>对于简单的比较,往往只需要实现Comparator内部类即可.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class ComparableDemo02 &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * @param args</span><br><span class=\"line\">     */</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        // TODO Auto-generated method stub</span><br><span class=\"line\"></span><br><span class=\"line\">        Student stu[]=&#123;new Student(&quot;zhangsan&quot;,20,90.0f),</span><br><span class=\"line\">                new Student(&quot;lisi&quot;,22,90.0f),</span><br><span class=\"line\">                new Student(&quot;wangwu&quot;,20,99.0f),</span><br><span class=\"line\">                new Student(&quot;sunliu&quot;,22,100.0f)&#125;;</span><br><span class=\"line\">        java.util.Arrays.sort(stu,new StudentComparator());</span><br><span class=\"line\">        for(Student s:stu)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            System.out.println(s);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"先聊聊学习这个过程\"><a href=\"#先聊聊学习这个过程\" class=\"headerlink\" title=\"先聊聊学习这个过程\"></a>先聊聊学习这个过程</h1><p>学习分为主动和被动学习. 按着学校课程规定的来, 是被动学习, “学习”先入为主, 先人根据他们的经验, 给后人铺好路子, 构造了一条普适的高效的学习路线, 按部就班就能得到最好的效果. 如果学习者跟得上队伍, 那就会有所获. 主动学习是没有别人铺好的道路, 或者需要自己寻找前人铺好的路子. 这种学习过程一般是要经过: 自己的兴趣主导&gt;自己学习&gt;新的研究发现&gt;和志同道合的人共同讨论 来达成.</p>\n<h1 id=\"Comparable接口用在bean上\"><a href=\"#Comparable接口用在bean上\" class=\"headerlink\" title=\"Comparable接口用在bean上\"></a>Comparable接口用在bean上</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Student implements Comparable&lt;Student&gt;&#123;</span><br><span class=\"line\">    private String name;</span><br><span class=\"line\">    private int age;</span><br><span class=\"line\">    private float score;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@Override</span><br><span class=\"line\">    public int compareTo(Student o) &#123;</span><br><span class=\"line\">        // TODO Auto-generated method stub</span><br><span class=\"line\">        if(this.score&gt;o.score)//score是private的，为什么能够直接调用,这是因为在Student类内部</span><br><span class=\"line\">            return -1;//由高到底排序</span><br><span class=\"line\">        else if(this.score&lt;o.score)</span><br><span class=\"line\">            return 1;</span><br><span class=\"line\">        else&#123;</span><br><span class=\"line\">            if(this.age&gt;o.age)</span><br><span class=\"line\">                return 1;//由底到高排序</span><br><span class=\"line\">            else if(this.age&lt;o.age)</span><br><span class=\"line\">                return -1;</span><br><span class=\"line\">            else</span><br><span class=\"line\">                return 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"Comparator用在集合外部\"><a href=\"#Comparator用在集合外部\" class=\"headerlink\" title=\"Comparator用在集合外部\"></a>Comparator用在集合外部</h1><p>在设计类的时候，往往没有考虑到让类实现Comparable接口，那么我们就需要用到另外的一个比较器接口Comparator。<br>对于简单的比较,往往只需要实现Comparator内部类即可.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class ComparableDemo02 &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * @param args</span><br><span class=\"line\">     */</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        // TODO Auto-generated method stub</span><br><span class=\"line\"></span><br><span class=\"line\">        Student stu[]=&#123;new Student(&quot;zhangsan&quot;,20,90.0f),</span><br><span class=\"line\">                new Student(&quot;lisi&quot;,22,90.0f),</span><br><span class=\"line\">                new Student(&quot;wangwu&quot;,20,99.0f),</span><br><span class=\"line\">                new Student(&quot;sunliu&quot;,22,100.0f)&#125;;</span><br><span class=\"line\">        java.util.Arrays.sort(stu,new StudentComparator());</span><br><span class=\"line\">        for(Student s:stu)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            System.out.println(s);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"关闭idea的searchEverywhere","date":"2018-05-24T12:00:41.000Z","_content":"# 为何关闭\n英文不存在shift切换输入法的问题, 所以idea把shift连按作为searchEverywhere的快捷键. 然而中文需要不断的切换输入语言,所以这个小问题困扰了我大半年\n# 如何关闭\n![](https://i.stack.imgur.com/thuZP.png)\n![](https://i.stack.imgur.com/v59wL.png)\n1. To disable the \"Search everywhere\" feature, you need to invoke \"Go to action\" (Ctrl+Shift+A), then type \"Registry...\".\n2. Scroll down to \"ide.suppress.double.click.handler\" and check the box.\nDone!!!","source":"_posts/2018.05.24 关闭idea的searchEverywhere.md","raw":"---\ntitle: 关闭idea的searchEverywhere\ndate: 2018-05-24 20:00:41\ntags:\n---\n# 为何关闭\n英文不存在shift切换输入法的问题, 所以idea把shift连按作为searchEverywhere的快捷键. 然而中文需要不断的切换输入语言,所以这个小问题困扰了我大半年\n# 如何关闭\n![](https://i.stack.imgur.com/thuZP.png)\n![](https://i.stack.imgur.com/v59wL.png)\n1. To disable the \"Search everywhere\" feature, you need to invoke \"Go to action\" (Ctrl+Shift+A), then type \"Registry...\".\n2. Scroll down to \"ide.suppress.double.click.handler\" and check the box.\nDone!!!","slug":"关闭idea的searchEverywhere","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbn001fdcyuc4tbrrqj","content":"<h1 id=\"为何关闭\"><a href=\"#为何关闭\" class=\"headerlink\" title=\"为何关闭\"></a>为何关闭</h1><p>英文不存在shift切换输入法的问题, 所以idea把shift连按作为searchEverywhere的快捷键. 然而中文需要不断的切换输入语言,所以这个小问题困扰了我大半年</p>\n<h1 id=\"如何关闭\"><a href=\"#如何关闭\" class=\"headerlink\" title=\"如何关闭\"></a>如何关闭</h1><p><img src=\"https://i.stack.imgur.com/thuZP.png\" alt=\"\"><br><img src=\"https://i.stack.imgur.com/v59wL.png\" alt=\"\"></p>\n<ol>\n<li>To disable the “Search everywhere” feature, you need to invoke “Go to action” (Ctrl+Shift+A), then type “Registry…”.</li>\n<li>Scroll down to “ide.suppress.double.click.handler” and check the box.<br>Done!!!</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"为何关闭\"><a href=\"#为何关闭\" class=\"headerlink\" title=\"为何关闭\"></a>为何关闭</h1><p>英文不存在shift切换输入法的问题, 所以idea把shift连按作为searchEverywhere的快捷键. 然而中文需要不断的切换输入语言,所以这个小问题困扰了我大半年</p>\n<h1 id=\"如何关闭\"><a href=\"#如何关闭\" class=\"headerlink\" title=\"如何关闭\"></a>如何关闭</h1><p><img src=\"https://i.stack.imgur.com/thuZP.png\" alt=\"\"><br><img src=\"https://i.stack.imgur.com/v59wL.png\" alt=\"\"></p>\n<ol>\n<li>To disable the “Search everywhere” feature, you need to invoke “Go to action” (Ctrl+Shift+A), then type “Registry…”.</li>\n<li>Scroll down to “ide.suppress.double.click.handler” and check the box.<br>Done!!!</li>\n</ol>\n"},{"title":"java基础知识","date":"2018-07-03T09:15:42.000Z","_content":"# 同时读写\n1.CopyOnWriteArrayList/ReadWriteLock 适合在读操作远大于写操作的场景里，比如缓存\n2.ConcurrentHashMap是一个线程安全的Hash Table，它的主要功能是提供了一组和HashTable功能相同但是线程安全的方法\n3.ConcurrentHashMap可以做到读取数据不加锁，并且其内部的结构可以让其在进行写操作的时候能够将锁的粒度保持地尽量地小，不用对整个ConcurrentHashMap加锁。\n4.hashmap的底层是数组加链表的结构，它的线程是不安全的，而hastable是在hashmap的基础上，对整个哈希表（数组）加锁 sychronized实现线程安全。而我们知道，方法访问数组中的数据，可能只涉及到数组的部分，对整个数组加锁会降低线程并发执行的效率，所以如果对数组分段加锁，使用segment分片锁，这样一个线程只会锁住数组的一片，其他线程仍可以访问数组的其他片进行写操作，具有这样的分片锁的机制是就是concurrenthashmap\n# Volatile\n与锁相比，Volatile变量是一种非常简单但同时又非常脆弱的同步机制，它在某些情况下将提供优于锁的性能和伸缩性。如果严格遵循 volatile 的使用条件 —— 即变量真正独立于其他变量和自己以前的值 —— 在某些情况下可以使用 volatile 代替 synchronized 来简化代码。然而，使用 volatile 的代码往往比使用锁的代码更加容易出错。\nvolatile只能保证变量的安全，不能保证线程的安全，volatile 满足内存可见性，但不满足操作原子性\n# ReadWriteLock\nReadWriteLock 当写操作时，其他线程无法读取或写入数据，而当读操作时，其它线程无法写入数据，但却可以读取数据 。适用于 读取远远大于写入的操作.\n# ConcurrentHashMap\nConcurrentHashMap可以让读取不加锁，但是写入要加锁。很容易想明白，读写都会进行的操作中，必然是要把写加锁的，不可能不加锁。\n# Collection 与 Map\n\nCollection\n    -----List\n               -----LinkedList    非同步\n                ----ArrayList      非同步，实现了可变大小的元素数组\n                ----Vector          同步\n                         ------Stack\n    -----Set   不允许有相同的元素\n\n\nMap\n    -----HashTable        同步，实现一个key--value映射的哈希表\n    -----HashMap          非同步，\n    -----WeakHashMap   改进的HashMap，实现了“弱引用”，如果一个key不被引用，则被GC回收\n\t\nHashtable直接使用对象的hashCode，HashMap重新计算hash值，而且用与代替求模\t\n\t\n# 类中静态语句块仅在类加载时被执行一次 \n类中静态语句块仅在类加载时被执行一次 \n# Collection与Map\nCollection有两个子接口List和Set\nArrayList,Vector,LinkedList是List的实现类\nArrayList,Vector底层是数组，Vector是线程安全的\nLinkedList底层是链表，线程不安全\nHashTable HashMap是Map的实现类\nHashTable线程安全，不能放null\nHashMap线程安不全，能放null\n# Servlet\nGenericServlet 抽象类 给出了设计 servlet 的一些骨架，定义了 servlet 生命周期，还有一些得到名字、配置、初始化参数的方法，其设计的是和应用层协议无关的。\ndoget/dopost与Http协议有关，是在 javax.servlet.http.HttpServlet 中实现的\n# 修饰符\n类内部，同一个包，子类，任何地方\nprivate default protected public\n# Statement\nA，Statement是最基本的用法，采用字符串拼接的方式，存在注入漏洞\nB，PreparedStatement对Statement中的SQL语句进行预编译，同时检查合法性，效率高\nC，CallableStatement接口扩展PreparedStatement，用来调用存储过程,它提供了对输出和输入/输出参数的支持。CallableStatement 接口还具有对 PreparedStatement 接口提供的输入参数的支持。\nD，BatchedStatement用于批量操作数据库，BatchedStatement不是标准的Statement类 \n# 抽象与接口\n\nA 接口与抽象类是不同的概念。抽象类是用于捕捉子类的通用特性，接口是抽象方法的集合；\nB 实现接口必须实现接口的所有方法；\nC 接口可以继承一个或多个接口，抽象类只能继承一个类或者实现多个接口；\nD 一个类只能继承一个类，但是可以实现多个接口。\n# JVM内存\n运行时数据区包括：虚拟机栈区，堆区，方法区，本地方法栈，程序计数器\n虚拟机栈区 ：也就是我们常说的栈区，线程私有，存放基本类型，对象的引用和 returnAddress ，在编译期间完成分配。 \n堆区， JAVA 堆，也称 GC 堆，所有线程共享，存放对象的实例和数组， JAVA 堆是垃圾收集器管理的主要区域。 \n方法区：所有线程共享，存储已被虚拟机加载的类信息，常量，静态变量，即时编译器编译后的代码等数据。这个区域的内存回收目标主要是针对常量池的对象的回收和对类型的卸载。 \n程序计数器 ：线程私有，每个线程都有自己独立的程序计数器，用来指示下一条指令的地址。 \n# JVM更详细的解释\n 运行时数据区包括：程序计数器、虚拟机栈、本地方法栈、Java堆、方法区以及方法区中的运行时常量池\n\n1、程序计数器： 线程私有，是当前线程所执行的字节码的行号指示器，如果线程正执行一个java方法，计数器记录正在执行的虚拟机字节码指令的地址，如果线程正在执行的是Native方法，则计数器值为空；\n\n2、虚拟机栈： 即栈区， 线程私有 ，为虚拟机执行 Java 方法（字节码）服务，每个方法在执行的时会创建一个栈帧用于存放局部变量表、操作数栈、动态链接和方法出口等信息，每个方法的调用直至执行完成对应于栈帧的入栈和出栈；\n\n3、本地方法栈： 为虚拟机使用的 N ative 方法服务，也是 线程私有 ；\n\n4、Java 堆： 在虚拟机启动时创建， 线程共享 ，唯一目的是存放对象实例，是垃圾收集器管理的主要区域——” GC 堆“，可以细分为新生代和老年代，新生代又可以细分为 Eden 空间、 From Survivor 空间和 To Survivor 空间；物理上可以不连续，但逻辑上连续，可以选择固定大小或者扩展；\n\n5、方法区： 线程共享 ，用于存储被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。被称为“永久代”，是因为 H otSpot 虚拟机的设计团队把 GC 分代收集扩展到方法区，即使用永久代来实现方法区，像 GC 管理 Java 堆一样管理方法区，从而省去专门为方法区编写内存管理代码，内存回收目标是针对常量池的回收和堆类型的卸载；\n6、运行时常量池： 线程共享 ，是方法区的一部分， Class 文件中存放编译期生成的各种字面量和符号引用，类加载后进入方法区的运行时常量池中。 \n\n# throw 与throws\n throws用于在方法上声明该方法不需要处理的异常类型,用在方法上后面跟异常类名 可以是多个异常类\n throw用于抛出具体异常类的对象,用在方法内 后面跟异常对象只能是一个异常类型实体. \n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2018.07.03 java基础知识.md","raw":"---\ntitle: java基础知识\ndate: 2018-07-03 17:15:42\ntags:\n---\n# 同时读写\n1.CopyOnWriteArrayList/ReadWriteLock 适合在读操作远大于写操作的场景里，比如缓存\n2.ConcurrentHashMap是一个线程安全的Hash Table，它的主要功能是提供了一组和HashTable功能相同但是线程安全的方法\n3.ConcurrentHashMap可以做到读取数据不加锁，并且其内部的结构可以让其在进行写操作的时候能够将锁的粒度保持地尽量地小，不用对整个ConcurrentHashMap加锁。\n4.hashmap的底层是数组加链表的结构，它的线程是不安全的，而hastable是在hashmap的基础上，对整个哈希表（数组）加锁 sychronized实现线程安全。而我们知道，方法访问数组中的数据，可能只涉及到数组的部分，对整个数组加锁会降低线程并发执行的效率，所以如果对数组分段加锁，使用segment分片锁，这样一个线程只会锁住数组的一片，其他线程仍可以访问数组的其他片进行写操作，具有这样的分片锁的机制是就是concurrenthashmap\n# Volatile\n与锁相比，Volatile变量是一种非常简单但同时又非常脆弱的同步机制，它在某些情况下将提供优于锁的性能和伸缩性。如果严格遵循 volatile 的使用条件 —— 即变量真正独立于其他变量和自己以前的值 —— 在某些情况下可以使用 volatile 代替 synchronized 来简化代码。然而，使用 volatile 的代码往往比使用锁的代码更加容易出错。\nvolatile只能保证变量的安全，不能保证线程的安全，volatile 满足内存可见性，但不满足操作原子性\n# ReadWriteLock\nReadWriteLock 当写操作时，其他线程无法读取或写入数据，而当读操作时，其它线程无法写入数据，但却可以读取数据 。适用于 读取远远大于写入的操作.\n# ConcurrentHashMap\nConcurrentHashMap可以让读取不加锁，但是写入要加锁。很容易想明白，读写都会进行的操作中，必然是要把写加锁的，不可能不加锁。\n# Collection 与 Map\n\nCollection\n    -----List\n               -----LinkedList    非同步\n                ----ArrayList      非同步，实现了可变大小的元素数组\n                ----Vector          同步\n                         ------Stack\n    -----Set   不允许有相同的元素\n\n\nMap\n    -----HashTable        同步，实现一个key--value映射的哈希表\n    -----HashMap          非同步，\n    -----WeakHashMap   改进的HashMap，实现了“弱引用”，如果一个key不被引用，则被GC回收\n\t\nHashtable直接使用对象的hashCode，HashMap重新计算hash值，而且用与代替求模\t\n\t\n# 类中静态语句块仅在类加载时被执行一次 \n类中静态语句块仅在类加载时被执行一次 \n# Collection与Map\nCollection有两个子接口List和Set\nArrayList,Vector,LinkedList是List的实现类\nArrayList,Vector底层是数组，Vector是线程安全的\nLinkedList底层是链表，线程不安全\nHashTable HashMap是Map的实现类\nHashTable线程安全，不能放null\nHashMap线程安不全，能放null\n# Servlet\nGenericServlet 抽象类 给出了设计 servlet 的一些骨架，定义了 servlet 生命周期，还有一些得到名字、配置、初始化参数的方法，其设计的是和应用层协议无关的。\ndoget/dopost与Http协议有关，是在 javax.servlet.http.HttpServlet 中实现的\n# 修饰符\n类内部，同一个包，子类，任何地方\nprivate default protected public\n# Statement\nA，Statement是最基本的用法，采用字符串拼接的方式，存在注入漏洞\nB，PreparedStatement对Statement中的SQL语句进行预编译，同时检查合法性，效率高\nC，CallableStatement接口扩展PreparedStatement，用来调用存储过程,它提供了对输出和输入/输出参数的支持。CallableStatement 接口还具有对 PreparedStatement 接口提供的输入参数的支持。\nD，BatchedStatement用于批量操作数据库，BatchedStatement不是标准的Statement类 \n# 抽象与接口\n\nA 接口与抽象类是不同的概念。抽象类是用于捕捉子类的通用特性，接口是抽象方法的集合；\nB 实现接口必须实现接口的所有方法；\nC 接口可以继承一个或多个接口，抽象类只能继承一个类或者实现多个接口；\nD 一个类只能继承一个类，但是可以实现多个接口。\n# JVM内存\n运行时数据区包括：虚拟机栈区，堆区，方法区，本地方法栈，程序计数器\n虚拟机栈区 ：也就是我们常说的栈区，线程私有，存放基本类型，对象的引用和 returnAddress ，在编译期间完成分配。 \n堆区， JAVA 堆，也称 GC 堆，所有线程共享，存放对象的实例和数组， JAVA 堆是垃圾收集器管理的主要区域。 \n方法区：所有线程共享，存储已被虚拟机加载的类信息，常量，静态变量，即时编译器编译后的代码等数据。这个区域的内存回收目标主要是针对常量池的对象的回收和对类型的卸载。 \n程序计数器 ：线程私有，每个线程都有自己独立的程序计数器，用来指示下一条指令的地址。 \n# JVM更详细的解释\n 运行时数据区包括：程序计数器、虚拟机栈、本地方法栈、Java堆、方法区以及方法区中的运行时常量池\n\n1、程序计数器： 线程私有，是当前线程所执行的字节码的行号指示器，如果线程正执行一个java方法，计数器记录正在执行的虚拟机字节码指令的地址，如果线程正在执行的是Native方法，则计数器值为空；\n\n2、虚拟机栈： 即栈区， 线程私有 ，为虚拟机执行 Java 方法（字节码）服务，每个方法在执行的时会创建一个栈帧用于存放局部变量表、操作数栈、动态链接和方法出口等信息，每个方法的调用直至执行完成对应于栈帧的入栈和出栈；\n\n3、本地方法栈： 为虚拟机使用的 N ative 方法服务，也是 线程私有 ；\n\n4、Java 堆： 在虚拟机启动时创建， 线程共享 ，唯一目的是存放对象实例，是垃圾收集器管理的主要区域——” GC 堆“，可以细分为新生代和老年代，新生代又可以细分为 Eden 空间、 From Survivor 空间和 To Survivor 空间；物理上可以不连续，但逻辑上连续，可以选择固定大小或者扩展；\n\n5、方法区： 线程共享 ，用于存储被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。被称为“永久代”，是因为 H otSpot 虚拟机的设计团队把 GC 分代收集扩展到方法区，即使用永久代来实现方法区，像 GC 管理 Java 堆一样管理方法区，从而省去专门为方法区编写内存管理代码，内存回收目标是针对常量池的回收和堆类型的卸载；\n6、运行时常量池： 线程共享 ，是方法区的一部分， Class 文件中存放编译期生成的各种字面量和符号引用，类加载后进入方法区的运行时常量池中。 \n\n# throw 与throws\n throws用于在方法上声明该方法不需要处理的异常类型,用在方法上后面跟异常类名 可以是多个异常类\n throw用于抛出具体异常类的对象,用在方法内 后面跟异常对象只能是一个异常类型实体. \n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"java基础知识","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbp001idcyujkw9ytws","content":"<h1 id=\"同时读写\"><a href=\"#同时读写\" class=\"headerlink\" title=\"同时读写\"></a>同时读写</h1><p>1.CopyOnWriteArrayList/ReadWriteLock 适合在读操作远大于写操作的场景里，比如缓存<br>2.ConcurrentHashMap是一个线程安全的Hash Table，它的主要功能是提供了一组和HashTable功能相同但是线程安全的方法<br>3.ConcurrentHashMap可以做到读取数据不加锁，并且其内部的结构可以让其在进行写操作的时候能够将锁的粒度保持地尽量地小，不用对整个ConcurrentHashMap加锁。<br>4.hashmap的底层是数组加链表的结构，它的线程是不安全的，而hastable是在hashmap的基础上，对整个哈希表（数组）加锁 sychronized实现线程安全。而我们知道，方法访问数组中的数据，可能只涉及到数组的部分，对整个数组加锁会降低线程并发执行的效率，所以如果对数组分段加锁，使用segment分片锁，这样一个线程只会锁住数组的一片，其他线程仍可以访问数组的其他片进行写操作，具有这样的分片锁的机制是就是concurrenthashmap</p>\n<h1 id=\"Volatile\"><a href=\"#Volatile\" class=\"headerlink\" title=\"Volatile\"></a>Volatile</h1><p>与锁相比，Volatile变量是一种非常简单但同时又非常脆弱的同步机制，它在某些情况下将提供优于锁的性能和伸缩性。如果严格遵循 volatile 的使用条件 —— 即变量真正独立于其他变量和自己以前的值 —— 在某些情况下可以使用 volatile 代替 synchronized 来简化代码。然而，使用 volatile 的代码往往比使用锁的代码更加容易出错。<br>volatile只能保证变量的安全，不能保证线程的安全，volatile 满足内存可见性，但不满足操作原子性</p>\n<h1 id=\"ReadWriteLock\"><a href=\"#ReadWriteLock\" class=\"headerlink\" title=\"ReadWriteLock\"></a>ReadWriteLock</h1><p>ReadWriteLock 当写操作时，其他线程无法读取或写入数据，而当读操作时，其它线程无法写入数据，但却可以读取数据 。适用于 读取远远大于写入的操作.</p>\n<h1 id=\"ConcurrentHashMap\"><a href=\"#ConcurrentHashMap\" class=\"headerlink\" title=\"ConcurrentHashMap\"></a>ConcurrentHashMap</h1><p>ConcurrentHashMap可以让读取不加锁，但是写入要加锁。很容易想明白，读写都会进行的操作中，必然是要把写加锁的，不可能不加锁。</p>\n<h1 id=\"Collection-与-Map\"><a href=\"#Collection-与-Map\" class=\"headerlink\" title=\"Collection 与 Map\"></a>Collection 与 Map</h1><p>Collection<br>    —–List<br>               —–LinkedList    非同步<br>                —-ArrayList      非同步，实现了可变大小的元素数组<br>                —-Vector          同步<br>                         ——Stack<br>    —–Set   不允许有相同的元素</p>\n<p>Map<br>    —–HashTable        同步，实现一个key–value映射的哈希表<br>    —–HashMap          非同步，<br>    —–WeakHashMap   改进的HashMap，实现了“弱引用”，如果一个key不被引用，则被GC回收</p>\n<p>Hashtable直接使用对象的hashCode，HashMap重新计算hash值，而且用与代替求模    </p>\n<h1 id=\"类中静态语句块仅在类加载时被执行一次\"><a href=\"#类中静态语句块仅在类加载时被执行一次\" class=\"headerlink\" title=\"类中静态语句块仅在类加载时被执行一次\"></a>类中静态语句块仅在类加载时被执行一次</h1><p>类中静态语句块仅在类加载时被执行一次 </p>\n<h1 id=\"Collection与Map\"><a href=\"#Collection与Map\" class=\"headerlink\" title=\"Collection与Map\"></a>Collection与Map</h1><p>Collection有两个子接口List和Set<br>ArrayList,Vector,LinkedList是List的实现类<br>ArrayList,Vector底层是数组，Vector是线程安全的<br>LinkedList底层是链表，线程不安全<br>HashTable HashMap是Map的实现类<br>HashTable线程安全，不能放null<br>HashMap线程安不全，能放null</p>\n<h1 id=\"Servlet\"><a href=\"#Servlet\" class=\"headerlink\" title=\"Servlet\"></a>Servlet</h1><p>GenericServlet 抽象类 给出了设计 servlet 的一些骨架，定义了 servlet 生命周期，还有一些得到名字、配置、初始化参数的方法，其设计的是和应用层协议无关的。<br>doget/dopost与Http协议有关，是在 javax.servlet.http.HttpServlet 中实现的</p>\n<h1 id=\"修饰符\"><a href=\"#修饰符\" class=\"headerlink\" title=\"修饰符\"></a>修饰符</h1><p>类内部，同一个包，子类，任何地方<br>private default protected public</p>\n<h1 id=\"Statement\"><a href=\"#Statement\" class=\"headerlink\" title=\"Statement\"></a>Statement</h1><p>A，Statement是最基本的用法，采用字符串拼接的方式，存在注入漏洞<br>B，PreparedStatement对Statement中的SQL语句进行预编译，同时检查合法性，效率高<br>C，CallableStatement接口扩展PreparedStatement，用来调用存储过程,它提供了对输出和输入/输出参数的支持。CallableStatement 接口还具有对 PreparedStatement 接口提供的输入参数的支持。<br>D，BatchedStatement用于批量操作数据库，BatchedStatement不是标准的Statement类 </p>\n<h1 id=\"抽象与接口\"><a href=\"#抽象与接口\" class=\"headerlink\" title=\"抽象与接口\"></a>抽象与接口</h1><p>A 接口与抽象类是不同的概念。抽象类是用于捕捉子类的通用特性，接口是抽象方法的集合；<br>B 实现接口必须实现接口的所有方法；<br>C 接口可以继承一个或多个接口，抽象类只能继承一个类或者实现多个接口；<br>D 一个类只能继承一个类，但是可以实现多个接口。</p>\n<h1 id=\"JVM内存\"><a href=\"#JVM内存\" class=\"headerlink\" title=\"JVM内存\"></a>JVM内存</h1><p>运行时数据区包括：虚拟机栈区，堆区，方法区，本地方法栈，程序计数器<br>虚拟机栈区 ：也就是我们常说的栈区，线程私有，存放基本类型，对象的引用和 returnAddress ，在编译期间完成分配。<br>堆区， JAVA 堆，也称 GC 堆，所有线程共享，存放对象的实例和数组， JAVA 堆是垃圾收集器管理的主要区域。<br>方法区：所有线程共享，存储已被虚拟机加载的类信息，常量，静态变量，即时编译器编译后的代码等数据。这个区域的内存回收目标主要是针对常量池的对象的回收和对类型的卸载。<br>程序计数器 ：线程私有，每个线程都有自己独立的程序计数器，用来指示下一条指令的地址。 </p>\n<h1 id=\"JVM更详细的解释\"><a href=\"#JVM更详细的解释\" class=\"headerlink\" title=\"JVM更详细的解释\"></a>JVM更详细的解释</h1><p> 运行时数据区包括：程序计数器、虚拟机栈、本地方法栈、Java堆、方法区以及方法区中的运行时常量池</p>\n<p>1、程序计数器： 线程私有，是当前线程所执行的字节码的行号指示器，如果线程正执行一个java方法，计数器记录正在执行的虚拟机字节码指令的地址，如果线程正在执行的是Native方法，则计数器值为空；</p>\n<p>2、虚拟机栈： 即栈区， 线程私有 ，为虚拟机执行 Java 方法（字节码）服务，每个方法在执行的时会创建一个栈帧用于存放局部变量表、操作数栈、动态链接和方法出口等信息，每个方法的调用直至执行完成对应于栈帧的入栈和出栈；</p>\n<p>3、本地方法栈： 为虚拟机使用的 N ative 方法服务，也是 线程私有 ；</p>\n<p>4、Java 堆： 在虚拟机启动时创建， 线程共享 ，唯一目的是存放对象实例，是垃圾收集器管理的主要区域——” GC 堆“，可以细分为新生代和老年代，新生代又可以细分为 Eden 空间、 From Survivor 空间和 To Survivor 空间；物理上可以不连续，但逻辑上连续，可以选择固定大小或者扩展；</p>\n<p>5、方法区： 线程共享 ，用于存储被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。被称为“永久代”，是因为 H otSpot 虚拟机的设计团队把 GC 分代收集扩展到方法区，即使用永久代来实现方法区，像 GC 管理 Java 堆一样管理方法区，从而省去专门为方法区编写内存管理代码，内存回收目标是针对常量池的回收和堆类型的卸载；<br>6、运行时常量池： 线程共享 ，是方法区的一部分， Class 文件中存放编译期生成的各种字面量和符号引用，类加载后进入方法区的运行时常量池中。 </p>\n<h1 id=\"throw-与throws\"><a href=\"#throw-与throws\" class=\"headerlink\" title=\"throw 与throws\"></a>throw 与throws</h1><p> throws用于在方法上声明该方法不需要处理的异常类型,用在方法上后面跟异常类名 可以是多个异常类<br> throw用于抛出具体异常类的对象,用在方法内 后面跟异常对象只能是一个异常类型实体. </p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"同时读写\"><a href=\"#同时读写\" class=\"headerlink\" title=\"同时读写\"></a>同时读写</h1><p>1.CopyOnWriteArrayList/ReadWriteLock 适合在读操作远大于写操作的场景里，比如缓存<br>2.ConcurrentHashMap是一个线程安全的Hash Table，它的主要功能是提供了一组和HashTable功能相同但是线程安全的方法<br>3.ConcurrentHashMap可以做到读取数据不加锁，并且其内部的结构可以让其在进行写操作的时候能够将锁的粒度保持地尽量地小，不用对整个ConcurrentHashMap加锁。<br>4.hashmap的底层是数组加链表的结构，它的线程是不安全的，而hastable是在hashmap的基础上，对整个哈希表（数组）加锁 sychronized实现线程安全。而我们知道，方法访问数组中的数据，可能只涉及到数组的部分，对整个数组加锁会降低线程并发执行的效率，所以如果对数组分段加锁，使用segment分片锁，这样一个线程只会锁住数组的一片，其他线程仍可以访问数组的其他片进行写操作，具有这样的分片锁的机制是就是concurrenthashmap</p>\n<h1 id=\"Volatile\"><a href=\"#Volatile\" class=\"headerlink\" title=\"Volatile\"></a>Volatile</h1><p>与锁相比，Volatile变量是一种非常简单但同时又非常脆弱的同步机制，它在某些情况下将提供优于锁的性能和伸缩性。如果严格遵循 volatile 的使用条件 —— 即变量真正独立于其他变量和自己以前的值 —— 在某些情况下可以使用 volatile 代替 synchronized 来简化代码。然而，使用 volatile 的代码往往比使用锁的代码更加容易出错。<br>volatile只能保证变量的安全，不能保证线程的安全，volatile 满足内存可见性，但不满足操作原子性</p>\n<h1 id=\"ReadWriteLock\"><a href=\"#ReadWriteLock\" class=\"headerlink\" title=\"ReadWriteLock\"></a>ReadWriteLock</h1><p>ReadWriteLock 当写操作时，其他线程无法读取或写入数据，而当读操作时，其它线程无法写入数据，但却可以读取数据 。适用于 读取远远大于写入的操作.</p>\n<h1 id=\"ConcurrentHashMap\"><a href=\"#ConcurrentHashMap\" class=\"headerlink\" title=\"ConcurrentHashMap\"></a>ConcurrentHashMap</h1><p>ConcurrentHashMap可以让读取不加锁，但是写入要加锁。很容易想明白，读写都会进行的操作中，必然是要把写加锁的，不可能不加锁。</p>\n<h1 id=\"Collection-与-Map\"><a href=\"#Collection-与-Map\" class=\"headerlink\" title=\"Collection 与 Map\"></a>Collection 与 Map</h1><p>Collection<br>    —–List<br>               —–LinkedList    非同步<br>                —-ArrayList      非同步，实现了可变大小的元素数组<br>                —-Vector          同步<br>                         ——Stack<br>    —–Set   不允许有相同的元素</p>\n<p>Map<br>    —–HashTable        同步，实现一个key–value映射的哈希表<br>    —–HashMap          非同步，<br>    —–WeakHashMap   改进的HashMap，实现了“弱引用”，如果一个key不被引用，则被GC回收</p>\n<p>Hashtable直接使用对象的hashCode，HashMap重新计算hash值，而且用与代替求模    </p>\n<h1 id=\"类中静态语句块仅在类加载时被执行一次\"><a href=\"#类中静态语句块仅在类加载时被执行一次\" class=\"headerlink\" title=\"类中静态语句块仅在类加载时被执行一次\"></a>类中静态语句块仅在类加载时被执行一次</h1><p>类中静态语句块仅在类加载时被执行一次 </p>\n<h1 id=\"Collection与Map\"><a href=\"#Collection与Map\" class=\"headerlink\" title=\"Collection与Map\"></a>Collection与Map</h1><p>Collection有两个子接口List和Set<br>ArrayList,Vector,LinkedList是List的实现类<br>ArrayList,Vector底层是数组，Vector是线程安全的<br>LinkedList底层是链表，线程不安全<br>HashTable HashMap是Map的实现类<br>HashTable线程安全，不能放null<br>HashMap线程安不全，能放null</p>\n<h1 id=\"Servlet\"><a href=\"#Servlet\" class=\"headerlink\" title=\"Servlet\"></a>Servlet</h1><p>GenericServlet 抽象类 给出了设计 servlet 的一些骨架，定义了 servlet 生命周期，还有一些得到名字、配置、初始化参数的方法，其设计的是和应用层协议无关的。<br>doget/dopost与Http协议有关，是在 javax.servlet.http.HttpServlet 中实现的</p>\n<h1 id=\"修饰符\"><a href=\"#修饰符\" class=\"headerlink\" title=\"修饰符\"></a>修饰符</h1><p>类内部，同一个包，子类，任何地方<br>private default protected public</p>\n<h1 id=\"Statement\"><a href=\"#Statement\" class=\"headerlink\" title=\"Statement\"></a>Statement</h1><p>A，Statement是最基本的用法，采用字符串拼接的方式，存在注入漏洞<br>B，PreparedStatement对Statement中的SQL语句进行预编译，同时检查合法性，效率高<br>C，CallableStatement接口扩展PreparedStatement，用来调用存储过程,它提供了对输出和输入/输出参数的支持。CallableStatement 接口还具有对 PreparedStatement 接口提供的输入参数的支持。<br>D，BatchedStatement用于批量操作数据库，BatchedStatement不是标准的Statement类 </p>\n<h1 id=\"抽象与接口\"><a href=\"#抽象与接口\" class=\"headerlink\" title=\"抽象与接口\"></a>抽象与接口</h1><p>A 接口与抽象类是不同的概念。抽象类是用于捕捉子类的通用特性，接口是抽象方法的集合；<br>B 实现接口必须实现接口的所有方法；<br>C 接口可以继承一个或多个接口，抽象类只能继承一个类或者实现多个接口；<br>D 一个类只能继承一个类，但是可以实现多个接口。</p>\n<h1 id=\"JVM内存\"><a href=\"#JVM内存\" class=\"headerlink\" title=\"JVM内存\"></a>JVM内存</h1><p>运行时数据区包括：虚拟机栈区，堆区，方法区，本地方法栈，程序计数器<br>虚拟机栈区 ：也就是我们常说的栈区，线程私有，存放基本类型，对象的引用和 returnAddress ，在编译期间完成分配。<br>堆区， JAVA 堆，也称 GC 堆，所有线程共享，存放对象的实例和数组， JAVA 堆是垃圾收集器管理的主要区域。<br>方法区：所有线程共享，存储已被虚拟机加载的类信息，常量，静态变量，即时编译器编译后的代码等数据。这个区域的内存回收目标主要是针对常量池的对象的回收和对类型的卸载。<br>程序计数器 ：线程私有，每个线程都有自己独立的程序计数器，用来指示下一条指令的地址。 </p>\n<h1 id=\"JVM更详细的解释\"><a href=\"#JVM更详细的解释\" class=\"headerlink\" title=\"JVM更详细的解释\"></a>JVM更详细的解释</h1><p> 运行时数据区包括：程序计数器、虚拟机栈、本地方法栈、Java堆、方法区以及方法区中的运行时常量池</p>\n<p>1、程序计数器： 线程私有，是当前线程所执行的字节码的行号指示器，如果线程正执行一个java方法，计数器记录正在执行的虚拟机字节码指令的地址，如果线程正在执行的是Native方法，则计数器值为空；</p>\n<p>2、虚拟机栈： 即栈区， 线程私有 ，为虚拟机执行 Java 方法（字节码）服务，每个方法在执行的时会创建一个栈帧用于存放局部变量表、操作数栈、动态链接和方法出口等信息，每个方法的调用直至执行完成对应于栈帧的入栈和出栈；</p>\n<p>3、本地方法栈： 为虚拟机使用的 N ative 方法服务，也是 线程私有 ；</p>\n<p>4、Java 堆： 在虚拟机启动时创建， 线程共享 ，唯一目的是存放对象实例，是垃圾收集器管理的主要区域——” GC 堆“，可以细分为新生代和老年代，新生代又可以细分为 Eden 空间、 From Survivor 空间和 To Survivor 空间；物理上可以不连续，但逻辑上连续，可以选择固定大小或者扩展；</p>\n<p>5、方法区： 线程共享 ，用于存储被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。被称为“永久代”，是因为 H otSpot 虚拟机的设计团队把 GC 分代收集扩展到方法区，即使用永久代来实现方法区，像 GC 管理 Java 堆一样管理方法区，从而省去专门为方法区编写内存管理代码，内存回收目标是针对常量池的回收和堆类型的卸载；<br>6、运行时常量池： 线程共享 ，是方法区的一部分， Class 文件中存放编译期生成的各种字面量和符号引用，类加载后进入方法区的运行时常量池中。 </p>\n<h1 id=\"throw-与throws\"><a href=\"#throw-与throws\" class=\"headerlink\" title=\"throw 与throws\"></a>throw 与throws</h1><p> throws用于在方法上声明该方法不需要处理的异常类型,用在方法上后面跟异常类名 可以是多个异常类<br> throw用于抛出具体异常类的对象,用在方法内 后面跟异常对象只能是一个异常类型实体. </p>\n"},{"title":"3次握手4次挥手","date":"2018-07-15T03:07:28.000Z","_content":"# 什么是3次握手\n上图中的三次挥手说的是，客户端向服务器发请求，服务器接收请求，服务器接收请求之后发送一个连接标志，客户端接收连接标志````\n之后也向服务器发送一个连接标志，至此连接完成。用打电话类比的话就是：\n小明拨打小红的电话\n小红按下通话键并说了声，喂 （一次握手）\n小明听到小红的回应，也说了声，喂 （二次握手）\n小红接收到小明的回应 （三次握手）\n```\n# 什么是4次挥手\n为什么有4次挥手呢，4次挥手的作用就是断开连接，之所以要断开连接是因为TCP/IP协议是要占用端口的，而计算机的端口是有限的，所以一次传输完成之后是要断开连接的，断开连接的方式就是4次挥手。\n连接是由客户端发起的，所以断开连接也要有客户端发起，因为服务器是被动的。上图的最后一部分就是4次挥手，还是用小明和小红打电话来类比，\n```\n小明：我这没事儿了，你还有事儿吗？ （1次挥手）\n小红：我也没事儿了，你确定没事儿了吗？ （2次挥手）\n小红：我要挂电话了。 （3次挥手）\n小明：好吧，你挂吧。 （4次挥手）\n\n```\n# 握手的具体内容\n第一次握手：建立连接时，客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号（Synchronize Sequence Numbers）。\n第二次握手：服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；\n第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。\n\n# 未连接队列\n在三次握手协议中，服务器维护一个未连接队列，该队列为每个客户端的SYN包（syn=j）开设一个条目，该条目表明服务器已收到SYN包，并向客户发出确认，正在等待客户的确认包。这些条目所标识的连接在服务器处于SYN_RECV状态，当服务器收到客户的确认包时，删除该条目，服务器进入ESTABLISHED状态。\n# 关闭TCP连接：改进的三次握手\n\n对于一个已经建立的连接，TCP使用改进的三次握手来释放连接（使用一个带有FIN附加标记的报文段）。TCP关闭连接的步骤如下：\n第一步，当主机A的应用程序通知TCP数据已经发送完毕时，TCP向主机B发送一个带有FIN附加标记的报文段（FIN表示英文finish）。\n\n第二步，主机B收到这个FIN报文段之后，并不立即用FIN报文段回复主机A，而是先向主机A发送一个确认序号ACK，同时通知自己相应的应用程序：对方要求关闭连接（先发送ACK的目的是为了防止在这段时间内，对方重传FIN报文段）。\n\n第三步，主机B的应用程序告诉TCP：我要彻底的关闭连接，TCP向主机A送一个FIN报文段。\n\n第四步，主机A收到这个FIN报文段后，向主机B发送一个ACK表示连接彻底释放。\n\n# 为什么连接的时候是三次握手，关闭的时候却是四次握手？\n\n答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，\"你发的FIN报文我收到了\"。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。\n# 背景描述(另一篇文章)\n通过上一篇中网络模型中的IP层的介绍，我们知道网络层，可以实现两个主机之间的通信。但是这并不具体，因为，真正进行通信的实体是在主机中的进程，是一个主机中的一个进程与另外一个主机中的一个进程在交换数据。IP协议虽然能把数据报文送到目的主机，但是并没有交付给主机的具体应用进程。而端到端的通信才应该是应用进程之间的通信。\n\nUDP，在传送数据前不需要先建立连接，远地的主机在收到UDP报文后也不需要给出任何确认。虽然UDP不提供可靠交付，但是正是因为这样，省去和很多的开销，使得它的速度比较快，比如一些对实时性要求较高的服务，就常常使用的是UDP。对应的应用层的协议主要有 DNS,TFTP,DHCP,SNMP,NFS 等。\n\nTCP，提供面向连接的服务，在传送数据之前必须先建立连接，数据传送完成后要释放连接。因此TCP是一种可靠的的运输服务，但是正因为这样，不可避免的增加了许多的开销，比如确认，流量控制等。对应的应用层的协议主要有 SMTP,TELNET,HTTP,FTP 等。\n# TCP报文首部\n<ol>\n<li>源端口和目的端口，各占2个字节，分别写入源端口和目的端口；</li>\n<li>序号，占4个字节，<font color=\"red\">TCP连接中传送的字节流中的每个字节都按顺序编号</font>。例如，一段报文的序号字段值是 301 ，而携带的数据共有100字段，显然下一个报文段（如果还有的话）的数据序号应该从401开始；</li>\n<li>确认号，占4个字节，<font color=\"red\">是期望收到对方下一个报文的第一个数据字节的序号</font>。例如，B收到了A发送过来的报文，其序列号字段是501，而数据长度是200字节，<font \tcolor=\"red\">这表明B正确的收到了A发送的到序号700为止的数据</font>。因此，B期望收到A的下一个数据序号是701，于是B在发送给A的确认报文段中把确认号置为701；</li>\n<li>数据偏移，占4位，它指出TCP报文的数据距离TCP报文段的起始处有多远；</li>\n<li>保留，占6位，保留今后使用，但目前应都位0；</li>\n<li>紧急URG，当URG=1，表明紧急指针字段有效。告诉系统此报文段中有紧急数据；</li>\n<li>确认ACK，仅当ACK=1时，确认号字段才有效。TCP规定，在连接建立后所有报文的传输都必须把ACK置1；</li>\n<li>推送PSH，当两个应用进程进行交互式通信时，有时在一端的应用进程希望在键入一个命令后立即就能收到对方的响应，这时候就将PSH=1；</li>\n<li>复位RST，当RST=1，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立连接；</li>\n<li>同步SYN，在连接建立时用来同步序号。当SYN=1，ACK=0，表明是连接请求报文，若同意连接，则响应报文中应该使SYN=1，ACK=1；</li>\n<li>终止FIN，用来释放连接。当FIN=1，表明此报文的发送方的数据已经发送完毕，并且要求释放；</li>\n<li>窗口，占2字节，指的是通知接收方，发送本报文你需要有多大的空间来接受；</li>\n<li>检验和，占2字节，校验首部和数据这两部分；</li>\n<li>紧急指针，占2字节，指出本报文段中的紧急数据的字节数；</li>\n<li>选项，长度可变，定义一些其他的可选的参数。</li>\n</ol>\n \n# TCP连接的建立\n<strong>最开始的时候客户端和服务器都是处于CLOSED状态。主动打开连接的为客户端，被动打开连接的是服务器。</strong>\n\n<ol>\n<li>TCP服务器进程先创建传输控制块TCB，时刻准备接受客户进程的连接请求，此时服务器就进入了LISTEN（监听）状态；</li>\n<li>TCP客户进程也是先创建传输控制块TCB，然后向服务器发出连接请求报文，这是报文首部中的同部位SYN=1，同时选择一个初始序列号 seq=x ，此时，TCP客户端进程进入了 SYN-SENT（同步已发送状态）状态。<font color=\"red\">TCP规定，SYN报文段（SYN=1的报文段）不能携带数据，但需要消耗掉一个序号。</font></li>\n<li>TCP服务器收到请求报文后，如果同意连接，则发出确认报文。确认报文中应该 ACK=1，SYN=1，确认号是ack=x+1，同时也要为自己初始化一个序列号 seq=y，此时，TCP服务器进程进入了SYN-RCVD（同步收到）状态。<font color=\"red\">这个报文也不能携带数据，但是同样要消耗一个序号。</font></li>\n<li>TCP客户进程收到确认后，还要向服务器给出确认。确认报文的ACK=1，ack=y+1，自己的序列号seq=x+1，此时，TCP连接建立，客户端进入ESTABLISHED（已建立连接）状态。<font color=\"red\">TCP规定，ACK报文段可以携带数据，但是如果不携带数据则不消耗序号。</font></li>\n<li>当服务器收到客户端的确认后也进入ESTABLISHED状态，此后双方就可以开始通信了。 <br>\n<img src=\"https://img-blog.csdn.net/20170605110405666?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXpjc3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"三次握手\" title=\"\"></li>\n</ol>\n# 四次握手\n<p>数据传输完毕后，双方都可释放连接。最开始的时候，客户端和服务器都是处于ESTABLISHED状态，然后客户端主动关闭，服务器被动关闭。</p>\n<ol>\n<li>客户端进程发出连接释放报文，并且停止发送数据。释放数据报文首部，FIN=1，其序列号为seq=u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态。 <font color=\"red\">TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。</font></li>\n<li>服务器收到连接释放报文，发出确认报文，ACK=1，ack=u+1，并且带上自己的序列号seq=v，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。<font color=\"red\">TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。</font><font color=\"blue\">这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。</font></li>\n<li>客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文<font color=\"red\">（在这之前还需要接受服务器发送的最后的数据）</font>。</li>\n<li>服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，FIN=1，ack=u+1，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为seq=w，此时，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。</li>\n<li>客户端收到服务器的连接释放报文后，必须发出确认，ACK=1，ack=w+1，而自己的序列号是seq=u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态。<font color=\"red\">注意此时TCP连接还没有释放，必须经过2<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2217;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.598em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.476em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.678em, 1000.41em, 2.465em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mo\" id=\"MathJax-Span-3\" style=\"font-family: MathJax_Main;\">∗</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.029em; border-left: 0px solid; width: 0px; height: 0.659em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo>∗</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">*</script>MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。</font></li>\n<li>服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。<font color=\"red\">可以看到，服务器结束TCP连接的时间要比客户端早一些。</font></li>\n</ol>\n# 为什么客户端还要等待2MSL\n<blockquote>\n  <p>MSL（Maximum Segment Lifetime），TCP允许不同的实现可以设置不同的MSL值。</p>\n  \n  <p>第一，保证客户端发送的最后一个ACK报文能够到达服务器，因为这个ACK报文可能丢失，<font color=\"red\">站在服务器的角度看来，我已经发送了FIN+ACK报文请求断开了，客户端还没有给我回应，应该是我发送的请求断开报文它没有收到，于是服务器又会重新发送一次</font>，而客户端就能在这个2MSL时间段内收到这个重传的报文，接着给出回应报文，并且会重启2MSL计时器。</p>\n  \n  <p>第二，防止类似与“三次握手”中提到了的“已经失效的连接请求报文段”出现在本连接中。客户端发送完最后一个确认报文后，在这个2MSL时间中，就可以使本连接持续的时间内所产生的所有报文段都从网络中消失。这样新的连接中不会出现旧连接的请求报文。</p>\n  \n  <p>为什么建立连接是三次握手，关闭连接确是四次挥手呢？</p>\n  \n  <p>建立连接的时候， 服务器在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。 <br>\n  而关闭连接时，服务器收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，而自己也未必全部数据都发送给对方了，所以己方可以立即关闭，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，己方ACK和FIN一般都会分开发送，从而导致多了一次。</p>\n</blockquote>\n# 如果已经建立了连接，但是客户端突然出现故障了怎么办？\t\n<p>TCP还设有一个保活计时器，显然，客户端如果出现故障，服务器不能一直等下去，白白浪费资源。服务器每收到一次客户端的请求后都会重新复位这个计时器，时间通常是设置为2小时，若两小时还没有收到客户端的任何数据，服务器就会发送一个探测报文段，以后每隔75分钟发送一次。若一连发送10个探测报文仍然没反应，服务器就认为客户端出了故障，接着就关闭连接。</p>\n\n\n\n\n\n\n\n","source":"_posts/2018.07.15 3次握手4次挥手.md","raw":"---\ntitle: 3次握手4次挥手\ndate: 2018-07-15 11:07:28\ntags: 面试\n---\n# 什么是3次握手\n上图中的三次挥手说的是，客户端向服务器发请求，服务器接收请求，服务器接收请求之后发送一个连接标志，客户端接收连接标志````\n之后也向服务器发送一个连接标志，至此连接完成。用打电话类比的话就是：\n小明拨打小红的电话\n小红按下通话键并说了声，喂 （一次握手）\n小明听到小红的回应，也说了声，喂 （二次握手）\n小红接收到小明的回应 （三次握手）\n```\n# 什么是4次挥手\n为什么有4次挥手呢，4次挥手的作用就是断开连接，之所以要断开连接是因为TCP/IP协议是要占用端口的，而计算机的端口是有限的，所以一次传输完成之后是要断开连接的，断开连接的方式就是4次挥手。\n连接是由客户端发起的，所以断开连接也要有客户端发起，因为服务器是被动的。上图的最后一部分就是4次挥手，还是用小明和小红打电话来类比，\n```\n小明：我这没事儿了，你还有事儿吗？ （1次挥手）\n小红：我也没事儿了，你确定没事儿了吗？ （2次挥手）\n小红：我要挂电话了。 （3次挥手）\n小明：好吧，你挂吧。 （4次挥手）\n\n```\n# 握手的具体内容\n第一次握手：建立连接时，客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号（Synchronize Sequence Numbers）。\n第二次握手：服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；\n第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。\n\n# 未连接队列\n在三次握手协议中，服务器维护一个未连接队列，该队列为每个客户端的SYN包（syn=j）开设一个条目，该条目表明服务器已收到SYN包，并向客户发出确认，正在等待客户的确认包。这些条目所标识的连接在服务器处于SYN_RECV状态，当服务器收到客户的确认包时，删除该条目，服务器进入ESTABLISHED状态。\n# 关闭TCP连接：改进的三次握手\n\n对于一个已经建立的连接，TCP使用改进的三次握手来释放连接（使用一个带有FIN附加标记的报文段）。TCP关闭连接的步骤如下：\n第一步，当主机A的应用程序通知TCP数据已经发送完毕时，TCP向主机B发送一个带有FIN附加标记的报文段（FIN表示英文finish）。\n\n第二步，主机B收到这个FIN报文段之后，并不立即用FIN报文段回复主机A，而是先向主机A发送一个确认序号ACK，同时通知自己相应的应用程序：对方要求关闭连接（先发送ACK的目的是为了防止在这段时间内，对方重传FIN报文段）。\n\n第三步，主机B的应用程序告诉TCP：我要彻底的关闭连接，TCP向主机A送一个FIN报文段。\n\n第四步，主机A收到这个FIN报文段后，向主机B发送一个ACK表示连接彻底释放。\n\n# 为什么连接的时候是三次握手，关闭的时候却是四次握手？\n\n答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，\"你发的FIN报文我收到了\"。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。\n# 背景描述(另一篇文章)\n通过上一篇中网络模型中的IP层的介绍，我们知道网络层，可以实现两个主机之间的通信。但是这并不具体，因为，真正进行通信的实体是在主机中的进程，是一个主机中的一个进程与另外一个主机中的一个进程在交换数据。IP协议虽然能把数据报文送到目的主机，但是并没有交付给主机的具体应用进程。而端到端的通信才应该是应用进程之间的通信。\n\nUDP，在传送数据前不需要先建立连接，远地的主机在收到UDP报文后也不需要给出任何确认。虽然UDP不提供可靠交付，但是正是因为这样，省去和很多的开销，使得它的速度比较快，比如一些对实时性要求较高的服务，就常常使用的是UDP。对应的应用层的协议主要有 DNS,TFTP,DHCP,SNMP,NFS 等。\n\nTCP，提供面向连接的服务，在传送数据之前必须先建立连接，数据传送完成后要释放连接。因此TCP是一种可靠的的运输服务，但是正因为这样，不可避免的增加了许多的开销，比如确认，流量控制等。对应的应用层的协议主要有 SMTP,TELNET,HTTP,FTP 等。\n# TCP报文首部\n<ol>\n<li>源端口和目的端口，各占2个字节，分别写入源端口和目的端口；</li>\n<li>序号，占4个字节，<font color=\"red\">TCP连接中传送的字节流中的每个字节都按顺序编号</font>。例如，一段报文的序号字段值是 301 ，而携带的数据共有100字段，显然下一个报文段（如果还有的话）的数据序号应该从401开始；</li>\n<li>确认号，占4个字节，<font color=\"red\">是期望收到对方下一个报文的第一个数据字节的序号</font>。例如，B收到了A发送过来的报文，其序列号字段是501，而数据长度是200字节，<font \tcolor=\"red\">这表明B正确的收到了A发送的到序号700为止的数据</font>。因此，B期望收到A的下一个数据序号是701，于是B在发送给A的确认报文段中把确认号置为701；</li>\n<li>数据偏移，占4位，它指出TCP报文的数据距离TCP报文段的起始处有多远；</li>\n<li>保留，占6位，保留今后使用，但目前应都位0；</li>\n<li>紧急URG，当URG=1，表明紧急指针字段有效。告诉系统此报文段中有紧急数据；</li>\n<li>确认ACK，仅当ACK=1时，确认号字段才有效。TCP规定，在连接建立后所有报文的传输都必须把ACK置1；</li>\n<li>推送PSH，当两个应用进程进行交互式通信时，有时在一端的应用进程希望在键入一个命令后立即就能收到对方的响应，这时候就将PSH=1；</li>\n<li>复位RST，当RST=1，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立连接；</li>\n<li>同步SYN，在连接建立时用来同步序号。当SYN=1，ACK=0，表明是连接请求报文，若同意连接，则响应报文中应该使SYN=1，ACK=1；</li>\n<li>终止FIN，用来释放连接。当FIN=1，表明此报文的发送方的数据已经发送完毕，并且要求释放；</li>\n<li>窗口，占2字节，指的是通知接收方，发送本报文你需要有多大的空间来接受；</li>\n<li>检验和，占2字节，校验首部和数据这两部分；</li>\n<li>紧急指针，占2字节，指出本报文段中的紧急数据的字节数；</li>\n<li>选项，长度可变，定义一些其他的可选的参数。</li>\n</ol>\n \n# TCP连接的建立\n<strong>最开始的时候客户端和服务器都是处于CLOSED状态。主动打开连接的为客户端，被动打开连接的是服务器。</strong>\n\n<ol>\n<li>TCP服务器进程先创建传输控制块TCB，时刻准备接受客户进程的连接请求，此时服务器就进入了LISTEN（监听）状态；</li>\n<li>TCP客户进程也是先创建传输控制块TCB，然后向服务器发出连接请求报文，这是报文首部中的同部位SYN=1，同时选择一个初始序列号 seq=x ，此时，TCP客户端进程进入了 SYN-SENT（同步已发送状态）状态。<font color=\"red\">TCP规定，SYN报文段（SYN=1的报文段）不能携带数据，但需要消耗掉一个序号。</font></li>\n<li>TCP服务器收到请求报文后，如果同意连接，则发出确认报文。确认报文中应该 ACK=1，SYN=1，确认号是ack=x+1，同时也要为自己初始化一个序列号 seq=y，此时，TCP服务器进程进入了SYN-RCVD（同步收到）状态。<font color=\"red\">这个报文也不能携带数据，但是同样要消耗一个序号。</font></li>\n<li>TCP客户进程收到确认后，还要向服务器给出确认。确认报文的ACK=1，ack=y+1，自己的序列号seq=x+1，此时，TCP连接建立，客户端进入ESTABLISHED（已建立连接）状态。<font color=\"red\">TCP规定，ACK报文段可以携带数据，但是如果不携带数据则不消耗序号。</font></li>\n<li>当服务器收到客户端的确认后也进入ESTABLISHED状态，此后双方就可以开始通信了。 <br>\n<img src=\"https://img-blog.csdn.net/20170605110405666?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXpjc3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"三次握手\" title=\"\"></li>\n</ol>\n# 四次握手\n<p>数据传输完毕后，双方都可释放连接。最开始的时候，客户端和服务器都是处于ESTABLISHED状态，然后客户端主动关闭，服务器被动关闭。</p>\n<ol>\n<li>客户端进程发出连接释放报文，并且停止发送数据。释放数据报文首部，FIN=1，其序列号为seq=u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态。 <font color=\"red\">TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。</font></li>\n<li>服务器收到连接释放报文，发出确认报文，ACK=1，ack=u+1，并且带上自己的序列号seq=v，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。<font color=\"red\">TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。</font><font color=\"blue\">这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。</font></li>\n<li>客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文<font color=\"red\">（在这之前还需要接受服务器发送的最后的数据）</font>。</li>\n<li>服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，FIN=1，ack=u+1，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为seq=w，此时，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。</li>\n<li>客户端收到服务器的连接释放报文后，必须发出确认，ACK=1，ack=w+1，而自己的序列号是seq=u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态。<font color=\"red\">注意此时TCP连接还没有释放，必须经过2<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2217;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.598em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.476em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.678em, 1000.41em, 2.465em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mo\" id=\"MathJax-Span-3\" style=\"font-family: MathJax_Main;\">∗</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.029em; border-left: 0px solid; width: 0px; height: 0.659em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo>∗</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">*</script>MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。</font></li>\n<li>服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。<font color=\"red\">可以看到，服务器结束TCP连接的时间要比客户端早一些。</font></li>\n</ol>\n# 为什么客户端还要等待2MSL\n<blockquote>\n  <p>MSL（Maximum Segment Lifetime），TCP允许不同的实现可以设置不同的MSL值。</p>\n  \n  <p>第一，保证客户端发送的最后一个ACK报文能够到达服务器，因为这个ACK报文可能丢失，<font color=\"red\">站在服务器的角度看来，我已经发送了FIN+ACK报文请求断开了，客户端还没有给我回应，应该是我发送的请求断开报文它没有收到，于是服务器又会重新发送一次</font>，而客户端就能在这个2MSL时间段内收到这个重传的报文，接着给出回应报文，并且会重启2MSL计时器。</p>\n  \n  <p>第二，防止类似与“三次握手”中提到了的“已经失效的连接请求报文段”出现在本连接中。客户端发送完最后一个确认报文后，在这个2MSL时间中，就可以使本连接持续的时间内所产生的所有报文段都从网络中消失。这样新的连接中不会出现旧连接的请求报文。</p>\n  \n  <p>为什么建立连接是三次握手，关闭连接确是四次挥手呢？</p>\n  \n  <p>建立连接的时候， 服务器在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。 <br>\n  而关闭连接时，服务器收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，而自己也未必全部数据都发送给对方了，所以己方可以立即关闭，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，己方ACK和FIN一般都会分开发送，从而导致多了一次。</p>\n</blockquote>\n# 如果已经建立了连接，但是客户端突然出现故障了怎么办？\t\n<p>TCP还设有一个保活计时器，显然，客户端如果出现故障，服务器不能一直等下去，白白浪费资源。服务器每收到一次客户端的请求后都会重新复位这个计时器，时间通常是设置为2小时，若两小时还没有收到客户端的任何数据，服务器就会发送一个探测报文段，以后每隔75分钟发送一次。若一连发送10个探测报文仍然没反应，服务器就认为客户端出了故障，接着就关闭连接。</p>\n\n\n\n\n\n\n\n","slug":"3次握手4次挥手","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbq001jdcyu1zqtqoy3","content":"<h1 id=\"什么是3次握手\"><a href=\"#什么是3次握手\" class=\"headerlink\" title=\"什么是3次握手\"></a>什么是3次握手</h1><p>上图中的三次挥手说的是，客户端向服务器发请求，服务器接收请求，服务器接收请求之后发送一个连接标志，客户端接收连接标志<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">之后也向服务器发送一个连接标志，至此连接完成。用打电话类比的话就是：</span><br><span class=\"line\">小明拨打小红的电话</span><br><span class=\"line\">小红按下通话键并说了声，喂 （一次握手）</span><br><span class=\"line\">小明听到小红的回应，也说了声，喂 （二次握手）</span><br><span class=\"line\">小红接收到小明的回应 （三次握手）</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"什么是4次挥手\"><a href=\"#什么是4次挥手\" class=\"headerlink\" title=\"什么是4次挥手\"></a>什么是4次挥手</h1><p>为什么有4次挥手呢，4次挥手的作用就是断开连接，之所以要断开连接是因为TCP/IP协议是要占用端口的，而计算机的端口是有限的，所以一次传输完成之后是要断开连接的，断开连接的方式就是4次挥手。<br>连接是由客户端发起的，所以断开连接也要有客户端发起，因为服务器是被动的。上图的最后一部分就是4次挥手，还是用小明和小红打电话来类比，<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">小明：我这没事儿了，你还有事儿吗？ （1次挥手）</span><br><span class=\"line\">小红：我也没事儿了，你确定没事儿了吗？ （2次挥手）</span><br><span class=\"line\">小红：我要挂电话了。 （3次挥手）</span><br><span class=\"line\">小明：好吧，你挂吧。 （4次挥手）</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"握手的具体内容\"><a href=\"#握手的具体内容\" class=\"headerlink\" title=\"握手的具体内容\"></a>握手的具体内容</h1><p>第一次握手：建立连接时，客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号（Synchronize Sequence Numbers）。<br>第二次握手：服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；<br>第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。</p>\n<h1 id=\"未连接队列\"><a href=\"#未连接队列\" class=\"headerlink\" title=\"未连接队列\"></a>未连接队列</h1><p>在三次握手协议中，服务器维护一个未连接队列，该队列为每个客户端的SYN包（syn=j）开设一个条目，该条目表明服务器已收到SYN包，并向客户发出确认，正在等待客户的确认包。这些条目所标识的连接在服务器处于SYN_RECV状态，当服务器收到客户的确认包时，删除该条目，服务器进入ESTABLISHED状态。</p>\n<h1 id=\"关闭TCP连接：改进的三次握手\"><a href=\"#关闭TCP连接：改进的三次握手\" class=\"headerlink\" title=\"关闭TCP连接：改进的三次握手\"></a>关闭TCP连接：改进的三次握手</h1><p>对于一个已经建立的连接，TCP使用改进的三次握手来释放连接（使用一个带有FIN附加标记的报文段）。TCP关闭连接的步骤如下：<br>第一步，当主机A的应用程序通知TCP数据已经发送完毕时，TCP向主机B发送一个带有FIN附加标记的报文段（FIN表示英文finish）。</p>\n<p>第二步，主机B收到这个FIN报文段之后，并不立即用FIN报文段回复主机A，而是先向主机A发送一个确认序号ACK，同时通知自己相应的应用程序：对方要求关闭连接（先发送ACK的目的是为了防止在这段时间内，对方重传FIN报文段）。</p>\n<p>第三步，主机B的应用程序告诉TCP：我要彻底的关闭连接，TCP向主机A送一个FIN报文段。</p>\n<p>第四步，主机A收到这个FIN报文段后，向主机B发送一个ACK表示连接彻底释放。</p>\n<h1 id=\"为什么连接的时候是三次握手，关闭的时候却是四次握手？\"><a href=\"#为什么连接的时候是三次握手，关闭的时候却是四次握手？\" class=\"headerlink\" title=\"为什么连接的时候是三次握手，关闭的时候却是四次握手？\"></a>为什么连接的时候是三次握手，关闭的时候却是四次握手？</h1><p>答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，”你发的FIN报文我收到了”。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。</p>\n<h1 id=\"背景描述-另一篇文章\"><a href=\"#背景描述-另一篇文章\" class=\"headerlink\" title=\"背景描述(另一篇文章)\"></a>背景描述(另一篇文章)</h1><p>通过上一篇中网络模型中的IP层的介绍，我们知道网络层，可以实现两个主机之间的通信。但是这并不具体，因为，真正进行通信的实体是在主机中的进程，是一个主机中的一个进程与另外一个主机中的一个进程在交换数据。IP协议虽然能把数据报文送到目的主机，但是并没有交付给主机的具体应用进程。而端到端的通信才应该是应用进程之间的通信。</p>\n<p>UDP，在传送数据前不需要先建立连接，远地的主机在收到UDP报文后也不需要给出任何确认。虽然UDP不提供可靠交付，但是正是因为这样，省去和很多的开销，使得它的速度比较快，比如一些对实时性要求较高的服务，就常常使用的是UDP。对应的应用层的协议主要有 DNS,TFTP,DHCP,SNMP,NFS 等。</p>\n<p>TCP，提供面向连接的服务，在传送数据之前必须先建立连接，数据传送完成后要释放连接。因此TCP是一种可靠的的运输服务，但是正因为这样，不可避免的增加了许多的开销，比如确认，流量控制等。对应的应用层的协议主要有 SMTP,TELNET,HTTP,FTP 等。</p>\n<h1 id=\"TCP报文首部\"><a href=\"#TCP报文首部\" class=\"headerlink\" title=\"TCP报文首部\"></a>TCP报文首部</h1><ol><br><li>源端口和目的端口，各占2个字节，分别写入源端口和目的端口；</li><br><li>序号，占4个字节，<font color=\"red\">TCP连接中传送的字节流中的每个字节都按顺序编号</font>。例如，一段报文的序号字段值是 301 ，而携带的数据共有100字段，显然下一个报文段（如果还有的话）的数据序号应该从401开始；</li><br><li>确认号，占4个字节，<font color=\"red\">是期望收到对方下一个报文的第一个数据字节的序号</font>。例如，B收到了A发送过来的报文，其序列号字段是501，而数据长度是200字节，<font color=\"red\">这表明B正确的收到了A发送的到序号700为止的数据</font>。因此，B期望收到A的下一个数据序号是701，于是B在发送给A的确认报文段中把确认号置为701；</li><br><li>数据偏移，占4位，它指出TCP报文的数据距离TCP报文段的起始处有多远；</li><br><li>保留，占6位，保留今后使用，但目前应都位0；</li><br><li>紧急URG，当URG=1，表明紧急指针字段有效。告诉系统此报文段中有紧急数据；</li><br><li>确认ACK，仅当ACK=1时，确认号字段才有效。TCP规定，在连接建立后所有报文的传输都必须把ACK置1；</li><br><li>推送PSH，当两个应用进程进行交互式通信时，有时在一端的应用进程希望在键入一个命令后立即就能收到对方的响应，这时候就将PSH=1；</li><br><li>复位RST，当RST=1，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立连接；</li><br><li>同步SYN，在连接建立时用来同步序号。当SYN=1，ACK=0，表明是连接请求报文，若同意连接，则响应报文中应该使SYN=1，ACK=1；</li><br><li>终止FIN，用来释放连接。当FIN=1，表明此报文的发送方的数据已经发送完毕，并且要求释放；</li><br><li>窗口，占2字节，指的是通知接收方，发送本报文你需要有多大的空间来接受；</li><br><li>检验和，占2字节，校验首部和数据这两部分；</li><br><li>紧急指针，占2字节，指出本报文段中的紧急数据的字节数；</li><br><li>选项，长度可变，定义一些其他的可选的参数。</li><br></ol>\n\n<h1 id=\"TCP连接的建立\"><a href=\"#TCP连接的建立\" class=\"headerlink\" title=\"TCP连接的建立\"></a>TCP连接的建立</h1><p><strong>最开始的时候客户端和服务器都是处于CLOSED状态。主动打开连接的为客户端，被动打开连接的是服务器。</strong></p>\n<p><ol></ol></p>\n<p><li>TCP服务器进程先创建传输控制块TCB，时刻准备接受客户进程的连接请求，此时服务器就进入了LISTEN（监听）状态；</li></p>\n<p><li>TCP客户进程也是先创建传输控制块TCB，然后向服务器发出连接请求报文，这是报文首部中的同部位SYN=1，同时选择一个初始序列号 seq=x ，此时，TCP客户端进程进入了 SYN-SENT（同步已发送状态）状态。<font color=\"red\">TCP规定，SYN报文段（SYN=1的报文段）不能携带数据，但需要消耗掉一个序号。</font></li></p>\n<p><li>TCP服务器收到请求报文后，如果同意连接，则发出确认报文。确认报文中应该 ACK=1，SYN=1，确认号是ack=x+1，同时也要为自己初始化一个序列号 seq=y，此时，TCP服务器进程进入了SYN-RCVD（同步收到）状态。<font color=\"red\">这个报文也不能携带数据，但是同样要消耗一个序号。</font></li></p>\n<p><li>TCP客户进程收到确认后，还要向服务器给出确认。确认报文的ACK=1，ack=y+1，自己的序列号seq=x+1，此时，TCP连接建立，客户端进入ESTABLISHED（已建立连接）状态。<font color=\"red\">TCP规定，ACK报文段可以携带数据，但是如果不携带数据则不消耗序号。</font></li></p>\n<p><li>当服务器收到客户端的确认后也进入ESTABLISHED状态，此后双方就可以开始通信了。 <br><br><img src=\"https://img-blog.csdn.net/20170605110405666?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXpjc3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"三次握手\" title=\"\"></li><br></p>\n<h1 id=\"四次握手\"><a href=\"#四次握手\" class=\"headerlink\" title=\"四次握手\"></a>四次握手</h1><p>数据传输完毕后，双方都可释放连接。最开始的时候，客户端和服务器都是处于ESTABLISHED状态，然后客户端主动关闭，服务器被动关闭。</p><br><ol><br><li>客户端进程发出连接释放报文，并且停止发送数据。释放数据报文首部，FIN=1，其序列号为seq=u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态。 <font color=\"red\">TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。</font></li><br><li>服务器收到连接释放报文，发出确认报文，ACK=1，ack=u+1，并且带上自己的序列号seq=v，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。<font color=\"red\">TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。</font><font color=\"blue\">这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。</font></li><br><li>客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文<font color=\"red\">（在这之前还需要接受服务器发送的最后的数据）</font>。</li><br><li>服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，FIN=1，ack=u+1，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为seq=w，此时，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。</li><br><li>客户端收到服务器的连接释放报文后，必须发出确认，ACK=1，ack=w+1，而自己的序列号是seq=u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态。<font color=\"red\">注意此时TCP连接还没有释放，必须经过2<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2217;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.598em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.476em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.678em, 1000.41em, 2.465em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mo\" id=\"MathJax-Span-3\" style=\"font-family: MathJax_Main;\">∗</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.029em; border-left: 0px solid; width: 0px; height: 0.659em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo>∗</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">*</script>MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。</font></li><br><li>服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。<font color=\"red\">可以看到，服务器结束TCP连接的时间要比客户端早一些。</font></li><br></ol><br># 为什么客户端还要等待2MSL<br><blockquote><br>  <p>MSL（Maximum Segment Lifetime），TCP允许不同的实现可以设置不同的MSL值。</p>\n\n  <p>第一，保证客户端发送的最后一个ACK报文能够到达服务器，因为这个ACK报文可能丢失，<font color=\"red\">站在服务器的角度看来，我已经发送了FIN+ACK报文请求断开了，客户端还没有给我回应，应该是我发送的请求断开报文它没有收到，于是服务器又会重新发送一次</font>，而客户端就能在这个2MSL时间段内收到这个重传的报文，接着给出回应报文，并且会重启2MSL计时器。</p>\n\n  <p>第二，防止类似与“三次握手”中提到了的“已经失效的连接请求报文段”出现在本连接中。客户端发送完最后一个确认报文后，在这个2MSL时间中，就可以使本连接持续的时间内所产生的所有报文段都从网络中消失。这样新的连接中不会出现旧连接的请求报文。</p>\n\n  <p>为什么建立连接是三次握手，关闭连接确是四次挥手呢？</p>\n\n  <p>建立连接的时候， 服务器在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。 <br><br>  而关闭连接时，服务器收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，而自己也未必全部数据都发送给对方了，所以己方可以立即关闭，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，己方ACK和FIN一般都会分开发送，从而导致多了一次。</p><br></blockquote><br># 如果已经建立了连接，但是客户端突然出现故障了怎么办？<br><p>TCP还设有一个保活计时器，显然，客户端如果出现故障，服务器不能一直等下去，白白浪费资源。服务器每收到一次客户端的请求后都会重新复位这个计时器，时间通常是设置为2小时，若两小时还没有收到客户端的任何数据，服务器就会发送一个探测报文段，以后每隔75分钟发送一次。若一连发送10个探测报文仍然没反应，服务器就认为客户端出了故障，接着就关闭连接。</p>\n\n\n\n\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"什么是3次握手\"><a href=\"#什么是3次握手\" class=\"headerlink\" title=\"什么是3次握手\"></a>什么是3次握手</h1><p>上图中的三次挥手说的是，客户端向服务器发请求，服务器接收请求，服务器接收请求之后发送一个连接标志，客户端接收连接标志<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">之后也向服务器发送一个连接标志，至此连接完成。用打电话类比的话就是：</span><br><span class=\"line\">小明拨打小红的电话</span><br><span class=\"line\">小红按下通话键并说了声，喂 （一次握手）</span><br><span class=\"line\">小明听到小红的回应，也说了声，喂 （二次握手）</span><br><span class=\"line\">小红接收到小明的回应 （三次握手）</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"什么是4次挥手\"><a href=\"#什么是4次挥手\" class=\"headerlink\" title=\"什么是4次挥手\"></a>什么是4次挥手</h1><p>为什么有4次挥手呢，4次挥手的作用就是断开连接，之所以要断开连接是因为TCP/IP协议是要占用端口的，而计算机的端口是有限的，所以一次传输完成之后是要断开连接的，断开连接的方式就是4次挥手。<br>连接是由客户端发起的，所以断开连接也要有客户端发起，因为服务器是被动的。上图的最后一部分就是4次挥手，还是用小明和小红打电话来类比，<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">小明：我这没事儿了，你还有事儿吗？ （1次挥手）</span><br><span class=\"line\">小红：我也没事儿了，你确定没事儿了吗？ （2次挥手）</span><br><span class=\"line\">小红：我要挂电话了。 （3次挥手）</span><br><span class=\"line\">小明：好吧，你挂吧。 （4次挥手）</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"握手的具体内容\"><a href=\"#握手的具体内容\" class=\"headerlink\" title=\"握手的具体内容\"></a>握手的具体内容</h1><p>第一次握手：建立连接时，客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号（Synchronize Sequence Numbers）。<br>第二次握手：服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；<br>第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。</p>\n<h1 id=\"未连接队列\"><a href=\"#未连接队列\" class=\"headerlink\" title=\"未连接队列\"></a>未连接队列</h1><p>在三次握手协议中，服务器维护一个未连接队列，该队列为每个客户端的SYN包（syn=j）开设一个条目，该条目表明服务器已收到SYN包，并向客户发出确认，正在等待客户的确认包。这些条目所标识的连接在服务器处于SYN_RECV状态，当服务器收到客户的确认包时，删除该条目，服务器进入ESTABLISHED状态。</p>\n<h1 id=\"关闭TCP连接：改进的三次握手\"><a href=\"#关闭TCP连接：改进的三次握手\" class=\"headerlink\" title=\"关闭TCP连接：改进的三次握手\"></a>关闭TCP连接：改进的三次握手</h1><p>对于一个已经建立的连接，TCP使用改进的三次握手来释放连接（使用一个带有FIN附加标记的报文段）。TCP关闭连接的步骤如下：<br>第一步，当主机A的应用程序通知TCP数据已经发送完毕时，TCP向主机B发送一个带有FIN附加标记的报文段（FIN表示英文finish）。</p>\n<p>第二步，主机B收到这个FIN报文段之后，并不立即用FIN报文段回复主机A，而是先向主机A发送一个确认序号ACK，同时通知自己相应的应用程序：对方要求关闭连接（先发送ACK的目的是为了防止在这段时间内，对方重传FIN报文段）。</p>\n<p>第三步，主机B的应用程序告诉TCP：我要彻底的关闭连接，TCP向主机A送一个FIN报文段。</p>\n<p>第四步，主机A收到这个FIN报文段后，向主机B发送一个ACK表示连接彻底释放。</p>\n<h1 id=\"为什么连接的时候是三次握手，关闭的时候却是四次握手？\"><a href=\"#为什么连接的时候是三次握手，关闭的时候却是四次握手？\" class=\"headerlink\" title=\"为什么连接的时候是三次握手，关闭的时候却是四次握手？\"></a>为什么连接的时候是三次握手，关闭的时候却是四次握手？</h1><p>答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，”你发的FIN报文我收到了”。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。</p>\n<h1 id=\"背景描述-另一篇文章\"><a href=\"#背景描述-另一篇文章\" class=\"headerlink\" title=\"背景描述(另一篇文章)\"></a>背景描述(另一篇文章)</h1><p>通过上一篇中网络模型中的IP层的介绍，我们知道网络层，可以实现两个主机之间的通信。但是这并不具体，因为，真正进行通信的实体是在主机中的进程，是一个主机中的一个进程与另外一个主机中的一个进程在交换数据。IP协议虽然能把数据报文送到目的主机，但是并没有交付给主机的具体应用进程。而端到端的通信才应该是应用进程之间的通信。</p>\n<p>UDP，在传送数据前不需要先建立连接，远地的主机在收到UDP报文后也不需要给出任何确认。虽然UDP不提供可靠交付，但是正是因为这样，省去和很多的开销，使得它的速度比较快，比如一些对实时性要求较高的服务，就常常使用的是UDP。对应的应用层的协议主要有 DNS,TFTP,DHCP,SNMP,NFS 等。</p>\n<p>TCP，提供面向连接的服务，在传送数据之前必须先建立连接，数据传送完成后要释放连接。因此TCP是一种可靠的的运输服务，但是正因为这样，不可避免的增加了许多的开销，比如确认，流量控制等。对应的应用层的协议主要有 SMTP,TELNET,HTTP,FTP 等。</p>\n<h1 id=\"TCP报文首部\"><a href=\"#TCP报文首部\" class=\"headerlink\" title=\"TCP报文首部\"></a>TCP报文首部</h1><ol><br><li>源端口和目的端口，各占2个字节，分别写入源端口和目的端口；</li><br><li>序号，占4个字节，<font color=\"red\">TCP连接中传送的字节流中的每个字节都按顺序编号</font>。例如，一段报文的序号字段值是 301 ，而携带的数据共有100字段，显然下一个报文段（如果还有的话）的数据序号应该从401开始；</li><br><li>确认号，占4个字节，<font color=\"red\">是期望收到对方下一个报文的第一个数据字节的序号</font>。例如，B收到了A发送过来的报文，其序列号字段是501，而数据长度是200字节，<font color=\"red\">这表明B正确的收到了A发送的到序号700为止的数据</font>。因此，B期望收到A的下一个数据序号是701，于是B在发送给A的确认报文段中把确认号置为701；</li><br><li>数据偏移，占4位，它指出TCP报文的数据距离TCP报文段的起始处有多远；</li><br><li>保留，占6位，保留今后使用，但目前应都位0；</li><br><li>紧急URG，当URG=1，表明紧急指针字段有效。告诉系统此报文段中有紧急数据；</li><br><li>确认ACK，仅当ACK=1时，确认号字段才有效。TCP规定，在连接建立后所有报文的传输都必须把ACK置1；</li><br><li>推送PSH，当两个应用进程进行交互式通信时，有时在一端的应用进程希望在键入一个命令后立即就能收到对方的响应，这时候就将PSH=1；</li><br><li>复位RST，当RST=1，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立连接；</li><br><li>同步SYN，在连接建立时用来同步序号。当SYN=1，ACK=0，表明是连接请求报文，若同意连接，则响应报文中应该使SYN=1，ACK=1；</li><br><li>终止FIN，用来释放连接。当FIN=1，表明此报文的发送方的数据已经发送完毕，并且要求释放；</li><br><li>窗口，占2字节，指的是通知接收方，发送本报文你需要有多大的空间来接受；</li><br><li>检验和，占2字节，校验首部和数据这两部分；</li><br><li>紧急指针，占2字节，指出本报文段中的紧急数据的字节数；</li><br><li>选项，长度可变，定义一些其他的可选的参数。</li><br></ol>\n\n<h1 id=\"TCP连接的建立\"><a href=\"#TCP连接的建立\" class=\"headerlink\" title=\"TCP连接的建立\"></a>TCP连接的建立</h1><p><strong>最开始的时候客户端和服务器都是处于CLOSED状态。主动打开连接的为客户端，被动打开连接的是服务器。</strong></p>\n<p><ol></ol></p>\n<p><li>TCP服务器进程先创建传输控制块TCB，时刻准备接受客户进程的连接请求，此时服务器就进入了LISTEN（监听）状态；</li></p>\n<p><li>TCP客户进程也是先创建传输控制块TCB，然后向服务器发出连接请求报文，这是报文首部中的同部位SYN=1，同时选择一个初始序列号 seq=x ，此时，TCP客户端进程进入了 SYN-SENT（同步已发送状态）状态。<font color=\"red\">TCP规定，SYN报文段（SYN=1的报文段）不能携带数据，但需要消耗掉一个序号。</font></li></p>\n<p><li>TCP服务器收到请求报文后，如果同意连接，则发出确认报文。确认报文中应该 ACK=1，SYN=1，确认号是ack=x+1，同时也要为自己初始化一个序列号 seq=y，此时，TCP服务器进程进入了SYN-RCVD（同步收到）状态。<font color=\"red\">这个报文也不能携带数据，但是同样要消耗一个序号。</font></li></p>\n<p><li>TCP客户进程收到确认后，还要向服务器给出确认。确认报文的ACK=1，ack=y+1，自己的序列号seq=x+1，此时，TCP连接建立，客户端进入ESTABLISHED（已建立连接）状态。<font color=\"red\">TCP规定，ACK报文段可以携带数据，但是如果不携带数据则不消耗序号。</font></li></p>\n<p><li>当服务器收到客户端的确认后也进入ESTABLISHED状态，此后双方就可以开始通信了。 <br><br><img src=\"https://img-blog.csdn.net/20170605110405666?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXpjc3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"三次握手\" title=\"\"></li><br></p>\n<h1 id=\"四次握手\"><a href=\"#四次握手\" class=\"headerlink\" title=\"四次握手\"></a>四次握手</h1><p>数据传输完毕后，双方都可释放连接。最开始的时候，客户端和服务器都是处于ESTABLISHED状态，然后客户端主动关闭，服务器被动关闭。</p><br><ol><br><li>客户端进程发出连接释放报文，并且停止发送数据。释放数据报文首部，FIN=1，其序列号为seq=u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态。 <font color=\"red\">TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。</font></li><br><li>服务器收到连接释放报文，发出确认报文，ACK=1，ack=u+1，并且带上自己的序列号seq=v，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。<font color=\"red\">TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。</font><font color=\"blue\">这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。</font></li><br><li>客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文<font color=\"red\">（在这之前还需要接受服务器发送的最后的数据）</font>。</li><br><li>服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，FIN=1，ack=u+1，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为seq=w，此时，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。</li><br><li>客户端收到服务器的连接释放报文后，必须发出确认，ACK=1，ack=w+1，而自己的序列号是seq=u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态。<font color=\"red\">注意此时TCP连接还没有释放，必须经过2<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2217;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.598em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.476em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.678em, 1000.41em, 2.465em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mo\" id=\"MathJax-Span-3\" style=\"font-family: MathJax_Main;\">∗</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.029em; border-left: 0px solid; width: 0px; height: 0.659em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo>∗</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">*</script>MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。</font></li><br><li>服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。<font color=\"red\">可以看到，服务器结束TCP连接的时间要比客户端早一些。</font></li><br></ol><br># 为什么客户端还要等待2MSL<br><blockquote><br>  <p>MSL（Maximum Segment Lifetime），TCP允许不同的实现可以设置不同的MSL值。</p>\n\n  <p>第一，保证客户端发送的最后一个ACK报文能够到达服务器，因为这个ACK报文可能丢失，<font color=\"red\">站在服务器的角度看来，我已经发送了FIN+ACK报文请求断开了，客户端还没有给我回应，应该是我发送的请求断开报文它没有收到，于是服务器又会重新发送一次</font>，而客户端就能在这个2MSL时间段内收到这个重传的报文，接着给出回应报文，并且会重启2MSL计时器。</p>\n\n  <p>第二，防止类似与“三次握手”中提到了的“已经失效的连接请求报文段”出现在本连接中。客户端发送完最后一个确认报文后，在这个2MSL时间中，就可以使本连接持续的时间内所产生的所有报文段都从网络中消失。这样新的连接中不会出现旧连接的请求报文。</p>\n\n  <p>为什么建立连接是三次握手，关闭连接确是四次挥手呢？</p>\n\n  <p>建立连接的时候， 服务器在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。 <br><br>  而关闭连接时，服务器收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，而自己也未必全部数据都发送给对方了，所以己方可以立即关闭，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，己方ACK和FIN一般都会分开发送，从而导致多了一次。</p><br></blockquote><br># 如果已经建立了连接，但是客户端突然出现故障了怎么办？<br><p>TCP还设有一个保活计时器，显然，客户端如果出现故障，服务器不能一直等下去，白白浪费资源。服务器每收到一次客户端的请求后都会重新复位这个计时器，时间通常是设置为2小时，若两小时还没有收到客户端的任何数据，服务器就会发送一个探测报文段，以后每隔75分钟发送一次。若一连发送10个探测报文仍然没反应，服务器就认为客户端出了故障，接着就关闭连接。</p>\n\n\n\n\n\n\n\n"},{"title":"浏览器访问一个网址的时候都有哪些过程","date":"2018-07-15T02:20:04.000Z","_content":"# 总体的过程\n1. 浏览器本身是一个客户端，当你输入URL的时候，首先浏览器会去请求DNS服务器，通过DNS获取相应的域名对应的IP \n2. 然后通过IP地址找到IP对应的服务器后，要求建立TCP连接 \n3. 浏览器发送完HTTP Request（请求）包后，服务器接收到请求包之后才开始处理请求包 \n4. 在服务器收到请求之后，服务器调用自身服务，返回HTTP Response（响应）包 \n5. 客户端收到来自服务器的响应后开始渲染这个Response包里的主体（body）,等收到全部的内容随后断开与该服务器之间的TCP连接。 \n\n# 1.DNS解析\n1. 在浏览器中输入www.google.cn域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。 \n2. 如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析。 \n3. 如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/IP参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。 \n4. 如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。 \n5. 如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至13台根DNS，根DNS服务器收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址(google.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找google.com域服务器，重复上面的动作，进行查询，直至找到www.google.com主机。 \n6. 如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。\n# 2.Socket建立连接\n当我们输入这样一个请求时，首先要建立一个socket连接，因为socket是通过ip和端口建立的，所以之前还有一个DNS解析过程，把www.google.com变成ip，如果url里不包含端口号，则会使用该协议的默认端口号。\n# 3. 发送HTTP请求\n连接成功建立后，开始向web服务器发送请求，当浏览器向Web服务器发出请求时，它向服务器传递了一个数据块，也就是请求信息，HTTP请求信息由3部分组成：\n（1）请求方法URI协议/版本\n（2）请求头(Request Header)\n（3）请求正文 \n```\nGET /sample.jsp HTTP/1.1\nAccept:image/gif.image/jpeg,*/*\nAccept-Language:zh-cn\nConnection:Keep-Alive\nHost:localhost\nUser-Agent:Mozila/4.0(compatible;MSIE5.01;Window NT5.0)\nAccept-Encoding:gzip,deflate \nusername=jinqiao&password=1234\n```\n##  3.1 请求方法URI协议/版本\n请求的第一行是“方法URL议/版本”：GET/sample.jsp HTTP/1.1``\n以上代码中“GET”代表请求方法，/sample.jsp表示URI，HTTP/1.1“`代表协议和协议的版本。\n根据HTTP标准，HTTP请求可以使用多种请求方法。例如：HTTP1.1支持7种请求方法：GET、POST、HEAD、OPTIONS、PUT、DELETE和TARCE。在Internet应用中，最常用的方法是GET和POST。\nURL完整地指定了要访问的网络资源，通常只要给出相对于服务器的根目录的相对目录即可，因此总是以“/”开头，最后，协议版本声明了通信过程中使用HTTP的版本。\n##  3.2 请求头(Request Header) \n请求头包含许多有关的客户端环境和请求正文的有用信息。例如，请求头可以声明浏览器所用的语言，请求正文的长度等。\n## 3.3 请求正文\n请求头和请求正文之间是一个空行，这个行非常重要，它表示请求头已经结束，接下来的是请求正文。请求正文中可以包含客户提交的查询字符串信息：\n## 3.4 HTTP请求方法：GET方法与POST方法\nGET方法是默认的HTTP请求方法，我们日常用GET方法来提交表单数据，然而用GET方法提交的表单数据只经过了简单的编码，同时它将作为URL的一部分向Web服务器发送，因此，如果使用GET方法来提交表单数据就存在着安全隐患上。例如\nHttp://127.0.0.1/login.jsp?Name=zhangshi&Age=30&Submit=%cc%E+%BD%BB\n从上面的URL请求中，很容易就可以辩认出表单提交的内容。（？之后的内容）另外由于GET方法提交的数据是作为URL请求的一部分所以提交的数据量不能太大\nPOST方法是GET方法的一个替代方法，它主要是向Web服务器提交表单数据，尤其是大批量的数据。POST方法克服了GET方法的一些缺点。通过POST方法提交表单数据时，数据不是作为URL请求的一部分而是作为标准数据传送给Web服务器，这就克服了GET方法中的信息无法保密和数据量太小的缺点。因此，出于安全的考虑以及对用户隐私的尊重，通常表单提交时采用POST方法。\n# 4.服务器响应\n应答 web服务器收到这个请求，进行处理。从它的文档空间中搜索子目录mydir的文件index.html。如果找到该文件，Web服务器把该文件内容传送给相应的Web浏览器。为了告知浏览器，Web服务器首先传送一些HTTP头信息，然后传送具体内容（即HTTP体信息），HTTP头信息和HTTP体信息之间用一个空行分开。\n## 4.1 HTTP响应报文头\nHTTP应答与HTTP请求相似，HTTP响应也由3个部分构成，分别是：\n（1）协议状态版本代码描述\n（2）响应头(Response Header)\n（3）响应正文\n下面是一个HTTP响应的例子：\n```\nHTTP/1.1 200 OK\nServer:Apache Tomcat/5.0.12\nDate:Mon,6Oct2003 13:23:42 GMT\nContent-Length:112\n\n<html>\n    <head>\n        <title>HTTP响应示例<title>\n    </head>\n    <body>\n        Hello HTTP!\n    </body>\n</html>\n```\n# 关闭连接\n当应答结束后，Web浏览器与Web服务器必须断开，以保证其它Web浏览器能够与Web服务器建立连接。\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2018.07.15 浏览器访问一个网址的时候都有哪些过程.md","raw":"---\ntitle: 浏览器访问一个网址的时候都有哪些过程\ndate: 2018-07-15 10:20:04\ntags: 面试\n---\n# 总体的过程\n1. 浏览器本身是一个客户端，当你输入URL的时候，首先浏览器会去请求DNS服务器，通过DNS获取相应的域名对应的IP \n2. 然后通过IP地址找到IP对应的服务器后，要求建立TCP连接 \n3. 浏览器发送完HTTP Request（请求）包后，服务器接收到请求包之后才开始处理请求包 \n4. 在服务器收到请求之后，服务器调用自身服务，返回HTTP Response（响应）包 \n5. 客户端收到来自服务器的响应后开始渲染这个Response包里的主体（body）,等收到全部的内容随后断开与该服务器之间的TCP连接。 \n\n# 1.DNS解析\n1. 在浏览器中输入www.google.cn域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。 \n2. 如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析。 \n3. 如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/IP参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。 \n4. 如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。 \n5. 如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至13台根DNS，根DNS服务器收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址(google.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找google.com域服务器，重复上面的动作，进行查询，直至找到www.google.com主机。 \n6. 如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。\n# 2.Socket建立连接\n当我们输入这样一个请求时，首先要建立一个socket连接，因为socket是通过ip和端口建立的，所以之前还有一个DNS解析过程，把www.google.com变成ip，如果url里不包含端口号，则会使用该协议的默认端口号。\n# 3. 发送HTTP请求\n连接成功建立后，开始向web服务器发送请求，当浏览器向Web服务器发出请求时，它向服务器传递了一个数据块，也就是请求信息，HTTP请求信息由3部分组成：\n（1）请求方法URI协议/版本\n（2）请求头(Request Header)\n（3）请求正文 \n```\nGET /sample.jsp HTTP/1.1\nAccept:image/gif.image/jpeg,*/*\nAccept-Language:zh-cn\nConnection:Keep-Alive\nHost:localhost\nUser-Agent:Mozila/4.0(compatible;MSIE5.01;Window NT5.0)\nAccept-Encoding:gzip,deflate \nusername=jinqiao&password=1234\n```\n##  3.1 请求方法URI协议/版本\n请求的第一行是“方法URL议/版本”：GET/sample.jsp HTTP/1.1``\n以上代码中“GET”代表请求方法，/sample.jsp表示URI，HTTP/1.1“`代表协议和协议的版本。\n根据HTTP标准，HTTP请求可以使用多种请求方法。例如：HTTP1.1支持7种请求方法：GET、POST、HEAD、OPTIONS、PUT、DELETE和TARCE。在Internet应用中，最常用的方法是GET和POST。\nURL完整地指定了要访问的网络资源，通常只要给出相对于服务器的根目录的相对目录即可，因此总是以“/”开头，最后，协议版本声明了通信过程中使用HTTP的版本。\n##  3.2 请求头(Request Header) \n请求头包含许多有关的客户端环境和请求正文的有用信息。例如，请求头可以声明浏览器所用的语言，请求正文的长度等。\n## 3.3 请求正文\n请求头和请求正文之间是一个空行，这个行非常重要，它表示请求头已经结束，接下来的是请求正文。请求正文中可以包含客户提交的查询字符串信息：\n## 3.4 HTTP请求方法：GET方法与POST方法\nGET方法是默认的HTTP请求方法，我们日常用GET方法来提交表单数据，然而用GET方法提交的表单数据只经过了简单的编码，同时它将作为URL的一部分向Web服务器发送，因此，如果使用GET方法来提交表单数据就存在着安全隐患上。例如\nHttp://127.0.0.1/login.jsp?Name=zhangshi&Age=30&Submit=%cc%E+%BD%BB\n从上面的URL请求中，很容易就可以辩认出表单提交的内容。（？之后的内容）另外由于GET方法提交的数据是作为URL请求的一部分所以提交的数据量不能太大\nPOST方法是GET方法的一个替代方法，它主要是向Web服务器提交表单数据，尤其是大批量的数据。POST方法克服了GET方法的一些缺点。通过POST方法提交表单数据时，数据不是作为URL请求的一部分而是作为标准数据传送给Web服务器，这就克服了GET方法中的信息无法保密和数据量太小的缺点。因此，出于安全的考虑以及对用户隐私的尊重，通常表单提交时采用POST方法。\n# 4.服务器响应\n应答 web服务器收到这个请求，进行处理。从它的文档空间中搜索子目录mydir的文件index.html。如果找到该文件，Web服务器把该文件内容传送给相应的Web浏览器。为了告知浏览器，Web服务器首先传送一些HTTP头信息，然后传送具体内容（即HTTP体信息），HTTP头信息和HTTP体信息之间用一个空行分开。\n## 4.1 HTTP响应报文头\nHTTP应答与HTTP请求相似，HTTP响应也由3个部分构成，分别是：\n（1）协议状态版本代码描述\n（2）响应头(Response Header)\n（3）响应正文\n下面是一个HTTP响应的例子：\n```\nHTTP/1.1 200 OK\nServer:Apache Tomcat/5.0.12\nDate:Mon,6Oct2003 13:23:42 GMT\nContent-Length:112\n\n<html>\n    <head>\n        <title>HTTP响应示例<title>\n    </head>\n    <body>\n        Hello HTTP!\n    </body>\n</html>\n```\n# 关闭连接\n当应答结束后，Web浏览器与Web服务器必须断开，以保证其它Web浏览器能够与Web服务器建立连接。\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"浏览器访问一个网址的时候都有哪些过程","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbr001kdcyu87vyfk34","content":"<h1 id=\"总体的过程\"><a href=\"#总体的过程\" class=\"headerlink\" title=\"总体的过程\"></a>总体的过程</h1><ol>\n<li>浏览器本身是一个客户端，当你输入URL的时候，首先浏览器会去请求DNS服务器，通过DNS获取相应的域名对应的IP </li>\n<li>然后通过IP地址找到IP对应的服务器后，要求建立TCP连接 </li>\n<li>浏览器发送完HTTP Request（请求）包后，服务器接收到请求包之后才开始处理请求包 </li>\n<li>在服务器收到请求之后，服务器调用自身服务，返回HTTP Response（响应）包 </li>\n<li>客户端收到来自服务器的响应后开始渲染这个Response包里的主体（body）,等收到全部的内容随后断开与该服务器之间的TCP连接。 </li>\n</ol>\n<h1 id=\"1-DNS解析\"><a href=\"#1-DNS解析\" class=\"headerlink\" title=\"1.DNS解析\"></a>1.DNS解析</h1><ol>\n<li>在浏览器中输入<a href=\"http://www.google.cn域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。\" target=\"_blank\" rel=\"noopener\">www.google.cn域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。</a> </li>\n<li>如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析。 </li>\n<li>如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/IP参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。 </li>\n<li>如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。 </li>\n<li>如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至13台根DNS，根DNS服务器收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址(google.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找google.com域服务器，重复上面的动作，进行查询，直至找到<a href=\"http://www.google.com主机。\" target=\"_blank\" rel=\"noopener\">www.google.com主机。</a> </li>\n<li>如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。<h1 id=\"2-Socket建立连接\"><a href=\"#2-Socket建立连接\" class=\"headerlink\" title=\"2.Socket建立连接\"></a>2.Socket建立连接</h1>当我们输入这样一个请求时，首先要建立一个socket连接，因为socket是通过ip和端口建立的，所以之前还有一个DNS解析过程，把<a href=\"http://www.google.com变成ip，如果url里不包含端口号，则会使用该协议的默认端口号。\" target=\"_blank\" rel=\"noopener\">www.google.com变成ip，如果url里不包含端口号，则会使用该协议的默认端口号。</a><h1 id=\"3-发送HTTP请求\"><a href=\"#3-发送HTTP请求\" class=\"headerlink\" title=\"3. 发送HTTP请求\"></a>3. 发送HTTP请求</h1>连接成功建立后，开始向web服务器发送请求，当浏览器向Web服务器发出请求时，它向服务器传递了一个数据块，也就是请求信息，HTTP请求信息由3部分组成：<br>（1）请求方法URI协议/版本<br>（2）请求头(Request Header)<br>（3）请求正文 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET /sample.jsp HTTP/1.1</span><br><span class=\"line\">Accept:image/gif.image/jpeg,*/*</span><br><span class=\"line\">Accept-Language:zh-cn</span><br><span class=\"line\">Connection:Keep-Alive</span><br><span class=\"line\">Host:localhost</span><br><span class=\"line\">User-Agent:Mozila/4.0(compatible;MSIE5.01;Window NT5.0)</span><br><span class=\"line\">Accept-Encoding:gzip,deflate </span><br><span class=\"line\">username=jinqiao&amp;password=1234</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"3-1-请求方法URI协议-版本\"><a href=\"#3-1-请求方法URI协议-版本\" class=\"headerlink\" title=\"3.1 请求方法URI协议/版本\"></a>3.1 请求方法URI协议/版本</h2><p>请求的第一行是“方法URL议/版本”：GET/sample.jsp HTTP/1.1<code></code><br>以上代码中“GET”代表请求方法，/sample.jsp表示URI，HTTP/1.1“`代表协议和协议的版本。<br>根据HTTP标准，HTTP请求可以使用多种请求方法。例如：HTTP1.1支持7种请求方法：GET、POST、HEAD、OPTIONS、PUT、DELETE和TARCE。在Internet应用中，最常用的方法是GET和POST。<br>URL完整地指定了要访问的网络资源，通常只要给出相对于服务器的根目录的相对目录即可，因此总是以“/”开头，最后，协议版本声明了通信过程中使用HTTP的版本。</p>\n<h2 id=\"3-2-请求头-Request-Header\"><a href=\"#3-2-请求头-Request-Header\" class=\"headerlink\" title=\"3.2 请求头(Request Header)\"></a>3.2 请求头(Request Header)</h2><p>请求头包含许多有关的客户端环境和请求正文的有用信息。例如，请求头可以声明浏览器所用的语言，请求正文的长度等。</p>\n<h2 id=\"3-3-请求正文\"><a href=\"#3-3-请求正文\" class=\"headerlink\" title=\"3.3 请求正文\"></a>3.3 请求正文</h2><p>请求头和请求正文之间是一个空行，这个行非常重要，它表示请求头已经结束，接下来的是请求正文。请求正文中可以包含客户提交的查询字符串信息：</p>\n<h2 id=\"3-4-HTTP请求方法：GET方法与POST方法\"><a href=\"#3-4-HTTP请求方法：GET方法与POST方法\" class=\"headerlink\" title=\"3.4 HTTP请求方法：GET方法与POST方法\"></a>3.4 HTTP请求方法：GET方法与POST方法</h2><p>GET方法是默认的HTTP请求方法，我们日常用GET方法来提交表单数据，然而用GET方法提交的表单数据只经过了简单的编码，同时它将作为URL的一部分向Web服务器发送，因此，如果使用GET方法来提交表单数据就存在着安全隐患上。例如<br>Http://127.0.0.1/login.jsp?Name=zhangshi&amp;Age=30&amp;Submit=%cc%E+%BD%BB<br>从上面的URL请求中，很容易就可以辩认出表单提交的内容。（？之后的内容）另外由于GET方法提交的数据是作为URL请求的一部分所以提交的数据量不能太大<br>POST方法是GET方法的一个替代方法，它主要是向Web服务器提交表单数据，尤其是大批量的数据。POST方法克服了GET方法的一些缺点。通过POST方法提交表单数据时，数据不是作为URL请求的一部分而是作为标准数据传送给Web服务器，这就克服了GET方法中的信息无法保密和数据量太小的缺点。因此，出于安全的考虑以及对用户隐私的尊重，通常表单提交时采用POST方法。</p>\n<h1 id=\"4-服务器响应\"><a href=\"#4-服务器响应\" class=\"headerlink\" title=\"4.服务器响应\"></a>4.服务器响应</h1><p>应答 web服务器收到这个请求，进行处理。从它的文档空间中搜索子目录mydir的文件index.html。如果找到该文件，Web服务器把该文件内容传送给相应的Web浏览器。为了告知浏览器，Web服务器首先传送一些HTTP头信息，然后传送具体内容（即HTTP体信息），HTTP头信息和HTTP体信息之间用一个空行分开。</p>\n<h2 id=\"4-1-HTTP响应报文头\"><a href=\"#4-1-HTTP响应报文头\" class=\"headerlink\" title=\"4.1 HTTP响应报文头\"></a>4.1 HTTP响应报文头</h2><p>HTTP应答与HTTP请求相似，HTTP响应也由3个部分构成，分别是：<br>（1）协议状态版本代码描述<br>（2）响应头(Response Header)<br>（3）响应正文<br>下面是一个HTTP响应的例子：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.1 200 OK</span><br><span class=\"line\">Server:Apache Tomcat/5.0.12</span><br><span class=\"line\">Date:Mon,6Oct2003 13:23:42 GMT</span><br><span class=\"line\">Content-Length:112</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;title&gt;HTTP响应示例&lt;title&gt;</span><br><span class=\"line\">    &lt;/head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        Hello HTTP!</span><br><span class=\"line\">    &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"关闭连接\"><a href=\"#关闭连接\" class=\"headerlink\" title=\"关闭连接\"></a>关闭连接</h1><p>当应答结束后，Web浏览器与Web服务器必须断开，以保证其它Web浏览器能够与Web服务器建立连接。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"总体的过程\"><a href=\"#总体的过程\" class=\"headerlink\" title=\"总体的过程\"></a>总体的过程</h1><ol>\n<li>浏览器本身是一个客户端，当你输入URL的时候，首先浏览器会去请求DNS服务器，通过DNS获取相应的域名对应的IP </li>\n<li>然后通过IP地址找到IP对应的服务器后，要求建立TCP连接 </li>\n<li>浏览器发送完HTTP Request（请求）包后，服务器接收到请求包之后才开始处理请求包 </li>\n<li>在服务器收到请求之后，服务器调用自身服务，返回HTTP Response（响应）包 </li>\n<li>客户端收到来自服务器的响应后开始渲染这个Response包里的主体（body）,等收到全部的内容随后断开与该服务器之间的TCP连接。 </li>\n</ol>\n<h1 id=\"1-DNS解析\"><a href=\"#1-DNS解析\" class=\"headerlink\" title=\"1.DNS解析\"></a>1.DNS解析</h1><ol>\n<li>在浏览器中输入<a href=\"http://www.google.cn域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。\" target=\"_blank\" rel=\"noopener\">www.google.cn域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。</a> </li>\n<li>如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析。 </li>\n<li>如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/IP参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。 </li>\n<li>如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。 </li>\n<li>如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至13台根DNS，根DNS服务器收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址(google.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找google.com域服务器，重复上面的动作，进行查询，直至找到<a href=\"http://www.google.com主机。\" target=\"_blank\" rel=\"noopener\">www.google.com主机。</a> </li>\n<li>如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。<h1 id=\"2-Socket建立连接\"><a href=\"#2-Socket建立连接\" class=\"headerlink\" title=\"2.Socket建立连接\"></a>2.Socket建立连接</h1>当我们输入这样一个请求时，首先要建立一个socket连接，因为socket是通过ip和端口建立的，所以之前还有一个DNS解析过程，把<a href=\"http://www.google.com变成ip，如果url里不包含端口号，则会使用该协议的默认端口号。\" target=\"_blank\" rel=\"noopener\">www.google.com变成ip，如果url里不包含端口号，则会使用该协议的默认端口号。</a><h1 id=\"3-发送HTTP请求\"><a href=\"#3-发送HTTP请求\" class=\"headerlink\" title=\"3. 发送HTTP请求\"></a>3. 发送HTTP请求</h1>连接成功建立后，开始向web服务器发送请求，当浏览器向Web服务器发出请求时，它向服务器传递了一个数据块，也就是请求信息，HTTP请求信息由3部分组成：<br>（1）请求方法URI协议/版本<br>（2）请求头(Request Header)<br>（3）请求正文 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET /sample.jsp HTTP/1.1</span><br><span class=\"line\">Accept:image/gif.image/jpeg,*/*</span><br><span class=\"line\">Accept-Language:zh-cn</span><br><span class=\"line\">Connection:Keep-Alive</span><br><span class=\"line\">Host:localhost</span><br><span class=\"line\">User-Agent:Mozila/4.0(compatible;MSIE5.01;Window NT5.0)</span><br><span class=\"line\">Accept-Encoding:gzip,deflate </span><br><span class=\"line\">username=jinqiao&amp;password=1234</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"3-1-请求方法URI协议-版本\"><a href=\"#3-1-请求方法URI协议-版本\" class=\"headerlink\" title=\"3.1 请求方法URI协议/版本\"></a>3.1 请求方法URI协议/版本</h2><p>请求的第一行是“方法URL议/版本”：GET/sample.jsp HTTP/1.1<code></code><br>以上代码中“GET”代表请求方法，/sample.jsp表示URI，HTTP/1.1“`代表协议和协议的版本。<br>根据HTTP标准，HTTP请求可以使用多种请求方法。例如：HTTP1.1支持7种请求方法：GET、POST、HEAD、OPTIONS、PUT、DELETE和TARCE。在Internet应用中，最常用的方法是GET和POST。<br>URL完整地指定了要访问的网络资源，通常只要给出相对于服务器的根目录的相对目录即可，因此总是以“/”开头，最后，协议版本声明了通信过程中使用HTTP的版本。</p>\n<h2 id=\"3-2-请求头-Request-Header\"><a href=\"#3-2-请求头-Request-Header\" class=\"headerlink\" title=\"3.2 请求头(Request Header)\"></a>3.2 请求头(Request Header)</h2><p>请求头包含许多有关的客户端环境和请求正文的有用信息。例如，请求头可以声明浏览器所用的语言，请求正文的长度等。</p>\n<h2 id=\"3-3-请求正文\"><a href=\"#3-3-请求正文\" class=\"headerlink\" title=\"3.3 请求正文\"></a>3.3 请求正文</h2><p>请求头和请求正文之间是一个空行，这个行非常重要，它表示请求头已经结束，接下来的是请求正文。请求正文中可以包含客户提交的查询字符串信息：</p>\n<h2 id=\"3-4-HTTP请求方法：GET方法与POST方法\"><a href=\"#3-4-HTTP请求方法：GET方法与POST方法\" class=\"headerlink\" title=\"3.4 HTTP请求方法：GET方法与POST方法\"></a>3.4 HTTP请求方法：GET方法与POST方法</h2><p>GET方法是默认的HTTP请求方法，我们日常用GET方法来提交表单数据，然而用GET方法提交的表单数据只经过了简单的编码，同时它将作为URL的一部分向Web服务器发送，因此，如果使用GET方法来提交表单数据就存在着安全隐患上。例如<br>Http://127.0.0.1/login.jsp?Name=zhangshi&amp;Age=30&amp;Submit=%cc%E+%BD%BB<br>从上面的URL请求中，很容易就可以辩认出表单提交的内容。（？之后的内容）另外由于GET方法提交的数据是作为URL请求的一部分所以提交的数据量不能太大<br>POST方法是GET方法的一个替代方法，它主要是向Web服务器提交表单数据，尤其是大批量的数据。POST方法克服了GET方法的一些缺点。通过POST方法提交表单数据时，数据不是作为URL请求的一部分而是作为标准数据传送给Web服务器，这就克服了GET方法中的信息无法保密和数据量太小的缺点。因此，出于安全的考虑以及对用户隐私的尊重，通常表单提交时采用POST方法。</p>\n<h1 id=\"4-服务器响应\"><a href=\"#4-服务器响应\" class=\"headerlink\" title=\"4.服务器响应\"></a>4.服务器响应</h1><p>应答 web服务器收到这个请求，进行处理。从它的文档空间中搜索子目录mydir的文件index.html。如果找到该文件，Web服务器把该文件内容传送给相应的Web浏览器。为了告知浏览器，Web服务器首先传送一些HTTP头信息，然后传送具体内容（即HTTP体信息），HTTP头信息和HTTP体信息之间用一个空行分开。</p>\n<h2 id=\"4-1-HTTP响应报文头\"><a href=\"#4-1-HTTP响应报文头\" class=\"headerlink\" title=\"4.1 HTTP响应报文头\"></a>4.1 HTTP响应报文头</h2><p>HTTP应答与HTTP请求相似，HTTP响应也由3个部分构成，分别是：<br>（1）协议状态版本代码描述<br>（2）响应头(Response Header)<br>（3）响应正文<br>下面是一个HTTP响应的例子：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.1 200 OK</span><br><span class=\"line\">Server:Apache Tomcat/5.0.12</span><br><span class=\"line\">Date:Mon,6Oct2003 13:23:42 GMT</span><br><span class=\"line\">Content-Length:112</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;title&gt;HTTP响应示例&lt;title&gt;</span><br><span class=\"line\">    &lt;/head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        Hello HTTP!</span><br><span class=\"line\">    &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"关闭连接\"><a href=\"#关闭连接\" class=\"headerlink\" title=\"关闭连接\"></a>关闭连接</h1><p>当应答结束后，Web浏览器与Web服务器必须断开，以保证其它Web浏览器能够与Web服务器建立连接。</p>\n"},{"title":"Synchronized底层优化偏向锁,轻量级锁","date":"2018-07-16T14:52:33.000Z","_content":"# 重量级锁\nSynchronized是通过对象内部的一个叫做监视器锁（monitor）来实现的。但是监视器锁本质又是依赖于底层的操作系统的Mutex Lock来实现的。而操作系统实现线程之间的切换这就需要从用户态转换到核心态，这个成本非常高，状态之间的转换需要相对比较长的时间，这就是为什么Synchronized效率低的原因。因此，这种依赖于操作系统Mutex Lock所实现的锁我们称之为“重量级锁”。JDK中对Synchronized做的种种优化，其核心都是为了减少这种重量级锁的使用。JDK1.6以后，为了减少获得锁和释放锁所带来的性能消耗，提高性能，引入了“轻量级锁”和“偏向锁”。\n# 轻量级锁\n锁的状态总共有四种：无锁状态、偏向锁、轻量级锁和重量级锁。随着锁的竞争，锁可以从偏向锁升级到轻量级锁，再升级的重量级锁（但是锁的升级是单向的，也就是说只能从低到高升级，不会出现锁的降级）。JDK 1.6中默认是开启偏向锁和轻量级锁的，我们也可以通过-XX:-UseBiasedLocking来禁用偏向锁。\n# 轻量级锁的加锁过程\n1. 在代码进入同步块的时候，如果同步对象锁状态为无锁状态（锁标志位为“01”状态，是否为偏向锁为“0”），虚拟机首先将在当前线程的栈帧中建立一个名为锁记录（Lock Record）的空间，用于存储锁对象目前的Mark Word的拷贝，官方称之为 Displaced Mark Word。这时候线程堆栈与对象头的状态如图2.1所示。","source":"_posts/2018.07.16 Synchronized底层优化偏向锁-轻量级锁.md","raw":"---\ntitle: 'Synchronized底层优化偏向锁,轻量级锁'\ndate: 2018-07-16 22:52:33\ntags: 面试\n---\n# 重量级锁\nSynchronized是通过对象内部的一个叫做监视器锁（monitor）来实现的。但是监视器锁本质又是依赖于底层的操作系统的Mutex Lock来实现的。而操作系统实现线程之间的切换这就需要从用户态转换到核心态，这个成本非常高，状态之间的转换需要相对比较长的时间，这就是为什么Synchronized效率低的原因。因此，这种依赖于操作系统Mutex Lock所实现的锁我们称之为“重量级锁”。JDK中对Synchronized做的种种优化，其核心都是为了减少这种重量级锁的使用。JDK1.6以后，为了减少获得锁和释放锁所带来的性能消耗，提高性能，引入了“轻量级锁”和“偏向锁”。\n# 轻量级锁\n锁的状态总共有四种：无锁状态、偏向锁、轻量级锁和重量级锁。随着锁的竞争，锁可以从偏向锁升级到轻量级锁，再升级的重量级锁（但是锁的升级是单向的，也就是说只能从低到高升级，不会出现锁的降级）。JDK 1.6中默认是开启偏向锁和轻量级锁的，我们也可以通过-XX:-UseBiasedLocking来禁用偏向锁。\n# 轻量级锁的加锁过程\n1. 在代码进入同步块的时候，如果同步对象锁状态为无锁状态（锁标志位为“01”状态，是否为偏向锁为“0”），虚拟机首先将在当前线程的栈帧中建立一个名为锁记录（Lock Record）的空间，用于存储锁对象目前的Mark Word的拷贝，官方称之为 Displaced Mark Word。这时候线程堆栈与对象头的状态如图2.1所示。","slug":"Synchronized底层优化偏向锁-轻量级锁","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbv001ndcyuadlbajru","content":"<h1 id=\"重量级锁\"><a href=\"#重量级锁\" class=\"headerlink\" title=\"重量级锁\"></a>重量级锁</h1><p>Synchronized是通过对象内部的一个叫做监视器锁（monitor）来实现的。但是监视器锁本质又是依赖于底层的操作系统的Mutex Lock来实现的。而操作系统实现线程之间的切换这就需要从用户态转换到核心态，这个成本非常高，状态之间的转换需要相对比较长的时间，这就是为什么Synchronized效率低的原因。因此，这种依赖于操作系统Mutex Lock所实现的锁我们称之为“重量级锁”。JDK中对Synchronized做的种种优化，其核心都是为了减少这种重量级锁的使用。JDK1.6以后，为了减少获得锁和释放锁所带来的性能消耗，提高性能，引入了“轻量级锁”和“偏向锁”。</p>\n<h1 id=\"轻量级锁\"><a href=\"#轻量级锁\" class=\"headerlink\" title=\"轻量级锁\"></a>轻量级锁</h1><p>锁的状态总共有四种：无锁状态、偏向锁、轻量级锁和重量级锁。随着锁的竞争，锁可以从偏向锁升级到轻量级锁，再升级的重量级锁（但是锁的升级是单向的，也就是说只能从低到高升级，不会出现锁的降级）。JDK 1.6中默认是开启偏向锁和轻量级锁的，我们也可以通过-XX:-UseBiasedLocking来禁用偏向锁。</p>\n<h1 id=\"轻量级锁的加锁过程\"><a href=\"#轻量级锁的加锁过程\" class=\"headerlink\" title=\"轻量级锁的加锁过程\"></a>轻量级锁的加锁过程</h1><ol>\n<li>在代码进入同步块的时候，如果同步对象锁状态为无锁状态（锁标志位为“01”状态，是否为偏向锁为“0”），虚拟机首先将在当前线程的栈帧中建立一个名为锁记录（Lock Record）的空间，用于存储锁对象目前的Mark Word的拷贝，官方称之为 Displaced Mark Word。这时候线程堆栈与对象头的状态如图2.1所示。</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"重量级锁\"><a href=\"#重量级锁\" class=\"headerlink\" title=\"重量级锁\"></a>重量级锁</h1><p>Synchronized是通过对象内部的一个叫做监视器锁（monitor）来实现的。但是监视器锁本质又是依赖于底层的操作系统的Mutex Lock来实现的。而操作系统实现线程之间的切换这就需要从用户态转换到核心态，这个成本非常高，状态之间的转换需要相对比较长的时间，这就是为什么Synchronized效率低的原因。因此，这种依赖于操作系统Mutex Lock所实现的锁我们称之为“重量级锁”。JDK中对Synchronized做的种种优化，其核心都是为了减少这种重量级锁的使用。JDK1.6以后，为了减少获得锁和释放锁所带来的性能消耗，提高性能，引入了“轻量级锁”和“偏向锁”。</p>\n<h1 id=\"轻量级锁\"><a href=\"#轻量级锁\" class=\"headerlink\" title=\"轻量级锁\"></a>轻量级锁</h1><p>锁的状态总共有四种：无锁状态、偏向锁、轻量级锁和重量级锁。随着锁的竞争，锁可以从偏向锁升级到轻量级锁，再升级的重量级锁（但是锁的升级是单向的，也就是说只能从低到高升级，不会出现锁的降级）。JDK 1.6中默认是开启偏向锁和轻量级锁的，我们也可以通过-XX:-UseBiasedLocking来禁用偏向锁。</p>\n<h1 id=\"轻量级锁的加锁过程\"><a href=\"#轻量级锁的加锁过程\" class=\"headerlink\" title=\"轻量级锁的加锁过程\"></a>轻量级锁的加锁过程</h1><ol>\n<li>在代码进入同步块的时候，如果同步对象锁状态为无锁状态（锁标志位为“01”状态，是否为偏向锁为“0”），虚拟机首先将在当前线程的栈帧中建立一个名为锁记录（Lock Record）的空间，用于存储锁对象目前的Mark Word的拷贝，官方称之为 Displaced Mark Word。这时候线程堆栈与对象头的状态如图2.1所示。</li>\n</ol>\n"},{"title":"static与this","date":"2018-07-16T02:33:33.000Z","_content":"# this\n用类名定义一个变量的时候，定义的应该只是一个引用，外面可以通过这个引用来访问这个类里面的属性和方法。类里面也有一个引用来访问自己的属性和方法，这个引用就是 this 对象，它可以在类里面来引用这个类的属性和方法。\n　每当一个对象创建后，Java虚拟机会给这个对象分配一个引用自身的指针，这个指针的名字就是this。因此，this只能在类中的非静态方法中使用，静态方法和静态的代码块中绝对不能出现this的用法。\nthis的几种主要用法:\n1.在类的方法定义中使用的this关键字代表调用该方法对象的引用。（this关键字只能在方法内部使用；只有当需要明确指出当前对象的引用时，才使用this关键字\n2.表示用类的成员变量，而非函数参数，注意在函数参数和成员变量同名是进行区分！其实这是第一种用法的特例，比较常用，所以拿出来强调一下。\n3.将当前的对象传递给其他方法\n4.用于在构造方法中引用满足指定参数类型的构造器（其实也就是构造方法）。但是这里必须非常注意：只能引用一个构造方法且必须位于开始！\n# Super\n　　super的使用和this基本相同，现在写下两者之间的比较：\n\n　　1.super()从子类中调用父类的构造方法，this()在同一类内调用其它方法。\n\n　　2.this和super不能同时出现在一个构造函数里面。\n\n　　3.super()和this()均需放在构造方法内第一行。\n\n　　4.this()和super()都指的是对象，所以，均不可以在static环境中使用。\n　必须在构造器的第一行放置super或者this构造器，否则编译器会自动地放一个空参数的super构造器的，其他的构造器也可以调用super或者this，调用成一个递归构造链，最后的结果是父类的构造器（可能有多级父类构造器）始终在子类的构造器之前执行，递归的调用父类构造器。无法执行当前的类的构造器。也就不能实例化任何对象，这个类就成为一个无为类。\n# static的含义\n了解this关键字之后，就能更全面的理解static方法的含义。static方法没有this的方法。在static方法的内部不能调用非静态方法，但反过来可以。可以在没有创建任何对象的前提下，仅仅通过类本身来调用static方法。但这实际上正是static方法的主要用途。Java中禁止使用全局方法，但通过在类中置入static方法就可以访问其他static方法和static域。","source":"_posts/2018.07.16 static与this.md","raw":"---\ntitle: static与this\ndate: 2018-07-16 10:33:33\ntags: 面试\n---\n# this\n用类名定义一个变量的时候，定义的应该只是一个引用，外面可以通过这个引用来访问这个类里面的属性和方法。类里面也有一个引用来访问自己的属性和方法，这个引用就是 this 对象，它可以在类里面来引用这个类的属性和方法。\n　每当一个对象创建后，Java虚拟机会给这个对象分配一个引用自身的指针，这个指针的名字就是this。因此，this只能在类中的非静态方法中使用，静态方法和静态的代码块中绝对不能出现this的用法。\nthis的几种主要用法:\n1.在类的方法定义中使用的this关键字代表调用该方法对象的引用。（this关键字只能在方法内部使用；只有当需要明确指出当前对象的引用时，才使用this关键字\n2.表示用类的成员变量，而非函数参数，注意在函数参数和成员变量同名是进行区分！其实这是第一种用法的特例，比较常用，所以拿出来强调一下。\n3.将当前的对象传递给其他方法\n4.用于在构造方法中引用满足指定参数类型的构造器（其实也就是构造方法）。但是这里必须非常注意：只能引用一个构造方法且必须位于开始！\n# Super\n　　super的使用和this基本相同，现在写下两者之间的比较：\n\n　　1.super()从子类中调用父类的构造方法，this()在同一类内调用其它方法。\n\n　　2.this和super不能同时出现在一个构造函数里面。\n\n　　3.super()和this()均需放在构造方法内第一行。\n\n　　4.this()和super()都指的是对象，所以，均不可以在static环境中使用。\n　必须在构造器的第一行放置super或者this构造器，否则编译器会自动地放一个空参数的super构造器的，其他的构造器也可以调用super或者this，调用成一个递归构造链，最后的结果是父类的构造器（可能有多级父类构造器）始终在子类的构造器之前执行，递归的调用父类构造器。无法执行当前的类的构造器。也就不能实例化任何对象，这个类就成为一个无为类。\n# static的含义\n了解this关键字之后，就能更全面的理解static方法的含义。static方法没有this的方法。在static方法的内部不能调用非静态方法，但反过来可以。可以在没有创建任何对象的前提下，仅仅通过类本身来调用static方法。但这实际上正是static方法的主要用途。Java中禁止使用全局方法，但通过在类中置入static方法就可以访问其他static方法和static域。","slug":"static与this","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbw001odcyudcanp5yc","content":"<h1 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h1><p>用类名定义一个变量的时候，定义的应该只是一个引用，外面可以通过这个引用来访问这个类里面的属性和方法。类里面也有一个引用来访问自己的属性和方法，这个引用就是 this 对象，它可以在类里面来引用这个类的属性和方法。<br>　每当一个对象创建后，Java虚拟机会给这个对象分配一个引用自身的指针，这个指针的名字就是this。因此，this只能在类中的非静态方法中使用，静态方法和静态的代码块中绝对不能出现this的用法。<br>this的几种主要用法:<br>1.在类的方法定义中使用的this关键字代表调用该方法对象的引用。（this关键字只能在方法内部使用；只有当需要明确指出当前对象的引用时，才使用this关键字<br>2.表示用类的成员变量，而非函数参数，注意在函数参数和成员变量同名是进行区分！其实这是第一种用法的特例，比较常用，所以拿出来强调一下。<br>3.将当前的对象传递给其他方法<br>4.用于在构造方法中引用满足指定参数类型的构造器（其实也就是构造方法）。但是这里必须非常注意：只能引用一个构造方法且必须位于开始！</p>\n<h1 id=\"Super\"><a href=\"#Super\" class=\"headerlink\" title=\"Super\"></a>Super</h1><p>　　super的使用和this基本相同，现在写下两者之间的比较：</p>\n<p>　　1.super()从子类中调用父类的构造方法，this()在同一类内调用其它方法。</p>\n<p>　　2.this和super不能同时出现在一个构造函数里面。</p>\n<p>　　3.super()和this()均需放在构造方法内第一行。</p>\n<p>　　4.this()和super()都指的是对象，所以，均不可以在static环境中使用。<br>　必须在构造器的第一行放置super或者this构造器，否则编译器会自动地放一个空参数的super构造器的，其他的构造器也可以调用super或者this，调用成一个递归构造链，最后的结果是父类的构造器（可能有多级父类构造器）始终在子类的构造器之前执行，递归的调用父类构造器。无法执行当前的类的构造器。也就不能实例化任何对象，这个类就成为一个无为类。</p>\n<h1 id=\"static的含义\"><a href=\"#static的含义\" class=\"headerlink\" title=\"static的含义\"></a>static的含义</h1><p>了解this关键字之后，就能更全面的理解static方法的含义。static方法没有this的方法。在static方法的内部不能调用非静态方法，但反过来可以。可以在没有创建任何对象的前提下，仅仅通过类本身来调用static方法。但这实际上正是static方法的主要用途。Java中禁止使用全局方法，但通过在类中置入static方法就可以访问其他static方法和static域。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h1><p>用类名定义一个变量的时候，定义的应该只是一个引用，外面可以通过这个引用来访问这个类里面的属性和方法。类里面也有一个引用来访问自己的属性和方法，这个引用就是 this 对象，它可以在类里面来引用这个类的属性和方法。<br>　每当一个对象创建后，Java虚拟机会给这个对象分配一个引用自身的指针，这个指针的名字就是this。因此，this只能在类中的非静态方法中使用，静态方法和静态的代码块中绝对不能出现this的用法。<br>this的几种主要用法:<br>1.在类的方法定义中使用的this关键字代表调用该方法对象的引用。（this关键字只能在方法内部使用；只有当需要明确指出当前对象的引用时，才使用this关键字<br>2.表示用类的成员变量，而非函数参数，注意在函数参数和成员变量同名是进行区分！其实这是第一种用法的特例，比较常用，所以拿出来强调一下。<br>3.将当前的对象传递给其他方法<br>4.用于在构造方法中引用满足指定参数类型的构造器（其实也就是构造方法）。但是这里必须非常注意：只能引用一个构造方法且必须位于开始！</p>\n<h1 id=\"Super\"><a href=\"#Super\" class=\"headerlink\" title=\"Super\"></a>Super</h1><p>　　super的使用和this基本相同，现在写下两者之间的比较：</p>\n<p>　　1.super()从子类中调用父类的构造方法，this()在同一类内调用其它方法。</p>\n<p>　　2.this和super不能同时出现在一个构造函数里面。</p>\n<p>　　3.super()和this()均需放在构造方法内第一行。</p>\n<p>　　4.this()和super()都指的是对象，所以，均不可以在static环境中使用。<br>　必须在构造器的第一行放置super或者this构造器，否则编译器会自动地放一个空参数的super构造器的，其他的构造器也可以调用super或者this，调用成一个递归构造链，最后的结果是父类的构造器（可能有多级父类构造器）始终在子类的构造器之前执行，递归的调用父类构造器。无法执行当前的类的构造器。也就不能实例化任何对象，这个类就成为一个无为类。</p>\n<h1 id=\"static的含义\"><a href=\"#static的含义\" class=\"headerlink\" title=\"static的含义\"></a>static的含义</h1><p>了解this关键字之后，就能更全面的理解static方法的含义。static方法没有this的方法。在static方法的内部不能调用非静态方法，但反过来可以。可以在没有创建任何对象的前提下，仅仅通过类本身来调用static方法。但这实际上正是static方法的主要用途。Java中禁止使用全局方法，但通过在类中置入static方法就可以访问其他static方法和static域。</p>\n"},{"title":"synchronized原理","date":"2018-07-16T14:20:28.000Z","_content":"# monitorenter\nEach object is associated with a monitor.A monitor is locked if and only if it has an owner.The thread that executes monitorenter attemps to gain ownership of the monitor associated with objectref,as follows:\n1. If the entry count of the monitor associated with objectref is zero, the thread enters the monitor and sets its entry count to one.The thread is then the owner of the monitor.\n2. If the thread already owns the monitor associated with objectref, it reenters the monitor,incrementing its entry count.\n3. If another thread already owns the monitor associated with objectref, the thread blocks until the monitor's entry count is zreo, then tries again to gain ownership.\n# monitorexit\nThe thread that executes monitorexit must be the owner of the monitor associated with the instance referenced by objecref.\nThe thread decrements the entry count of the monitor associated with objectref. If as a result the value of the entry count is zero, the thread exits the monitor and is no longer its owner. Other threads that are blocking to enter the monitor are allowed to attempt to do so. \n# Synchronized的实现原理\n通过一个monitor的对象来完成synchronized,其实wait,notify 等方法也依赖于monitor对象.(所以只有在同步代码块里才能调用wait/notify等方法)\n# 对于方法的同步\n方法的同步并没有通过指令monitorenter和monitorexit来完成（理论上其实也可以通过这两条指令来实现），不过相对于普通方法，其常量池中多了ACC_SYNCHRONIZED标示符。JVM就是根据该标示符来实现方法的同步的：当方法调用时，调用指令将会检查方法的 ACC_SYNCHRONIZED 访问标志是否被设置，如果设置了，执行线程将先获取monitor，获取成功之后才能执行方法体，方法执行完后再释放monitor。在方法执行期间，其他任何线程都无法再获得同一个monitor对象。 其实本质上没有区别，只是方法的同步是一种隐式的方式来实现，无需通过字节码来完成。\n","source":"_posts/2018.07.16 synchronized原理.md","raw":"---\ntitle: synchronized原理\ndate: 2018-07-16 22:20:28\ntags: 面试\n---\n# monitorenter\nEach object is associated with a monitor.A monitor is locked if and only if it has an owner.The thread that executes monitorenter attemps to gain ownership of the monitor associated with objectref,as follows:\n1. If the entry count of the monitor associated with objectref is zero, the thread enters the monitor and sets its entry count to one.The thread is then the owner of the monitor.\n2. If the thread already owns the monitor associated with objectref, it reenters the monitor,incrementing its entry count.\n3. If another thread already owns the monitor associated with objectref, the thread blocks until the monitor's entry count is zreo, then tries again to gain ownership.\n# monitorexit\nThe thread that executes monitorexit must be the owner of the monitor associated with the instance referenced by objecref.\nThe thread decrements the entry count of the monitor associated with objectref. If as a result the value of the entry count is zero, the thread exits the monitor and is no longer its owner. Other threads that are blocking to enter the monitor are allowed to attempt to do so. \n# Synchronized的实现原理\n通过一个monitor的对象来完成synchronized,其实wait,notify 等方法也依赖于monitor对象.(所以只有在同步代码块里才能调用wait/notify等方法)\n# 对于方法的同步\n方法的同步并没有通过指令monitorenter和monitorexit来完成（理论上其实也可以通过这两条指令来实现），不过相对于普通方法，其常量池中多了ACC_SYNCHRONIZED标示符。JVM就是根据该标示符来实现方法的同步的：当方法调用时，调用指令将会检查方法的 ACC_SYNCHRONIZED 访问标志是否被设置，如果设置了，执行线程将先获取monitor，获取成功之后才能执行方法体，方法执行完后再释放monitor。在方法执行期间，其他任何线程都无法再获得同一个monitor对象。 其实本质上没有区别，只是方法的同步是一种隐式的方式来实现，无需通过字节码来完成。\n","slug":"synchronized原理","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbx001pdcyu76nlo4dq","content":"<h1 id=\"monitorenter\"><a href=\"#monitorenter\" class=\"headerlink\" title=\"monitorenter\"></a>monitorenter</h1><p>Each object is associated with a monitor.A monitor is locked if and only if it has an owner.The thread that executes monitorenter attemps to gain ownership of the monitor associated with objectref,as follows:</p>\n<ol>\n<li>If the entry count of the monitor associated with objectref is zero, the thread enters the monitor and sets its entry count to one.The thread is then the owner of the monitor.</li>\n<li>If the thread already owns the monitor associated with objectref, it reenters the monitor,incrementing its entry count.</li>\n<li>If another thread already owns the monitor associated with objectref, the thread blocks until the monitor’s entry count is zreo, then tries again to gain ownership.<h1 id=\"monitorexit\"><a href=\"#monitorexit\" class=\"headerlink\" title=\"monitorexit\"></a>monitorexit</h1>The thread that executes monitorexit must be the owner of the monitor associated with the instance referenced by objecref.<br>The thread decrements the entry count of the monitor associated with objectref. If as a result the value of the entry count is zero, the thread exits the monitor and is no longer its owner. Other threads that are blocking to enter the monitor are allowed to attempt to do so. <h1 id=\"Synchronized的实现原理\"><a href=\"#Synchronized的实现原理\" class=\"headerlink\" title=\"Synchronized的实现原理\"></a>Synchronized的实现原理</h1>通过一个monitor的对象来完成synchronized,其实wait,notify 等方法也依赖于monitor对象.(所以只有在同步代码块里才能调用wait/notify等方法)<h1 id=\"对于方法的同步\"><a href=\"#对于方法的同步\" class=\"headerlink\" title=\"对于方法的同步\"></a>对于方法的同步</h1>方法的同步并没有通过指令monitorenter和monitorexit来完成（理论上其实也可以通过这两条指令来实现），不过相对于普通方法，其常量池中多了ACC_SYNCHRONIZED标示符。JVM就是根据该标示符来实现方法的同步的：当方法调用时，调用指令将会检查方法的 ACC_SYNCHRONIZED 访问标志是否被设置，如果设置了，执行线程将先获取monitor，获取成功之后才能执行方法体，方法执行完后再释放monitor。在方法执行期间，其他任何线程都无法再获得同一个monitor对象。 其实本质上没有区别，只是方法的同步是一种隐式的方式来实现，无需通过字节码来完成。</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"monitorenter\"><a href=\"#monitorenter\" class=\"headerlink\" title=\"monitorenter\"></a>monitorenter</h1><p>Each object is associated with a monitor.A monitor is locked if and only if it has an owner.The thread that executes monitorenter attemps to gain ownership of the monitor associated with objectref,as follows:</p>\n<ol>\n<li>If the entry count of the monitor associated with objectref is zero, the thread enters the monitor and sets its entry count to one.The thread is then the owner of the monitor.</li>\n<li>If the thread already owns the monitor associated with objectref, it reenters the monitor,incrementing its entry count.</li>\n<li>If another thread already owns the monitor associated with objectref, the thread blocks until the monitor’s entry count is zreo, then tries again to gain ownership.<h1 id=\"monitorexit\"><a href=\"#monitorexit\" class=\"headerlink\" title=\"monitorexit\"></a>monitorexit</h1>The thread that executes monitorexit must be the owner of the monitor associated with the instance referenced by objecref.<br>The thread decrements the entry count of the monitor associated with objectref. If as a result the value of the entry count is zero, the thread exits the monitor and is no longer its owner. Other threads that are blocking to enter the monitor are allowed to attempt to do so. <h1 id=\"Synchronized的实现原理\"><a href=\"#Synchronized的实现原理\" class=\"headerlink\" title=\"Synchronized的实现原理\"></a>Synchronized的实现原理</h1>通过一个monitor的对象来完成synchronized,其实wait,notify 等方法也依赖于monitor对象.(所以只有在同步代码块里才能调用wait/notify等方法)<h1 id=\"对于方法的同步\"><a href=\"#对于方法的同步\" class=\"headerlink\" title=\"对于方法的同步\"></a>对于方法的同步</h1>方法的同步并没有通过指令monitorenter和monitorexit来完成（理论上其实也可以通过这两条指令来实现），不过相对于普通方法，其常量池中多了ACC_SYNCHRONIZED标示符。JVM就是根据该标示符来实现方法的同步的：当方法调用时，调用指令将会检查方法的 ACC_SYNCHRONIZED 访问标志是否被设置，如果设置了，执行线程将先获取monitor，获取成功之后才能执行方法体，方法执行完后再释放monitor。在方法执行期间，其他任何线程都无法再获得同一个monitor对象。 其实本质上没有区别，只是方法的同步是一种隐式的方式来实现，无需通过字节码来完成。</li>\n</ol>\n"},{"title":"序列化原理机制","date":"2018-07-16T09:27:44.000Z","_content":"# 序列化是干什么的\n简单说就是为了保存在内存中的各种对象的状态（也就是实例变量，不是方法），并且可以把保存的对象状态再读出来。虽然你可以用你自己的各种各样的方法来保 存object states，但是Java给你提供一种应该比你自己好的保存对象状态的机制，那就是序列化。\n类通过实现 java.io.Serializable 接口以启用其序列化功能。未实现此接口的类将无法使其任何状态序列化或反序列化。可序列化类的所有子类型本身都是可序列化的。序列化接口没有方法或字段，仅用于标识可序列化的语义。\n序列化和反序列化的俩个主要类：ObjectOutputStream、ObjectInputStream。\n# 什么情况下需要序列化 \n1.当你想把的内存中的对象状态保存到一个文件中或者数据库中时候；\n2.当你想用套接字在网络上传送对象的时候；\n3.当你想通过RMI传输对象的时候；\n# 当对一个对象实现序列化时，究竟发生了什么？\n在没有序列化前，每个保存在堆（Heap）中的对象都有相应的状态（state），即实例变量（instance ariable）比如：\n```\n   1. Foo  myFoo = new Foo();     \n   2. myFoo .setWidth(37);     \n   3. myFoo.setHeight(70);    \n```\n当通过下面的代码序列化之后，MyFoo对象中的width和Height实例变量的值（37，70）都被保存到foo.dat文件中，这样以后又可以把它从文件中读出来，重新在堆中创建原来的对象。当然保存时候不仅仅是保存对象的实例变量的值，JVM还要保存一些小量信息，比如类的类型等以便恢复原来的对象。\n```\n   1. FileOutputStream fs = new FileOutputStream(\"foo.dat\");     \n   2. ObjectOutputStream os = new ObjectOutputStream(fs);     \n   3. os.writeObject(myFoo);     \n```\n# 相关注意事项\na）序列化时，只对对象的状态进行保存，而不管对象的方法；\nb）当一个父类实现序列化，子类自动实现序列化，不需要显式实现Serializable接口；\nc）当一个对象的实例变量引用其他对象，序列化该对象时也把引用对象进行序列化；\nd）并非所有的对象都可以序列化，至于为什么不可以，有很多原因了,比如：\n\n1.安全方面的原因，比如一个对象拥有private，public等field，对于一个要传输的对象，比如写到文件，或者进行rmi传输等等，在序列化进行传输的过程中，这个对象的private等域是不受保护的。\n2.资源分配方面的原因，比如socket，thread类，如果可以序列化，进行传输或者保存，也无法对他们进行重新的资源分配，而且，也是没有必要这样实现。\n\n# 序列化算法一般做如下事情\n1. 将对象实例相关的类元数据输出.\n2. 递归地输出超类描述直到不再有超类.\n3. 类元数据完了以后,开始从最顶层的超类开始输出对象实例的实际数据值.\n4. 从上之下递归输出实例的数据.\n\n<p>至此，Java序列化过程分析完毕，总结一下，在本例中序列化过程如下:</p><figure><div class=\"image-block\"><span><img src=\"https://ask.qcloudimg.com/http-save/yehe-1752328/ep2pz45j79.png?imageView2/2/w/1620\" style=\"cursor: zoom-in;\" class=\"\">\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2018.07.16 序列化原理机制.md","raw":"---\ntitle: 序列化原理机制\ndate: 2018-07-16 17:27:44\ntags: 面试\n---\n# 序列化是干什么的\n简单说就是为了保存在内存中的各种对象的状态（也就是实例变量，不是方法），并且可以把保存的对象状态再读出来。虽然你可以用你自己的各种各样的方法来保 存object states，但是Java给你提供一种应该比你自己好的保存对象状态的机制，那就是序列化。\n类通过实现 java.io.Serializable 接口以启用其序列化功能。未实现此接口的类将无法使其任何状态序列化或反序列化。可序列化类的所有子类型本身都是可序列化的。序列化接口没有方法或字段，仅用于标识可序列化的语义。\n序列化和反序列化的俩个主要类：ObjectOutputStream、ObjectInputStream。\n# 什么情况下需要序列化 \n1.当你想把的内存中的对象状态保存到一个文件中或者数据库中时候；\n2.当你想用套接字在网络上传送对象的时候；\n3.当你想通过RMI传输对象的时候；\n# 当对一个对象实现序列化时，究竟发生了什么？\n在没有序列化前，每个保存在堆（Heap）中的对象都有相应的状态（state），即实例变量（instance ariable）比如：\n```\n   1. Foo  myFoo = new Foo();     \n   2. myFoo .setWidth(37);     \n   3. myFoo.setHeight(70);    \n```\n当通过下面的代码序列化之后，MyFoo对象中的width和Height实例变量的值（37，70）都被保存到foo.dat文件中，这样以后又可以把它从文件中读出来，重新在堆中创建原来的对象。当然保存时候不仅仅是保存对象的实例变量的值，JVM还要保存一些小量信息，比如类的类型等以便恢复原来的对象。\n```\n   1. FileOutputStream fs = new FileOutputStream(\"foo.dat\");     \n   2. ObjectOutputStream os = new ObjectOutputStream(fs);     \n   3. os.writeObject(myFoo);     \n```\n# 相关注意事项\na）序列化时，只对对象的状态进行保存，而不管对象的方法；\nb）当一个父类实现序列化，子类自动实现序列化，不需要显式实现Serializable接口；\nc）当一个对象的实例变量引用其他对象，序列化该对象时也把引用对象进行序列化；\nd）并非所有的对象都可以序列化，至于为什么不可以，有很多原因了,比如：\n\n1.安全方面的原因，比如一个对象拥有private，public等field，对于一个要传输的对象，比如写到文件，或者进行rmi传输等等，在序列化进行传输的过程中，这个对象的private等域是不受保护的。\n2.资源分配方面的原因，比如socket，thread类，如果可以序列化，进行传输或者保存，也无法对他们进行重新的资源分配，而且，也是没有必要这样实现。\n\n# 序列化算法一般做如下事情\n1. 将对象实例相关的类元数据输出.\n2. 递归地输出超类描述直到不再有超类.\n3. 类元数据完了以后,开始从最顶层的超类开始输出对象实例的实际数据值.\n4. 从上之下递归输出实例的数据.\n\n<p>至此，Java序列化过程分析完毕，总结一下，在本例中序列化过程如下:</p><figure><div class=\"image-block\"><span><img src=\"https://ask.qcloudimg.com/http-save/yehe-1752328/ep2pz45j79.png?imageView2/2/w/1620\" style=\"cursor: zoom-in;\" class=\"\">\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"序列化原理机制","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzbz001sdcyup1hktus0","content":"<h1 id=\"序列化是干什么的\"><a href=\"#序列化是干什么的\" class=\"headerlink\" title=\"序列化是干什么的\"></a>序列化是干什么的</h1><p>简单说就是为了保存在内存中的各种对象的状态（也就是实例变量，不是方法），并且可以把保存的对象状态再读出来。虽然你可以用你自己的各种各样的方法来保 存object states，但是Java给你提供一种应该比你自己好的保存对象状态的机制，那就是序列化。<br>类通过实现 java.io.Serializable 接口以启用其序列化功能。未实现此接口的类将无法使其任何状态序列化或反序列化。可序列化类的所有子类型本身都是可序列化的。序列化接口没有方法或字段，仅用于标识可序列化的语义。<br>序列化和反序列化的俩个主要类：ObjectOutputStream、ObjectInputStream。</p>\n<h1 id=\"什么情况下需要序列化\"><a href=\"#什么情况下需要序列化\" class=\"headerlink\" title=\"什么情况下需要序列化\"></a>什么情况下需要序列化</h1><p>1.当你想把的内存中的对象状态保存到一个文件中或者数据库中时候；<br>2.当你想用套接字在网络上传送对象的时候；<br>3.当你想通过RMI传输对象的时候；</p>\n<h1 id=\"当对一个对象实现序列化时，究竟发生了什么？\"><a href=\"#当对一个对象实现序列化时，究竟发生了什么？\" class=\"headerlink\" title=\"当对一个对象实现序列化时，究竟发生了什么？\"></a>当对一个对象实现序列化时，究竟发生了什么？</h1><p>在没有序列化前，每个保存在堆（Heap）中的对象都有相应的状态（state），即实例变量（instance ariable）比如：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. Foo  myFoo = new Foo();     </span><br><span class=\"line\">2. myFoo .setWidth(37);     </span><br><span class=\"line\">3. myFoo.setHeight(70);</span><br></pre></td></tr></table></figure></p>\n<p>当通过下面的代码序列化之后，MyFoo对象中的width和Height实例变量的值（37，70）都被保存到foo.dat文件中，这样以后又可以把它从文件中读出来，重新在堆中创建原来的对象。当然保存时候不仅仅是保存对象的实例变量的值，JVM还要保存一些小量信息，比如类的类型等以便恢复原来的对象。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. FileOutputStream fs = new FileOutputStream(&quot;foo.dat&quot;);     </span><br><span class=\"line\">2. ObjectOutputStream os = new ObjectOutputStream(fs);     </span><br><span class=\"line\">3. os.writeObject(myFoo);</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"相关注意事项\"><a href=\"#相关注意事项\" class=\"headerlink\" title=\"相关注意事项\"></a>相关注意事项</h1><p>a）序列化时，只对对象的状态进行保存，而不管对象的方法；<br>b）当一个父类实现序列化，子类自动实现序列化，不需要显式实现Serializable接口；<br>c）当一个对象的实例变量引用其他对象，序列化该对象时也把引用对象进行序列化；<br>d）并非所有的对象都可以序列化，至于为什么不可以，有很多原因了,比如：</p>\n<p>1.安全方面的原因，比如一个对象拥有private，public等field，对于一个要传输的对象，比如写到文件，或者进行rmi传输等等，在序列化进行传输的过程中，这个对象的private等域是不受保护的。<br>2.资源分配方面的原因，比如socket，thread类，如果可以序列化，进行传输或者保存，也无法对他们进行重新的资源分配，而且，也是没有必要这样实现。</p>\n<h1 id=\"序列化算法一般做如下事情\"><a href=\"#序列化算法一般做如下事情\" class=\"headerlink\" title=\"序列化算法一般做如下事情\"></a>序列化算法一般做如下事情</h1><ol>\n<li>将对象实例相关的类元数据输出.</li>\n<li>递归地输出超类描述直到不再有超类.</li>\n<li>类元数据完了以后,开始从最顶层的超类开始输出对象实例的实际数据值.</li>\n<li>从上之下递归输出实例的数据.</li>\n</ol>\n<p></p><p>至此，Java序列化过程分析完毕，总结一下，在本例中序列化过程如下:</p><figure><div class=\"image-block\"><span><img src=\"https://ask.qcloudimg.com/http-save/yehe-1752328/ep2pz45j79.png?imageView2/2/w/1620\" style=\"cursor: zoom-in;\" class=\"\"><p></p>\n</span></div></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"序列化是干什么的\"><a href=\"#序列化是干什么的\" class=\"headerlink\" title=\"序列化是干什么的\"></a>序列化是干什么的</h1><p>简单说就是为了保存在内存中的各种对象的状态（也就是实例变量，不是方法），并且可以把保存的对象状态再读出来。虽然你可以用你自己的各种各样的方法来保 存object states，但是Java给你提供一种应该比你自己好的保存对象状态的机制，那就是序列化。<br>类通过实现 java.io.Serializable 接口以启用其序列化功能。未实现此接口的类将无法使其任何状态序列化或反序列化。可序列化类的所有子类型本身都是可序列化的。序列化接口没有方法或字段，仅用于标识可序列化的语义。<br>序列化和反序列化的俩个主要类：ObjectOutputStream、ObjectInputStream。</p>\n<h1 id=\"什么情况下需要序列化\"><a href=\"#什么情况下需要序列化\" class=\"headerlink\" title=\"什么情况下需要序列化\"></a>什么情况下需要序列化</h1><p>1.当你想把的内存中的对象状态保存到一个文件中或者数据库中时候；<br>2.当你想用套接字在网络上传送对象的时候；<br>3.当你想通过RMI传输对象的时候；</p>\n<h1 id=\"当对一个对象实现序列化时，究竟发生了什么？\"><a href=\"#当对一个对象实现序列化时，究竟发生了什么？\" class=\"headerlink\" title=\"当对一个对象实现序列化时，究竟发生了什么？\"></a>当对一个对象实现序列化时，究竟发生了什么？</h1><p>在没有序列化前，每个保存在堆（Heap）中的对象都有相应的状态（state），即实例变量（instance ariable）比如：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. Foo  myFoo = new Foo();     </span><br><span class=\"line\">2. myFoo .setWidth(37);     </span><br><span class=\"line\">3. myFoo.setHeight(70);</span><br></pre></td></tr></table></figure></p>\n<p>当通过下面的代码序列化之后，MyFoo对象中的width和Height实例变量的值（37，70）都被保存到foo.dat文件中，这样以后又可以把它从文件中读出来，重新在堆中创建原来的对象。当然保存时候不仅仅是保存对象的实例变量的值，JVM还要保存一些小量信息，比如类的类型等以便恢复原来的对象。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. FileOutputStream fs = new FileOutputStream(&quot;foo.dat&quot;);     </span><br><span class=\"line\">2. ObjectOutputStream os = new ObjectOutputStream(fs);     </span><br><span class=\"line\">3. os.writeObject(myFoo);</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"相关注意事项\"><a href=\"#相关注意事项\" class=\"headerlink\" title=\"相关注意事项\"></a>相关注意事项</h1><p>a）序列化时，只对对象的状态进行保存，而不管对象的方法；<br>b）当一个父类实现序列化，子类自动实现序列化，不需要显式实现Serializable接口；<br>c）当一个对象的实例变量引用其他对象，序列化该对象时也把引用对象进行序列化；<br>d）并非所有的对象都可以序列化，至于为什么不可以，有很多原因了,比如：</p>\n<p>1.安全方面的原因，比如一个对象拥有private，public等field，对于一个要传输的对象，比如写到文件，或者进行rmi传输等等，在序列化进行传输的过程中，这个对象的private等域是不受保护的。<br>2.资源分配方面的原因，比如socket，thread类，如果可以序列化，进行传输或者保存，也无法对他们进行重新的资源分配，而且，也是没有必要这样实现。</p>\n<h1 id=\"序列化算法一般做如下事情\"><a href=\"#序列化算法一般做如下事情\" class=\"headerlink\" title=\"序列化算法一般做如下事情\"></a>序列化算法一般做如下事情</h1><ol>\n<li>将对象实例相关的类元数据输出.</li>\n<li>递归地输出超类描述直到不再有超类.</li>\n<li>类元数据完了以后,开始从最顶层的超类开始输出对象实例的实际数据值.</li>\n<li>从上之下递归输出实例的数据.</li>\n</ol>\n<p></p><p>至此，Java序列化过程分析完毕，总结一下，在本例中序列化过程如下:</p><figure><div class=\"image-block\"><span><img src=\"https://ask.qcloudimg.com/http-save/yehe-1752328/ep2pz45j79.png?imageView2/2/w/1620\" style=\"cursor: zoom-in;\" class=\"\"><p></p>\n</span></div></figure>"},{"title":"ConcurrentHashMap的锁分段技术","date":"2018-07-17T13:24:34.000Z","_content":"1.哈希算法: 是一种将任意内容的输入转换成相同长度输出的加密方式，其输出被称为哈希值。 \n2. 哈希表: 根据设定的哈希函数H(key)和处理冲突方法将一组关键字映象到一个有限的地址区间上，并以关键字在地址区间中的象作为记录在表中的存储位置，这种表称为哈希表或散列，所得存储位置称为哈希地址或散列地址。\n# 线程不安全的HashMap\n因为多线程环境下，使用Hashmap进行put操作会引起死循环，导致CPU利用率接近100%，所以在并发情况下不能使用HashMap。\n# 效率低下的HashTable容器\nHashTable容器使用synchronized来保证线程安全，但在线程竞争激烈的情况下HashTable的效率非常低下。因为当一个线程访问HashTable的同步方法时，其他线程访问HashTable的同步方法时，可能会进入阻塞或轮询状态。如线程1使用put进行添加元素，线程2不但不能使用put方法添加元素，并且也不能使用get方法来获取元素，所以竞争越激烈效率越低。\n# ConcurrentHashMap的锁分段技术\nHashTable容器在竞争激烈的并发环境下表现出效率低下的原因，是因为所有访问HashTable的线程都必须竞争同一把锁，那假如容器里有多把锁，每一把锁用于锁容器其中一部分数据，那么当多线程访问容器里不同数据段的数据时，线程间就不会存在锁竞争，从而可以有效的提高并发访问效率，这就是ConcurrentHashMap所使用的锁分段技术，首先将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问。\n# 实现原理\n<p><img alt=\"\" src=\"http://static.oschina.net/uploads/space/2016/0317/154925_NLV0_2243330.png\"></p>\n从图中可以看到，ConcurrentHashMap内部分为很多个Segment，每一个Segment拥有一把锁，然后每个Segment（继承ReentrantLock）\n```\nstatic final class Segment<K,V> extends ReentrantLock implements Serializable\n```\n这样对每个segment中的数据需要同步操作的话都是使用每个segment容器对象自身的锁来实现。只有对全局需要改变时锁定的是所有的segment。\n\nSegment下面包含很多个HashEntry列表数组。对于一个key，需要经过三次（为什么要hash三次下文会详细讲解）hash操作，才能最终定位这个元素的位置，这三次hash分别为：\n\n对于一个key，先进行一次hash操作，得到hash值h1，也即h1 = hash1(key)；\n将得到的h1的高几位进行第二次hash，得到hash值h2，也即h2 = hash2(h1高几位)，通过h2能够确定该元素的放在哪个Segment；\n将得到的h1进行第三次hash，得到hash值h3，也即h3 = hash3(h1)，通过h3能够确定该元素放置在哪个HashEntry。\n\nConcurrentHashMap中主要实体类就是三个：ConcurrentHashMap（整个Hash表）,Segment（桶），HashEntry（节点），对应上面的图可以看出之间的关系\n\n在JDK1.6中，HashEntry中的next指针也定义为final，并且每次插入将新添加节点作为链的头节点（同HashMap实现），而且每次删除一个节点时，会将删除节点之前的所有节点 拷贝一份组成一个新的链，而将当前节点的上一个节点的next指向当前节点的下一个节点，从而在删除以后有两条链存在，因而可以保证即使在同一条链中，有一个线程在删除，而另一个线程在遍历，它们都能工作良好，因为遍历的线程能继续使用原有的链。因而这种实现是一种更加细粒度的happens-before关系，即如果遍历线程在删除线程结束后开始，则它能看到删除后的变化，如果它发生在删除线程正在执行中间，则它会使用原有的链，而不会等到删除线程结束后再执行，即看不到删除线程的影响。如果这不符合你的需求，还是乖乖的用Hashtable或HashMap的synchronized版本，Collections.synchronizedMap()做的包装。\n\n不变模式（immutable）是多线程安全里最简单的一种保障方式。因为你拿他没有办法，想改变它也没有机会。不变模式主要通过final关键字来限定的。在JMM中final关键字还有特殊的语义。Final域使得确保初始化安全性（initialization safety）成为可能，初始化安全性让不可变形对象不需要同步就能自由地被访问和共享。\n\n# 传入的参数initialCapacity,locdFactor,concurrencyLevel这三个\n+ initialCapacity表示新创建的这个ConcurrentHashMap的初始容量，也就是上面的结构图中的Entry数量。默认值为static final int DEFAULT_INITIAL_CAPACITY = 16;\n+ loadFactor表示负载因子，就是当ConcurrentHashMap中的元素个数大于loadFactor * 最大容量时就需要rehash，扩容。默认值为static final float DEFAULT_LOAD_FACTOR = 0.75f;\n+ concurrencyLevel表示并发级别，这个值用来确定Segment的个数，Segment的个数是大于等于concurrencyLevel的第一个2的n次方的数。比如，如果concurrencyLevel为12，13，14，15，16这些数，则Segment的数目为16(2的4次方)。默认值为static final int DEFAULT_CONCURRENCY_LEVEL = 16;。理想情况下ConcurrentHashMap的真正的并发访问量能够达到concurrencyLevel，因为有concurrencyLevel个Segment，假如有concurrencyLevel个线程需要访问Map，并且需要访问的数据都恰好分别落在不同的Segment中，则这些线程能够无竞争地自由访问（因为他们不需要竞争同一把锁），达到同时访问的效果。这也是为什么这个参数起名为“并发级别”的原因。\n\n# 转载\n\n<div class=\"content\" id=\"articleContent\">\n                                                    <div class=\"ad-wrap\">\n                                                        <p style=\"margin:0 0 10px 0;\"><a data-traceid=\"blog_detail_above_text_link_1\" data-tracepid=\"blog_detail_above_text_link\" style=\"color:#A00;font-weight:bold;\" href=\"http://clickc.admaster.com.cn/c/a109734,b2619652,c3159,i0,m101,8a1,8b2,h\" target=\"_blank\">华为云4核8G，高性能云服务器，免费试用\n&gt;&gt;&gt; </a>&nbsp;&nbsp;<img src=\"https://www.oschina.net/img/hot3.png\" style=\"max-height: 32px; max-width: 32px;\" align=\"absmiddle\"></p>\n                                        </div>\n                                                <p>曾经在&nbsp;<span style=\"font-size:12.5px\"><a href=\"http://my.oschina.net/hosee/blog/607677\" target=\"_blank\" rel=\"nofollow\">[高并发Java 五] JDK并发包1</a>&nbsp;中提到过ConcurrentHashMap，只是简单的提到了下ConcurrentHashMap的优点，以及大概的实现原理。</span></p> \n<p><span style=\"font-size:12.5px\">而本文则重点介绍ConcurrentHashMap实现的细节。</span></p> \n<p><span style=\"font-size:12.5px\">HashMap就不介绍了，具体请查看<a href=\"http://my.oschina.net/hosee/blog/618953\" target=\"_blank\" rel=\"nofollow\">JDK7与JDK8中HashMap的实现</a></span></p> \n<p><span style=\"font-size:12.5px\">HashTable是一个线程安全的类，它使用</span>synchronized来锁住整张Hash表来实现线程安全，即每次锁住整张表让线程独占。ConcurrentHashMap允许多个修改操作并发进行，其关键在于使用了<span style=\"color:#E53333\">锁分离</span>技术。它使用了多个锁来控制对hash表的不同部分进行的修改。ConcurrentHashMap内部使用段(Segment)来表示这些不同的部分，每个段其实就是一个小的Hashtable，它们有自己的锁。只要多个修改操作发生在不同的段上，它们就可以并发进行。</p> \n<p>有些方法需要跨段，比如size()和containsValue()，它们可能需要锁定整个表而而不仅仅是某个段，这需要按顺序锁定所有段，操作完毕后，又按顺序释放所有段的锁。这里“按顺序”是很重要的，否则极有可能出现死锁，在ConcurrentHashMap内部，段数组是final的，并且其成员变量实际上也是final的，但是，仅仅是将数组声明为final的并不保证数组成员也是final的，这需要实现上的保证。这可以确保不会出现死锁，因为获得锁的顺序是固定的。</p> \n<span id=\"OSC_h2_1\"></span>\n<h2 id=\"h2_1\">1. 实现原理</h2> \n<p>ConcurrentHashMap使用分段锁技术，将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问，能够实现真正的并发访问。如下图是ConcurrentHashMap的内部结构图：</p> \n<p>&nbsp;</p> \n<p><img alt=\"\" src=\"http://static.oschina.net/uploads/space/2016/0317/154925_NLV0_2243330.png\"></p> \n<p style=\"text-align:justify\">从图中可以看到，ConcurrentHashMap内部分为很多个Segment，每一个Segment拥有一把锁，然后每个Segment（继承<span style=\"color:#E53333\">ReentrantLock</span>）</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Segment</span>&lt;<span class=\"hljs-title\">K</span>,<span class=\"hljs-title\">V</span>&gt; <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ReentrantLock</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">Serializable</span></span></code></pre> \n<p style=\"text-align:justify\">Segment继承了ReentrantLock，表明每个segment都可以当做一个锁。（ReentrantLock前文已经提到，不了解的话就把当做synchronized的替代者吧）这样对每个segment中的数据需要同步操作的话都是使用每个segment容器对象自身的锁来实现。只有对全局需要改变时锁定的是所有的segment。</p> \n<p style=\"text-align:justify\"><span style=\"font-size:13.3333px\">Segment</span>下面包含很多个HashEntry列表数组。对于一个key，需要经过<span style=\"color:#E53333\">三次</span>（为什么要hash三次下文会详细讲解）hash操作，才能最终定位这个元素的位置，这三次hash分别为：</p> \n<ol> \n <li>对于一个key，先进行一次hash操作，得到hash值h1，也即h1 = hash1(key)；</li> \n <li>将得到的h1的高几位进行第二次hash，得到hash值h2，也即h2 = hash2(h1高几位)，通过h2能够确定该元素的放在哪个Segment；</li> \n <li>将得到的h1进行第三次hash，得到hash值h3，也即h3 = hash3(h1)，通过h3能够确定该元素放置在哪个HashEntry。</li> \n</ol> \n<p style=\"text-align:justify\">ConcurrentHashMap中主要实体类就是三个：ConcurrentHashMap（整个Hash表）,Segment（桶），HashEntry（节点），对应上面的图可以看出之间的关系</p> \n<pre><code class=\"hljs php\"><span class=\"hljs-comment\">/** \n* The segments, each of which is a specialized hash table \n*/</span>  \n<span class=\"hljs-keyword\">final</span> Segment&lt;K,V&gt;[] segments;</code></pre> \n<p>不变(Immutable)和易变(Volatile)ConcurrentHashMap完全允许多个读操作并发进行，读操作并不需要加锁。如果使用传统的技术，如HashMap中的实现，如果允许可以在hash链的中间添加或删除元素，读操作不加锁将得到不一致的数据。ConcurrentHashMap实现技术是保证HashEntry几乎是不可变的。HashEntry代表每个hash链中的一个节点，其结构如下所示：</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HashEntry</span>&lt;<span class=\"hljs-title\">K</span>,<span class=\"hljs-title\">V</span>&gt; </span>{  \n     <span class=\"hljs-keyword\">final</span> K key;  \n     <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">int</span> hash;  \n     <span class=\"hljs-keyword\">volatile</span> V value;  \n     <span class=\"hljs-keyword\">volatile</span> HashEntry&lt;K,V&gt; next;  \n }</code></pre> \n<p>在JDK 1.6中，HashEntry中的next指针也定义为final，并且每次插入将新添加节点作为链的头节点（同HashMap实现），而且每次删除一个节点时，会将删除节点之前的所有节点 <span style=\"color:#E53333\">拷贝一份组成一个新的链</span>，而将当前节点的上一个节点的next指向当前节点的下一个节点，从而在删除以后 <span style=\"color:#E53333\">有两条链存在</span>，因而可以保证即使在同一条链中，有一个线程在删除，而另一个线程在遍历，它们都能工作良好，因为遍历的线程能继续使用原有的链。因而这种实现是一种更加细粒度的happens-before关系，即如果遍历线程在删除线程结束后开始，则它能看到删除后的变化，如果它发生在删除线程正在执行中间，则它会使用原有的链，而不会等到删除线程结束后再执行，即看不到删除线程的影响。如果这不符合你的需求，还是乖乖的用Hashtable或HashMap的synchronized版本，Collections.synchronizedMap()做的包装。</p> \n<p style=\"text-align:justify\">而HashMap中的Entry只有key是final的</p> \n<pre><code class=\"hljs ruby\">static <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Entry</span>&lt;K,<span class=\"hljs-title\">V</span>&gt; <span class=\"hljs-title\">implements</span> <span class=\"hljs-title\">Map</span>.<span class=\"hljs-title\">Entry</span>&lt;K,<span class=\"hljs-title\">V</span>&gt; {</span>\n        final K key;\n        V value;\n        Entry&lt;K,V&gt; <span class=\"hljs-keyword\">next</span>;\n        int hash;</code></pre> \n<p><strong>不变</strong> <strong>模式（immutable）</strong>是多线程安全里最简单的一种保障方式。因为你拿他没有办法，想改变它也没有机会。<br> 不变模式主要通过final关键字来限定的。在JMM中final关键字还有特殊的语义。Final域使得确保初始化安全性（initialization safety）成为可能，初始化安全性让不可变形对象不需要同步就能自由地被访问和共享。</p> \n<span id=\"OSC_h3_2\"></span>\n<h3 id=\"h3_2\">1.1&nbsp;初始化</h3> \n<p>先看看ConcurrentHashMap的初始化做了哪些事情，构造函数的源码如下：</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">ConcurrentHashMap</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> initialCapacity,\n                             <span class=\"hljs-keyword\">float</span> loadFactor, <span class=\"hljs-keyword\">int</span> concurrencyLevel)</span> </span>{\n        <span class=\"hljs-keyword\">if</span> (!(loadFactor &gt; <span class=\"hljs-number\">0</span>) || initialCapacity &lt; <span class=\"hljs-number\">0</span> || concurrencyLevel &lt;= <span class=\"hljs-number\">0</span>)\n            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalArgumentException();\n        <span class=\"hljs-keyword\">if</span> (concurrencyLevel &gt; MAX_SEGMENTS)\n            concurrencyLevel = MAX_SEGMENTS;\n        <span class=\"hljs-comment\">// Find power-of-two sizes best matching arguments</span>\n        <span class=\"hljs-keyword\">int</span> sshift = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">int</span> ssize = <span class=\"hljs-number\">1</span>;\n        <span class=\"hljs-keyword\">while</span> (ssize &lt; concurrencyLevel) {\n            ++sshift;\n            ssize &lt;&lt;= <span class=\"hljs-number\">1</span>;\n        }\n        <span class=\"hljs-keyword\">this</span>.segmentShift = <span class=\"hljs-number\">32</span> - sshift;\n        <span class=\"hljs-keyword\">this</span>.segmentMask = ssize - <span class=\"hljs-number\">1</span>;\n        <span class=\"hljs-keyword\">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)\n            initialCapacity = MAXIMUM_CAPACITY;\n        <span class=\"hljs-keyword\">int</span> c = initialCapacity / ssize;\n        <span class=\"hljs-keyword\">if</span> (c * ssize &lt; initialCapacity)\n            ++c;\n        <span class=\"hljs-keyword\">int</span> cap = MIN_SEGMENT_TABLE_CAPACITY;\n        <span class=\"hljs-keyword\">while</span> (cap &lt; c)\n            cap &lt;&lt;= <span class=\"hljs-number\">1</span>;\n        <span class=\"hljs-comment\">// create segments and segments[0]</span>\n        Segment&lt;K,V&gt; s0 =\n            <span class=\"hljs-keyword\">new</span> Segment&lt;K,V&gt;(loadFactor, (<span class=\"hljs-keyword\">int</span>)(cap * loadFactor),\n                             (HashEntry&lt;K,V&gt;[])<span class=\"hljs-keyword\">new</span> HashEntry[cap]);\n        Segment&lt;K,V&gt;[] ss = (Segment&lt;K,V&gt;[])<span class=\"hljs-keyword\">new</span> Segment[ssize];\n        UNSAFE.putOrderedObject(ss, SBASE, s0); <span class=\"hljs-comment\">// ordered write of segments[0]</span>\n        <span class=\"hljs-keyword\">this</span>.segments = ss;\n    }</code></pre> \n<p style=\"text-align:justify\">传入的参数有initialCapacity，loadFactor，concurrencyLevel这三个。</p> \n<ul> \n <li>initialCapacity表示新创建的这个ConcurrentHashMap的初始容量，也就是上面的结构图中的Entry数量。默认值为static final int DEFAULT_INITIAL_CAPACITY = 16;</li> \n <li>loadFactor表示负载因子，就是当ConcurrentHashMap中的元素个数大于loadFactor * 最大容量时就需要rehash，扩容。默认值为static final float DEFAULT_LOAD_FACTOR = 0.75f;</li> \n <li>concurrencyLevel表示并发级别，这个值用来确定Segment的个数，Segment的个数是大于等于concurrencyLevel的第一个2的n次方的数。比如，如果concurrencyLevel为12，13，14，15，16这些数，则Segment的数目为16(2的4次方)。默认值为static final int DEFAULT_CONCURRENCY_LEVEL = 16;。理想情况下ConcurrentHashMap的真正的并发访问量能够达到concurrencyLevel，因为有concurrencyLevel个Segment，假如有concurrencyLevel个线程需要访问Map，并且需要访问的数据都恰好分别落在不同的Segment中，则这些线程能够无竞争地自由访问（因为他们不需要竞争同一把锁），达到同时访问的效果。这也是为什么这个参数起名为“并发级别”的原因。</li> \n</ul> \n<p style=\"text-align:justify\">初始化的一些动作：</p> \n<ol> \n <li>验证参数的合法性，如果不合法，直接抛出异常。</li> \n <li>concurrencyLevel也就是Segment的个数不能超过规定的最大Segment的个数，默认值为static final int MAX_SEGMENTS = 1 &lt;&lt; 16;，如果超过这个值，设置为这个值。</li> \n <li>然后使用循环找到大于等于concurrencyLevel的第一个2的n次方的数ssize，这个数就是Segment数组的大小，并记录一共向左按位移动的次数sshift，并令segmentShift = 32 - sshift，并且segmentMask的值等于ssize - 1，segmentMask的各个二进制位都为1，目的是之后可以通过key的hash值与这个值做&amp;运算确定Segment的索引。</li> \n <li>检查给的容量值是否大于允许的最大容量值，如果大于该值，设置为该值。最大容量值为static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;。</li> \n <li>然后计算每个Segment平均应该放置多少个元素，这个值c是向上取整的值。比如初始容量为15，Segment个数为4，则每个Segment平均需要放置4个元素。</li> \n <li>最后创建一个Segment实例，将其当做Segment数组的第一个元素。</li> \n</ol> \n<span id=\"OSC_h3_3\"></span>\n<h3 id=\"h3_3\">1.2&nbsp;put操作</h3> \n<p>put操作的源码如下：</p> \n<pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> V <span class=\"hljs-title\">put</span>(<span class=\"hljs-params\">K key, V <span class=\"hljs-keyword\">value</span></span>) </span>{\n      Segment&lt;K,V&gt; s;\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">value</span> == <span class=\"hljs-literal\">null</span>)\n          <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NullPointerException();\n      <span class=\"hljs-keyword\">int</span> hash = hash(key);\n      <span class=\"hljs-keyword\">int</span> j = (hash &gt;&gt;&gt; segmentShift) &amp; segmentMask;\n      <span class=\"hljs-keyword\">if</span> ((s = (Segment&lt;K,V&gt;)UNSAFE.getObject          <span class=\"hljs-comment\">// nonvolatile; recheck</span>\n           (segments, (j &lt;&lt; SSHIFT) + SBASE)) == <span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">//  in ensureSegment</span>\n          s = ensureSegment(j);\n      <span class=\"hljs-keyword\">return</span> s.put(key, hash, <span class=\"hljs-keyword\">value</span>, <span class=\"hljs-literal\">false</span>);\n  }</code></pre> \n<p style=\"text-align:justify\">操作步骤如下：</p> \n<ol> \n <li>判断value是否为null，如果为null，直接抛出异常。</li> \n <li>key通过一次hash运算得到一个hash值。(这个hash运算下文详说)</li> \n <li>将得到hash值向右按位移动segmentShift位，然后再与segmentMask做&amp;运算得到segment的索引j。<br> 在初始化的时候我们说过segmentShift的值等于32-sshift，例如concurrencyLevel等于16，则sshift等于4，则segmentShift为28。hash值是一个32位的整数，将其向右移动28位就变成这个样子：<br> 0000 0000 0000 0000 0000 0000 0000 xxxx，然后再用这个值与segmentMask做&amp;运算，也就是取最后四位的值。这个值确定Segment的索引。</li> \n <li>使用Unsafe的方式从Segment数组中获取该索引对应的Segment对象。</li> \n <li>向这个Segment对象中put值，这个put操作也基本是一样的步骤（通过&amp;运算获取HashEntry的索引，然后set）。</li> \n</ol> \n<pre><code class=\"hljs cs\"><span class=\"hljs-function\">final V <span class=\"hljs-title\">put</span>(<span class=\"hljs-params\">K key, <span class=\"hljs-keyword\">int</span> hash, V <span class=\"hljs-keyword\">value</span>, boolean onlyIfAbsent</span>) </span>{\n            HashEntry&lt;K,V&gt; node = tryLock() ? <span class=\"hljs-literal\">null</span> :\n                scanAndLockForPut(key, hash, <span class=\"hljs-keyword\">value</span>);\n            V oldValue;\n            <span class=\"hljs-keyword\">try</span> {\n                HashEntry&lt;K,V&gt;[] tab = table;\n                <span class=\"hljs-keyword\">int</span> index = (tab.length - <span class=\"hljs-number\">1</span>) &amp; hash;\n                HashEntry&lt;K,V&gt; first = entryAt(tab, index);\n                <span class=\"hljs-keyword\">for</span> (HashEntry&lt;K,V&gt; e = first;;) {\n                    <span class=\"hljs-keyword\">if</span> (e != <span class=\"hljs-literal\">null</span>) {\n                        K k;\n                        <span class=\"hljs-keyword\">if</span> ((k = e.key) == key ||\n                            (e.hash == hash &amp;&amp; key.<span class=\"hljs-keyword\">equals</span>(k))) {\n                            oldValue = e.<span class=\"hljs-keyword\">value</span>;\n                            <span class=\"hljs-keyword\">if</span> (!onlyIfAbsent) {\n                                e.<span class=\"hljs-keyword\">value</span> = <span class=\"hljs-keyword\">value</span>;\n                                ++modCount;\n                            }\n                            <span class=\"hljs-keyword\">break</span>;\n                        }\n                        e = e.next;\n                    }\n                    <span class=\"hljs-keyword\">else</span> {\n                        <span class=\"hljs-keyword\">if</span> (node != <span class=\"hljs-literal\">null</span>)\n                            node.setNext(first);\n                        <span class=\"hljs-keyword\">else</span>\n                            node = <span class=\"hljs-keyword\">new</span> HashEntry&lt;K,V&gt;(hash, key, <span class=\"hljs-keyword\">value</span>, first);\n                        <span class=\"hljs-keyword\">int</span> c = count + <span class=\"hljs-number\">1</span>;\n                        <span class=\"hljs-keyword\">if</span> (c &gt; threshold &amp;&amp; tab.length &lt; MAXIMUM_CAPACITY)\n                            rehash(node);\n                        <span class=\"hljs-keyword\">else</span>\n                            setEntryAt(tab, index, node);\n                        ++modCount;\n                        count = c;\n                        oldValue = <span class=\"hljs-literal\">null</span>;\n                        <span class=\"hljs-keyword\">break</span>;\n                    }\n                }\n            } <span class=\"hljs-keyword\">finally</span> {\n                unlock();\n            }\n            <span class=\"hljs-keyword\">return</span> oldValue;\n        }</code></pre> \n<p>put操作是要加锁的。</p> \n<span id=\"OSC_h3_4\"></span>\n<h3 id=\"h3_4\">1.3 get操作</h3> \n<p style=\"text-align:justify\">get操作的源码如下：</p> \n<pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> V <span class=\"hljs-title\">get</span>(<span class=\"hljs-params\">Object key</span>) </span>{\n        Segment&lt;K,V&gt; s; <span class=\"hljs-comment\">// manually integrate access methods to reduce overhead</span>\n        HashEntry&lt;K,V&gt;[] tab;\n        <span class=\"hljs-keyword\">int</span> h = hash(key);\n        <span class=\"hljs-keyword\">long</span> u = (((h &gt;&gt;&gt; segmentShift) &amp; segmentMask) &lt;&lt; SSHIFT) + SBASE;\n        <span class=\"hljs-keyword\">if</span> ((s = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(segments, u)) != <span class=\"hljs-literal\">null</span> &amp;&amp;\n            (tab = s.table) != <span class=\"hljs-literal\">null</span>) {\n            <span class=\"hljs-keyword\">for</span> (HashEntry&lt;K,V&gt; e = (HashEntry&lt;K,V&gt;) UNSAFE.getObjectVolatile\n                     (tab, ((<span class=\"hljs-keyword\">long</span>)(((tab.length - <span class=\"hljs-number\">1</span>) &amp; h)) &lt;&lt; TSHIFT) + TBASE);\n                 e != <span class=\"hljs-literal\">null</span>; e = e.next) {\n                K k;\n                <span class=\"hljs-keyword\">if</span> ((k = e.key) == key || (e.hash == h &amp;&amp; key.<span class=\"hljs-keyword\">equals</span>(k)))\n                    <span class=\"hljs-keyword\">return</span> e.<span class=\"hljs-keyword\">value</span>;\n            }\n        }\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\n    }</code></pre> \n<p style=\"text-align:justify\">操作步骤为：</p> \n<ol> \n <li>和put操作一样，先通过key进行两次hash确定应该去哪个Segment中取数据。</li> \n <li>使用Unsafe获取对应的Segment，然后再进行一次&amp;运算得到HashEntry链表的位置，然后从链表头开始遍历整个链表（因为Hash可能会有碰撞，所以用一个链表保存），如果找到对应的key，则返回对应的value值，如果链表遍历完都没有找到对应的key，则说明Map中不包含该key，返回null。</li> \n</ol> \n<p style=\"text-align:justify\">值得注意的是，<span style=\"color:#E53333\">get操作是不需要加锁的（如果value为null，会调用</span><span style=\"color:#FF0000\">readValueUnderLock，只有这个步骤会加锁</span><span style=\"color:#E53333\">）<span style=\"color:#000000\">，通过前面提到的volatile和final来确保数据安全。</span></span></p> \n<span id=\"OSC_h3_5\"></span>\n<h3 id=\"h3_5\">1.4&nbsp;size操作</h3> \n<p>size操作与put和get操作最大的区别在于，size操作需要遍历所有的Segment才能算出整个Map的大小，而put和get都只关心一个Segment。假设我们当前遍历的Segment为SA，那么在遍历SA过程中其他的Segment比如SB可能会被修改，于是这一次运算出来的size值可能并不是Map当前的真正大小。所以一个比较简单的办法就是计算Map大小的时候所有的Segment都Lock住，不能更新(包含put，remove等等)数据，计算完之后再Unlock。这是普通人能够想到的方案，但是牛逼的作者还有一个更好的Idea：<span style=\"color:#E53333\">先给3次机会</span>，不lock所有的Segment，遍历所有Segment，累加各个Segment的大小得到整个Map的大小，如果某相邻的两次计算获取的所有Segment的更新的次数（每个Segment都有一个modCount变量，这个变量在Segment中的Entry被修改时会加一，通过这个值可以得到每个Segment的更新操作的次数）是一样的，说明计算过程中没有更新操作，则直接返回这个值。如果这三次不加锁的计算过程中Map的更新次数有变化，则之后的计算先对所有的Segment加锁，再遍历所有Segment计算Map大小，最后再解锁所有Segment。源代码如下：</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">size</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-comment\">// Try a few times to get accurate count. On failure due to</span>\n        <span class=\"hljs-comment\">// continuous async changes in table, resort to locking.</span>\n        <span class=\"hljs-keyword\">final</span> Segment&lt;K,V&gt;[] segments = <span class=\"hljs-keyword\">this</span>.segments;\n        <span class=\"hljs-keyword\">int</span> size;\n        <span class=\"hljs-keyword\">boolean</span> overflow; <span class=\"hljs-comment\">// true if size overflows 32 bits</span>\n        <span class=\"hljs-keyword\">long</span> sum;         <span class=\"hljs-comment\">// sum of modCounts</span>\n        <span class=\"hljs-keyword\">long</span> last = <span class=\"hljs-number\">0L</span>;   <span class=\"hljs-comment\">// previous sum</span>\n        <span class=\"hljs-keyword\">int</span> retries = -<span class=\"hljs-number\">1</span>; <span class=\"hljs-comment\">// first iteration isn't retry</span>\n        <span class=\"hljs-keyword\">try</span> {\n            <span class=\"hljs-keyword\">for</span> (;;) {\n                <span class=\"hljs-keyword\">if</span> (retries++ == RETRIES_BEFORE_LOCK) {\n                    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)\n                        ensureSegment(j).lock(); <span class=\"hljs-comment\">// force creation</span>\n                }\n                sum = <span class=\"hljs-number\">0L</span>;\n                size = <span class=\"hljs-number\">0</span>;\n                overflow = <span class=\"hljs-keyword\">false</span>;\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j) {\n                    Segment&lt;K,V&gt; seg = segmentAt(segments, j);\n                    <span class=\"hljs-keyword\">if</span> (seg != <span class=\"hljs-keyword\">null</span>) {\n                        sum += seg.modCount;\n                        <span class=\"hljs-keyword\">int</span> c = seg.count;\n                        <span class=\"hljs-keyword\">if</span> (c &lt; <span class=\"hljs-number\">0</span> || (size += c) &lt; <span class=\"hljs-number\">0</span>)\n                            overflow = <span class=\"hljs-keyword\">true</span>;\n                    }\n                }\n                <span class=\"hljs-keyword\">if</span> (sum == last)\n                    <span class=\"hljs-keyword\">break</span>;\n                last = sum;\n            }\n        } <span class=\"hljs-keyword\">finally</span> {\n            <span class=\"hljs-keyword\">if</span> (retries &gt; RETRIES_BEFORE_LOCK) {\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)\n                    segmentAt(segments, j).unlock();\n            }\n        }\n        <span class=\"hljs-keyword\">return</span> overflow ? Integer.MAX_VALUE : size;\n    }</code></pre> \n<p style=\"text-align:justify\">举个例子：</p> \n<blockquote> \n <p>一个Map有4个Segment，标记为S1，S2，S3，S4，现在我们要获取Map的size。计算过程是这样的：第一次计算，不对S1，S2，S3，S4加锁，遍历所有的Segment，假设每个Segment的大小分别为1，2，3，4，更新操作次数分别为：2，2，3，1，则这次计算可以得到Map的总大小为1+2+3+4=10，总共更新操作次数为2+2+3+1=8；第二次计算，不对S1,S2,S3,S4加锁，遍历所有Segment，假设这次每个Segment的大小变成了2，2，3，4，更新次数分别为3，2，3，1，因为两次计算得到的Map更新次数不一致(第一次是8，第二次是9)则可以断定这段时间Map数据被更新，则此时应该再试一次；第三次计算，不对S1，S2，S3，S4加锁，遍历所有Segment，假设每个Segment的更新操作次数还是为3，2，3，1，则因为第二次计算和第三次计算得到的Map的更新操作的次数是一致的，就能说明第二次计算和第三次计算这段时间内Map数据没有被更新，此时可以直接返回第三次计算得到的Map的大小。最坏的情况：第三次计算得到的数据更新次数和第二次也不一样，则只能先对所有Segment加锁再计算最后解锁。</p> \n</blockquote> \n<span id=\"OSC_h3_6\"></span>\n<h3 id=\"h3_6\">1.5&nbsp;containsValue操作</h3> \n<p>containsValue操作采用了和size操作一样的想法:</p> \n<pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> boolean <span class=\"hljs-title\">containsValue</span>(<span class=\"hljs-params\">Object <span class=\"hljs-keyword\">value</span></span>) </span>{\n        <span class=\"hljs-comment\">// Same idea as size()</span>\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">value</span> == <span class=\"hljs-literal\">null</span>)\n            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NullPointerException();\n        final Segment&lt;K,V&gt;[] segments = <span class=\"hljs-keyword\">this</span>.segments;\n        boolean found = <span class=\"hljs-literal\">false</span>;\n        <span class=\"hljs-keyword\">long</span> last = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">int</span> retries = <span class=\"hljs-number\">-1</span>;\n        <span class=\"hljs-keyword\">try</span> {\n            outer: <span class=\"hljs-keyword\">for</span> (;;) {\n                <span class=\"hljs-keyword\">if</span> (retries++ == RETRIES_BEFORE_LOCK) {\n                    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)\n                        ensureSegment(j).<span class=\"hljs-keyword\">lock</span>(); <span class=\"hljs-comment\">// force creation</span>\n                }\n                <span class=\"hljs-keyword\">long</span> hashSum = <span class=\"hljs-number\">0</span>L;\n                <span class=\"hljs-keyword\">int</span> sum = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j) {\n                    HashEntry&lt;K,V&gt;[] tab;\n                    Segment&lt;K,V&gt; seg = segmentAt(segments, j);\n                    <span class=\"hljs-keyword\">if</span> (seg != <span class=\"hljs-literal\">null</span> &amp;&amp; (tab = seg.table) != <span class=\"hljs-literal\">null</span>) {\n                        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span> ; i &lt; tab.length; i++) {\n                            HashEntry&lt;K,V&gt; e;\n                            <span class=\"hljs-keyword\">for</span> (e = entryAt(tab, i); e != <span class=\"hljs-literal\">null</span>; e = e.next) {\n                                V v = e.<span class=\"hljs-keyword\">value</span>;\n                                <span class=\"hljs-keyword\">if</span> (v != <span class=\"hljs-literal\">null</span> &amp;&amp; <span class=\"hljs-keyword\">value</span>.<span class=\"hljs-keyword\">equals</span>(v)) {\n                                    found = <span class=\"hljs-literal\">true</span>;\n                                    <span class=\"hljs-keyword\">break</span> outer;\n                                }\n                            }\n                        }\n                        sum += seg.modCount;\n                    }\n                }\n                <span class=\"hljs-keyword\">if</span> (retries &gt; <span class=\"hljs-number\">0</span> &amp;&amp; sum == last)\n                    <span class=\"hljs-keyword\">break</span>;\n                last = sum;\n            }\n        } <span class=\"hljs-keyword\">finally</span> {\n            <span class=\"hljs-keyword\">if</span> (retries &gt; RETRIES_BEFORE_LOCK) {\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)\n                    segmentAt(segments, j).unlock();\n            }\n        }\n        <span class=\"hljs-keyword\">return</span> found;\n    }</code></pre> \n<span id=\"OSC_h2_7\"></span>\n<h2 id=\"h2_7\">2.&nbsp;关于hash</h2> \n<p>看看hash的源代码：</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">hash</span><span class=\"hljs-params\">(Object k)</span> </span>{\n        <span class=\"hljs-keyword\">int</span> h = hashSeed;\n\n        <span class=\"hljs-keyword\">if</span> ((<span class=\"hljs-number\">0</span> != h) &amp;&amp; (k <span class=\"hljs-keyword\">instanceof</span> String)) {\n            <span class=\"hljs-keyword\">return</span> sun.misc.Hashing.stringHash32((String) k);\n        }\n\n        h ^= k.hashCode();\n\n        <span class=\"hljs-comment\">// Spread bits to regularize both segment and index locations,</span>\n        <span class=\"hljs-comment\">// using variant of single-word Wang/Jenkins hash.</span>\n        h += (h &lt;&lt;  <span class=\"hljs-number\">15</span>) ^ <span class=\"hljs-number\">0xffffcd7d</span>;\n        h ^= (h &gt;&gt;&gt; <span class=\"hljs-number\">10</span>);\n        h += (h &lt;&lt;   <span class=\"hljs-number\">3</span>);\n        h ^= (h &gt;&gt;&gt;  <span class=\"hljs-number\">6</span>);\n        h += (h &lt;&lt;   <span class=\"hljs-number\">2</span>) + (h &lt;&lt; <span class=\"hljs-number\">14</span>);\n        <span class=\"hljs-keyword\">return</span> h ^ (h &gt;&gt;&gt; <span class=\"hljs-number\">16</span>);\n    }</code></pre> \n<p>源码中的注释是这样的：</p> \n<blockquote>\n Applies a supplemental hash function to a given hashCode, which defends against poor quality hash functions. This is critical because ConcurrentHashMap uses power-of-two length hash tables, that otherwise encounter collisions for hashCodes that do not differ in lower or upper bits.\n</blockquote> \n<p>这里用到了Wang/Jenkins hash算法的变种，主要的目的是为了减少哈希冲突，使元素能够均匀的分布在不同的Segment上，从而提高容器的存取效率。假如哈希的质量差到极点，那么所有的元素都在一个Segment中，不仅存取元素缓慢，分段锁也会失去意义。</p> \n<p>举个简单的例子：</p> \n<pre><code class=\"hljs css\"><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(\"0001111\", 2) &amp; 15);\n<span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(\"0011111\", 2) &amp; 15);\n<span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(\"0111111\", 2) &amp; 15);\n<span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(\"1111111\", 2) &amp; 15);</code></pre> \n<p>这些数字得到的hash值都是一样的，全是15，所以如果不进行第一次预hash，发生冲突的几率还是很大的，但是如果我们先把上例中的二进制数字使用hash()函数先进行一次预hash，得到的结果是这样的：</p> \n<blockquote>\n 0100｜0111｜0110｜0111｜1101｜1010｜0100｜1110 1111｜0111｜0100｜0011｜0000｜0001｜1011｜1000 0111｜0111｜0110｜1001｜0100｜0110｜0011｜1110 1000｜0011｜0000｜0000｜1100｜1000｜0001｜1010\n</blockquote> \n<p>上面这个例子引用自:&nbsp; <a href=\"http://www.infoq.com/cn/articles/ConcurrentHashMap/\" target=\"_blank\" rel=\"nofollow\">InfoQ</a></p> \n<p>可以看到每一位的数据都散开了，并且ConcurrentHashMap中是使用预hash值的高位参与运算的。比如之前说的先将hash值向右按位移动28位，再与15做&amp;运算，得到的结果都别为：4，15，7，8，没有冲突！</p> \n<span id=\"OSC_h2_8\"></span>\n<h2 id=\"h2_8\">3.&nbsp;注意事项</h2> \n<ul> \n <li>ConcurrentHashMap中的key和value值都不能为null，HashMap中key可以为null，HashTable中key不能为null。</li> \n <li>ConcurrentHashMap是线程安全的类并不能保证使用了ConcurrentHashMap的操作都是线程安全的！</li> \n <li><span style=\"font-size:13.3333px\">ConcurrentHashMap的get操作不需要加锁，put操作需要加锁</span></li> \n</ul> \n<span id=\"OSC_h2_9\"></span>\n<h2 id=\"h2_9\">Reference：</h2> \n<p>1. http://www.cnblogs.com/ITtangtang/p/3948786.html</p> \n<p>2.&nbsp;http://qifuguang.me/2015/09/10/[Java%E5%B9%B6%E5%8F%91%E5%8C%85%E5%AD%A6%E4%B9%A0%E5%85%AB]%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90ConcurrentHashMap/</p> \n<p>3.&nbsp;http://www.cnblogs.com/yydcdut/p/3959815.html</p>\n                                                    <div class=\"ad-wrap\">\n                                                        <div data-traceid=\"blog_down_1\" data-tracepid=\"blog_down\" style=\"text-align:center\">\n    <!-- oschina-blog-728x90 -->\n    <ins class=\"adsbygoogle\" style=\"display:inline-block;width:728px;height:90px\" data-ad-client=\"ca-pub-7090564139599510\" data-ad-slot=\"5590362768\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n    <script type=\"text/javascript\">\n        function googleAdJSAtOnload() {\n            var element = document.createElement(\"script\");\n            element.src = \"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\";\n            element.async = true;\n            document.body.appendChild(element);\n        }\n        if (window.addEventListener) {\n            window.addEventListener(\"load\", googleAdJSAtOnload, false);\n        } else if (window.attachEvent) {\n            window.attachEvent(\"onload\", googleAdJSAtOnload);\n        } else {\n            window.onload = googleAdJSAtOnload;\n        }\n    </script>\n</div>\n                                        </div>\n                                            </div>\n\n\n\n","source":"_posts/2018.07.17 ConcurrentHashMap的锁分段技术.md","raw":"---\ntitle: ConcurrentHashMap的锁分段技术\ndate: 2018-07-17 21:24:34\ntags: 面试\n---\n1.哈希算法: 是一种将任意内容的输入转换成相同长度输出的加密方式，其输出被称为哈希值。 \n2. 哈希表: 根据设定的哈希函数H(key)和处理冲突方法将一组关键字映象到一个有限的地址区间上，并以关键字在地址区间中的象作为记录在表中的存储位置，这种表称为哈希表或散列，所得存储位置称为哈希地址或散列地址。\n# 线程不安全的HashMap\n因为多线程环境下，使用Hashmap进行put操作会引起死循环，导致CPU利用率接近100%，所以在并发情况下不能使用HashMap。\n# 效率低下的HashTable容器\nHashTable容器使用synchronized来保证线程安全，但在线程竞争激烈的情况下HashTable的效率非常低下。因为当一个线程访问HashTable的同步方法时，其他线程访问HashTable的同步方法时，可能会进入阻塞或轮询状态。如线程1使用put进行添加元素，线程2不但不能使用put方法添加元素，并且也不能使用get方法来获取元素，所以竞争越激烈效率越低。\n# ConcurrentHashMap的锁分段技术\nHashTable容器在竞争激烈的并发环境下表现出效率低下的原因，是因为所有访问HashTable的线程都必须竞争同一把锁，那假如容器里有多把锁，每一把锁用于锁容器其中一部分数据，那么当多线程访问容器里不同数据段的数据时，线程间就不会存在锁竞争，从而可以有效的提高并发访问效率，这就是ConcurrentHashMap所使用的锁分段技术，首先将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问。\n# 实现原理\n<p><img alt=\"\" src=\"http://static.oschina.net/uploads/space/2016/0317/154925_NLV0_2243330.png\"></p>\n从图中可以看到，ConcurrentHashMap内部分为很多个Segment，每一个Segment拥有一把锁，然后每个Segment（继承ReentrantLock）\n```\nstatic final class Segment<K,V> extends ReentrantLock implements Serializable\n```\n这样对每个segment中的数据需要同步操作的话都是使用每个segment容器对象自身的锁来实现。只有对全局需要改变时锁定的是所有的segment。\n\nSegment下面包含很多个HashEntry列表数组。对于一个key，需要经过三次（为什么要hash三次下文会详细讲解）hash操作，才能最终定位这个元素的位置，这三次hash分别为：\n\n对于一个key，先进行一次hash操作，得到hash值h1，也即h1 = hash1(key)；\n将得到的h1的高几位进行第二次hash，得到hash值h2，也即h2 = hash2(h1高几位)，通过h2能够确定该元素的放在哪个Segment；\n将得到的h1进行第三次hash，得到hash值h3，也即h3 = hash3(h1)，通过h3能够确定该元素放置在哪个HashEntry。\n\nConcurrentHashMap中主要实体类就是三个：ConcurrentHashMap（整个Hash表）,Segment（桶），HashEntry（节点），对应上面的图可以看出之间的关系\n\n在JDK1.6中，HashEntry中的next指针也定义为final，并且每次插入将新添加节点作为链的头节点（同HashMap实现），而且每次删除一个节点时，会将删除节点之前的所有节点 拷贝一份组成一个新的链，而将当前节点的上一个节点的next指向当前节点的下一个节点，从而在删除以后有两条链存在，因而可以保证即使在同一条链中，有一个线程在删除，而另一个线程在遍历，它们都能工作良好，因为遍历的线程能继续使用原有的链。因而这种实现是一种更加细粒度的happens-before关系，即如果遍历线程在删除线程结束后开始，则它能看到删除后的变化，如果它发生在删除线程正在执行中间，则它会使用原有的链，而不会等到删除线程结束后再执行，即看不到删除线程的影响。如果这不符合你的需求，还是乖乖的用Hashtable或HashMap的synchronized版本，Collections.synchronizedMap()做的包装。\n\n不变模式（immutable）是多线程安全里最简单的一种保障方式。因为你拿他没有办法，想改变它也没有机会。不变模式主要通过final关键字来限定的。在JMM中final关键字还有特殊的语义。Final域使得确保初始化安全性（initialization safety）成为可能，初始化安全性让不可变形对象不需要同步就能自由地被访问和共享。\n\n# 传入的参数initialCapacity,locdFactor,concurrencyLevel这三个\n+ initialCapacity表示新创建的这个ConcurrentHashMap的初始容量，也就是上面的结构图中的Entry数量。默认值为static final int DEFAULT_INITIAL_CAPACITY = 16;\n+ loadFactor表示负载因子，就是当ConcurrentHashMap中的元素个数大于loadFactor * 最大容量时就需要rehash，扩容。默认值为static final float DEFAULT_LOAD_FACTOR = 0.75f;\n+ concurrencyLevel表示并发级别，这个值用来确定Segment的个数，Segment的个数是大于等于concurrencyLevel的第一个2的n次方的数。比如，如果concurrencyLevel为12，13，14，15，16这些数，则Segment的数目为16(2的4次方)。默认值为static final int DEFAULT_CONCURRENCY_LEVEL = 16;。理想情况下ConcurrentHashMap的真正的并发访问量能够达到concurrencyLevel，因为有concurrencyLevel个Segment，假如有concurrencyLevel个线程需要访问Map，并且需要访问的数据都恰好分别落在不同的Segment中，则这些线程能够无竞争地自由访问（因为他们不需要竞争同一把锁），达到同时访问的效果。这也是为什么这个参数起名为“并发级别”的原因。\n\n# 转载\n\n<div class=\"content\" id=\"articleContent\">\n                                                    <div class=\"ad-wrap\">\n                                                        <p style=\"margin:0 0 10px 0;\"><a data-traceid=\"blog_detail_above_text_link_1\" data-tracepid=\"blog_detail_above_text_link\" style=\"color:#A00;font-weight:bold;\" href=\"http://clickc.admaster.com.cn/c/a109734,b2619652,c3159,i0,m101,8a1,8b2,h\" target=\"_blank\">华为云4核8G，高性能云服务器，免费试用\n&gt;&gt;&gt; </a>&nbsp;&nbsp;<img src=\"https://www.oschina.net/img/hot3.png\" style=\"max-height: 32px; max-width: 32px;\" align=\"absmiddle\"></p>\n                                        </div>\n                                                <p>曾经在&nbsp;<span style=\"font-size:12.5px\"><a href=\"http://my.oschina.net/hosee/blog/607677\" target=\"_blank\" rel=\"nofollow\">[高并发Java 五] JDK并发包1</a>&nbsp;中提到过ConcurrentHashMap，只是简单的提到了下ConcurrentHashMap的优点，以及大概的实现原理。</span></p> \n<p><span style=\"font-size:12.5px\">而本文则重点介绍ConcurrentHashMap实现的细节。</span></p> \n<p><span style=\"font-size:12.5px\">HashMap就不介绍了，具体请查看<a href=\"http://my.oschina.net/hosee/blog/618953\" target=\"_blank\" rel=\"nofollow\">JDK7与JDK8中HashMap的实现</a></span></p> \n<p><span style=\"font-size:12.5px\">HashTable是一个线程安全的类，它使用</span>synchronized来锁住整张Hash表来实现线程安全，即每次锁住整张表让线程独占。ConcurrentHashMap允许多个修改操作并发进行，其关键在于使用了<span style=\"color:#E53333\">锁分离</span>技术。它使用了多个锁来控制对hash表的不同部分进行的修改。ConcurrentHashMap内部使用段(Segment)来表示这些不同的部分，每个段其实就是一个小的Hashtable，它们有自己的锁。只要多个修改操作发生在不同的段上，它们就可以并发进行。</p> \n<p>有些方法需要跨段，比如size()和containsValue()，它们可能需要锁定整个表而而不仅仅是某个段，这需要按顺序锁定所有段，操作完毕后，又按顺序释放所有段的锁。这里“按顺序”是很重要的，否则极有可能出现死锁，在ConcurrentHashMap内部，段数组是final的，并且其成员变量实际上也是final的，但是，仅仅是将数组声明为final的并不保证数组成员也是final的，这需要实现上的保证。这可以确保不会出现死锁，因为获得锁的顺序是固定的。</p> \n<span id=\"OSC_h2_1\"></span>\n<h2 id=\"h2_1\">1. 实现原理</h2> \n<p>ConcurrentHashMap使用分段锁技术，将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问，能够实现真正的并发访问。如下图是ConcurrentHashMap的内部结构图：</p> \n<p>&nbsp;</p> \n<p><img alt=\"\" src=\"http://static.oschina.net/uploads/space/2016/0317/154925_NLV0_2243330.png\"></p> \n<p style=\"text-align:justify\">从图中可以看到，ConcurrentHashMap内部分为很多个Segment，每一个Segment拥有一把锁，然后每个Segment（继承<span style=\"color:#E53333\">ReentrantLock</span>）</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Segment</span>&lt;<span class=\"hljs-title\">K</span>,<span class=\"hljs-title\">V</span>&gt; <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ReentrantLock</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">Serializable</span></span></code></pre> \n<p style=\"text-align:justify\">Segment继承了ReentrantLock，表明每个segment都可以当做一个锁。（ReentrantLock前文已经提到，不了解的话就把当做synchronized的替代者吧）这样对每个segment中的数据需要同步操作的话都是使用每个segment容器对象自身的锁来实现。只有对全局需要改变时锁定的是所有的segment。</p> \n<p style=\"text-align:justify\"><span style=\"font-size:13.3333px\">Segment</span>下面包含很多个HashEntry列表数组。对于一个key，需要经过<span style=\"color:#E53333\">三次</span>（为什么要hash三次下文会详细讲解）hash操作，才能最终定位这个元素的位置，这三次hash分别为：</p> \n<ol> \n <li>对于一个key，先进行一次hash操作，得到hash值h1，也即h1 = hash1(key)；</li> \n <li>将得到的h1的高几位进行第二次hash，得到hash值h2，也即h2 = hash2(h1高几位)，通过h2能够确定该元素的放在哪个Segment；</li> \n <li>将得到的h1进行第三次hash，得到hash值h3，也即h3 = hash3(h1)，通过h3能够确定该元素放置在哪个HashEntry。</li> \n</ol> \n<p style=\"text-align:justify\">ConcurrentHashMap中主要实体类就是三个：ConcurrentHashMap（整个Hash表）,Segment（桶），HashEntry（节点），对应上面的图可以看出之间的关系</p> \n<pre><code class=\"hljs php\"><span class=\"hljs-comment\">/** \n* The segments, each of which is a specialized hash table \n*/</span>  \n<span class=\"hljs-keyword\">final</span> Segment&lt;K,V&gt;[] segments;</code></pre> \n<p>不变(Immutable)和易变(Volatile)ConcurrentHashMap完全允许多个读操作并发进行，读操作并不需要加锁。如果使用传统的技术，如HashMap中的实现，如果允许可以在hash链的中间添加或删除元素，读操作不加锁将得到不一致的数据。ConcurrentHashMap实现技术是保证HashEntry几乎是不可变的。HashEntry代表每个hash链中的一个节点，其结构如下所示：</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HashEntry</span>&lt;<span class=\"hljs-title\">K</span>,<span class=\"hljs-title\">V</span>&gt; </span>{  \n     <span class=\"hljs-keyword\">final</span> K key;  \n     <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">int</span> hash;  \n     <span class=\"hljs-keyword\">volatile</span> V value;  \n     <span class=\"hljs-keyword\">volatile</span> HashEntry&lt;K,V&gt; next;  \n }</code></pre> \n<p>在JDK 1.6中，HashEntry中的next指针也定义为final，并且每次插入将新添加节点作为链的头节点（同HashMap实现），而且每次删除一个节点时，会将删除节点之前的所有节点 <span style=\"color:#E53333\">拷贝一份组成一个新的链</span>，而将当前节点的上一个节点的next指向当前节点的下一个节点，从而在删除以后 <span style=\"color:#E53333\">有两条链存在</span>，因而可以保证即使在同一条链中，有一个线程在删除，而另一个线程在遍历，它们都能工作良好，因为遍历的线程能继续使用原有的链。因而这种实现是一种更加细粒度的happens-before关系，即如果遍历线程在删除线程结束后开始，则它能看到删除后的变化，如果它发生在删除线程正在执行中间，则它会使用原有的链，而不会等到删除线程结束后再执行，即看不到删除线程的影响。如果这不符合你的需求，还是乖乖的用Hashtable或HashMap的synchronized版本，Collections.synchronizedMap()做的包装。</p> \n<p style=\"text-align:justify\">而HashMap中的Entry只有key是final的</p> \n<pre><code class=\"hljs ruby\">static <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Entry</span>&lt;K,<span class=\"hljs-title\">V</span>&gt; <span class=\"hljs-title\">implements</span> <span class=\"hljs-title\">Map</span>.<span class=\"hljs-title\">Entry</span>&lt;K,<span class=\"hljs-title\">V</span>&gt; {</span>\n        final K key;\n        V value;\n        Entry&lt;K,V&gt; <span class=\"hljs-keyword\">next</span>;\n        int hash;</code></pre> \n<p><strong>不变</strong> <strong>模式（immutable）</strong>是多线程安全里最简单的一种保障方式。因为你拿他没有办法，想改变它也没有机会。<br> 不变模式主要通过final关键字来限定的。在JMM中final关键字还有特殊的语义。Final域使得确保初始化安全性（initialization safety）成为可能，初始化安全性让不可变形对象不需要同步就能自由地被访问和共享。</p> \n<span id=\"OSC_h3_2\"></span>\n<h3 id=\"h3_2\">1.1&nbsp;初始化</h3> \n<p>先看看ConcurrentHashMap的初始化做了哪些事情，构造函数的源码如下：</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">ConcurrentHashMap</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> initialCapacity,\n                             <span class=\"hljs-keyword\">float</span> loadFactor, <span class=\"hljs-keyword\">int</span> concurrencyLevel)</span> </span>{\n        <span class=\"hljs-keyword\">if</span> (!(loadFactor &gt; <span class=\"hljs-number\">0</span>) || initialCapacity &lt; <span class=\"hljs-number\">0</span> || concurrencyLevel &lt;= <span class=\"hljs-number\">0</span>)\n            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalArgumentException();\n        <span class=\"hljs-keyword\">if</span> (concurrencyLevel &gt; MAX_SEGMENTS)\n            concurrencyLevel = MAX_SEGMENTS;\n        <span class=\"hljs-comment\">// Find power-of-two sizes best matching arguments</span>\n        <span class=\"hljs-keyword\">int</span> sshift = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">int</span> ssize = <span class=\"hljs-number\">1</span>;\n        <span class=\"hljs-keyword\">while</span> (ssize &lt; concurrencyLevel) {\n            ++sshift;\n            ssize &lt;&lt;= <span class=\"hljs-number\">1</span>;\n        }\n        <span class=\"hljs-keyword\">this</span>.segmentShift = <span class=\"hljs-number\">32</span> - sshift;\n        <span class=\"hljs-keyword\">this</span>.segmentMask = ssize - <span class=\"hljs-number\">1</span>;\n        <span class=\"hljs-keyword\">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)\n            initialCapacity = MAXIMUM_CAPACITY;\n        <span class=\"hljs-keyword\">int</span> c = initialCapacity / ssize;\n        <span class=\"hljs-keyword\">if</span> (c * ssize &lt; initialCapacity)\n            ++c;\n        <span class=\"hljs-keyword\">int</span> cap = MIN_SEGMENT_TABLE_CAPACITY;\n        <span class=\"hljs-keyword\">while</span> (cap &lt; c)\n            cap &lt;&lt;= <span class=\"hljs-number\">1</span>;\n        <span class=\"hljs-comment\">// create segments and segments[0]</span>\n        Segment&lt;K,V&gt; s0 =\n            <span class=\"hljs-keyword\">new</span> Segment&lt;K,V&gt;(loadFactor, (<span class=\"hljs-keyword\">int</span>)(cap * loadFactor),\n                             (HashEntry&lt;K,V&gt;[])<span class=\"hljs-keyword\">new</span> HashEntry[cap]);\n        Segment&lt;K,V&gt;[] ss = (Segment&lt;K,V&gt;[])<span class=\"hljs-keyword\">new</span> Segment[ssize];\n        UNSAFE.putOrderedObject(ss, SBASE, s0); <span class=\"hljs-comment\">// ordered write of segments[0]</span>\n        <span class=\"hljs-keyword\">this</span>.segments = ss;\n    }</code></pre> \n<p style=\"text-align:justify\">传入的参数有initialCapacity，loadFactor，concurrencyLevel这三个。</p> \n<ul> \n <li>initialCapacity表示新创建的这个ConcurrentHashMap的初始容量，也就是上面的结构图中的Entry数量。默认值为static final int DEFAULT_INITIAL_CAPACITY = 16;</li> \n <li>loadFactor表示负载因子，就是当ConcurrentHashMap中的元素个数大于loadFactor * 最大容量时就需要rehash，扩容。默认值为static final float DEFAULT_LOAD_FACTOR = 0.75f;</li> \n <li>concurrencyLevel表示并发级别，这个值用来确定Segment的个数，Segment的个数是大于等于concurrencyLevel的第一个2的n次方的数。比如，如果concurrencyLevel为12，13，14，15，16这些数，则Segment的数目为16(2的4次方)。默认值为static final int DEFAULT_CONCURRENCY_LEVEL = 16;。理想情况下ConcurrentHashMap的真正的并发访问量能够达到concurrencyLevel，因为有concurrencyLevel个Segment，假如有concurrencyLevel个线程需要访问Map，并且需要访问的数据都恰好分别落在不同的Segment中，则这些线程能够无竞争地自由访问（因为他们不需要竞争同一把锁），达到同时访问的效果。这也是为什么这个参数起名为“并发级别”的原因。</li> \n</ul> \n<p style=\"text-align:justify\">初始化的一些动作：</p> \n<ol> \n <li>验证参数的合法性，如果不合法，直接抛出异常。</li> \n <li>concurrencyLevel也就是Segment的个数不能超过规定的最大Segment的个数，默认值为static final int MAX_SEGMENTS = 1 &lt;&lt; 16;，如果超过这个值，设置为这个值。</li> \n <li>然后使用循环找到大于等于concurrencyLevel的第一个2的n次方的数ssize，这个数就是Segment数组的大小，并记录一共向左按位移动的次数sshift，并令segmentShift = 32 - sshift，并且segmentMask的值等于ssize - 1，segmentMask的各个二进制位都为1，目的是之后可以通过key的hash值与这个值做&amp;运算确定Segment的索引。</li> \n <li>检查给的容量值是否大于允许的最大容量值，如果大于该值，设置为该值。最大容量值为static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;。</li> \n <li>然后计算每个Segment平均应该放置多少个元素，这个值c是向上取整的值。比如初始容量为15，Segment个数为4，则每个Segment平均需要放置4个元素。</li> \n <li>最后创建一个Segment实例，将其当做Segment数组的第一个元素。</li> \n</ol> \n<span id=\"OSC_h3_3\"></span>\n<h3 id=\"h3_3\">1.2&nbsp;put操作</h3> \n<p>put操作的源码如下：</p> \n<pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> V <span class=\"hljs-title\">put</span>(<span class=\"hljs-params\">K key, V <span class=\"hljs-keyword\">value</span></span>) </span>{\n      Segment&lt;K,V&gt; s;\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">value</span> == <span class=\"hljs-literal\">null</span>)\n          <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NullPointerException();\n      <span class=\"hljs-keyword\">int</span> hash = hash(key);\n      <span class=\"hljs-keyword\">int</span> j = (hash &gt;&gt;&gt; segmentShift) &amp; segmentMask;\n      <span class=\"hljs-keyword\">if</span> ((s = (Segment&lt;K,V&gt;)UNSAFE.getObject          <span class=\"hljs-comment\">// nonvolatile; recheck</span>\n           (segments, (j &lt;&lt; SSHIFT) + SBASE)) == <span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">//  in ensureSegment</span>\n          s = ensureSegment(j);\n      <span class=\"hljs-keyword\">return</span> s.put(key, hash, <span class=\"hljs-keyword\">value</span>, <span class=\"hljs-literal\">false</span>);\n  }</code></pre> \n<p style=\"text-align:justify\">操作步骤如下：</p> \n<ol> \n <li>判断value是否为null，如果为null，直接抛出异常。</li> \n <li>key通过一次hash运算得到一个hash值。(这个hash运算下文详说)</li> \n <li>将得到hash值向右按位移动segmentShift位，然后再与segmentMask做&amp;运算得到segment的索引j。<br> 在初始化的时候我们说过segmentShift的值等于32-sshift，例如concurrencyLevel等于16，则sshift等于4，则segmentShift为28。hash值是一个32位的整数，将其向右移动28位就变成这个样子：<br> 0000 0000 0000 0000 0000 0000 0000 xxxx，然后再用这个值与segmentMask做&amp;运算，也就是取最后四位的值。这个值确定Segment的索引。</li> \n <li>使用Unsafe的方式从Segment数组中获取该索引对应的Segment对象。</li> \n <li>向这个Segment对象中put值，这个put操作也基本是一样的步骤（通过&amp;运算获取HashEntry的索引，然后set）。</li> \n</ol> \n<pre><code class=\"hljs cs\"><span class=\"hljs-function\">final V <span class=\"hljs-title\">put</span>(<span class=\"hljs-params\">K key, <span class=\"hljs-keyword\">int</span> hash, V <span class=\"hljs-keyword\">value</span>, boolean onlyIfAbsent</span>) </span>{\n            HashEntry&lt;K,V&gt; node = tryLock() ? <span class=\"hljs-literal\">null</span> :\n                scanAndLockForPut(key, hash, <span class=\"hljs-keyword\">value</span>);\n            V oldValue;\n            <span class=\"hljs-keyword\">try</span> {\n                HashEntry&lt;K,V&gt;[] tab = table;\n                <span class=\"hljs-keyword\">int</span> index = (tab.length - <span class=\"hljs-number\">1</span>) &amp; hash;\n                HashEntry&lt;K,V&gt; first = entryAt(tab, index);\n                <span class=\"hljs-keyword\">for</span> (HashEntry&lt;K,V&gt; e = first;;) {\n                    <span class=\"hljs-keyword\">if</span> (e != <span class=\"hljs-literal\">null</span>) {\n                        K k;\n                        <span class=\"hljs-keyword\">if</span> ((k = e.key) == key ||\n                            (e.hash == hash &amp;&amp; key.<span class=\"hljs-keyword\">equals</span>(k))) {\n                            oldValue = e.<span class=\"hljs-keyword\">value</span>;\n                            <span class=\"hljs-keyword\">if</span> (!onlyIfAbsent) {\n                                e.<span class=\"hljs-keyword\">value</span> = <span class=\"hljs-keyword\">value</span>;\n                                ++modCount;\n                            }\n                            <span class=\"hljs-keyword\">break</span>;\n                        }\n                        e = e.next;\n                    }\n                    <span class=\"hljs-keyword\">else</span> {\n                        <span class=\"hljs-keyword\">if</span> (node != <span class=\"hljs-literal\">null</span>)\n                            node.setNext(first);\n                        <span class=\"hljs-keyword\">else</span>\n                            node = <span class=\"hljs-keyword\">new</span> HashEntry&lt;K,V&gt;(hash, key, <span class=\"hljs-keyword\">value</span>, first);\n                        <span class=\"hljs-keyword\">int</span> c = count + <span class=\"hljs-number\">1</span>;\n                        <span class=\"hljs-keyword\">if</span> (c &gt; threshold &amp;&amp; tab.length &lt; MAXIMUM_CAPACITY)\n                            rehash(node);\n                        <span class=\"hljs-keyword\">else</span>\n                            setEntryAt(tab, index, node);\n                        ++modCount;\n                        count = c;\n                        oldValue = <span class=\"hljs-literal\">null</span>;\n                        <span class=\"hljs-keyword\">break</span>;\n                    }\n                }\n            } <span class=\"hljs-keyword\">finally</span> {\n                unlock();\n            }\n            <span class=\"hljs-keyword\">return</span> oldValue;\n        }</code></pre> \n<p>put操作是要加锁的。</p> \n<span id=\"OSC_h3_4\"></span>\n<h3 id=\"h3_4\">1.3 get操作</h3> \n<p style=\"text-align:justify\">get操作的源码如下：</p> \n<pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> V <span class=\"hljs-title\">get</span>(<span class=\"hljs-params\">Object key</span>) </span>{\n        Segment&lt;K,V&gt; s; <span class=\"hljs-comment\">// manually integrate access methods to reduce overhead</span>\n        HashEntry&lt;K,V&gt;[] tab;\n        <span class=\"hljs-keyword\">int</span> h = hash(key);\n        <span class=\"hljs-keyword\">long</span> u = (((h &gt;&gt;&gt; segmentShift) &amp; segmentMask) &lt;&lt; SSHIFT) + SBASE;\n        <span class=\"hljs-keyword\">if</span> ((s = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(segments, u)) != <span class=\"hljs-literal\">null</span> &amp;&amp;\n            (tab = s.table) != <span class=\"hljs-literal\">null</span>) {\n            <span class=\"hljs-keyword\">for</span> (HashEntry&lt;K,V&gt; e = (HashEntry&lt;K,V&gt;) UNSAFE.getObjectVolatile\n                     (tab, ((<span class=\"hljs-keyword\">long</span>)(((tab.length - <span class=\"hljs-number\">1</span>) &amp; h)) &lt;&lt; TSHIFT) + TBASE);\n                 e != <span class=\"hljs-literal\">null</span>; e = e.next) {\n                K k;\n                <span class=\"hljs-keyword\">if</span> ((k = e.key) == key || (e.hash == h &amp;&amp; key.<span class=\"hljs-keyword\">equals</span>(k)))\n                    <span class=\"hljs-keyword\">return</span> e.<span class=\"hljs-keyword\">value</span>;\n            }\n        }\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\n    }</code></pre> \n<p style=\"text-align:justify\">操作步骤为：</p> \n<ol> \n <li>和put操作一样，先通过key进行两次hash确定应该去哪个Segment中取数据。</li> \n <li>使用Unsafe获取对应的Segment，然后再进行一次&amp;运算得到HashEntry链表的位置，然后从链表头开始遍历整个链表（因为Hash可能会有碰撞，所以用一个链表保存），如果找到对应的key，则返回对应的value值，如果链表遍历完都没有找到对应的key，则说明Map中不包含该key，返回null。</li> \n</ol> \n<p style=\"text-align:justify\">值得注意的是，<span style=\"color:#E53333\">get操作是不需要加锁的（如果value为null，会调用</span><span style=\"color:#FF0000\">readValueUnderLock，只有这个步骤会加锁</span><span style=\"color:#E53333\">）<span style=\"color:#000000\">，通过前面提到的volatile和final来确保数据安全。</span></span></p> \n<span id=\"OSC_h3_5\"></span>\n<h3 id=\"h3_5\">1.4&nbsp;size操作</h3> \n<p>size操作与put和get操作最大的区别在于，size操作需要遍历所有的Segment才能算出整个Map的大小，而put和get都只关心一个Segment。假设我们当前遍历的Segment为SA，那么在遍历SA过程中其他的Segment比如SB可能会被修改，于是这一次运算出来的size值可能并不是Map当前的真正大小。所以一个比较简单的办法就是计算Map大小的时候所有的Segment都Lock住，不能更新(包含put，remove等等)数据，计算完之后再Unlock。这是普通人能够想到的方案，但是牛逼的作者还有一个更好的Idea：<span style=\"color:#E53333\">先给3次机会</span>，不lock所有的Segment，遍历所有Segment，累加各个Segment的大小得到整个Map的大小，如果某相邻的两次计算获取的所有Segment的更新的次数（每个Segment都有一个modCount变量，这个变量在Segment中的Entry被修改时会加一，通过这个值可以得到每个Segment的更新操作的次数）是一样的，说明计算过程中没有更新操作，则直接返回这个值。如果这三次不加锁的计算过程中Map的更新次数有变化，则之后的计算先对所有的Segment加锁，再遍历所有Segment计算Map大小，最后再解锁所有Segment。源代码如下：</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">size</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-comment\">// Try a few times to get accurate count. On failure due to</span>\n        <span class=\"hljs-comment\">// continuous async changes in table, resort to locking.</span>\n        <span class=\"hljs-keyword\">final</span> Segment&lt;K,V&gt;[] segments = <span class=\"hljs-keyword\">this</span>.segments;\n        <span class=\"hljs-keyword\">int</span> size;\n        <span class=\"hljs-keyword\">boolean</span> overflow; <span class=\"hljs-comment\">// true if size overflows 32 bits</span>\n        <span class=\"hljs-keyword\">long</span> sum;         <span class=\"hljs-comment\">// sum of modCounts</span>\n        <span class=\"hljs-keyword\">long</span> last = <span class=\"hljs-number\">0L</span>;   <span class=\"hljs-comment\">// previous sum</span>\n        <span class=\"hljs-keyword\">int</span> retries = -<span class=\"hljs-number\">1</span>; <span class=\"hljs-comment\">// first iteration isn't retry</span>\n        <span class=\"hljs-keyword\">try</span> {\n            <span class=\"hljs-keyword\">for</span> (;;) {\n                <span class=\"hljs-keyword\">if</span> (retries++ == RETRIES_BEFORE_LOCK) {\n                    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)\n                        ensureSegment(j).lock(); <span class=\"hljs-comment\">// force creation</span>\n                }\n                sum = <span class=\"hljs-number\">0L</span>;\n                size = <span class=\"hljs-number\">0</span>;\n                overflow = <span class=\"hljs-keyword\">false</span>;\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j) {\n                    Segment&lt;K,V&gt; seg = segmentAt(segments, j);\n                    <span class=\"hljs-keyword\">if</span> (seg != <span class=\"hljs-keyword\">null</span>) {\n                        sum += seg.modCount;\n                        <span class=\"hljs-keyword\">int</span> c = seg.count;\n                        <span class=\"hljs-keyword\">if</span> (c &lt; <span class=\"hljs-number\">0</span> || (size += c) &lt; <span class=\"hljs-number\">0</span>)\n                            overflow = <span class=\"hljs-keyword\">true</span>;\n                    }\n                }\n                <span class=\"hljs-keyword\">if</span> (sum == last)\n                    <span class=\"hljs-keyword\">break</span>;\n                last = sum;\n            }\n        } <span class=\"hljs-keyword\">finally</span> {\n            <span class=\"hljs-keyword\">if</span> (retries &gt; RETRIES_BEFORE_LOCK) {\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)\n                    segmentAt(segments, j).unlock();\n            }\n        }\n        <span class=\"hljs-keyword\">return</span> overflow ? Integer.MAX_VALUE : size;\n    }</code></pre> \n<p style=\"text-align:justify\">举个例子：</p> \n<blockquote> \n <p>一个Map有4个Segment，标记为S1，S2，S3，S4，现在我们要获取Map的size。计算过程是这样的：第一次计算，不对S1，S2，S3，S4加锁，遍历所有的Segment，假设每个Segment的大小分别为1，2，3，4，更新操作次数分别为：2，2，3，1，则这次计算可以得到Map的总大小为1+2+3+4=10，总共更新操作次数为2+2+3+1=8；第二次计算，不对S1,S2,S3,S4加锁，遍历所有Segment，假设这次每个Segment的大小变成了2，2，3，4，更新次数分别为3，2，3，1，因为两次计算得到的Map更新次数不一致(第一次是8，第二次是9)则可以断定这段时间Map数据被更新，则此时应该再试一次；第三次计算，不对S1，S2，S3，S4加锁，遍历所有Segment，假设每个Segment的更新操作次数还是为3，2，3，1，则因为第二次计算和第三次计算得到的Map的更新操作的次数是一致的，就能说明第二次计算和第三次计算这段时间内Map数据没有被更新，此时可以直接返回第三次计算得到的Map的大小。最坏的情况：第三次计算得到的数据更新次数和第二次也不一样，则只能先对所有Segment加锁再计算最后解锁。</p> \n</blockquote> \n<span id=\"OSC_h3_6\"></span>\n<h3 id=\"h3_6\">1.5&nbsp;containsValue操作</h3> \n<p>containsValue操作采用了和size操作一样的想法:</p> \n<pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> boolean <span class=\"hljs-title\">containsValue</span>(<span class=\"hljs-params\">Object <span class=\"hljs-keyword\">value</span></span>) </span>{\n        <span class=\"hljs-comment\">// Same idea as size()</span>\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">value</span> == <span class=\"hljs-literal\">null</span>)\n            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NullPointerException();\n        final Segment&lt;K,V&gt;[] segments = <span class=\"hljs-keyword\">this</span>.segments;\n        boolean found = <span class=\"hljs-literal\">false</span>;\n        <span class=\"hljs-keyword\">long</span> last = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">int</span> retries = <span class=\"hljs-number\">-1</span>;\n        <span class=\"hljs-keyword\">try</span> {\n            outer: <span class=\"hljs-keyword\">for</span> (;;) {\n                <span class=\"hljs-keyword\">if</span> (retries++ == RETRIES_BEFORE_LOCK) {\n                    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)\n                        ensureSegment(j).<span class=\"hljs-keyword\">lock</span>(); <span class=\"hljs-comment\">// force creation</span>\n                }\n                <span class=\"hljs-keyword\">long</span> hashSum = <span class=\"hljs-number\">0</span>L;\n                <span class=\"hljs-keyword\">int</span> sum = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j) {\n                    HashEntry&lt;K,V&gt;[] tab;\n                    Segment&lt;K,V&gt; seg = segmentAt(segments, j);\n                    <span class=\"hljs-keyword\">if</span> (seg != <span class=\"hljs-literal\">null</span> &amp;&amp; (tab = seg.table) != <span class=\"hljs-literal\">null</span>) {\n                        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span> ; i &lt; tab.length; i++) {\n                            HashEntry&lt;K,V&gt; e;\n                            <span class=\"hljs-keyword\">for</span> (e = entryAt(tab, i); e != <span class=\"hljs-literal\">null</span>; e = e.next) {\n                                V v = e.<span class=\"hljs-keyword\">value</span>;\n                                <span class=\"hljs-keyword\">if</span> (v != <span class=\"hljs-literal\">null</span> &amp;&amp; <span class=\"hljs-keyword\">value</span>.<span class=\"hljs-keyword\">equals</span>(v)) {\n                                    found = <span class=\"hljs-literal\">true</span>;\n                                    <span class=\"hljs-keyword\">break</span> outer;\n                                }\n                            }\n                        }\n                        sum += seg.modCount;\n                    }\n                }\n                <span class=\"hljs-keyword\">if</span> (retries &gt; <span class=\"hljs-number\">0</span> &amp;&amp; sum == last)\n                    <span class=\"hljs-keyword\">break</span>;\n                last = sum;\n            }\n        } <span class=\"hljs-keyword\">finally</span> {\n            <span class=\"hljs-keyword\">if</span> (retries &gt; RETRIES_BEFORE_LOCK) {\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)\n                    segmentAt(segments, j).unlock();\n            }\n        }\n        <span class=\"hljs-keyword\">return</span> found;\n    }</code></pre> \n<span id=\"OSC_h2_7\"></span>\n<h2 id=\"h2_7\">2.&nbsp;关于hash</h2> \n<p>看看hash的源代码：</p> \n<pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">hash</span><span class=\"hljs-params\">(Object k)</span> </span>{\n        <span class=\"hljs-keyword\">int</span> h = hashSeed;\n\n        <span class=\"hljs-keyword\">if</span> ((<span class=\"hljs-number\">0</span> != h) &amp;&amp; (k <span class=\"hljs-keyword\">instanceof</span> String)) {\n            <span class=\"hljs-keyword\">return</span> sun.misc.Hashing.stringHash32((String) k);\n        }\n\n        h ^= k.hashCode();\n\n        <span class=\"hljs-comment\">// Spread bits to regularize both segment and index locations,</span>\n        <span class=\"hljs-comment\">// using variant of single-word Wang/Jenkins hash.</span>\n        h += (h &lt;&lt;  <span class=\"hljs-number\">15</span>) ^ <span class=\"hljs-number\">0xffffcd7d</span>;\n        h ^= (h &gt;&gt;&gt; <span class=\"hljs-number\">10</span>);\n        h += (h &lt;&lt;   <span class=\"hljs-number\">3</span>);\n        h ^= (h &gt;&gt;&gt;  <span class=\"hljs-number\">6</span>);\n        h += (h &lt;&lt;   <span class=\"hljs-number\">2</span>) + (h &lt;&lt; <span class=\"hljs-number\">14</span>);\n        <span class=\"hljs-keyword\">return</span> h ^ (h &gt;&gt;&gt; <span class=\"hljs-number\">16</span>);\n    }</code></pre> \n<p>源码中的注释是这样的：</p> \n<blockquote>\n Applies a supplemental hash function to a given hashCode, which defends against poor quality hash functions. This is critical because ConcurrentHashMap uses power-of-two length hash tables, that otherwise encounter collisions for hashCodes that do not differ in lower or upper bits.\n</blockquote> \n<p>这里用到了Wang/Jenkins hash算法的变种，主要的目的是为了减少哈希冲突，使元素能够均匀的分布在不同的Segment上，从而提高容器的存取效率。假如哈希的质量差到极点，那么所有的元素都在一个Segment中，不仅存取元素缓慢，分段锁也会失去意义。</p> \n<p>举个简单的例子：</p> \n<pre><code class=\"hljs css\"><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(\"0001111\", 2) &amp; 15);\n<span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(\"0011111\", 2) &amp; 15);\n<span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(\"0111111\", 2) &amp; 15);\n<span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(\"1111111\", 2) &amp; 15);</code></pre> \n<p>这些数字得到的hash值都是一样的，全是15，所以如果不进行第一次预hash，发生冲突的几率还是很大的，但是如果我们先把上例中的二进制数字使用hash()函数先进行一次预hash，得到的结果是这样的：</p> \n<blockquote>\n 0100｜0111｜0110｜0111｜1101｜1010｜0100｜1110 1111｜0111｜0100｜0011｜0000｜0001｜1011｜1000 0111｜0111｜0110｜1001｜0100｜0110｜0011｜1110 1000｜0011｜0000｜0000｜1100｜1000｜0001｜1010\n</blockquote> \n<p>上面这个例子引用自:&nbsp; <a href=\"http://www.infoq.com/cn/articles/ConcurrentHashMap/\" target=\"_blank\" rel=\"nofollow\">InfoQ</a></p> \n<p>可以看到每一位的数据都散开了，并且ConcurrentHashMap中是使用预hash值的高位参与运算的。比如之前说的先将hash值向右按位移动28位，再与15做&amp;运算，得到的结果都别为：4，15，7，8，没有冲突！</p> \n<span id=\"OSC_h2_8\"></span>\n<h2 id=\"h2_8\">3.&nbsp;注意事项</h2> \n<ul> \n <li>ConcurrentHashMap中的key和value值都不能为null，HashMap中key可以为null，HashTable中key不能为null。</li> \n <li>ConcurrentHashMap是线程安全的类并不能保证使用了ConcurrentHashMap的操作都是线程安全的！</li> \n <li><span style=\"font-size:13.3333px\">ConcurrentHashMap的get操作不需要加锁，put操作需要加锁</span></li> \n</ul> \n<span id=\"OSC_h2_9\"></span>\n<h2 id=\"h2_9\">Reference：</h2> \n<p>1. http://www.cnblogs.com/ITtangtang/p/3948786.html</p> \n<p>2.&nbsp;http://qifuguang.me/2015/09/10/[Java%E5%B9%B6%E5%8F%91%E5%8C%85%E5%AD%A6%E4%B9%A0%E5%85%AB]%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90ConcurrentHashMap/</p> \n<p>3.&nbsp;http://www.cnblogs.com/yydcdut/p/3959815.html</p>\n                                                    <div class=\"ad-wrap\">\n                                                        <div data-traceid=\"blog_down_1\" data-tracepid=\"blog_down\" style=\"text-align:center\">\n    <!-- oschina-blog-728x90 -->\n    <ins class=\"adsbygoogle\" style=\"display:inline-block;width:728px;height:90px\" data-ad-client=\"ca-pub-7090564139599510\" data-ad-slot=\"5590362768\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n    <script type=\"text/javascript\">\n        function googleAdJSAtOnload() {\n            var element = document.createElement(\"script\");\n            element.src = \"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\";\n            element.async = true;\n            document.body.appendChild(element);\n        }\n        if (window.addEventListener) {\n            window.addEventListener(\"load\", googleAdJSAtOnload, false);\n        } else if (window.attachEvent) {\n            window.attachEvent(\"onload\", googleAdJSAtOnload);\n        } else {\n            window.onload = googleAdJSAtOnload;\n        }\n    </script>\n</div>\n                                        </div>\n                                            </div>\n\n\n\n","slug":"ConcurrentHashMap的锁分段技术","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzc0001udcyu2vt9eg2o","content":"<p>1.哈希算法: 是一种将任意内容的输入转换成相同长度输出的加密方式，其输出被称为哈希值。 </p>\n<ol start=\"2\">\n<li>哈希表: 根据设定的哈希函数H(key)和处理冲突方法将一组关键字映象到一个有限的地址区间上，并以关键字在地址区间中的象作为记录在表中的存储位置，这种表称为哈希表或散列，所得存储位置称为哈希地址或散列地址。<h1 id=\"线程不安全的HashMap\"><a href=\"#线程不安全的HashMap\" class=\"headerlink\" title=\"线程不安全的HashMap\"></a>线程不安全的HashMap</h1>因为多线程环境下，使用Hashmap进行put操作会引起死循环，导致CPU利用率接近100%，所以在并发情况下不能使用HashMap。<h1 id=\"效率低下的HashTable容器\"><a href=\"#效率低下的HashTable容器\" class=\"headerlink\" title=\"效率低下的HashTable容器\"></a>效率低下的HashTable容器</h1>HashTable容器使用synchronized来保证线程安全，但在线程竞争激烈的情况下HashTable的效率非常低下。因为当一个线程访问HashTable的同步方法时，其他线程访问HashTable的同步方法时，可能会进入阻塞或轮询状态。如线程1使用put进行添加元素，线程2不但不能使用put方法添加元素，并且也不能使用get方法来获取元素，所以竞争越激烈效率越低。<h1 id=\"ConcurrentHashMap的锁分段技术\"><a href=\"#ConcurrentHashMap的锁分段技术\" class=\"headerlink\" title=\"ConcurrentHashMap的锁分段技术\"></a>ConcurrentHashMap的锁分段技术</h1>HashTable容器在竞争激烈的并发环境下表现出效率低下的原因，是因为所有访问HashTable的线程都必须竞争同一把锁，那假如容器里有多把锁，每一把锁用于锁容器其中一部分数据，那么当多线程访问容器里不同数据段的数据时，线程间就不会存在锁竞争，从而可以有效的提高并发访问效率，这就是ConcurrentHashMap所使用的锁分段技术，首先将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问。<h1 id=\"实现原理\"><a href=\"#实现原理\" class=\"headerlink\" title=\"实现原理\"></a>实现原理</h1><p><img alt=\"\" src=\"http://static.oschina.net/uploads/space/2016/0317/154925_NLV0_2243330.png\"></p><br>从图中可以看到，ConcurrentHashMap内部分为很多个Segment，每一个Segment拥有一把锁，然后每个Segment（继承ReentrantLock）<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">static final class Segment&lt;K,V&gt; extends ReentrantLock implements Serializable</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>这样对每个segment中的数据需要同步操作的话都是使用每个segment容器对象自身的锁来实现。只有对全局需要改变时锁定的是所有的segment。</p>\n<p>Segment下面包含很多个HashEntry列表数组。对于一个key，需要经过三次（为什么要hash三次下文会详细讲解）hash操作，才能最终定位这个元素的位置，这三次hash分别为：</p>\n<p>对于一个key，先进行一次hash操作，得到hash值h1，也即h1 = hash1(key)；<br>将得到的h1的高几位进行第二次hash，得到hash值h2，也即h2 = hash2(h1高几位)，通过h2能够确定该元素的放在哪个Segment；<br>将得到的h1进行第三次hash，得到hash值h3，也即h3 = hash3(h1)，通过h3能够确定该元素放置在哪个HashEntry。</p>\n<p>ConcurrentHashMap中主要实体类就是三个：ConcurrentHashMap（整个Hash表）,Segment（桶），HashEntry（节点），对应上面的图可以看出之间的关系</p>\n<p>在JDK1.6中，HashEntry中的next指针也定义为final，并且每次插入将新添加节点作为链的头节点（同HashMap实现），而且每次删除一个节点时，会将删除节点之前的所有节点 拷贝一份组成一个新的链，而将当前节点的上一个节点的next指向当前节点的下一个节点，从而在删除以后有两条链存在，因而可以保证即使在同一条链中，有一个线程在删除，而另一个线程在遍历，它们都能工作良好，因为遍历的线程能继续使用原有的链。因而这种实现是一种更加细粒度的happens-before关系，即如果遍历线程在删除线程结束后开始，则它能看到删除后的变化，如果它发生在删除线程正在执行中间，则它会使用原有的链，而不会等到删除线程结束后再执行，即看不到删除线程的影响。如果这不符合你的需求，还是乖乖的用Hashtable或HashMap的synchronized版本，Collections.synchronizedMap()做的包装。</p>\n<p>不变模式（immutable）是多线程安全里最简单的一种保障方式。因为你拿他没有办法，想改变它也没有机会。不变模式主要通过final关键字来限定的。在JMM中final关键字还有特殊的语义。Final域使得确保初始化安全性（initialization safety）成为可能，初始化安全性让不可变形对象不需要同步就能自由地被访问和共享。</p>\n<h1 id=\"传入的参数initialCapacity-locdFactor-concurrencyLevel这三个\"><a href=\"#传入的参数initialCapacity-locdFactor-concurrencyLevel这三个\" class=\"headerlink\" title=\"传入的参数initialCapacity,locdFactor,concurrencyLevel这三个\"></a>传入的参数initialCapacity,locdFactor,concurrencyLevel这三个</h1><ul>\n<li>initialCapacity表示新创建的这个ConcurrentHashMap的初始容量，也就是上面的结构图中的Entry数量。默认值为static final int DEFAULT_INITIAL_CAPACITY = 16;</li>\n<li>loadFactor表示负载因子，就是当ConcurrentHashMap中的元素个数大于loadFactor * 最大容量时就需要rehash，扩容。默认值为static final float DEFAULT_LOAD_FACTOR = 0.75f;</li>\n<li>concurrencyLevel表示并发级别，这个值用来确定Segment的个数，Segment的个数是大于等于concurrencyLevel的第一个2的n次方的数。比如，如果concurrencyLevel为12，13，14，15，16这些数，则Segment的数目为16(2的4次方)。默认值为static final int DEFAULT_CONCURRENCY_LEVEL = 16;。理想情况下ConcurrentHashMap的真正的并发访问量能够达到concurrencyLevel，因为有concurrencyLevel个Segment，假如有concurrencyLevel个线程需要访问Map，并且需要访问的数据都恰好分别落在不同的Segment中，则这些线程能够无竞争地自由访问（因为他们不需要竞争同一把锁），达到同时访问的效果。这也是为什么这个参数起名为“并发级别”的原因。</li>\n</ul>\n<h1 id=\"转载\"><a href=\"#转载\" class=\"headerlink\" title=\"转载\"></a>转载</h1><div class=\"content\" id=\"articleContent\"><br>                                                    <div class=\"ad-wrap\"><br>                                                        <p style=\"margin:0 0 10px 0;\"><a data-traceid=\"blog_detail_above_text_link_1\" data-tracepid=\"blog_detail_above_text_link\" style=\"color:#A00;font-weight:bold;\" href=\"http://clickc.admaster.com.cn/c/a109734,b2619652,c3159,i0,m101,8a1,8b2,h\" target=\"_blank\">华为云4核8G，高性能云服务器，免费试用<br>&gt;&gt;&gt; </a>&nbsp;&nbsp;<img src=\"https://www.oschina.net/img/hot3.png\" style=\"max-height: 32px; max-width: 32px;\" align=\"absmiddle\"></p><br>                                        </div><br>                                                <p>曾经在&nbsp;<span style=\"font-size:12.5px\"><a href=\"http://my.oschina.net/hosee/blog/607677\" target=\"_blank\" rel=\"nofollow\">[高并发Java 五] JDK并发包1</a>&nbsp;中提到过ConcurrentHashMap，只是简单的提到了下ConcurrentHashMap的优点，以及大概的实现原理。</span></p><br><p><span style=\"font-size:12.5px\">而本文则重点介绍ConcurrentHashMap实现的细节。</span></p><br><p><span style=\"font-size:12.5px\">HashMap就不介绍了，具体请查看<a href=\"http://my.oschina.net/hosee/blog/618953\" target=\"_blank\" rel=\"nofollow\">JDK7与JDK8中HashMap的实现</a></span></p><br><p><span style=\"font-size:12.5px\">HashTable是一个线程安全的类，它使用</span>synchronized来锁住整张Hash表来实现线程安全，即每次锁住整张表让线程独占。ConcurrentHashMap允许多个修改操作并发进行，其关键在于使用了<span style=\"color:#E53333\">锁分离</span>技术。它使用了多个锁来控制对hash表的不同部分进行的修改。ConcurrentHashMap内部使用段(Segment)来表示这些不同的部分，每个段其实就是一个小的Hashtable，它们有自己的锁。只要多个修改操作发生在不同的段上，它们就可以并发进行。</p><br><p>有些方法需要跨段，比如size()和containsValue()，它们可能需要锁定整个表而而不仅仅是某个段，这需要按顺序锁定所有段，操作完毕后，又按顺序释放所有段的锁。这里“按顺序”是很重要的，否则极有可能出现死锁，在ConcurrentHashMap内部，段数组是final的，并且其成员变量实际上也是final的，但是，仅仅是将数组声明为final的并不保证数组成员也是final的，这需要实现上的保证。这可以确保不会出现死锁，因为获得锁的顺序是固定的。</p><br><span id=\"OSC_h2_1\"></span><br><h2 id=\"h2_1\">1. 实现原理</h2><br><p>ConcurrentHashMap使用分段锁技术，将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问，能够实现真正的并发访问。如下图是ConcurrentHashMap的内部结构图：</p><br><p>&nbsp;</p><br><p><img alt=\"\" src=\"http://static.oschina.net/uploads/space/2016/0317/154925_NLV0_2243330.png\"></p><br><p style=\"text-align:justify\">从图中可以看到，ConcurrentHashMap内部分为很多个Segment，每一个Segment拥有一把锁，然后每个Segment（继承<span style=\"color:#E53333\">ReentrantLock</span>）</p><br><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Segment</span>&lt;<span class=\"hljs-title\">K</span>,<span class=\"hljs-title\">V</span>&gt; <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ReentrantLock</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">Serializable</span></span></code></pre><br><p style=\"text-align:justify\">Segment继承了ReentrantLock，表明每个segment都可以当做一个锁。（ReentrantLock前文已经提到，不了解的话就把当做synchronized的替代者吧）这样对每个segment中的数据需要同步操作的话都是使用每个segment容器对象自身的锁来实现。只有对全局需要改变时锁定的是所有的segment。</p><br><p style=\"text-align:justify\"><span style=\"font-size:13.3333px\">Segment</span>下面包含很多个HashEntry列表数组。对于一个key，需要经过<span style=\"color:#E53333\">三次</span>（为什么要hash三次下文会详细讲解）hash操作，才能最终定位这个元素的位置，这三次hash分别为：</p><br><ol><br> <li>对于一个key，先进行一次hash操作，得到hash值h1，也即h1 = hash1(key)；</li><br> <li>将得到的h1的高几位进行第二次hash，得到hash值h2，也即h2 = hash2(h1高几位)，通过h2能够确定该元素的放在哪个Segment；</li><br> <li>将得到的h1进行第三次hash，得到hash值h3，也即h3 = hash3(h1)，通过h3能够确定该元素放置在哪个HashEntry。</li><br></ol><br><p style=\"text-align:justify\">ConcurrentHashMap中主要实体类就是三个：ConcurrentHashMap（整个Hash表）,Segment（桶），HashEntry（节点），对应上面的图可以看出之间的关系</p><br><pre><code class=\"hljs php\"><span class=\"hljs-comment\">/*<em> \n</em> The segments, each of which is a specialized hash table<br><em>/</em></span><br><span class=\"hljs-keyword\">final</span> Segment&lt;K,V&gt;[] segments;</code></pre><br><p>不变(Immutable)和易变(Volatile)ConcurrentHashMap完全允许多个读操作并发进行，读操作并不需要加锁。如果使用传统的技术，如HashMap中的实现，如果允许可以在hash链的中间添加或删除元素，读操作不加锁将得到不一致的数据。ConcurrentHashMap实现技术是保证HashEntry几乎是不可变的。HashEntry代表每个hash链中的一个节点，其结构如下所示：</p><br><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HashEntry</span>&lt;<span class=\"hljs-title\">K</span>,<span class=\"hljs-title\">V</span>&gt; </span>{<br>     <span class=\"hljs-keyword\">final</span> K key;<br>     <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">int</span> hash;<br>     <span class=\"hljs-keyword\">volatile</span> V value;<br>     <span class=\"hljs-keyword\">volatile</span> HashEntry&lt;K,V&gt; next;<br> }</code></pre><br><p>在JDK 1.6中，HashEntry中的next指针也定义为final，并且每次插入将新添加节点作为链的头节点（同HashMap实现），而且每次删除一个节点时，会将删除节点之前的所有节点 <span style=\"color:#E53333\">拷贝一份组成一个新的链</span>，而将当前节点的上一个节点的next指向当前节点的下一个节点，从而在删除以后 <span style=\"color:#E53333\">有两条链存在</span>，因而可以保证即使在同一条链中，有一个线程在删除，而另一个线程在遍历，它们都能工作良好，因为遍历的线程能继续使用原有的链。因而这种实现是一种更加细粒度的happens-before关系，即如果遍历线程在删除线程结束后开始，则它能看到删除后的变化，如果它发生在删除线程正在执行中间，则它会使用原有的链，而不会等到删除线程结束后再执行，即看不到删除线程的影响。如果这不符合你的需求，还是乖乖的用Hashtable或HashMap的synchronized版本，Collections.synchronizedMap()做的包装。</p><br><p style=\"text-align:justify\">而HashMap中的Entry只有key是final的</p><br><pre><code class=\"hljs ruby\">static <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Entry</span>&lt;K,<span class=\"hljs-title\">V</span>&gt; <span class=\"hljs-title\">implements</span> <span class=\"hljs-title\">Map</span>.<span class=\"hljs-title\">Entry</span>&lt;K,<span class=\"hljs-title\">V</span>&gt; {</span><br>        final K key;<br>        V value;<br>        Entry&lt;K,V&gt; <span class=\"hljs-keyword\">next</span>;<br>        int hash;</code></pre><br><p><strong>不变</strong> <strong>模式（immutable）</strong>是多线程安全里最简单的一种保障方式。因为你拿他没有办法，想改变它也没有机会。<br> 不变模式主要通过final关键字来限定的。在JMM中final关键字还有特殊的语义。Final域使得确保初始化安全性（initialization safety）成为可能，初始化安全性让不可变形对象不需要同步就能自由地被访问和共享。</p><br><span id=\"OSC_h3_2\"></span><br><h3 id=\"h3_2\">1.1&nbsp;初始化</h3><br><p>先看看ConcurrentHashMap的初始化做了哪些事情，构造函数的源码如下：</p><br><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">ConcurrentHashMap</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> initialCapacity,<br>                             <span class=\"hljs-keyword\">float</span> loadFactor, <span class=\"hljs-keyword\">int</span> concurrencyLevel)</span> </span>{<br>        <span class=\"hljs-keyword\">if</span> (!(loadFactor &gt; <span class=\"hljs-number\">0</span>) || initialCapacity &lt; <span class=\"hljs-number\">0</span> || concurrencyLevel &lt;= <span class=\"hljs-number\">0</span>)<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalArgumentException();<br>        <span class=\"hljs-keyword\">if</span> (concurrencyLevel &gt; MAX_SEGMENTS)<br>            concurrencyLevel = MAX_SEGMENTS;<br>        <span class=\"hljs-comment\">// Find power-of-two sizes best matching arguments</span><br>        <span class=\"hljs-keyword\">int</span> sshift = <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-keyword\">int</span> ssize = <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-keyword\">while</span> (ssize &lt; concurrencyLevel) {<br>            ++sshift;<br>            ssize &lt;&lt;= <span class=\"hljs-number\">1</span>;<br>        }<br>        <span class=\"hljs-keyword\">this</span>.segmentShift = <span class=\"hljs-number\">32</span> - sshift;<br>        <span class=\"hljs-keyword\">this</span>.segmentMask = ssize - <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-keyword\">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)<br>            initialCapacity = MAXIMUM_CAPACITY;<br>        <span class=\"hljs-keyword\">int</span> c = initialCapacity / ssize;<br>        <span class=\"hljs-keyword\">if</span> (c  ssize &lt; initialCapacity)<br>            ++c;<br>        <span class=\"hljs-keyword\">int</span> cap = MIN_SEGMENT_TABLE_CAPACITY;<br>        <span class=\"hljs-keyword\">while</span> (cap &lt; c)<br>            cap &lt;&lt;= <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-comment\">// create segments and segments[0]</span><br>        Segment&lt;K,V&gt; s0 =<br>            <span class=\"hljs-keyword\">new</span> Segment&lt;K,V&gt;(loadFactor, (<span class=\"hljs-keyword\">int</span>)(cap <em> loadFactor),<br>                             (HashEntry&lt;K,V&gt;[])<span class=\"hljs-keyword\">new</span> HashEntry[cap]);<br>        Segment&lt;K,V&gt;[] ss = (Segment&lt;K,V&gt;[])<span class=\"hljs-keyword\">new</span> Segment[ssize];<br>        UNSAFE.putOrderedObject(ss, SBASE, s0); <span class=\"hljs-comment\">// ordered write of segments[0]</span><br>        <span class=\"hljs-keyword\">this</span>.segments = ss;<br>    }</em></code></pre><br><p style=\"text-align:justify\">传入的参数有initialCapacity，loadFactor，concurrencyLevel这三个。</p><br><ul><br> <li>initialCapacity表示新创建的这个ConcurrentHashMap的初始容量，也就是上面的结构图中的Entry数量。默认值为static final int DEFAULT_INITIAL_CAPACITY = 16;</li><br> <li>loadFactor表示负载因子，就是当ConcurrentHashMap中的元素个数大于loadFactor  最大容量时就需要rehash，扩容。默认值为static final float DEFAULT_LOAD_FACTOR = 0.75f;</li><br> <li>concurrencyLevel表示并发级别，这个值用来确定Segment的个数，Segment的个数是大于等于concurrencyLevel的第一个2的n次方的数。比如，如果concurrencyLevel为12，13，14，15，16这些数，则Segment的数目为16(2的4次方)。默认值为static final int DEFAULT_CONCURRENCY_LEVEL = 16;。理想情况下ConcurrentHashMap的真正的并发访问量能够达到concurrencyLevel，因为有concurrencyLevel个Segment，假如有concurrencyLevel个线程需要访问Map，并且需要访问的数据都恰好分别落在不同的Segment中，则这些线程能够无竞争地自由访问（因为他们不需要竞争同一把锁），达到同时访问的效果。这也是为什么这个参数起名为“并发级别”的原因。</li><br></ul><br><p style=\"text-align:justify\">初始化的一些动作：</p><br><ol><br> <li>验证参数的合法性，如果不合法，直接抛出异常。</li><br> <li>concurrencyLevel也就是Segment的个数不能超过规定的最大Segment的个数，默认值为static final int MAX_SEGMENTS = 1 &lt;&lt; 16;，如果超过这个值，设置为这个值。</li><br> <li>然后使用循环找到大于等于concurrencyLevel的第一个2的n次方的数ssize，这个数就是Segment数组的大小，并记录一共向左按位移动的次数sshift，并令segmentShift = 32 - sshift，并且segmentMask的值等于ssize - 1，segmentMask的各个二进制位都为1，目的是之后可以通过key的hash值与这个值做&amp;运算确定Segment的索引。</li><br> <li>检查给的容量值是否大于允许的最大容量值，如果大于该值，设置为该值。最大容量值为static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;。</li><br> <li>然后计算每个Segment平均应该放置多少个元素，这个值c是向上取整的值。比如初始容量为15，Segment个数为4，则每个Segment平均需要放置4个元素。</li><br> <li>最后创建一个Segment实例，将其当做Segment数组的第一个元素。</li><br></ol><br><span id=\"OSC_h3_3\"></span><br><h3 id=\"h3_3\">1.2&nbsp;put操作</h3><br><p>put操作的源码如下：</p><br><pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> V <span class=\"hljs-title\">put</span>(<span class=\"hljs-params\">K key, V <span class=\"hljs-keyword\">value</span></span>) </span>{<br>      Segment&lt;K,V&gt; s;<br>      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">value</span> == <span class=\"hljs-literal\">null</span>)<br>          <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NullPointerException();<br>      <span class=\"hljs-keyword\">int</span> hash = hash(key);<br>      <span class=\"hljs-keyword\">int</span> j = (hash &gt;&gt;&gt; segmentShift) &amp; segmentMask;<br>      <span class=\"hljs-keyword\">if</span> ((s = (Segment&lt;K,V&gt;)UNSAFE.getObject          <span class=\"hljs-comment\">// nonvolatile; recheck</span><br>           (segments, (j &lt;&lt; SSHIFT) + SBASE)) == <span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">//  in ensureSegment</span><br>          s = ensureSegment(j);<br>      <span class=\"hljs-keyword\">return</span> s.put(key, hash, <span class=\"hljs-keyword\">value</span>, <span class=\"hljs-literal\">false</span>);<br>  }</code></pre><br><p style=\"text-align:justify\">操作步骤如下：</p><br><ol><br> <li>判断value是否为null，如果为null，直接抛出异常。</li><br> <li>key通过一次hash运算得到一个hash值。(这个hash运算下文详说)</li><br> <li>将得到hash值向右按位移动segmentShift位，然后再与segmentMask做&amp;运算得到segment的索引j。<br> 在初始化的时候我们说过segmentShift的值等于32-sshift，例如concurrencyLevel等于16，则sshift等于4，则segmentShift为28。hash值是一个32位的整数，将其向右移动28位就变成这个样子：<br> 0000 0000 0000 0000 0000 0000 0000 xxxx，然后再用这个值与segmentMask做&amp;运算，也就是取最后四位的值。这个值确定Segment的索引。</li><br> <li>使用Unsafe的方式从Segment数组中获取该索引对应的Segment对象。</li><br> <li>向这个Segment对象中put值，这个put操作也基本是一样的步骤（通过&amp;运算获取HashEntry的索引，然后set）。</li><br></ol><br><pre><code class=\"hljs cs\"><span class=\"hljs-function\">final V <span class=\"hljs-title\">put</span>(<span class=\"hljs-params\">K key, <span class=\"hljs-keyword\">int</span> hash, V <span class=\"hljs-keyword\">value</span>, boolean onlyIfAbsent</span>) </span>{<br>            HashEntry&lt;K,V&gt; node = tryLock() ? <span class=\"hljs-literal\">null</span> :<br>                scanAndLockForPut(key, hash, <span class=\"hljs-keyword\">value</span>);<br>            V oldValue;<br>            <span class=\"hljs-keyword\">try</span> {<br>                HashEntry&lt;K,V&gt;[] tab = table;<br>                <span class=\"hljs-keyword\">int</span> index = (tab.length - <span class=\"hljs-number\">1</span>) &amp; hash;<br>                HashEntry&lt;K,V&gt; first = entryAt(tab, index);<br>                <span class=\"hljs-keyword\">for</span> (HashEntry&lt;K,V&gt; e = first;;) {<br>                    <span class=\"hljs-keyword\">if</span> (e != <span class=\"hljs-literal\">null</span>) {<br>                        K k;<br>                        <span class=\"hljs-keyword\">if</span> ((k = e.key) == key ||<br>                            (e.hash == hash &amp;&amp; key.<span class=\"hljs-keyword\">equals</span>(k))) {<br>                            oldValue = e.<span class=\"hljs-keyword\">value</span>;<br>                            <span class=\"hljs-keyword\">if</span> (!onlyIfAbsent) {<br>                                e.<span class=\"hljs-keyword\">value</span> = <span class=\"hljs-keyword\">value</span>;<br>                                ++modCount;<br>                            }<br>                            <span class=\"hljs-keyword\">break</span>;<br>                        }<br>                        e = e.next;<br>                    }<br>                    <span class=\"hljs-keyword\">else</span> {<br>                        <span class=\"hljs-keyword\">if</span> (node != <span class=\"hljs-literal\">null</span>)<br>                            node.setNext(first);<br>                        <span class=\"hljs-keyword\">else</span><br>                            node = <span class=\"hljs-keyword\">new</span> HashEntry&lt;K,V&gt;(hash, key, <span class=\"hljs-keyword\">value</span>, first);<br>                        <span class=\"hljs-keyword\">int</span> c = count + <span class=\"hljs-number\">1</span>;<br>                        <span class=\"hljs-keyword\">if</span> (c &gt; threshold &amp;&amp; tab.length &lt; MAXIMUM_CAPACITY)<br>                            rehash(node);<br>                        <span class=\"hljs-keyword\">else</span><br>                            setEntryAt(tab, index, node);<br>                        ++modCount;<br>                        count = c;<br>                        oldValue = <span class=\"hljs-literal\">null</span>;<br>                        <span class=\"hljs-keyword\">break</span>;<br>                    }<br>                }<br>            } <span class=\"hljs-keyword\">finally</span> {<br>                unlock();<br>            }<br>            <span class=\"hljs-keyword\">return</span> oldValue;<br>        }</code></pre><br><p>put操作是要加锁的。</p><br><span id=\"OSC_h3_4\"></span><br><h3 id=\"h3_4\">1.3 get操作</h3><br><p style=\"text-align:justify\">get操作的源码如下：</p><br><pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> V <span class=\"hljs-title\">get</span>(<span class=\"hljs-params\">Object key</span>) </span>{<br>        Segment&lt;K,V&gt; s; <span class=\"hljs-comment\">// manually integrate access methods to reduce overhead</span><br>        HashEntry&lt;K,V&gt;[] tab;<br>        <span class=\"hljs-keyword\">int</span> h = hash(key);<br>        <span class=\"hljs-keyword\">long</span> u = (((h &gt;&gt;&gt; segmentShift) &amp; segmentMask) &lt;&lt; SSHIFT) + SBASE;<br>        <span class=\"hljs-keyword\">if</span> ((s = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(segments, u)) != <span class=\"hljs-literal\">null</span> &amp;&amp;<br>            (tab = s.table) != <span class=\"hljs-literal\">null</span>) {<br>            <span class=\"hljs-keyword\">for</span> (HashEntry&lt;K,V&gt; e = (HashEntry&lt;K,V&gt;) UNSAFE.getObjectVolatile<br>                     (tab, ((<span class=\"hljs-keyword\">long</span>)(((tab.length - <span class=\"hljs-number\">1</span>) &amp; h)) &lt;&lt; TSHIFT) + TBASE);<br>                 e != <span class=\"hljs-literal\">null</span>; e = e.next) {<br>                K k;<br>                <span class=\"hljs-keyword\">if</span> ((k = e.key) == key || (e.hash == h &amp;&amp; key.<span class=\"hljs-keyword\">equals</span>(k)))<br>                    <span class=\"hljs-keyword\">return</span> e.<span class=\"hljs-keyword\">value</span>;<br>            }<br>        }<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>    }</code></pre><br><p style=\"text-align:justify\">操作步骤为：</p><br><ol><br> <li>和put操作一样，先通过key进行两次hash确定应该去哪个Segment中取数据。</li><br> <li>使用Unsafe获取对应的Segment，然后再进行一次&amp;运算得到HashEntry链表的位置，然后从链表头开始遍历整个链表（因为Hash可能会有碰撞，所以用一个链表保存），如果找到对应的key，则返回对应的value值，如果链表遍历完都没有找到对应的key，则说明Map中不包含该key，返回null。</li><br></ol><br><p style=\"text-align:justify\">值得注意的是，<span style=\"color:#E53333\">get操作是不需要加锁的（如果value为null，会调用</span><span style=\"color:#FF0000\">readValueUnderLock，只有这个步骤会加锁</span><span style=\"color:#E53333\">）<span style=\"color:#000000\">，通过前面提到的volatile和final来确保数据安全。</span></span></p><br><span id=\"OSC_h3_5\"></span><br><h3 id=\"h3_5\">1.4&nbsp;size操作</h3><br><p>size操作与put和get操作最大的区别在于，size操作需要遍历所有的Segment才能算出整个Map的大小，而put和get都只关心一个Segment。假设我们当前遍历的Segment为SA，那么在遍历SA过程中其他的Segment比如SB可能会被修改，于是这一次运算出来的size值可能并不是Map当前的真正大小。所以一个比较简单的办法就是计算Map大小的时候所有的Segment都Lock住，不能更新(包含put，remove等等)数据，计算完之后再Unlock。这是普通人能够想到的方案，但是牛逼的作者还有一个更好的Idea：<span style=\"color:#E53333\">先给3次机会</span>，不lock所有的Segment，遍历所有Segment，累加各个Segment的大小得到整个Map的大小，如果某相邻的两次计算获取的所有Segment的更新的次数（每个Segment都有一个modCount变量，这个变量在Segment中的Entry被修改时会加一，通过这个值可以得到每个Segment的更新操作的次数）是一样的，说明计算过程中没有更新操作，则直接返回这个值。如果这三次不加锁的计算过程中Map的更新次数有变化，则之后的计算先对所有的Segment加锁，再遍历所有Segment计算Map大小，最后再解锁所有Segment。源代码如下：</p><br><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">size</span><span class=\"hljs-params\">()</span> </span>{<br>        <span class=\"hljs-comment\">// Try a few times to get accurate count. On failure due to</span><br>        <span class=\"hljs-comment\">// continuous async changes in table, resort to locking.</span><br>        <span class=\"hljs-keyword\">final</span> Segment&lt;K,V&gt;[] segments = <span class=\"hljs-keyword\">this</span>.segments;<br>        <span class=\"hljs-keyword\">int</span> size;<br>        <span class=\"hljs-keyword\">boolean</span> overflow; <span class=\"hljs-comment\">// true if size overflows 32 bits</span><br>        <span class=\"hljs-keyword\">long</span> sum;         <span class=\"hljs-comment\">// sum of modCounts</span><br>        <span class=\"hljs-keyword\">long</span> last = <span class=\"hljs-number\">0L</span>;   <span class=\"hljs-comment\">// previous sum</span><br>        <span class=\"hljs-keyword\">int</span> retries = -<span class=\"hljs-number\">1</span>; <span class=\"hljs-comment\">// first iteration isn’t retry</span><br>        <span class=\"hljs-keyword\">try</span> {<br>            <span class=\"hljs-keyword\">for</span> (;;) {<br>                <span class=\"hljs-keyword\">if</span> (retries++ == RETRIES_BEFORE_LOCK) {<br>                    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)<br>                        ensureSegment(j).lock(); <span class=\"hljs-comment\">// force creation</span><br>                }<br>                sum = <span class=\"hljs-number\">0L</span>;<br>                size = <span class=\"hljs-number\">0</span>;<br>                overflow = <span class=\"hljs-keyword\">false</span>;<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j) {<br>                    Segment&lt;K,V&gt; seg = segmentAt(segments, j);<br>                    <span class=\"hljs-keyword\">if</span> (seg != <span class=\"hljs-keyword\">null</span>) {<br>                        sum += seg.modCount;<br>                        <span class=\"hljs-keyword\">int</span> c = seg.count;<br>                        <span class=\"hljs-keyword\">if</span> (c &lt; <span class=\"hljs-number\">0</span> || (size += c) &lt; <span class=\"hljs-number\">0</span>)<br>                            overflow = <span class=\"hljs-keyword\">true</span>;<br>                    }<br>                }<br>                <span class=\"hljs-keyword\">if</span> (sum == last)<br>                    <span class=\"hljs-keyword\">break</span>;<br>                last = sum;<br>            }<br>        } <span class=\"hljs-keyword\">finally</span> {<br>            <span class=\"hljs-keyword\">if</span> (retries &gt; RETRIES_BEFORE_LOCK) {<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)<br>                    segmentAt(segments, j).unlock();<br>            }<br>        }<br>        <span class=\"hljs-keyword\">return</span> overflow ? Integer.MAX_VALUE : size;<br>    }</code></pre><br><p style=\"text-align:justify\">举个例子：</p><br><blockquote><br> <p>一个Map有4个Segment，标记为S1，S2，S3，S4，现在我们要获取Map的size。计算过程是这样的：第一次计算，不对S1，S2，S3，S4加锁，遍历所有的Segment，假设每个Segment的大小分别为1，2，3，4，更新操作次数分别为：2，2，3，1，则这次计算可以得到Map的总大小为1+2+3+4=10，总共更新操作次数为2+2+3+1=8；第二次计算，不对S1,S2,S3,S4加锁，遍历所有Segment，假设这次每个Segment的大小变成了2，2，3，4，更新次数分别为3，2，3，1，因为两次计算得到的Map更新次数不一致(第一次是8，第二次是9)则可以断定这段时间Map数据被更新，则此时应该再试一次；第三次计算，不对S1，S2，S3，S4加锁，遍历所有Segment，假设每个Segment的更新操作次数还是为3，2，3，1，则因为第二次计算和第三次计算得到的Map的更新操作的次数是一致的，就能说明第二次计算和第三次计算这段时间内Map数据没有被更新，此时可以直接返回第三次计算得到的Map的大小。最坏的情况：第三次计算得到的数据更新次数和第二次也不一样，则只能先对所有Segment加锁再计算最后解锁。</p><br></blockquote><br><span id=\"OSC_h3_6\"></span><br><h3 id=\"h3_6\">1.5&nbsp;containsValue操作</h3><br><p>containsValue操作采用了和size操作一样的想法:</p><br><pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> boolean <span class=\"hljs-title\">containsValue</span>(<span class=\"hljs-params\">Object <span class=\"hljs-keyword\">value</span></span>) </span>{<br>        <span class=\"hljs-comment\">// Same idea as size()</span><br>        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">value</span> == <span class=\"hljs-literal\">null</span>)<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NullPointerException();<br>        final Segment&lt;K,V&gt;[] segments = <span class=\"hljs-keyword\">this</span>.segments;<br>        boolean found = <span class=\"hljs-literal\">false</span>;<br>        <span class=\"hljs-keyword\">long</span> last = <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-keyword\">int</span> retries = <span class=\"hljs-number\">-1</span>;<br>        <span class=\"hljs-keyword\">try</span> {<br>            outer: <span class=\"hljs-keyword\">for</span> (;;) {<br>                <span class=\"hljs-keyword\">if</span> (retries++ == RETRIES_BEFORE_LOCK) {<br>                    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)<br>                        ensureSegment(j).<span class=\"hljs-keyword\">lock</span>(); <span class=\"hljs-comment\">// force creation</span><br>                }<br>                <span class=\"hljs-keyword\">long</span> hashSum = <span class=\"hljs-number\">0</span>L;<br>                <span class=\"hljs-keyword\">int</span> sum = <span class=\"hljs-number\">0</span>;<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j) {<br>                    HashEntry&lt;K,V&gt;[] tab;<br>                    Segment&lt;K,V&gt; seg = segmentAt(segments, j);<br>                    <span class=\"hljs-keyword\">if</span> (seg != <span class=\"hljs-literal\">null</span> &amp;&amp; (tab = seg.table) != <span class=\"hljs-literal\">null</span>) {<br>                        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span> ; i &lt; tab.length; i++) {<br>                            HashEntry&lt;K,V&gt; e;<br>                            <span class=\"hljs-keyword\">for</span> (e = entryAt(tab, i); e != <span class=\"hljs-literal\">null</span>; e = e.next) {<br>                                V v = e.<span class=\"hljs-keyword\">value</span>;<br>                                <span class=\"hljs-keyword\">if</span> (v != <span class=\"hljs-literal\">null</span> &amp;&amp; <span class=\"hljs-keyword\">value</span>.<span class=\"hljs-keyword\">equals</span>(v)) {<br>                                    found = <span class=\"hljs-literal\">true</span>;<br>                                    <span class=\"hljs-keyword\">break</span> outer;<br>                                }<br>                            }<br>                        }<br>                        sum += seg.modCount;<br>                    }<br>                }<br>                <span class=\"hljs-keyword\">if</span> (retries &gt; <span class=\"hljs-number\">0</span> &amp;&amp; sum == last)<br>                    <span class=\"hljs-keyword\">break</span>;<br>                last = sum;<br>            }<br>        } <span class=\"hljs-keyword\">finally</span> {<br>            <span class=\"hljs-keyword\">if</span> (retries &gt; RETRIES_BEFORE_LOCK) {<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)<br>                    segmentAt(segments, j).unlock();<br>            }<br>        }<br>        <span class=\"hljs-keyword\">return</span> found;<br>    }</code></pre><br><span id=\"OSC_h2_7\"></span><br><h2 id=\"h2_7\">2.&nbsp;关于hash</h2><br><p>看看hash的源代码：</p><br><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">hash</span><span class=\"hljs-params\">(Object k)</span> </span>{<br>        <span class=\"hljs-keyword\">int</span> h = hashSeed;<br><br>        <span class=\"hljs-keyword\">if</span> ((<span class=\"hljs-number\">0</span> != h) &amp;&amp; (k <span class=\"hljs-keyword\">instanceof</span> String)) {<br>            <span class=\"hljs-keyword\">return</span> sun.misc.Hashing.stringHash32((String) k);<br>        }<br><br>        h ^= k.hashCode();<br><br>        <span class=\"hljs-comment\">// Spread bits to regularize both segment and index locations,</span><br>        <span class=\"hljs-comment\">// using variant of single-word Wang/Jenkins hash.</span><br>        h += (h &lt;&lt;  <span class=\"hljs-number\">15</span>) ^ <span class=\"hljs-number\">0xffffcd7d</span>;<br>        h ^= (h &gt;&gt;&gt; <span class=\"hljs-number\">10</span>);<br>        h += (h &lt;&lt;   <span class=\"hljs-number\">3</span>);<br>        h ^= (h &gt;&gt;&gt;  <span class=\"hljs-number\">6</span>);<br>        h += (h &lt;&lt;   <span class=\"hljs-number\">2</span>) + (h &lt;&lt; <span class=\"hljs-number\">14</span>);<br>        <span class=\"hljs-keyword\">return</span> h ^ (h &gt;&gt;&gt; <span class=\"hljs-number\">16</span>);<br>    }</code></pre><br><p>源码中的注释是这样的：</p><br><blockquote><br> Applies a supplemental hash function to a given hashCode, which defends against poor quality hash functions. This is critical because ConcurrentHashMap uses power-of-two length hash tables, that otherwise encounter collisions for hashCodes that do not differ in lower or upper bits.<br></blockquote><br><p>这里用到了Wang/Jenkins hash算法的变种，主要的目的是为了减少哈希冲突，使元素能够均匀的分布在不同的Segment上，从而提高容器的存取效率。假如哈希的质量差到极点，那么所有的元素都在一个Segment中，不仅存取元素缓慢，分段锁也会失去意义。</p><br><p>举个简单的例子：</p><br><pre><code class=\"hljs css\"><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(“0001111”, 2) &amp; 15);<br><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(“0011111”, 2) &amp; 15);<br><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(“0111111”, 2) &amp; 15);<br><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(“1111111”, 2) &amp; 15);</code></pre><br><p>这些数字得到的hash值都是一样的，全是15，所以如果不进行第一次预hash，发生冲突的几率还是很大的，但是如果我们先把上例中的二进制数字使用hash()函数先进行一次预hash，得到的结果是这样的：</p><br><blockquote><br> 0100｜0111｜0110｜0111｜1101｜1010｜0100｜1110 1111｜0111｜0100｜0011｜0000｜0001｜1011｜1000 0111｜0111｜0110｜1001｜0100｜0110｜0011｜1110 1000｜0011｜0000｜0000｜1100｜1000｜0001｜1010<br></blockquote><br><p>上面这个例子引用自:&nbsp; <a href=\"http://www.infoq.com/cn/articles/ConcurrentHashMap/\" target=\"_blank\" rel=\"nofollow\">InfoQ</a></p><br><p>可以看到每一位的数据都散开了，并且ConcurrentHashMap中是使用预hash值的高位参与运算的。比如之前说的先将hash值向右按位移动28位，再与15做&amp;运算，得到的结果都别为：4，15，7，8，没有冲突！</p><br><span id=\"OSC_h2_8\"></span><br><h2 id=\"h2_8\">3.&nbsp;注意事项</h2><br><ul><br> <li>ConcurrentHashMap中的key和value值都不能为null，HashMap中key可以为null，HashTable中key不能为null。</li><br> <li>ConcurrentHashMap是线程安全的类并不能保证使用了ConcurrentHashMap的操作都是线程安全的！</li><br> <li><span style=\"font-size:13.3333px\">ConcurrentHashMap的get操作不需要加锁，put操作需要加锁</span></li><br></ul><br><span id=\"OSC_h2_9\"></span><br><h2 id=\"h2_9\">Reference：</h2><br><p>1. <a href=\"http://www.cnblogs.com/ITtangtang/p/3948786.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/ITtangtang/p/3948786.html</a></p><br><p>2.&nbsp;<a href=\"http://qifuguang.me/2015/09/10/[Java%E5%B9%B6%E5%8F%91%E5%8C%85%E5%AD%A6%E4%B9%A0%E5%85%AB]%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90ConcurrentHashMap/\" target=\"_blank\" rel=\"noopener\">http://qifuguang.me/2015/09/10/[Java%E5%B9%B6%E5%8F%91%E5%8C%85%E5%AD%A6%E4%B9%A0%E5%85%AB]%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90ConcurrentHashMap/</a></p><br><p>3.&nbsp;<a href=\"http://www.cnblogs.com/yydcdut/p/3959815.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/yydcdut/p/3959815.html</a></p><br>                                                    <div class=\"ad-wrap\"><br>                                                        <div data-traceid=\"blog_down_1\" data-tracepid=\"blog_down\" style=\"text-align:center\"><br>    <!-- oschina-blog-728x90 --><br>    <ins class=\"adsbygoogle\" style=\"display:inline-block;width:728px;height:90px\" data-ad-client=\"ca-pub-7090564139599510\" data-ad-slot=\"5590362768\"></ins><br>    <script><br>        (adsbygoogle = window.adsbygoogle || []).push({});<br>    </script><br>    <script type=\"text/javascript\"><br>        function googleAdJSAtOnload() {<br>            var element = document.createElement(“script”);<br>            element.src = “//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js”;<br>            element.async = true;<br>            document.body.appendChild(element);<br>        }<br>        if (window.addEventListener) {<br>            window.addEventListener(“load”, googleAdJSAtOnload, false);<br>        } else if (window.attachEvent) {<br>            window.attachEvent(“onload”, googleAdJSAtOnload);<br>        } else {<br>            window.onload = googleAdJSAtOnload;<br>        }<br>    </script><br></div><br>                                        </div><br>                                            </div>\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<p>1.哈希算法: 是一种将任意内容的输入转换成相同长度输出的加密方式，其输出被称为哈希值。 </p>\n<ol start=\"2\">\n<li>哈希表: 根据设定的哈希函数H(key)和处理冲突方法将一组关键字映象到一个有限的地址区间上，并以关键字在地址区间中的象作为记录在表中的存储位置，这种表称为哈希表或散列，所得存储位置称为哈希地址或散列地址。<h1 id=\"线程不安全的HashMap\"><a href=\"#线程不安全的HashMap\" class=\"headerlink\" title=\"线程不安全的HashMap\"></a>线程不安全的HashMap</h1>因为多线程环境下，使用Hashmap进行put操作会引起死循环，导致CPU利用率接近100%，所以在并发情况下不能使用HashMap。<h1 id=\"效率低下的HashTable容器\"><a href=\"#效率低下的HashTable容器\" class=\"headerlink\" title=\"效率低下的HashTable容器\"></a>效率低下的HashTable容器</h1>HashTable容器使用synchronized来保证线程安全，但在线程竞争激烈的情况下HashTable的效率非常低下。因为当一个线程访问HashTable的同步方法时，其他线程访问HashTable的同步方法时，可能会进入阻塞或轮询状态。如线程1使用put进行添加元素，线程2不但不能使用put方法添加元素，并且也不能使用get方法来获取元素，所以竞争越激烈效率越低。<h1 id=\"ConcurrentHashMap的锁分段技术\"><a href=\"#ConcurrentHashMap的锁分段技术\" class=\"headerlink\" title=\"ConcurrentHashMap的锁分段技术\"></a>ConcurrentHashMap的锁分段技术</h1>HashTable容器在竞争激烈的并发环境下表现出效率低下的原因，是因为所有访问HashTable的线程都必须竞争同一把锁，那假如容器里有多把锁，每一把锁用于锁容器其中一部分数据，那么当多线程访问容器里不同数据段的数据时，线程间就不会存在锁竞争，从而可以有效的提高并发访问效率，这就是ConcurrentHashMap所使用的锁分段技术，首先将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问。<h1 id=\"实现原理\"><a href=\"#实现原理\" class=\"headerlink\" title=\"实现原理\"></a>实现原理</h1><p><img alt=\"\" src=\"http://static.oschina.net/uploads/space/2016/0317/154925_NLV0_2243330.png\"></p><br>从图中可以看到，ConcurrentHashMap内部分为很多个Segment，每一个Segment拥有一把锁，然后每个Segment（继承ReentrantLock）<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">static final class Segment&lt;K,V&gt; extends ReentrantLock implements Serializable</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>这样对每个segment中的数据需要同步操作的话都是使用每个segment容器对象自身的锁来实现。只有对全局需要改变时锁定的是所有的segment。</p>\n<p>Segment下面包含很多个HashEntry列表数组。对于一个key，需要经过三次（为什么要hash三次下文会详细讲解）hash操作，才能最终定位这个元素的位置，这三次hash分别为：</p>\n<p>对于一个key，先进行一次hash操作，得到hash值h1，也即h1 = hash1(key)；<br>将得到的h1的高几位进行第二次hash，得到hash值h2，也即h2 = hash2(h1高几位)，通过h2能够确定该元素的放在哪个Segment；<br>将得到的h1进行第三次hash，得到hash值h3，也即h3 = hash3(h1)，通过h3能够确定该元素放置在哪个HashEntry。</p>\n<p>ConcurrentHashMap中主要实体类就是三个：ConcurrentHashMap（整个Hash表）,Segment（桶），HashEntry（节点），对应上面的图可以看出之间的关系</p>\n<p>在JDK1.6中，HashEntry中的next指针也定义为final，并且每次插入将新添加节点作为链的头节点（同HashMap实现），而且每次删除一个节点时，会将删除节点之前的所有节点 拷贝一份组成一个新的链，而将当前节点的上一个节点的next指向当前节点的下一个节点，从而在删除以后有两条链存在，因而可以保证即使在同一条链中，有一个线程在删除，而另一个线程在遍历，它们都能工作良好，因为遍历的线程能继续使用原有的链。因而这种实现是一种更加细粒度的happens-before关系，即如果遍历线程在删除线程结束后开始，则它能看到删除后的变化，如果它发生在删除线程正在执行中间，则它会使用原有的链，而不会等到删除线程结束后再执行，即看不到删除线程的影响。如果这不符合你的需求，还是乖乖的用Hashtable或HashMap的synchronized版本，Collections.synchronizedMap()做的包装。</p>\n<p>不变模式（immutable）是多线程安全里最简单的一种保障方式。因为你拿他没有办法，想改变它也没有机会。不变模式主要通过final关键字来限定的。在JMM中final关键字还有特殊的语义。Final域使得确保初始化安全性（initialization safety）成为可能，初始化安全性让不可变形对象不需要同步就能自由地被访问和共享。</p>\n<h1 id=\"传入的参数initialCapacity-locdFactor-concurrencyLevel这三个\"><a href=\"#传入的参数initialCapacity-locdFactor-concurrencyLevel这三个\" class=\"headerlink\" title=\"传入的参数initialCapacity,locdFactor,concurrencyLevel这三个\"></a>传入的参数initialCapacity,locdFactor,concurrencyLevel这三个</h1><ul>\n<li>initialCapacity表示新创建的这个ConcurrentHashMap的初始容量，也就是上面的结构图中的Entry数量。默认值为static final int DEFAULT_INITIAL_CAPACITY = 16;</li>\n<li>loadFactor表示负载因子，就是当ConcurrentHashMap中的元素个数大于loadFactor * 最大容量时就需要rehash，扩容。默认值为static final float DEFAULT_LOAD_FACTOR = 0.75f;</li>\n<li>concurrencyLevel表示并发级别，这个值用来确定Segment的个数，Segment的个数是大于等于concurrencyLevel的第一个2的n次方的数。比如，如果concurrencyLevel为12，13，14，15，16这些数，则Segment的数目为16(2的4次方)。默认值为static final int DEFAULT_CONCURRENCY_LEVEL = 16;。理想情况下ConcurrentHashMap的真正的并发访问量能够达到concurrencyLevel，因为有concurrencyLevel个Segment，假如有concurrencyLevel个线程需要访问Map，并且需要访问的数据都恰好分别落在不同的Segment中，则这些线程能够无竞争地自由访问（因为他们不需要竞争同一把锁），达到同时访问的效果。这也是为什么这个参数起名为“并发级别”的原因。</li>\n</ul>\n<h1 id=\"转载\"><a href=\"#转载\" class=\"headerlink\" title=\"转载\"></a>转载</h1><div class=\"content\" id=\"articleContent\"><br>                                                    <div class=\"ad-wrap\"><br>                                                        <p style=\"margin:0 0 10px 0;\"><a data-traceid=\"blog_detail_above_text_link_1\" data-tracepid=\"blog_detail_above_text_link\" style=\"color:#A00;font-weight:bold;\" href=\"http://clickc.admaster.com.cn/c/a109734,b2619652,c3159,i0,m101,8a1,8b2,h\" target=\"_blank\">华为云4核8G，高性能云服务器，免费试用<br>&gt;&gt;&gt; </a>&nbsp;&nbsp;<img src=\"https://www.oschina.net/img/hot3.png\" style=\"max-height: 32px; max-width: 32px;\" align=\"absmiddle\"></p><br>                                        </div><br>                                                <p>曾经在&nbsp;<span style=\"font-size:12.5px\"><a href=\"http://my.oschina.net/hosee/blog/607677\" target=\"_blank\" rel=\"nofollow\">[高并发Java 五] JDK并发包1</a>&nbsp;中提到过ConcurrentHashMap，只是简单的提到了下ConcurrentHashMap的优点，以及大概的实现原理。</span></p><br><p><span style=\"font-size:12.5px\">而本文则重点介绍ConcurrentHashMap实现的细节。</span></p><br><p><span style=\"font-size:12.5px\">HashMap就不介绍了，具体请查看<a href=\"http://my.oschina.net/hosee/blog/618953\" target=\"_blank\" rel=\"nofollow\">JDK7与JDK8中HashMap的实现</a></span></p><br><p><span style=\"font-size:12.5px\">HashTable是一个线程安全的类，它使用</span>synchronized来锁住整张Hash表来实现线程安全，即每次锁住整张表让线程独占。ConcurrentHashMap允许多个修改操作并发进行，其关键在于使用了<span style=\"color:#E53333\">锁分离</span>技术。它使用了多个锁来控制对hash表的不同部分进行的修改。ConcurrentHashMap内部使用段(Segment)来表示这些不同的部分，每个段其实就是一个小的Hashtable，它们有自己的锁。只要多个修改操作发生在不同的段上，它们就可以并发进行。</p><br><p>有些方法需要跨段，比如size()和containsValue()，它们可能需要锁定整个表而而不仅仅是某个段，这需要按顺序锁定所有段，操作完毕后，又按顺序释放所有段的锁。这里“按顺序”是很重要的，否则极有可能出现死锁，在ConcurrentHashMap内部，段数组是final的，并且其成员变量实际上也是final的，但是，仅仅是将数组声明为final的并不保证数组成员也是final的，这需要实现上的保证。这可以确保不会出现死锁，因为获得锁的顺序是固定的。</p><br><span id=\"OSC_h2_1\"></span><br><h2 id=\"h2_1\">1. 实现原理</h2><br><p>ConcurrentHashMap使用分段锁技术，将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问，能够实现真正的并发访问。如下图是ConcurrentHashMap的内部结构图：</p><br><p>&nbsp;</p><br><p><img alt=\"\" src=\"http://static.oschina.net/uploads/space/2016/0317/154925_NLV0_2243330.png\"></p><br><p style=\"text-align:justify\">从图中可以看到，ConcurrentHashMap内部分为很多个Segment，每一个Segment拥有一把锁，然后每个Segment（继承<span style=\"color:#E53333\">ReentrantLock</span>）</p><br><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Segment</span>&lt;<span class=\"hljs-title\">K</span>,<span class=\"hljs-title\">V</span>&gt; <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ReentrantLock</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">Serializable</span></span></code></pre><br><p style=\"text-align:justify\">Segment继承了ReentrantLock，表明每个segment都可以当做一个锁。（ReentrantLock前文已经提到，不了解的话就把当做synchronized的替代者吧）这样对每个segment中的数据需要同步操作的话都是使用每个segment容器对象自身的锁来实现。只有对全局需要改变时锁定的是所有的segment。</p><br><p style=\"text-align:justify\"><span style=\"font-size:13.3333px\">Segment</span>下面包含很多个HashEntry列表数组。对于一个key，需要经过<span style=\"color:#E53333\">三次</span>（为什么要hash三次下文会详细讲解）hash操作，才能最终定位这个元素的位置，这三次hash分别为：</p><br><ol><br> <li>对于一个key，先进行一次hash操作，得到hash值h1，也即h1 = hash1(key)；</li><br> <li>将得到的h1的高几位进行第二次hash，得到hash值h2，也即h2 = hash2(h1高几位)，通过h2能够确定该元素的放在哪个Segment；</li><br> <li>将得到的h1进行第三次hash，得到hash值h3，也即h3 = hash3(h1)，通过h3能够确定该元素放置在哪个HashEntry。</li><br></ol><br><p style=\"text-align:justify\">ConcurrentHashMap中主要实体类就是三个：ConcurrentHashMap（整个Hash表）,Segment（桶），HashEntry（节点），对应上面的图可以看出之间的关系</p><br><pre><code class=\"hljs php\"><span class=\"hljs-comment\">/*<em> \n</em> The segments, each of which is a specialized hash table<br><em>/</em></span><br><span class=\"hljs-keyword\">final</span> Segment&lt;K,V&gt;[] segments;</code></pre><br><p>不变(Immutable)和易变(Volatile)ConcurrentHashMap完全允许多个读操作并发进行，读操作并不需要加锁。如果使用传统的技术，如HashMap中的实现，如果允许可以在hash链的中间添加或删除元素，读操作不加锁将得到不一致的数据。ConcurrentHashMap实现技术是保证HashEntry几乎是不可变的。HashEntry代表每个hash链中的一个节点，其结构如下所示：</p><br><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HashEntry</span>&lt;<span class=\"hljs-title\">K</span>,<span class=\"hljs-title\">V</span>&gt; </span>{<br>     <span class=\"hljs-keyword\">final</span> K key;<br>     <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">int</span> hash;<br>     <span class=\"hljs-keyword\">volatile</span> V value;<br>     <span class=\"hljs-keyword\">volatile</span> HashEntry&lt;K,V&gt; next;<br> }</code></pre><br><p>在JDK 1.6中，HashEntry中的next指针也定义为final，并且每次插入将新添加节点作为链的头节点（同HashMap实现），而且每次删除一个节点时，会将删除节点之前的所有节点 <span style=\"color:#E53333\">拷贝一份组成一个新的链</span>，而将当前节点的上一个节点的next指向当前节点的下一个节点，从而在删除以后 <span style=\"color:#E53333\">有两条链存在</span>，因而可以保证即使在同一条链中，有一个线程在删除，而另一个线程在遍历，它们都能工作良好，因为遍历的线程能继续使用原有的链。因而这种实现是一种更加细粒度的happens-before关系，即如果遍历线程在删除线程结束后开始，则它能看到删除后的变化，如果它发生在删除线程正在执行中间，则它会使用原有的链，而不会等到删除线程结束后再执行，即看不到删除线程的影响。如果这不符合你的需求，还是乖乖的用Hashtable或HashMap的synchronized版本，Collections.synchronizedMap()做的包装。</p><br><p style=\"text-align:justify\">而HashMap中的Entry只有key是final的</p><br><pre><code class=\"hljs ruby\">static <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Entry</span>&lt;K,<span class=\"hljs-title\">V</span>&gt; <span class=\"hljs-title\">implements</span> <span class=\"hljs-title\">Map</span>.<span class=\"hljs-title\">Entry</span>&lt;K,<span class=\"hljs-title\">V</span>&gt; {</span><br>        final K key;<br>        V value;<br>        Entry&lt;K,V&gt; <span class=\"hljs-keyword\">next</span>;<br>        int hash;</code></pre><br><p><strong>不变</strong> <strong>模式（immutable）</strong>是多线程安全里最简单的一种保障方式。因为你拿他没有办法，想改变它也没有机会。<br> 不变模式主要通过final关键字来限定的。在JMM中final关键字还有特殊的语义。Final域使得确保初始化安全性（initialization safety）成为可能，初始化安全性让不可变形对象不需要同步就能自由地被访问和共享。</p><br><span id=\"OSC_h3_2\"></span><br><h3 id=\"h3_2\">1.1&nbsp;初始化</h3><br><p>先看看ConcurrentHashMap的初始化做了哪些事情，构造函数的源码如下：</p><br><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">ConcurrentHashMap</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> initialCapacity,<br>                             <span class=\"hljs-keyword\">float</span> loadFactor, <span class=\"hljs-keyword\">int</span> concurrencyLevel)</span> </span>{<br>        <span class=\"hljs-keyword\">if</span> (!(loadFactor &gt; <span class=\"hljs-number\">0</span>) || initialCapacity &lt; <span class=\"hljs-number\">0</span> || concurrencyLevel &lt;= <span class=\"hljs-number\">0</span>)<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalArgumentException();<br>        <span class=\"hljs-keyword\">if</span> (concurrencyLevel &gt; MAX_SEGMENTS)<br>            concurrencyLevel = MAX_SEGMENTS;<br>        <span class=\"hljs-comment\">// Find power-of-two sizes best matching arguments</span><br>        <span class=\"hljs-keyword\">int</span> sshift = <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-keyword\">int</span> ssize = <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-keyword\">while</span> (ssize &lt; concurrencyLevel) {<br>            ++sshift;<br>            ssize &lt;&lt;= <span class=\"hljs-number\">1</span>;<br>        }<br>        <span class=\"hljs-keyword\">this</span>.segmentShift = <span class=\"hljs-number\">32</span> - sshift;<br>        <span class=\"hljs-keyword\">this</span>.segmentMask = ssize - <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-keyword\">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)<br>            initialCapacity = MAXIMUM_CAPACITY;<br>        <span class=\"hljs-keyword\">int</span> c = initialCapacity / ssize;<br>        <span class=\"hljs-keyword\">if</span> (c  ssize &lt; initialCapacity)<br>            ++c;<br>        <span class=\"hljs-keyword\">int</span> cap = MIN_SEGMENT_TABLE_CAPACITY;<br>        <span class=\"hljs-keyword\">while</span> (cap &lt; c)<br>            cap &lt;&lt;= <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-comment\">// create segments and segments[0]</span><br>        Segment&lt;K,V&gt; s0 =<br>            <span class=\"hljs-keyword\">new</span> Segment&lt;K,V&gt;(loadFactor, (<span class=\"hljs-keyword\">int</span>)(cap <em> loadFactor),<br>                             (HashEntry&lt;K,V&gt;[])<span class=\"hljs-keyword\">new</span> HashEntry[cap]);<br>        Segment&lt;K,V&gt;[] ss = (Segment&lt;K,V&gt;[])<span class=\"hljs-keyword\">new</span> Segment[ssize];<br>        UNSAFE.putOrderedObject(ss, SBASE, s0); <span class=\"hljs-comment\">// ordered write of segments[0]</span><br>        <span class=\"hljs-keyword\">this</span>.segments = ss;<br>    }</em></code></pre><br><p style=\"text-align:justify\">传入的参数有initialCapacity，loadFactor，concurrencyLevel这三个。</p><br><ul><br> <li>initialCapacity表示新创建的这个ConcurrentHashMap的初始容量，也就是上面的结构图中的Entry数量。默认值为static final int DEFAULT_INITIAL_CAPACITY = 16;</li><br> <li>loadFactor表示负载因子，就是当ConcurrentHashMap中的元素个数大于loadFactor  最大容量时就需要rehash，扩容。默认值为static final float DEFAULT_LOAD_FACTOR = 0.75f;</li><br> <li>concurrencyLevel表示并发级别，这个值用来确定Segment的个数，Segment的个数是大于等于concurrencyLevel的第一个2的n次方的数。比如，如果concurrencyLevel为12，13，14，15，16这些数，则Segment的数目为16(2的4次方)。默认值为static final int DEFAULT_CONCURRENCY_LEVEL = 16;。理想情况下ConcurrentHashMap的真正的并发访问量能够达到concurrencyLevel，因为有concurrencyLevel个Segment，假如有concurrencyLevel个线程需要访问Map，并且需要访问的数据都恰好分别落在不同的Segment中，则这些线程能够无竞争地自由访问（因为他们不需要竞争同一把锁），达到同时访问的效果。这也是为什么这个参数起名为“并发级别”的原因。</li><br></ul><br><p style=\"text-align:justify\">初始化的一些动作：</p><br><ol><br> <li>验证参数的合法性，如果不合法，直接抛出异常。</li><br> <li>concurrencyLevel也就是Segment的个数不能超过规定的最大Segment的个数，默认值为static final int MAX_SEGMENTS = 1 &lt;&lt; 16;，如果超过这个值，设置为这个值。</li><br> <li>然后使用循环找到大于等于concurrencyLevel的第一个2的n次方的数ssize，这个数就是Segment数组的大小，并记录一共向左按位移动的次数sshift，并令segmentShift = 32 - sshift，并且segmentMask的值等于ssize - 1，segmentMask的各个二进制位都为1，目的是之后可以通过key的hash值与这个值做&amp;运算确定Segment的索引。</li><br> <li>检查给的容量值是否大于允许的最大容量值，如果大于该值，设置为该值。最大容量值为static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;。</li><br> <li>然后计算每个Segment平均应该放置多少个元素，这个值c是向上取整的值。比如初始容量为15，Segment个数为4，则每个Segment平均需要放置4个元素。</li><br> <li>最后创建一个Segment实例，将其当做Segment数组的第一个元素。</li><br></ol><br><span id=\"OSC_h3_3\"></span><br><h3 id=\"h3_3\">1.2&nbsp;put操作</h3><br><p>put操作的源码如下：</p><br><pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> V <span class=\"hljs-title\">put</span>(<span class=\"hljs-params\">K key, V <span class=\"hljs-keyword\">value</span></span>) </span>{<br>      Segment&lt;K,V&gt; s;<br>      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">value</span> == <span class=\"hljs-literal\">null</span>)<br>          <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NullPointerException();<br>      <span class=\"hljs-keyword\">int</span> hash = hash(key);<br>      <span class=\"hljs-keyword\">int</span> j = (hash &gt;&gt;&gt; segmentShift) &amp; segmentMask;<br>      <span class=\"hljs-keyword\">if</span> ((s = (Segment&lt;K,V&gt;)UNSAFE.getObject          <span class=\"hljs-comment\">// nonvolatile; recheck</span><br>           (segments, (j &lt;&lt; SSHIFT) + SBASE)) == <span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">//  in ensureSegment</span><br>          s = ensureSegment(j);<br>      <span class=\"hljs-keyword\">return</span> s.put(key, hash, <span class=\"hljs-keyword\">value</span>, <span class=\"hljs-literal\">false</span>);<br>  }</code></pre><br><p style=\"text-align:justify\">操作步骤如下：</p><br><ol><br> <li>判断value是否为null，如果为null，直接抛出异常。</li><br> <li>key通过一次hash运算得到一个hash值。(这个hash运算下文详说)</li><br> <li>将得到hash值向右按位移动segmentShift位，然后再与segmentMask做&amp;运算得到segment的索引j。<br> 在初始化的时候我们说过segmentShift的值等于32-sshift，例如concurrencyLevel等于16，则sshift等于4，则segmentShift为28。hash值是一个32位的整数，将其向右移动28位就变成这个样子：<br> 0000 0000 0000 0000 0000 0000 0000 xxxx，然后再用这个值与segmentMask做&amp;运算，也就是取最后四位的值。这个值确定Segment的索引。</li><br> <li>使用Unsafe的方式从Segment数组中获取该索引对应的Segment对象。</li><br> <li>向这个Segment对象中put值，这个put操作也基本是一样的步骤（通过&amp;运算获取HashEntry的索引，然后set）。</li><br></ol><br><pre><code class=\"hljs cs\"><span class=\"hljs-function\">final V <span class=\"hljs-title\">put</span>(<span class=\"hljs-params\">K key, <span class=\"hljs-keyword\">int</span> hash, V <span class=\"hljs-keyword\">value</span>, boolean onlyIfAbsent</span>) </span>{<br>            HashEntry&lt;K,V&gt; node = tryLock() ? <span class=\"hljs-literal\">null</span> :<br>                scanAndLockForPut(key, hash, <span class=\"hljs-keyword\">value</span>);<br>            V oldValue;<br>            <span class=\"hljs-keyword\">try</span> {<br>                HashEntry&lt;K,V&gt;[] tab = table;<br>                <span class=\"hljs-keyword\">int</span> index = (tab.length - <span class=\"hljs-number\">1</span>) &amp; hash;<br>                HashEntry&lt;K,V&gt; first = entryAt(tab, index);<br>                <span class=\"hljs-keyword\">for</span> (HashEntry&lt;K,V&gt; e = first;;) {<br>                    <span class=\"hljs-keyword\">if</span> (e != <span class=\"hljs-literal\">null</span>) {<br>                        K k;<br>                        <span class=\"hljs-keyword\">if</span> ((k = e.key) == key ||<br>                            (e.hash == hash &amp;&amp; key.<span class=\"hljs-keyword\">equals</span>(k))) {<br>                            oldValue = e.<span class=\"hljs-keyword\">value</span>;<br>                            <span class=\"hljs-keyword\">if</span> (!onlyIfAbsent) {<br>                                e.<span class=\"hljs-keyword\">value</span> = <span class=\"hljs-keyword\">value</span>;<br>                                ++modCount;<br>                            }<br>                            <span class=\"hljs-keyword\">break</span>;<br>                        }<br>                        e = e.next;<br>                    }<br>                    <span class=\"hljs-keyword\">else</span> {<br>                        <span class=\"hljs-keyword\">if</span> (node != <span class=\"hljs-literal\">null</span>)<br>                            node.setNext(first);<br>                        <span class=\"hljs-keyword\">else</span><br>                            node = <span class=\"hljs-keyword\">new</span> HashEntry&lt;K,V&gt;(hash, key, <span class=\"hljs-keyword\">value</span>, first);<br>                        <span class=\"hljs-keyword\">int</span> c = count + <span class=\"hljs-number\">1</span>;<br>                        <span class=\"hljs-keyword\">if</span> (c &gt; threshold &amp;&amp; tab.length &lt; MAXIMUM_CAPACITY)<br>                            rehash(node);<br>                        <span class=\"hljs-keyword\">else</span><br>                            setEntryAt(tab, index, node);<br>                        ++modCount;<br>                        count = c;<br>                        oldValue = <span class=\"hljs-literal\">null</span>;<br>                        <span class=\"hljs-keyword\">break</span>;<br>                    }<br>                }<br>            } <span class=\"hljs-keyword\">finally</span> {<br>                unlock();<br>            }<br>            <span class=\"hljs-keyword\">return</span> oldValue;<br>        }</code></pre><br><p>put操作是要加锁的。</p><br><span id=\"OSC_h3_4\"></span><br><h3 id=\"h3_4\">1.3 get操作</h3><br><p style=\"text-align:justify\">get操作的源码如下：</p><br><pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> V <span class=\"hljs-title\">get</span>(<span class=\"hljs-params\">Object key</span>) </span>{<br>        Segment&lt;K,V&gt; s; <span class=\"hljs-comment\">// manually integrate access methods to reduce overhead</span><br>        HashEntry&lt;K,V&gt;[] tab;<br>        <span class=\"hljs-keyword\">int</span> h = hash(key);<br>        <span class=\"hljs-keyword\">long</span> u = (((h &gt;&gt;&gt; segmentShift) &amp; segmentMask) &lt;&lt; SSHIFT) + SBASE;<br>        <span class=\"hljs-keyword\">if</span> ((s = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(segments, u)) != <span class=\"hljs-literal\">null</span> &amp;&amp;<br>            (tab = s.table) != <span class=\"hljs-literal\">null</span>) {<br>            <span class=\"hljs-keyword\">for</span> (HashEntry&lt;K,V&gt; e = (HashEntry&lt;K,V&gt;) UNSAFE.getObjectVolatile<br>                     (tab, ((<span class=\"hljs-keyword\">long</span>)(((tab.length - <span class=\"hljs-number\">1</span>) &amp; h)) &lt;&lt; TSHIFT) + TBASE);<br>                 e != <span class=\"hljs-literal\">null</span>; e = e.next) {<br>                K k;<br>                <span class=\"hljs-keyword\">if</span> ((k = e.key) == key || (e.hash == h &amp;&amp; key.<span class=\"hljs-keyword\">equals</span>(k)))<br>                    <span class=\"hljs-keyword\">return</span> e.<span class=\"hljs-keyword\">value</span>;<br>            }<br>        }<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>    }</code></pre><br><p style=\"text-align:justify\">操作步骤为：</p><br><ol><br> <li>和put操作一样，先通过key进行两次hash确定应该去哪个Segment中取数据。</li><br> <li>使用Unsafe获取对应的Segment，然后再进行一次&amp;运算得到HashEntry链表的位置，然后从链表头开始遍历整个链表（因为Hash可能会有碰撞，所以用一个链表保存），如果找到对应的key，则返回对应的value值，如果链表遍历完都没有找到对应的key，则说明Map中不包含该key，返回null。</li><br></ol><br><p style=\"text-align:justify\">值得注意的是，<span style=\"color:#E53333\">get操作是不需要加锁的（如果value为null，会调用</span><span style=\"color:#FF0000\">readValueUnderLock，只有这个步骤会加锁</span><span style=\"color:#E53333\">）<span style=\"color:#000000\">，通过前面提到的volatile和final来确保数据安全。</span></span></p><br><span id=\"OSC_h3_5\"></span><br><h3 id=\"h3_5\">1.4&nbsp;size操作</h3><br><p>size操作与put和get操作最大的区别在于，size操作需要遍历所有的Segment才能算出整个Map的大小，而put和get都只关心一个Segment。假设我们当前遍历的Segment为SA，那么在遍历SA过程中其他的Segment比如SB可能会被修改，于是这一次运算出来的size值可能并不是Map当前的真正大小。所以一个比较简单的办法就是计算Map大小的时候所有的Segment都Lock住，不能更新(包含put，remove等等)数据，计算完之后再Unlock。这是普通人能够想到的方案，但是牛逼的作者还有一个更好的Idea：<span style=\"color:#E53333\">先给3次机会</span>，不lock所有的Segment，遍历所有Segment，累加各个Segment的大小得到整个Map的大小，如果某相邻的两次计算获取的所有Segment的更新的次数（每个Segment都有一个modCount变量，这个变量在Segment中的Entry被修改时会加一，通过这个值可以得到每个Segment的更新操作的次数）是一样的，说明计算过程中没有更新操作，则直接返回这个值。如果这三次不加锁的计算过程中Map的更新次数有变化，则之后的计算先对所有的Segment加锁，再遍历所有Segment计算Map大小，最后再解锁所有Segment。源代码如下：</p><br><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">size</span><span class=\"hljs-params\">()</span> </span>{<br>        <span class=\"hljs-comment\">// Try a few times to get accurate count. On failure due to</span><br>        <span class=\"hljs-comment\">// continuous async changes in table, resort to locking.</span><br>        <span class=\"hljs-keyword\">final</span> Segment&lt;K,V&gt;[] segments = <span class=\"hljs-keyword\">this</span>.segments;<br>        <span class=\"hljs-keyword\">int</span> size;<br>        <span class=\"hljs-keyword\">boolean</span> overflow; <span class=\"hljs-comment\">// true if size overflows 32 bits</span><br>        <span class=\"hljs-keyword\">long</span> sum;         <span class=\"hljs-comment\">// sum of modCounts</span><br>        <span class=\"hljs-keyword\">long</span> last = <span class=\"hljs-number\">0L</span>;   <span class=\"hljs-comment\">// previous sum</span><br>        <span class=\"hljs-keyword\">int</span> retries = -<span class=\"hljs-number\">1</span>; <span class=\"hljs-comment\">// first iteration isn’t retry</span><br>        <span class=\"hljs-keyword\">try</span> {<br>            <span class=\"hljs-keyword\">for</span> (;;) {<br>                <span class=\"hljs-keyword\">if</span> (retries++ == RETRIES_BEFORE_LOCK) {<br>                    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)<br>                        ensureSegment(j).lock(); <span class=\"hljs-comment\">// force creation</span><br>                }<br>                sum = <span class=\"hljs-number\">0L</span>;<br>                size = <span class=\"hljs-number\">0</span>;<br>                overflow = <span class=\"hljs-keyword\">false</span>;<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j) {<br>                    Segment&lt;K,V&gt; seg = segmentAt(segments, j);<br>                    <span class=\"hljs-keyword\">if</span> (seg != <span class=\"hljs-keyword\">null</span>) {<br>                        sum += seg.modCount;<br>                        <span class=\"hljs-keyword\">int</span> c = seg.count;<br>                        <span class=\"hljs-keyword\">if</span> (c &lt; <span class=\"hljs-number\">0</span> || (size += c) &lt; <span class=\"hljs-number\">0</span>)<br>                            overflow = <span class=\"hljs-keyword\">true</span>;<br>                    }<br>                }<br>                <span class=\"hljs-keyword\">if</span> (sum == last)<br>                    <span class=\"hljs-keyword\">break</span>;<br>                last = sum;<br>            }<br>        } <span class=\"hljs-keyword\">finally</span> {<br>            <span class=\"hljs-keyword\">if</span> (retries &gt; RETRIES_BEFORE_LOCK) {<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)<br>                    segmentAt(segments, j).unlock();<br>            }<br>        }<br>        <span class=\"hljs-keyword\">return</span> overflow ? Integer.MAX_VALUE : size;<br>    }</code></pre><br><p style=\"text-align:justify\">举个例子：</p><br><blockquote><br> <p>一个Map有4个Segment，标记为S1，S2，S3，S4，现在我们要获取Map的size。计算过程是这样的：第一次计算，不对S1，S2，S3，S4加锁，遍历所有的Segment，假设每个Segment的大小分别为1，2，3，4，更新操作次数分别为：2，2，3，1，则这次计算可以得到Map的总大小为1+2+3+4=10，总共更新操作次数为2+2+3+1=8；第二次计算，不对S1,S2,S3,S4加锁，遍历所有Segment，假设这次每个Segment的大小变成了2，2，3，4，更新次数分别为3，2，3，1，因为两次计算得到的Map更新次数不一致(第一次是8，第二次是9)则可以断定这段时间Map数据被更新，则此时应该再试一次；第三次计算，不对S1，S2，S3，S4加锁，遍历所有Segment，假设每个Segment的更新操作次数还是为3，2，3，1，则因为第二次计算和第三次计算得到的Map的更新操作的次数是一致的，就能说明第二次计算和第三次计算这段时间内Map数据没有被更新，此时可以直接返回第三次计算得到的Map的大小。最坏的情况：第三次计算得到的数据更新次数和第二次也不一样，则只能先对所有Segment加锁再计算最后解锁。</p><br></blockquote><br><span id=\"OSC_h3_6\"></span><br><h3 id=\"h3_6\">1.5&nbsp;containsValue操作</h3><br><p>containsValue操作采用了和size操作一样的想法:</p><br><pre><code class=\"hljs cs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> boolean <span class=\"hljs-title\">containsValue</span>(<span class=\"hljs-params\">Object <span class=\"hljs-keyword\">value</span></span>) </span>{<br>        <span class=\"hljs-comment\">// Same idea as size()</span><br>        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">value</span> == <span class=\"hljs-literal\">null</span>)<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NullPointerException();<br>        final Segment&lt;K,V&gt;[] segments = <span class=\"hljs-keyword\">this</span>.segments;<br>        boolean found = <span class=\"hljs-literal\">false</span>;<br>        <span class=\"hljs-keyword\">long</span> last = <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-keyword\">int</span> retries = <span class=\"hljs-number\">-1</span>;<br>        <span class=\"hljs-keyword\">try</span> {<br>            outer: <span class=\"hljs-keyword\">for</span> (;;) {<br>                <span class=\"hljs-keyword\">if</span> (retries++ == RETRIES_BEFORE_LOCK) {<br>                    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)<br>                        ensureSegment(j).<span class=\"hljs-keyword\">lock</span>(); <span class=\"hljs-comment\">// force creation</span><br>                }<br>                <span class=\"hljs-keyword\">long</span> hashSum = <span class=\"hljs-number\">0</span>L;<br>                <span class=\"hljs-keyword\">int</span> sum = <span class=\"hljs-number\">0</span>;<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j) {<br>                    HashEntry&lt;K,V&gt;[] tab;<br>                    Segment&lt;K,V&gt; seg = segmentAt(segments, j);<br>                    <span class=\"hljs-keyword\">if</span> (seg != <span class=\"hljs-literal\">null</span> &amp;&amp; (tab = seg.table) != <span class=\"hljs-literal\">null</span>) {<br>                        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span> ; i &lt; tab.length; i++) {<br>                            HashEntry&lt;K,V&gt; e;<br>                            <span class=\"hljs-keyword\">for</span> (e = entryAt(tab, i); e != <span class=\"hljs-literal\">null</span>; e = e.next) {<br>                                V v = e.<span class=\"hljs-keyword\">value</span>;<br>                                <span class=\"hljs-keyword\">if</span> (v != <span class=\"hljs-literal\">null</span> &amp;&amp; <span class=\"hljs-keyword\">value</span>.<span class=\"hljs-keyword\">equals</span>(v)) {<br>                                    found = <span class=\"hljs-literal\">true</span>;<br>                                    <span class=\"hljs-keyword\">break</span> outer;<br>                                }<br>                            }<br>                        }<br>                        sum += seg.modCount;<br>                    }<br>                }<br>                <span class=\"hljs-keyword\">if</span> (retries &gt; <span class=\"hljs-number\">0</span> &amp;&amp; sum == last)<br>                    <span class=\"hljs-keyword\">break</span>;<br>                last = sum;<br>            }<br>        } <span class=\"hljs-keyword\">finally</span> {<br>            <span class=\"hljs-keyword\">if</span> (retries &gt; RETRIES_BEFORE_LOCK) {<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; segments.length; ++j)<br>                    segmentAt(segments, j).unlock();<br>            }<br>        }<br>        <span class=\"hljs-keyword\">return</span> found;<br>    }</code></pre><br><span id=\"OSC_h2_7\"></span><br><h2 id=\"h2_7\">2.&nbsp;关于hash</h2><br><p>看看hash的源代码：</p><br><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">hash</span><span class=\"hljs-params\">(Object k)</span> </span>{<br>        <span class=\"hljs-keyword\">int</span> h = hashSeed;<br><br>        <span class=\"hljs-keyword\">if</span> ((<span class=\"hljs-number\">0</span> != h) &amp;&amp; (k <span class=\"hljs-keyword\">instanceof</span> String)) {<br>            <span class=\"hljs-keyword\">return</span> sun.misc.Hashing.stringHash32((String) k);<br>        }<br><br>        h ^= k.hashCode();<br><br>        <span class=\"hljs-comment\">// Spread bits to regularize both segment and index locations,</span><br>        <span class=\"hljs-comment\">// using variant of single-word Wang/Jenkins hash.</span><br>        h += (h &lt;&lt;  <span class=\"hljs-number\">15</span>) ^ <span class=\"hljs-number\">0xffffcd7d</span>;<br>        h ^= (h &gt;&gt;&gt; <span class=\"hljs-number\">10</span>);<br>        h += (h &lt;&lt;   <span class=\"hljs-number\">3</span>);<br>        h ^= (h &gt;&gt;&gt;  <span class=\"hljs-number\">6</span>);<br>        h += (h &lt;&lt;   <span class=\"hljs-number\">2</span>) + (h &lt;&lt; <span class=\"hljs-number\">14</span>);<br>        <span class=\"hljs-keyword\">return</span> h ^ (h &gt;&gt;&gt; <span class=\"hljs-number\">16</span>);<br>    }</code></pre><br><p>源码中的注释是这样的：</p><br><blockquote><br> Applies a supplemental hash function to a given hashCode, which defends against poor quality hash functions. This is critical because ConcurrentHashMap uses power-of-two length hash tables, that otherwise encounter collisions for hashCodes that do not differ in lower or upper bits.<br></blockquote><br><p>这里用到了Wang/Jenkins hash算法的变种，主要的目的是为了减少哈希冲突，使元素能够均匀的分布在不同的Segment上，从而提高容器的存取效率。假如哈希的质量差到极点，那么所有的元素都在一个Segment中，不仅存取元素缓慢，分段锁也会失去意义。</p><br><p>举个简单的例子：</p><br><pre><code class=\"hljs css\"><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(“0001111”, 2) &amp; 15);<br><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(“0011111”, 2) &amp; 15);<br><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(“0111111”, 2) &amp; 15);<br><span class=\"hljs-selector-tag\">System</span><span class=\"hljs-selector-class\">.out</span><span class=\"hljs-selector-class\">.println</span>(<span class=\"hljs-selector-tag\">Integer</span><span class=\"hljs-selector-class\">.parseInt</span>(“1111111”, 2) &amp; 15);</code></pre><br><p>这些数字得到的hash值都是一样的，全是15，所以如果不进行第一次预hash，发生冲突的几率还是很大的，但是如果我们先把上例中的二进制数字使用hash()函数先进行一次预hash，得到的结果是这样的：</p><br><blockquote><br> 0100｜0111｜0110｜0111｜1101｜1010｜0100｜1110 1111｜0111｜0100｜0011｜0000｜0001｜1011｜1000 0111｜0111｜0110｜1001｜0100｜0110｜0011｜1110 1000｜0011｜0000｜0000｜1100｜1000｜0001｜1010<br></blockquote><br><p>上面这个例子引用自:&nbsp; <a href=\"http://www.infoq.com/cn/articles/ConcurrentHashMap/\" target=\"_blank\" rel=\"nofollow\">InfoQ</a></p><br><p>可以看到每一位的数据都散开了，并且ConcurrentHashMap中是使用预hash值的高位参与运算的。比如之前说的先将hash值向右按位移动28位，再与15做&amp;运算，得到的结果都别为：4，15，7，8，没有冲突！</p><br><span id=\"OSC_h2_8\"></span><br><h2 id=\"h2_8\">3.&nbsp;注意事项</h2><br><ul><br> <li>ConcurrentHashMap中的key和value值都不能为null，HashMap中key可以为null，HashTable中key不能为null。</li><br> <li>ConcurrentHashMap是线程安全的类并不能保证使用了ConcurrentHashMap的操作都是线程安全的！</li><br> <li><span style=\"font-size:13.3333px\">ConcurrentHashMap的get操作不需要加锁，put操作需要加锁</span></li><br></ul><br><span id=\"OSC_h2_9\"></span><br><h2 id=\"h2_9\">Reference：</h2><br><p>1. <a href=\"http://www.cnblogs.com/ITtangtang/p/3948786.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/ITtangtang/p/3948786.html</a></p><br><p>2.&nbsp;<a href=\"http://qifuguang.me/2015/09/10/[Java%E5%B9%B6%E5%8F%91%E5%8C%85%E5%AD%A6%E4%B9%A0%E5%85%AB]%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90ConcurrentHashMap/\" target=\"_blank\" rel=\"noopener\">http://qifuguang.me/2015/09/10/[Java%E5%B9%B6%E5%8F%91%E5%8C%85%E5%AD%A6%E4%B9%A0%E5%85%AB]%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90ConcurrentHashMap/</a></p><br><p>3.&nbsp;<a href=\"http://www.cnblogs.com/yydcdut/p/3959815.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/yydcdut/p/3959815.html</a></p><br>                                                    <div class=\"ad-wrap\"><br>                                                        <div data-traceid=\"blog_down_1\" data-tracepid=\"blog_down\" style=\"text-align:center\"><br>    <!-- oschina-blog-728x90 --><br>    <ins class=\"adsbygoogle\" style=\"display:inline-block;width:728px;height:90px\" data-ad-client=\"ca-pub-7090564139599510\" data-ad-slot=\"5590362768\"></ins><br>    <script><br>        (adsbygoogle = window.adsbygoogle || []).push({});<br>    </script><br>    <script type=\"text/javascript\"><br>        function googleAdJSAtOnload() {<br>            var element = document.createElement(“script”);<br>            element.src = “//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js”;<br>            element.async = true;<br>            document.body.appendChild(element);<br>        }<br>        if (window.addEventListener) {<br>            window.addEventListener(“load”, googleAdJSAtOnload, false);<br>        } else if (window.attachEvent) {<br>            window.attachEvent(“onload”, googleAdJSAtOnload);<br>        } else {<br>            window.onload = googleAdJSAtOnload;<br>        }<br>    </script><br></div><br>                                        </div><br>                                            </div>\n\n\n\n"},{"title":"Tomcat集群Cluster实现原理剖析","date":"2018-07-17T11:58:38.000Z","_content":"对于Web应用集群的技术实现,最大的难点就是如何能在集群中的多个节点之间保持数据的一致性.会话（Session）信息是这些数据中最重要的一块。要实现这一点，大体上有两种方式，一种是把所有Session数据放到一台服务器上或者数据库中，集群中的所有节点通过访问这台Session服务器来获取数据；另一种就是在集群中的所有节点间进行Session数据的同步拷贝，任何一个节点均保存了所有的Session数据。两种方式都各有优点，第一种方式简单、易于实现，但是存在着Session服务器发生故障会导致全系统不能正常工作的风险；第二种方式可靠性更高，任一节点的故障不会对整个系统对客户访问的响应产生影响，但是技术实现上更复杂一些。常见的平台或中间件如microsoft asp.net和IBM WAS都会提供对两种共享方式的支持，tomcat也是这样，但是一般采用第二种方式。\n当采用tomcat默认集群配置（<Cluster className=\"org.apache.catalina.ha.tcp.SimpleTcpCluster\"/>）时，配置的细节实际上被省略了，对于大多数应用而言，使用默认配置已经足够，完整的默认配置应该是这样：\n <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Cluster</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.tcp.SimpleTcpCluster\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                 <span class=\"hljs-attr\">channelSendOptions</span>=<span class=\"hljs-string\">\"8\"</span>&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Manager</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.session.DeltaManager\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                   <span class=\"hljs-attr\">expireSessionsOnShutdown</span>=<span class=\"hljs-string\">\"false\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                   <span class=\"hljs-attr\">notifyListenersOnReplication</span>=<span class=\"hljs-string\">\"true\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Channel</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.group.GroupChannel\"</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Membership</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.membership.McastService\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">\"228.0.0.4\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">\"45564\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">frequency</span>=<span class=\"hljs-string\">\"500\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">dropTime</span>=<span class=\"hljs-string\">\"3000\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Receiver</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.transport.nio.NioReceiver\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">\"auto\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">\"4000\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">autoBind</span>=<span class=\"hljs-string\">\"100\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"20\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">selectorTimeout</span>=<span class=\"hljs-string\">\"5000\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"21\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">maxThreads</span>=<span class=\"hljs-string\">\"6\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"22\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"23\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"24\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Sender</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.transport.ReplicationTransmitter\"</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"25\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Transport</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.transport.nio.PooledParallelSender\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"26\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Sender</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"27\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Interceptor</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.group.interceptors.TcpFailureDetector\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"28\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Interceptor</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"29\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Channel</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"30\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"31\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"32\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Valve</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.tcp.ReplicationValve\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"33\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                 <span class=\"hljs-attr\">filter</span>=<span class=\"hljs-string\">\"\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"34\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Valve</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.session.JvmRouteBinderValve\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"35\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"36\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"37\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Deployer</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.deploy.FarmWarDeployer\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"38\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">tempDir</span>=<span class=\"hljs-string\">\"/tmp/war-temp/\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"39\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">deployDir</span>=<span class=\"hljs-string\">\"/tmp/war-deploy/\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"40\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">watchDir</span>=<span class=\"hljs-string\">\"/tmp/war-listen/\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"41\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">watchEnabled</span>=<span class=\"hljs-string\">\"false\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"42\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"43\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"44\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ClusterListener</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"45\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ClusterListener</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.session.ClusterSessionListener\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"46\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Cluster</span>&gt;</span> </div></div>\n \ntomcat集群各节点通过建立tcp链接来完成Session的拷贝，拷贝有同步和异步两种模式。在同步模式下，对客户端的响应必须在Session拷贝到其他节点完成后进行；异步模式无需等待Session拷贝完成就可响应。异步模式更高效，但是同步模式可靠性更高。同步异步模式由channelSendOptions参数控制，默认值是8，为异步模式，4是同步模式。在异步模式下，可以通过加上拷贝确认（Acknowledge）来提高可靠性，此时channelSendOptions设为10。\nManager用来在节点间拷贝Session，默认使用DeltaManager，DeltaManager采用的一种all-to-all的工作方式，即集群中的节点会把Session数据向所有其他节点拷贝，而不管其他节点是否部署了当前应用。当集群中的节点数量很多并且部署着不同应用时，可以使用BackupManager，BackManager仅向部署了当前应用的节点拷贝Session。但是到目前为止BackupManager并未经过大规模测试，可靠性不及DeltaManager。\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2018.07.17 Tomcat集群Cluster实现原理剖析.md","raw":"---\ntitle: Tomcat集群Cluster实现原理剖析\ndate: 2018-07-17 19:58:38\ntags: 面试\n---\n对于Web应用集群的技术实现,最大的难点就是如何能在集群中的多个节点之间保持数据的一致性.会话（Session）信息是这些数据中最重要的一块。要实现这一点，大体上有两种方式，一种是把所有Session数据放到一台服务器上或者数据库中，集群中的所有节点通过访问这台Session服务器来获取数据；另一种就是在集群中的所有节点间进行Session数据的同步拷贝，任何一个节点均保存了所有的Session数据。两种方式都各有优点，第一种方式简单、易于实现，但是存在着Session服务器发生故障会导致全系统不能正常工作的风险；第二种方式可靠性更高，任一节点的故障不会对整个系统对客户访问的响应产生影响，但是技术实现上更复杂一些。常见的平台或中间件如microsoft asp.net和IBM WAS都会提供对两种共享方式的支持，tomcat也是这样，但是一般采用第二种方式。\n当采用tomcat默认集群配置（<Cluster className=\"org.apache.catalina.ha.tcp.SimpleTcpCluster\"/>）时，配置的细节实际上被省略了，对于大多数应用而言，使用默认配置已经足够，完整的默认配置应该是这样：\n <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Cluster</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.tcp.SimpleTcpCluster\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                 <span class=\"hljs-attr\">channelSendOptions</span>=<span class=\"hljs-string\">\"8\"</span>&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Manager</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.session.DeltaManager\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                   <span class=\"hljs-attr\">expireSessionsOnShutdown</span>=<span class=\"hljs-string\">\"false\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                   <span class=\"hljs-attr\">notifyListenersOnReplication</span>=<span class=\"hljs-string\">\"true\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Channel</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.group.GroupChannel\"</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Membership</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.membership.McastService\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">\"228.0.0.4\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">\"45564\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">frequency</span>=<span class=\"hljs-string\">\"500\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">dropTime</span>=<span class=\"hljs-string\">\"3000\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Receiver</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.transport.nio.NioReceiver\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">\"auto\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">\"4000\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">autoBind</span>=<span class=\"hljs-string\">\"100\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"20\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">selectorTimeout</span>=<span class=\"hljs-string\">\"5000\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"21\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">maxThreads</span>=<span class=\"hljs-string\">\"6\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"22\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"23\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"24\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Sender</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.transport.ReplicationTransmitter\"</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"25\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Transport</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.transport.nio.PooledParallelSender\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"26\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Sender</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"27\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Interceptor</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.group.interceptors.TcpFailureDetector\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"28\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Interceptor</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"29\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Channel</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"30\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"31\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"32\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Valve</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.tcp.ReplicationValve\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"33\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                 <span class=\"hljs-attr\">filter</span>=<span class=\"hljs-string\">\"\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"34\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Valve</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.session.JvmRouteBinderValve\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"35\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"36\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"37\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Deployer</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.deploy.FarmWarDeployer\"</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"38\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">tempDir</span>=<span class=\"hljs-string\">\"/tmp/war-temp/\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"39\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">deployDir</span>=<span class=\"hljs-string\">\"/tmp/war-deploy/\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"40\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">watchDir</span>=<span class=\"hljs-string\">\"/tmp/war-listen/\"</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"41\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">watchEnabled</span>=<span class=\"hljs-string\">\"false\"</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"42\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"43\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"44\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ClusterListener</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"45\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ClusterListener</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"org.apache.catalina.ha.session.ClusterSessionListener\"</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"46\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Cluster</span>&gt;</span> </div></div>\n \ntomcat集群各节点通过建立tcp链接来完成Session的拷贝，拷贝有同步和异步两种模式。在同步模式下，对客户端的响应必须在Session拷贝到其他节点完成后进行；异步模式无需等待Session拷贝完成就可响应。异步模式更高效，但是同步模式可靠性更高。同步异步模式由channelSendOptions参数控制，默认值是8，为异步模式，4是同步模式。在异步模式下，可以通过加上拷贝确认（Acknowledge）来提高可靠性，此时channelSendOptions设为10。\nManager用来在节点间拷贝Session，默认使用DeltaManager，DeltaManager采用的一种all-to-all的工作方式，即集群中的节点会把Session数据向所有其他节点拷贝，而不管其他节点是否部署了当前应用。当集群中的节点数量很多并且部署着不同应用时，可以使用BackupManager，BackManager仅向部署了当前应用的节点拷贝Session。但是到目前为止BackupManager并未经过大规模测试，可靠性不及DeltaManager。\n\n\n\n\n\n\n\n\n\n\n","slug":"Tomcat集群Cluster实现原理剖析","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzc1001xdcyuk9k56791","content":"<p>对于Web应用集群的技术实现,最大的难点就是如何能在集群中的多个节点之间保持数据的一致性.会话（Session）信息是这些数据中最重要的一块。要实现这一点，大体上有两种方式，一种是把所有Session数据放到一台服务器上或者数据库中，集群中的所有节点通过访问这台Session服务器来获取数据；另一种就是在集群中的所有节点间进行Session数据的同步拷贝，任何一个节点均保存了所有的Session数据。两种方式都各有优点，第一种方式简单、易于实现，但是存在着Session服务器发生故障会导致全系统不能正常工作的风险；第二种方式可靠性更高，任一节点的故障不会对整个系统对客户访问的响应产生影响，但是技术实现上更复杂一些。常见的平台或中间件如microsoft asp.net和IBM WAS都会提供对两种共享方式的支持，tomcat也是这样，但是一般采用第二种方式。<br>当采用tomcat默认集群配置（<cluster classname=\"org.apache.catalina.ha.tcp.SimpleTcpCluster\">）时，配置的细节实际上被省略了，对于大多数应用而言，使用默认配置已经足够，完整的默认配置应该是这样：<br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Cluster</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.tcp.SimpleTcpCluster”</span></span><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                 <span class=\"hljs-attr\">channelSendOptions</span>=<span class=\"hljs-string\">“8”</span>&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Manager</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.session.DeltaManager”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                   <span class=\"hljs-attr\">expireSessionsOnShutdown</span>=<span class=\"hljs-string\">“false”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                   <span class=\"hljs-attr\">notifyListenersOnReplication</span>=<span class=\"hljs-string\">“true”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Channel</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.group.GroupChannel”</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Membership</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.membership.McastService”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">“228.0.0.4”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">“45564”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">frequency</span>=<span class=\"hljs-string\">“500”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">dropTime</span>=<span class=\"hljs-string\">“3000”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Receiver</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.transport.nio.NioReceiver”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">“auto”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">“4000”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">autoBind</span>=<span class=\"hljs-string\">“100”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"20\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">selectorTimeout</span>=<span class=\"hljs-string\">“5000”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"21\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">maxThreads</span>=<span class=\"hljs-string\">“6”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"22\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"23\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"24\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Sender</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.transport.ReplicationTransmitter”</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"25\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Transport</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.transport.nio.PooledParallelSender”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"26\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Sender</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"27\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Interceptor</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.group.interceptors.TcpFailureDetector”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"28\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Interceptor</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"29\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Channel</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"30\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"31\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"32\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Valve</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.tcp.ReplicationValve”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"33\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                 <span class=\"hljs-attr\">filter</span>=<span class=\"hljs-string\">“”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"34\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Valve</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.session.JvmRouteBinderValve”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"35\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"36\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"37\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Deployer</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.deploy.FarmWarDeployer”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"38\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">tempDir</span>=<span class=\"hljs-string\">“/tmp/war-temp/“</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"39\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">deployDir</span>=<span class=\"hljs-string\">“/tmp/war-deploy/“</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"40\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">watchDir</span>=<span class=\"hljs-string\">“/tmp/war-listen/“</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"41\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">watchEnabled</span>=<span class=\"hljs-string\">“false”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"42\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"43\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"44\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ClusterListener</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"45\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ClusterListener</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.session.ClusterSessionListener”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"46\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Cluster</span>&gt;</span> </div></div></li></cluster></p>\n<p>tomcat集群各节点通过建立tcp链接来完成Session的拷贝，拷贝有同步和异步两种模式。在同步模式下，对客户端的响应必须在Session拷贝到其他节点完成后进行；异步模式无需等待Session拷贝完成就可响应。异步模式更高效，但是同步模式可靠性更高。同步异步模式由channelSendOptions参数控制，默认值是8，为异步模式，4是同步模式。在异步模式下，可以通过加上拷贝确认（Acknowledge）来提高可靠性，此时channelSendOptions设为10。<br>Manager用来在节点间拷贝Session，默认使用DeltaManager，DeltaManager采用的一种all-to-all的工作方式，即集群中的节点会把Session数据向所有其他节点拷贝，而不管其他节点是否部署了当前应用。当集群中的节点数量很多并且部署着不同应用时，可以使用BackupManager，BackManager仅向部署了当前应用的节点拷贝Session。但是到目前为止BackupManager并未经过大规模测试，可靠性不及DeltaManager。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>对于Web应用集群的技术实现,最大的难点就是如何能在集群中的多个节点之间保持数据的一致性.会话（Session）信息是这些数据中最重要的一块。要实现这一点，大体上有两种方式，一种是把所有Session数据放到一台服务器上或者数据库中，集群中的所有节点通过访问这台Session服务器来获取数据；另一种就是在集群中的所有节点间进行Session数据的同步拷贝，任何一个节点均保存了所有的Session数据。两种方式都各有优点，第一种方式简单、易于实现，但是存在着Session服务器发生故障会导致全系统不能正常工作的风险；第二种方式可靠性更高，任一节点的故障不会对整个系统对客户访问的响应产生影响，但是技术实现上更复杂一些。常见的平台或中间件如microsoft asp.net和IBM WAS都会提供对两种共享方式的支持，tomcat也是这样，但是一般采用第二种方式。<br>当采用tomcat默认集群配置（<cluster classname=\"org.apache.catalina.ha.tcp.SimpleTcpCluster\">）时，配置的细节实际上被省略了，对于大多数应用而言，使用默认配置已经足够，完整的默认配置应该是这样：<br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Cluster</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.tcp.SimpleTcpCluster”</span></span><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                 <span class=\"hljs-attr\">channelSendOptions</span>=<span class=\"hljs-string\">“8”</span>&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Manager</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.session.DeltaManager”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                   <span class=\"hljs-attr\">expireSessionsOnShutdown</span>=<span class=\"hljs-string\">“false”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                   <span class=\"hljs-attr\">notifyListenersOnReplication</span>=<span class=\"hljs-string\">“true”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Channel</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.group.GroupChannel”</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Membership</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.membership.McastService”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">“228.0.0.4”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">“45564”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">frequency</span>=<span class=\"hljs-string\">“500”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                        <span class=\"hljs-attr\">dropTime</span>=<span class=\"hljs-string\">“3000”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Receiver</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.transport.nio.NioReceiver”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">“auto”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">“4000”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">autoBind</span>=<span class=\"hljs-string\">“100”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"20\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">selectorTimeout</span>=<span class=\"hljs-string\">“5000”</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"21\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                      <span class=\"hljs-attr\">maxThreads</span>=<span class=\"hljs-string\">“6”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"22\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"23\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"24\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Sender</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.transport.ReplicationTransmitter”</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"25\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Transport</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.transport.nio.PooledParallelSender”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"26\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Sender</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"27\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Interceptor</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.group.interceptors.TcpFailureDetector”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"28\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Interceptor</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"29\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Channel</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"30\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"31\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"32\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Valve</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.tcp.ReplicationValve”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"33\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                 <span class=\"hljs-attr\">filter</span>=<span class=\"hljs-string\">“”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"34\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Valve</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.session.JvmRouteBinderValve”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"35\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"36\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"37\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Deployer</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.deploy.FarmWarDeployer”</span></span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"38\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">tempDir</span>=<span class=\"hljs-string\">“/tmp/war-temp/“</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"39\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">deployDir</span>=<span class=\"hljs-string\">“/tmp/war-deploy/“</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"40\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">watchDir</span>=<span class=\"hljs-string\">“/tmp/war-listen/“</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"41\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    <span class=\"hljs-attr\">watchEnabled</span>=<span class=\"hljs-string\">“false”</span>/&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"42\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"43\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"44\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ClusterListener</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"45\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ClusterListener</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">“org.apache.catalina.ha.session.ClusterSessionListener”</span>/&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"46\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Cluster</span>&gt;</span> </div></div></li></cluster></p>\n<p>tomcat集群各节点通过建立tcp链接来完成Session的拷贝，拷贝有同步和异步两种模式。在同步模式下，对客户端的响应必须在Session拷贝到其他节点完成后进行；异步模式无需等待Session拷贝完成就可响应。异步模式更高效，但是同步模式可靠性更高。同步异步模式由channelSendOptions参数控制，默认值是8，为异步模式，4是同步模式。在异步模式下，可以通过加上拷贝确认（Acknowledge）来提高可靠性，此时channelSendOptions设为10。<br>Manager用来在节点间拷贝Session，默认使用DeltaManager，DeltaManager采用的一种all-to-all的工作方式，即集群中的节点会把Session数据向所有其他节点拷贝，而不管其他节点是否部署了当前应用。当集群中的节点数量很多并且部署着不同应用时，可以使用BackupManager，BackManager仅向部署了当前应用的节点拷贝Session。但是到目前为止BackupManager并未经过大规模测试，可靠性不及DeltaManager。</p>\n"},{"title":"单例模式的八种写法","date":"2018-07-17T00:34:58.000Z","_content":"\n","source":"_posts/2018.07.17 单例模式的八种写法.md","raw":"---\ntitle: 单例模式的八种写法\ndate: 2018-07-17 08:34:58\ntags: 面试\n---\n\n","slug":"单例模式的八种写法","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcb001zdcyuyawuxdtw","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"深入理解乐观锁与悲观锁","date":"2018-07-17T12:58:11.000Z","_content":"# 乐观锁和悲观锁最大的区别\n悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。\n乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。\n乐观锁不能解决脏读的问题。\n\n在数据库的锁机制中介绍过，数据库管理系统（DBMS）中的并发控制的任务是确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性。\n乐观并发控制(乐观锁)和悲观并发控制（悲观锁）是并发控制主要采用的技术手段。\n无论是悲观锁还是乐观锁，都是人们定义出来的概念，可以认为是一种思想。其实不仅仅是关系型数据库系统中有乐观锁和悲观锁的概念，像memcache、hibernate、tair等都有类似的概念。\n# 悲观锁\n在关系数据库管理系统里，悲观并发控制（又名“悲观锁”，Pessimistic Concurrency Control，缩写“PCC”）是一种并发控制的方法。它可以阻止一个事务以影响其他用户的方式来修改数据。如果一个事务执行的操作都某行数据应用了锁，那只有当这个事务把锁释放，其他事务才能够执行与该锁冲突的操作。\n悲观并发控制主要用于数据争用激烈的环境，以及发生并发冲突时使用锁保护数据的成本要低于回滚事务的成本的环境中。\n# 悲观锁的流程\n在对任意记录进行修改前，先尝试为该记录加上排他锁（exclusive locking）。\n\n如果加锁失败，说明该记录正在被修改，那么当前查询可能要等待或者抛出异常。 具体响应方式由开发者根据实际需要决定。\n\n如果成功加锁，那么就可以对记录做修改，事务完成后就会解锁了。\n\n其间如果有其他对该记录做修改或加排他锁的操作，都会等待我们解锁或直接抛出异常。\n```\n需要注意的是，在事务中，只有SELECT ... FOR UPDATE 或LOCK IN SHARE MODE 同一笔数据时会等待其它事务结束后才执行，一般SELECT ... 则不受此影响\n```\n上面我们提到，使用select…for update会把数据给锁住，不过我们需要注意一些锁的级别，MySQL InnoDB默认行级锁。行级锁都是基于索引的，如果一条SQL语句用不到索引是不会使用行级锁的，会使用表级锁把整张表锁住，这点需要注意。\n使用select…for update会把数据给锁住，不过我们需要注意一些锁的级别，MySQL InnoDB默认Row-Level Lock，所以只有「明确」地指定主键，MySQL 才会执行Row lock (只锁住被选取的数据) ，否则MySQL 将会执行Table Lock (将整个数据表单给锁住)。\n\n# 优点与不足\n悲观并发控制实际上是“先取锁再访问”的保守策略，为数据处理的安全提供了保证。但是在效率方面，处理加锁的机制会让数据库产生额外的开销，还有增加产生死锁的机会；另外，在只读型事务处理中由于不会产生冲突，也没必要使用锁，这样做只能增加系统负载；还有会降低了并行性，一个事务如果锁定了某行数据，其他事务就必须等待该事务处理完才可以处理那行数\n\n#乐观锁\n乐观锁（ Optimistic Locking ） 相对悲观锁而言，乐观锁假设认为数据一般情况下不会造成冲突，所以在数据进行提交更新的时候，才会正式对数据的冲突与否进行检测，如果发现冲突了，则让返回用户错误的信息，让用户决定如何去做。\n相对于悲观锁，在对数据库进行处理的时候，乐观锁并不会使用数据库提供的锁机制。一般的实现乐观锁的方式就是记录数据版本。\n```\n数据版本,为数据增加的一个版本标识。当读取数据时，将版本标识的值一同读出，数据每更新一次，同时对版本标识进行更新。当我们提交更新的时候，判断数据库表对应记录的当前版本信息与第一次取出来的版本标识进行比对，如果数据库表当前版本号与第一次取出来的版本标识值相等，则予以更新，否则认为是过期数据。\n```\n```\n1.查询出商品信息\nselect (status,status,version) from t_goods where id=#{id}\n2.根据商品信息生成订单\n3.修改商品status为2\nupdate t_goods \nset status=2,version=version+1\nwhere id=#{id} and version=#{version};\n```\n#优点与不足\n乐观并发控制相信事务之间的数据竞争(data race)的概率是比较小的，因此尽可能直接做下去，直到提交的时候才去锁定，所以不会产生任何锁和死锁。但如果直接简单这么做，还是有可能会遇到不可预期的结果，例如两个事务都读取了数据库的某一行，经过修改以后写回数据库，这时就遇到了问题。\n\n\n","source":"_posts/2018.07.17 深入理解乐观锁与悲观锁.md","raw":"---\ntitle: 深入理解乐观锁与悲观锁\ndate: 2018-07-17 20:58:11\ntags: 面试\n---\n# 乐观锁和悲观锁最大的区别\n悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。\n乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。\n乐观锁不能解决脏读的问题。\n\n在数据库的锁机制中介绍过，数据库管理系统（DBMS）中的并发控制的任务是确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性。\n乐观并发控制(乐观锁)和悲观并发控制（悲观锁）是并发控制主要采用的技术手段。\n无论是悲观锁还是乐观锁，都是人们定义出来的概念，可以认为是一种思想。其实不仅仅是关系型数据库系统中有乐观锁和悲观锁的概念，像memcache、hibernate、tair等都有类似的概念。\n# 悲观锁\n在关系数据库管理系统里，悲观并发控制（又名“悲观锁”，Pessimistic Concurrency Control，缩写“PCC”）是一种并发控制的方法。它可以阻止一个事务以影响其他用户的方式来修改数据。如果一个事务执行的操作都某行数据应用了锁，那只有当这个事务把锁释放，其他事务才能够执行与该锁冲突的操作。\n悲观并发控制主要用于数据争用激烈的环境，以及发生并发冲突时使用锁保护数据的成本要低于回滚事务的成本的环境中。\n# 悲观锁的流程\n在对任意记录进行修改前，先尝试为该记录加上排他锁（exclusive locking）。\n\n如果加锁失败，说明该记录正在被修改，那么当前查询可能要等待或者抛出异常。 具体响应方式由开发者根据实际需要决定。\n\n如果成功加锁，那么就可以对记录做修改，事务完成后就会解锁了。\n\n其间如果有其他对该记录做修改或加排他锁的操作，都会等待我们解锁或直接抛出异常。\n```\n需要注意的是，在事务中，只有SELECT ... FOR UPDATE 或LOCK IN SHARE MODE 同一笔数据时会等待其它事务结束后才执行，一般SELECT ... 则不受此影响\n```\n上面我们提到，使用select…for update会把数据给锁住，不过我们需要注意一些锁的级别，MySQL InnoDB默认行级锁。行级锁都是基于索引的，如果一条SQL语句用不到索引是不会使用行级锁的，会使用表级锁把整张表锁住，这点需要注意。\n使用select…for update会把数据给锁住，不过我们需要注意一些锁的级别，MySQL InnoDB默认Row-Level Lock，所以只有「明确」地指定主键，MySQL 才会执行Row lock (只锁住被选取的数据) ，否则MySQL 将会执行Table Lock (将整个数据表单给锁住)。\n\n# 优点与不足\n悲观并发控制实际上是“先取锁再访问”的保守策略，为数据处理的安全提供了保证。但是在效率方面，处理加锁的机制会让数据库产生额外的开销，还有增加产生死锁的机会；另外，在只读型事务处理中由于不会产生冲突，也没必要使用锁，这样做只能增加系统负载；还有会降低了并行性，一个事务如果锁定了某行数据，其他事务就必须等待该事务处理完才可以处理那行数\n\n#乐观锁\n乐观锁（ Optimistic Locking ） 相对悲观锁而言，乐观锁假设认为数据一般情况下不会造成冲突，所以在数据进行提交更新的时候，才会正式对数据的冲突与否进行检测，如果发现冲突了，则让返回用户错误的信息，让用户决定如何去做。\n相对于悲观锁，在对数据库进行处理的时候，乐观锁并不会使用数据库提供的锁机制。一般的实现乐观锁的方式就是记录数据版本。\n```\n数据版本,为数据增加的一个版本标识。当读取数据时，将版本标识的值一同读出，数据每更新一次，同时对版本标识进行更新。当我们提交更新的时候，判断数据库表对应记录的当前版本信息与第一次取出来的版本标识进行比对，如果数据库表当前版本号与第一次取出来的版本标识值相等，则予以更新，否则认为是过期数据。\n```\n```\n1.查询出商品信息\nselect (status,status,version) from t_goods where id=#{id}\n2.根据商品信息生成订单\n3.修改商品status为2\nupdate t_goods \nset status=2,version=version+1\nwhere id=#{id} and version=#{version};\n```\n#优点与不足\n乐观并发控制相信事务之间的数据竞争(data race)的概率是比较小的，因此尽可能直接做下去，直到提交的时候才去锁定，所以不会产生任何锁和死锁。但如果直接简单这么做，还是有可能会遇到不可预期的结果，例如两个事务都读取了数据库的某一行，经过修改以后写回数据库，这时就遇到了问题。\n\n\n","slug":"深入理解乐观锁与悲观锁","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcc0021dcyu1jofy45z","content":"<h1 id=\"乐观锁和悲观锁最大的区别\"><a href=\"#乐观锁和悲观锁最大的区别\" class=\"headerlink\" title=\"乐观锁和悲观锁最大的区别\"></a>乐观锁和悲观锁最大的区别</h1><p>悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。<br>乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。<br>乐观锁不能解决脏读的问题。</p>\n<p>在数据库的锁机制中介绍过，数据库管理系统（DBMS）中的并发控制的任务是确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性。<br>乐观并发控制(乐观锁)和悲观并发控制（悲观锁）是并发控制主要采用的技术手段。<br>无论是悲观锁还是乐观锁，都是人们定义出来的概念，可以认为是一种思想。其实不仅仅是关系型数据库系统中有乐观锁和悲观锁的概念，像memcache、hibernate、tair等都有类似的概念。</p>\n<h1 id=\"悲观锁\"><a href=\"#悲观锁\" class=\"headerlink\" title=\"悲观锁\"></a>悲观锁</h1><p>在关系数据库管理系统里，悲观并发控制（又名“悲观锁”，Pessimistic Concurrency Control，缩写“PCC”）是一种并发控制的方法。它可以阻止一个事务以影响其他用户的方式来修改数据。如果一个事务执行的操作都某行数据应用了锁，那只有当这个事务把锁释放，其他事务才能够执行与该锁冲突的操作。<br>悲观并发控制主要用于数据争用激烈的环境，以及发生并发冲突时使用锁保护数据的成本要低于回滚事务的成本的环境中。</p>\n<h1 id=\"悲观锁的流程\"><a href=\"#悲观锁的流程\" class=\"headerlink\" title=\"悲观锁的流程\"></a>悲观锁的流程</h1><p>在对任意记录进行修改前，先尝试为该记录加上排他锁（exclusive locking）。</p>\n<p>如果加锁失败，说明该记录正在被修改，那么当前查询可能要等待或者抛出异常。 具体响应方式由开发者根据实际需要决定。</p>\n<p>如果成功加锁，那么就可以对记录做修改，事务完成后就会解锁了。</p>\n<p>其间如果有其他对该记录做修改或加排他锁的操作，都会等待我们解锁或直接抛出异常。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需要注意的是，在事务中，只有SELECT ... FOR UPDATE 或LOCK IN SHARE MODE 同一笔数据时会等待其它事务结束后才执行，一般SELECT ... 则不受此影响</span><br></pre></td></tr></table></figure></p>\n<p>上面我们提到，使用select…for update会把数据给锁住，不过我们需要注意一些锁的级别，MySQL InnoDB默认行级锁。行级锁都是基于索引的，如果一条SQL语句用不到索引是不会使用行级锁的，会使用表级锁把整张表锁住，这点需要注意。<br>使用select…for update会把数据给锁住，不过我们需要注意一些锁的级别，MySQL InnoDB默认Row-Level Lock，所以只有「明确」地指定主键，MySQL 才会执行Row lock (只锁住被选取的数据) ，否则MySQL 将会执行Table Lock (将整个数据表单给锁住)。</p>\n<h1 id=\"优点与不足\"><a href=\"#优点与不足\" class=\"headerlink\" title=\"优点与不足\"></a>优点与不足</h1><p>悲观并发控制实际上是“先取锁再访问”的保守策略，为数据处理的安全提供了保证。但是在效率方面，处理加锁的机制会让数据库产生额外的开销，还有增加产生死锁的机会；另外，在只读型事务处理中由于不会产生冲突，也没必要使用锁，这样做只能增加系统负载；还有会降低了并行性，一个事务如果锁定了某行数据，其他事务就必须等待该事务处理完才可以处理那行数</p>\n<p>#乐观锁<br>乐观锁（ Optimistic Locking ） 相对悲观锁而言，乐观锁假设认为数据一般情况下不会造成冲突，所以在数据进行提交更新的时候，才会正式对数据的冲突与否进行检测，如果发现冲突了，则让返回用户错误的信息，让用户决定如何去做。<br>相对于悲观锁，在对数据库进行处理的时候，乐观锁并不会使用数据库提供的锁机制。一般的实现乐观锁的方式就是记录数据版本。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">数据版本,为数据增加的一个版本标识。当读取数据时，将版本标识的值一同读出，数据每更新一次，同时对版本标识进行更新。当我们提交更新的时候，判断数据库表对应记录的当前版本信息与第一次取出来的版本标识进行比对，如果数据库表当前版本号与第一次取出来的版本标识值相等，则予以更新，否则认为是过期数据。</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.查询出商品信息</span><br><span class=\"line\">select (status,status,version) from t_goods where id=#&#123;id&#125;</span><br><span class=\"line\">2.根据商品信息生成订单</span><br><span class=\"line\">3.修改商品status为2</span><br><span class=\"line\">update t_goods </span><br><span class=\"line\">set status=2,version=version+1</span><br><span class=\"line\">where id=#&#123;id&#125; and version=#&#123;version&#125;;</span><br></pre></td></tr></table></figure>\n<p>#优点与不足<br>乐观并发控制相信事务之间的数据竞争(data race)的概率是比较小的，因此尽可能直接做下去，直到提交的时候才去锁定，所以不会产生任何锁和死锁。但如果直接简单这么做，还是有可能会遇到不可预期的结果，例如两个事务都读取了数据库的某一行，经过修改以后写回数据库，这时就遇到了问题。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"乐观锁和悲观锁最大的区别\"><a href=\"#乐观锁和悲观锁最大的区别\" class=\"headerlink\" title=\"乐观锁和悲观锁最大的区别\"></a>乐观锁和悲观锁最大的区别</h1><p>悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。<br>乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。<br>乐观锁不能解决脏读的问题。</p>\n<p>在数据库的锁机制中介绍过，数据库管理系统（DBMS）中的并发控制的任务是确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性。<br>乐观并发控制(乐观锁)和悲观并发控制（悲观锁）是并发控制主要采用的技术手段。<br>无论是悲观锁还是乐观锁，都是人们定义出来的概念，可以认为是一种思想。其实不仅仅是关系型数据库系统中有乐观锁和悲观锁的概念，像memcache、hibernate、tair等都有类似的概念。</p>\n<h1 id=\"悲观锁\"><a href=\"#悲观锁\" class=\"headerlink\" title=\"悲观锁\"></a>悲观锁</h1><p>在关系数据库管理系统里，悲观并发控制（又名“悲观锁”，Pessimistic Concurrency Control，缩写“PCC”）是一种并发控制的方法。它可以阻止一个事务以影响其他用户的方式来修改数据。如果一个事务执行的操作都某行数据应用了锁，那只有当这个事务把锁释放，其他事务才能够执行与该锁冲突的操作。<br>悲观并发控制主要用于数据争用激烈的环境，以及发生并发冲突时使用锁保护数据的成本要低于回滚事务的成本的环境中。</p>\n<h1 id=\"悲观锁的流程\"><a href=\"#悲观锁的流程\" class=\"headerlink\" title=\"悲观锁的流程\"></a>悲观锁的流程</h1><p>在对任意记录进行修改前，先尝试为该记录加上排他锁（exclusive locking）。</p>\n<p>如果加锁失败，说明该记录正在被修改，那么当前查询可能要等待或者抛出异常。 具体响应方式由开发者根据实际需要决定。</p>\n<p>如果成功加锁，那么就可以对记录做修改，事务完成后就会解锁了。</p>\n<p>其间如果有其他对该记录做修改或加排他锁的操作，都会等待我们解锁或直接抛出异常。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需要注意的是，在事务中，只有SELECT ... FOR UPDATE 或LOCK IN SHARE MODE 同一笔数据时会等待其它事务结束后才执行，一般SELECT ... 则不受此影响</span><br></pre></td></tr></table></figure></p>\n<p>上面我们提到，使用select…for update会把数据给锁住，不过我们需要注意一些锁的级别，MySQL InnoDB默认行级锁。行级锁都是基于索引的，如果一条SQL语句用不到索引是不会使用行级锁的，会使用表级锁把整张表锁住，这点需要注意。<br>使用select…for update会把数据给锁住，不过我们需要注意一些锁的级别，MySQL InnoDB默认Row-Level Lock，所以只有「明确」地指定主键，MySQL 才会执行Row lock (只锁住被选取的数据) ，否则MySQL 将会执行Table Lock (将整个数据表单给锁住)。</p>\n<h1 id=\"优点与不足\"><a href=\"#优点与不足\" class=\"headerlink\" title=\"优点与不足\"></a>优点与不足</h1><p>悲观并发控制实际上是“先取锁再访问”的保守策略，为数据处理的安全提供了保证。但是在效率方面，处理加锁的机制会让数据库产生额外的开销，还有增加产生死锁的机会；另外，在只读型事务处理中由于不会产生冲突，也没必要使用锁，这样做只能增加系统负载；还有会降低了并行性，一个事务如果锁定了某行数据，其他事务就必须等待该事务处理完才可以处理那行数</p>\n<p>#乐观锁<br>乐观锁（ Optimistic Locking ） 相对悲观锁而言，乐观锁假设认为数据一般情况下不会造成冲突，所以在数据进行提交更新的时候，才会正式对数据的冲突与否进行检测，如果发现冲突了，则让返回用户错误的信息，让用户决定如何去做。<br>相对于悲观锁，在对数据库进行处理的时候，乐观锁并不会使用数据库提供的锁机制。一般的实现乐观锁的方式就是记录数据版本。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">数据版本,为数据增加的一个版本标识。当读取数据时，将版本标识的值一同读出，数据每更新一次，同时对版本标识进行更新。当我们提交更新的时候，判断数据库表对应记录的当前版本信息与第一次取出来的版本标识进行比对，如果数据库表当前版本号与第一次取出来的版本标识值相等，则予以更新，否则认为是过期数据。</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.查询出商品信息</span><br><span class=\"line\">select (status,status,version) from t_goods where id=#&#123;id&#125;</span><br><span class=\"line\">2.根据商品信息生成订单</span><br><span class=\"line\">3.修改商品status为2</span><br><span class=\"line\">update t_goods </span><br><span class=\"line\">set status=2,version=version+1</span><br><span class=\"line\">where id=#&#123;id&#125; and version=#&#123;version&#125;;</span><br></pre></td></tr></table></figure>\n<p>#优点与不足<br>乐观并发控制相信事务之间的数据竞争(data race)的概率是比较小的，因此尽可能直接做下去，直到提交的时候才去锁定，所以不会产生任何锁和死锁。但如果直接简单这么做，还是有可能会遇到不可预期的结果，例如两个事务都读取了数据库的某一行，经过修改以后写回数据库，这时就遇到了问题。</p>\n"},{"title":"MD5和SHA-1","date":"2018-07-18T00:58:36.000Z","_content":"MD5和SHA-1都被称作哈希(Hash)函数，用过Java语言的人对这个术语应该相当熟悉。Java类库里的Object类定义了hashCode这个函数，但是java的概念略有不同。正式的哈希函数的定义是“把任意长度的数据计算成固定长度的数据”。也就是说函数的输入是任意长的，输出总是固定长度的。MD5和SHA-1是两种加密用哈希函数，MD5的返回值总是128bit的，SHA-1的返回值是160bit，都是固定长度。MD5如果按十六进制表示的话是32位十六进制的数，SHA-1是40位十六进制的数。\n你输入任意长度的字符串，都会返回给你相应固定长度的十六进制返回值。这两个函数的返回值都被称为信息摘要(Message Digest，实际上MD就是Message Digest的缩写)。\n那么两个函数为什么可以用在加密上呢？因为他们都有这几个特性:\n1.都是“不可逆”的函数。不存在一个算法能够由哈希值倒算出原始信息。\n2.对原始信息的任何一点改变都会导致结果的哈希值巨大的不同。举个例子，假如原始数据是几百万字的文章，你在其中哪怕改动一个标点，计算出的哈希值都会有很大的变化。\n3.运算代价是相对较低的。普通的AMDOpteron2.2GHz的芯片，每秒可以计算出335MB数据的MD5值，可以计算192MB数据的SHA-1值。   参见https://en.wikipedia.org/wiki/SHA-1#Comparison_of_SHA_functions。\n4.类似于1，除非通过蛮力的穷举法，否则无法找到两段不同的信息而有相同的哈希值。（这一点现在已被证明是不成立的了，请看后文）\n 那么这两个函数的特点在哪里呢？特点在于都能“通过哈希值唯一标识原信息”。这个怎么讲，就是比如原始信息是A，我知道原始信息的哈希值Ha，如果我有另一段信息，这段信息的哈希值也是Ha的话，我就能“以极大的可靠性”断定这另一段信息就是A。也就是说哈希值能“唯一”标识原始信息。原因是什么呢？\n \n1.两段不同信息“碰巧”有着相同的哈希值的概率是很低的，对于MD5来说是2的128次方分之一，这个数字是多小呢：太阳的表面积是6万亿平方公里，一个原子的截面积大约是1平方纳米，假设你是一个原子，把你放在56个太阳中任意一个的表面，这个概率是我在这56个太阳上随意指定一点，正好点中你的概率，而你是一个小小小的原子。对SHA-1来说，这个概率就更低了。\n2.那么有没有办法人工伪造一段信息正好有Ha这个哈希值呢？根据上面的1和4，这个可能性是很低的，要通过穷举法的巨大的运算量才能做到。\n# 他们的用处\n1.密码加密\n2.文件校验\n***\n# MD5相当于超损压缩。其算法过程如下\n对MD5算法简要的叙述可以为：MD5以512位分组来处理输入的信息，且每一分组又被划分为16个32位子分组，经过了一系列的处理后，算法的输出由四个32位分组组成，将这四个32位分组级联后将生成一个128位散列值。\n>1.填充：如果输入信息的长度(bit)对512求余的结果不等于448，就需要填充使得对512求余的结果等于448。填充的方法是填充一个1和n个0。填充完后，信息的长度就为N*512+448(bit)；\n>2.记录信息长度：用64位来存储填充前信息长度。这64位加在第一步结果的后面，这样信息长度就变为N*512+448+64=(N+1)*512位。\n>3.装入标准的幻数（四个整数）：标准的幻数（物理顺序）是（A=(01234567)16，B=(89ABCDEF)16，C=(FEDCBA98)16，D=(76543210)16）。如果在程序中定义应该是:\n（A=0X67452301L，B=0XEFCDAB89L，C=0X98BADCFEL，D=0X10325476L）。有点晕哈，其实想一想就明白了。\n>4.四轮循环运算：循环的次数是分组的个数（N+1） \n1.将每一512字节细分成16个小组，每个小组64位（8个字节）\n2.先认识四个线性函数(&是与,|是或,~是非,^是异或)\n```\nF(X,Y,Z)=(X&Y)|((~X)&Z)\nG(X,Y,Z)=(X&Z)|(Y&(~Z))\nH(X,Y,Z)=X^Y^Z\nI(X,Y,Z)=Y^(X|(~Z))\n```\n3.设Mj表示消息的第j个子分组（从0到15）\nFF(a,b,c,d,Mj,s,ti)表示a=b+((a+F(b,c,d)+Mj+ti)<<<s)\nGG(a,b,c,d,Mj,s,ti)表示a=b+((a+G(b,c,d)+Mj+ti)<<<s)\nHH(a,b,c,d,Mj,s,ti)表示a=b+((a+H(b,c,d)+Mj+ti)<<<s)\nII(a,b,c,d,Mj,s,ti)表示a=b+((a+I(b,c,d)+Mj+ti)<<<s)\n4.四轮运算\n```\na=FF(a,b,c,d,M0,7,0xd76aa478)\nb=FF(d,a,b,c,M1,12,0xe8c7b756)\nc=FF(c,d,a,b,M2,17,0x242070db)\nd=FF(b,c,d,a,M3,22,0xc1bdceee)\na=FF(a,b,c,d,M4,7,0xf57c0faf)\nb=FF(d,a,b,c,M5,12,0x4787c62a)\nc=FF(c,d,a,b,M6,17,0xa8304613)\nd=FF(b,c,d,a,M7,22,0xfd469501)\na=FF(a,b,c,d,M8,7,0x698098d8)\nb=FF(d,a,b,c,M9,12,0x8b44f7af)\nc=FF(c,d,a,b,M10,17,0xffff5bb1)\nd=FF(b,c,d,a,M11,22,0x895cd7be)\na=FF(a,b,c,d,M12,7,0x6b901122)\nb=FF(d,a,b,c,M13,12,0xfd987193)\nc=FF(c,d,a,b,M14,17,0xa679438e)\nd=FF(b,c,d,a,M15,22,0x49b40821)\n\n第二轮\na=GG(a,b,c,d,M1,5,0xf61e2562)\nb=GG(d,a,b,c,M6,9,0xc040b340)\nc=GG(c,d,a,b,M11,14,0x265e5a51)\nd=GG(b,c,d,a,M0,20,0xe9b6c7aa)\na=GG(a,b,c,d,M5,5,0xd62f105d)\nb=GG(d,a,b,c,M10,9,0x02441453)\nc=GG(c,d,a,b,M15,14,0xd8a1e681)\nd=GG(b,c,d,a,M4,20,0xe7d3fbc8)\na=GG(a,b,c,d,M9,5,0x21e1cde6)\nb=GG(d,a,b,c,M14,9,0xc33707d6)\nc=GG(c,d,a,b,M3,14,0xf4d50d87)\nd=GG(b,c,d,a,M8,20,0x455a14ed)\na=GG(a,b,c,d,M13,5,0xa9e3e905)\nb=GG(d,a,b,c,M2,9,0xfcefa3f8)\nc=GG(c,d,a,b,M7,14,0x676f02d9)\nd=GG(b,c,d,a,M12,20,0x8d2a4c8a)\n\n第三轮\na=HH(a,b,c,d,M5,4,0xfffa3942)\nb=HH(d,a,b,c,M8,11,0x8771f681)\nc=HH(c,d,a,b,M11,16,0x6d9d6122)\nd=HH(b,c,d,a,M14,23,0xfde5380c)\na=HH(a,b,c,d,M1,4,0xa4beea44)\nb=HH(d,a,b,c,M4,11,0x4bdecfa9)\nc=HH(c,d,a,b,M7,16,0xf6bb4b60)\nd=HH(b,c,d,a,M10,23,0xbebfbc70)\na=HH(a,b,c,d,M13,4,0x289b7ec6)\nb=HH(d,a,b,c,M0,11,0xeaa127fa)\nc=HH(c,d,a,b,M3,16,0xd4ef3085)\nd=HH(b,c,d,a,M6,23,0x04881d05)\na=HH(a,b,c,d,M9,4,0xd9d4d039)\nb=HH(d,a,b,c,M12,11,0xe6db99e5)\nc=HH(c,d,a,b,M15,16,0x1fa27cf8)\nd=HH(b,c,d,a,M2,23,0xc4ac5665)\n\n第四轮\na=II(a,b,c,d,M0,6,0xf4292244)\nb=II(d,a,b,c,M7,10,0x432aff97)\nc=II(c,d,a,b,M14,15,0xab9423a7)\nd=II(b,c,d,a,M5,21,0xfc93a039)\na=II(a,b,c,d,M12,6,0x655b59c3)\nb=II(d,a,b,c,M3,10,0x8f0ccc92)\nc=II(c,d,a,b,M10,15,0xffeff47d)\nd=II(b,c,d,a,M1,21,0x85845dd1)\na=II(a,b,c,d,M8,6,0x6fa87e4f)\nb=II(d,a,b,c,M15,10,0xfe2ce6e0)\nc=II(c,d,a,b,M6,15,0xa3014314)\nd=II(b,c,d,a,M13,21,0x4e0811a1)\na=II(a,b,c,d,M4,6,0xf7537e82)\nb=II(d,a,b,c,M11,10,0xbd3af235)\nc=II(c,d,a,b,M2,15,0x2ad7d2bb)\nd=II(b,c,d,a,M9,21,0xeb86d391)\n```\n5.每轮循环后，将A，B，C，D分别加上a，b，c，d，然后进入下一循环。\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2018.07.18 MD5和SHA-1.md","raw":"---\ntitle: MD5和SHA-1\ndate: 2018-07-18 08:58:36\ntags: 面试\n---\nMD5和SHA-1都被称作哈希(Hash)函数，用过Java语言的人对这个术语应该相当熟悉。Java类库里的Object类定义了hashCode这个函数，但是java的概念略有不同。正式的哈希函数的定义是“把任意长度的数据计算成固定长度的数据”。也就是说函数的输入是任意长的，输出总是固定长度的。MD5和SHA-1是两种加密用哈希函数，MD5的返回值总是128bit的，SHA-1的返回值是160bit，都是固定长度。MD5如果按十六进制表示的话是32位十六进制的数，SHA-1是40位十六进制的数。\n你输入任意长度的字符串，都会返回给你相应固定长度的十六进制返回值。这两个函数的返回值都被称为信息摘要(Message Digest，实际上MD就是Message Digest的缩写)。\n那么两个函数为什么可以用在加密上呢？因为他们都有这几个特性:\n1.都是“不可逆”的函数。不存在一个算法能够由哈希值倒算出原始信息。\n2.对原始信息的任何一点改变都会导致结果的哈希值巨大的不同。举个例子，假如原始数据是几百万字的文章，你在其中哪怕改动一个标点，计算出的哈希值都会有很大的变化。\n3.运算代价是相对较低的。普通的AMDOpteron2.2GHz的芯片，每秒可以计算出335MB数据的MD5值，可以计算192MB数据的SHA-1值。   参见https://en.wikipedia.org/wiki/SHA-1#Comparison_of_SHA_functions。\n4.类似于1，除非通过蛮力的穷举法，否则无法找到两段不同的信息而有相同的哈希值。（这一点现在已被证明是不成立的了，请看后文）\n 那么这两个函数的特点在哪里呢？特点在于都能“通过哈希值唯一标识原信息”。这个怎么讲，就是比如原始信息是A，我知道原始信息的哈希值Ha，如果我有另一段信息，这段信息的哈希值也是Ha的话，我就能“以极大的可靠性”断定这另一段信息就是A。也就是说哈希值能“唯一”标识原始信息。原因是什么呢？\n \n1.两段不同信息“碰巧”有着相同的哈希值的概率是很低的，对于MD5来说是2的128次方分之一，这个数字是多小呢：太阳的表面积是6万亿平方公里，一个原子的截面积大约是1平方纳米，假设你是一个原子，把你放在56个太阳中任意一个的表面，这个概率是我在这56个太阳上随意指定一点，正好点中你的概率，而你是一个小小小的原子。对SHA-1来说，这个概率就更低了。\n2.那么有没有办法人工伪造一段信息正好有Ha这个哈希值呢？根据上面的1和4，这个可能性是很低的，要通过穷举法的巨大的运算量才能做到。\n# 他们的用处\n1.密码加密\n2.文件校验\n***\n# MD5相当于超损压缩。其算法过程如下\n对MD5算法简要的叙述可以为：MD5以512位分组来处理输入的信息，且每一分组又被划分为16个32位子分组，经过了一系列的处理后，算法的输出由四个32位分组组成，将这四个32位分组级联后将生成一个128位散列值。\n>1.填充：如果输入信息的长度(bit)对512求余的结果不等于448，就需要填充使得对512求余的结果等于448。填充的方法是填充一个1和n个0。填充完后，信息的长度就为N*512+448(bit)；\n>2.记录信息长度：用64位来存储填充前信息长度。这64位加在第一步结果的后面，这样信息长度就变为N*512+448+64=(N+1)*512位。\n>3.装入标准的幻数（四个整数）：标准的幻数（物理顺序）是（A=(01234567)16，B=(89ABCDEF)16，C=(FEDCBA98)16，D=(76543210)16）。如果在程序中定义应该是:\n（A=0X67452301L，B=0XEFCDAB89L，C=0X98BADCFEL，D=0X10325476L）。有点晕哈，其实想一想就明白了。\n>4.四轮循环运算：循环的次数是分组的个数（N+1） \n1.将每一512字节细分成16个小组，每个小组64位（8个字节）\n2.先认识四个线性函数(&是与,|是或,~是非,^是异或)\n```\nF(X,Y,Z)=(X&Y)|((~X)&Z)\nG(X,Y,Z)=(X&Z)|(Y&(~Z))\nH(X,Y,Z)=X^Y^Z\nI(X,Y,Z)=Y^(X|(~Z))\n```\n3.设Mj表示消息的第j个子分组（从0到15）\nFF(a,b,c,d,Mj,s,ti)表示a=b+((a+F(b,c,d)+Mj+ti)<<<s)\nGG(a,b,c,d,Mj,s,ti)表示a=b+((a+G(b,c,d)+Mj+ti)<<<s)\nHH(a,b,c,d,Mj,s,ti)表示a=b+((a+H(b,c,d)+Mj+ti)<<<s)\nII(a,b,c,d,Mj,s,ti)表示a=b+((a+I(b,c,d)+Mj+ti)<<<s)\n4.四轮运算\n```\na=FF(a,b,c,d,M0,7,0xd76aa478)\nb=FF(d,a,b,c,M1,12,0xe8c7b756)\nc=FF(c,d,a,b,M2,17,0x242070db)\nd=FF(b,c,d,a,M3,22,0xc1bdceee)\na=FF(a,b,c,d,M4,7,0xf57c0faf)\nb=FF(d,a,b,c,M5,12,0x4787c62a)\nc=FF(c,d,a,b,M6,17,0xa8304613)\nd=FF(b,c,d,a,M7,22,0xfd469501)\na=FF(a,b,c,d,M8,7,0x698098d8)\nb=FF(d,a,b,c,M9,12,0x8b44f7af)\nc=FF(c,d,a,b,M10,17,0xffff5bb1)\nd=FF(b,c,d,a,M11,22,0x895cd7be)\na=FF(a,b,c,d,M12,7,0x6b901122)\nb=FF(d,a,b,c,M13,12,0xfd987193)\nc=FF(c,d,a,b,M14,17,0xa679438e)\nd=FF(b,c,d,a,M15,22,0x49b40821)\n\n第二轮\na=GG(a,b,c,d,M1,5,0xf61e2562)\nb=GG(d,a,b,c,M6,9,0xc040b340)\nc=GG(c,d,a,b,M11,14,0x265e5a51)\nd=GG(b,c,d,a,M0,20,0xe9b6c7aa)\na=GG(a,b,c,d,M5,5,0xd62f105d)\nb=GG(d,a,b,c,M10,9,0x02441453)\nc=GG(c,d,a,b,M15,14,0xd8a1e681)\nd=GG(b,c,d,a,M4,20,0xe7d3fbc8)\na=GG(a,b,c,d,M9,5,0x21e1cde6)\nb=GG(d,a,b,c,M14,9,0xc33707d6)\nc=GG(c,d,a,b,M3,14,0xf4d50d87)\nd=GG(b,c,d,a,M8,20,0x455a14ed)\na=GG(a,b,c,d,M13,5,0xa9e3e905)\nb=GG(d,a,b,c,M2,9,0xfcefa3f8)\nc=GG(c,d,a,b,M7,14,0x676f02d9)\nd=GG(b,c,d,a,M12,20,0x8d2a4c8a)\n\n第三轮\na=HH(a,b,c,d,M5,4,0xfffa3942)\nb=HH(d,a,b,c,M8,11,0x8771f681)\nc=HH(c,d,a,b,M11,16,0x6d9d6122)\nd=HH(b,c,d,a,M14,23,0xfde5380c)\na=HH(a,b,c,d,M1,4,0xa4beea44)\nb=HH(d,a,b,c,M4,11,0x4bdecfa9)\nc=HH(c,d,a,b,M7,16,0xf6bb4b60)\nd=HH(b,c,d,a,M10,23,0xbebfbc70)\na=HH(a,b,c,d,M13,4,0x289b7ec6)\nb=HH(d,a,b,c,M0,11,0xeaa127fa)\nc=HH(c,d,a,b,M3,16,0xd4ef3085)\nd=HH(b,c,d,a,M6,23,0x04881d05)\na=HH(a,b,c,d,M9,4,0xd9d4d039)\nb=HH(d,a,b,c,M12,11,0xe6db99e5)\nc=HH(c,d,a,b,M15,16,0x1fa27cf8)\nd=HH(b,c,d,a,M2,23,0xc4ac5665)\n\n第四轮\na=II(a,b,c,d,M0,6,0xf4292244)\nb=II(d,a,b,c,M7,10,0x432aff97)\nc=II(c,d,a,b,M14,15,0xab9423a7)\nd=II(b,c,d,a,M5,21,0xfc93a039)\na=II(a,b,c,d,M12,6,0x655b59c3)\nb=II(d,a,b,c,M3,10,0x8f0ccc92)\nc=II(c,d,a,b,M10,15,0xffeff47d)\nd=II(b,c,d,a,M1,21,0x85845dd1)\na=II(a,b,c,d,M8,6,0x6fa87e4f)\nb=II(d,a,b,c,M15,10,0xfe2ce6e0)\nc=II(c,d,a,b,M6,15,0xa3014314)\nd=II(b,c,d,a,M13,21,0x4e0811a1)\na=II(a,b,c,d,M4,6,0xf7537e82)\nb=II(d,a,b,c,M11,10,0xbd3af235)\nc=II(c,d,a,b,M2,15,0x2ad7d2bb)\nd=II(b,c,d,a,M9,21,0xeb86d391)\n```\n5.每轮循环后，将A，B，C，D分别加上a，b，c，d，然后进入下一循环。\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"MD5和SHA-1","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcd0023dcyunevlazvm","content":"<p>MD5和SHA-1都被称作哈希(Hash)函数，用过Java语言的人对这个术语应该相当熟悉。Java类库里的Object类定义了hashCode这个函数，但是java的概念略有不同。正式的哈希函数的定义是“把任意长度的数据计算成固定长度的数据”。也就是说函数的输入是任意长的，输出总是固定长度的。MD5和SHA-1是两种加密用哈希函数，MD5的返回值总是128bit的，SHA-1的返回值是160bit，都是固定长度。MD5如果按十六进制表示的话是32位十六进制的数，SHA-1是40位十六进制的数。<br>你输入任意长度的字符串，都会返回给你相应固定长度的十六进制返回值。这两个函数的返回值都被称为信息摘要(Message Digest，实际上MD就是Message Digest的缩写)。<br>那么两个函数为什么可以用在加密上呢？因为他们都有这几个特性:<br>1.都是“不可逆”的函数。不存在一个算法能够由哈希值倒算出原始信息。<br>2.对原始信息的任何一点改变都会导致结果的哈希值巨大的不同。举个例子，假如原始数据是几百万字的文章，你在其中哪怕改动一个标点，计算出的哈希值都会有很大的变化。<br>3.运算代价是相对较低的。普通的AMDOpteron2.2GHz的芯片，每秒可以计算出335MB数据的MD5值，可以计算192MB数据的SHA-1值。   参见<a href=\"https://en.wikipedia.org/wiki/SHA-1#Comparison_of_SHA_functions。\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/SHA-1#Comparison_of_SHA_functions。</a><br>4.类似于1，除非通过蛮力的穷举法，否则无法找到两段不同的信息而有相同的哈希值。（这一点现在已被证明是不成立的了，请看后文）<br> 那么这两个函数的特点在哪里呢？特点在于都能“通过哈希值唯一标识原信息”。这个怎么讲，就是比如原始信息是A，我知道原始信息的哈希值Ha，如果我有另一段信息，这段信息的哈希值也是Ha的话，我就能“以极大的可靠性”断定这另一段信息就是A。也就是说哈希值能“唯一”标识原始信息。原因是什么呢？</p>\n<p>1.两段不同信息“碰巧”有着相同的哈希值的概率是很低的，对于MD5来说是2的128次方分之一，这个数字是多小呢：太阳的表面积是6万亿平方公里，一个原子的截面积大约是1平方纳米，假设你是一个原子，把你放在56个太阳中任意一个的表面，这个概率是我在这56个太阳上随意指定一点，正好点中你的概率，而你是一个小小小的原子。对SHA-1来说，这个概率就更低了。<br>2.那么有没有办法人工伪造一段信息正好有Ha这个哈希值呢？根据上面的1和4，这个可能性是很低的，要通过穷举法的巨大的运算量才能做到。</p>\n<h1 id=\"他们的用处\"><a href=\"#他们的用处\" class=\"headerlink\" title=\"他们的用处\"></a>他们的用处</h1><p>1.密码加密<br>2.文件校验</p>\n<hr>\n<h1 id=\"MD5相当于超损压缩。其算法过程如下\"><a href=\"#MD5相当于超损压缩。其算法过程如下\" class=\"headerlink\" title=\"MD5相当于超损压缩。其算法过程如下\"></a>MD5相当于超损压缩。其算法过程如下</h1><p>对MD5算法简要的叙述可以为：MD5以512位分组来处理输入的信息，且每一分组又被划分为16个32位子分组，经过了一系列的处理后，算法的输出由四个32位分组组成，将这四个32位分组级联后将生成一个128位散列值。</p>\n<blockquote>\n<p>1.填充：如果输入信息的长度(bit)对512求余的结果不等于448，就需要填充使得对512求余的结果等于448。填充的方法是填充一个1和n个0。填充完后，信息的长度就为N<em>512+448(bit)；<br>2.记录信息长度：用64位来存储填充前信息长度。这64位加在第一步结果的后面，这样信息长度就变为N</em>512+448+64=(N+1)*512位。<br>3.装入标准的幻数（四个整数）：标准的幻数（物理顺序）是（A=(01234567)16，B=(89ABCDEF)16，C=(FEDCBA98)16，D=(76543210)16）。如果在程序中定义应该是:<br>（A=0X67452301L，B=0XEFCDAB89L，C=0X98BADCFEL，D=0X10325476L）。有点晕哈，其实想一想就明白了。<br>4.四轮循环运算：循环的次数是分组的个数（N+1）<br>1.将每一512字节细分成16个小组，每个小组64位（8个字节）<br>2.先认识四个线性函数(&amp;是与,|是或,~是非,^是异或)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F(X,Y,Z)=(X&amp;Y)|((~X)&amp;Z)</span><br><span class=\"line\">G(X,Y,Z)=(X&amp;Z)|(Y&amp;(~Z))</span><br><span class=\"line\">H(X,Y,Z)=X^Y^Z</span><br><span class=\"line\">I(X,Y,Z)=Y^(X|(~Z))</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>3.设Mj表示消息的第j个子分组（从0到15）<br>FF(a,b,c,d,Mj,s,ti)表示a=b+((a+F(b,c,d)+Mj+ti)&lt;&lt;&lt;s)<br>GG(a,b,c,d,Mj,s,ti)表示a=b+((a+G(b,c,d)+Mj+ti)&lt;&lt;&lt;s)<br>HH(a,b,c,d,Mj,s,ti)表示a=b+((a+H(b,c,d)+Mj+ti)&lt;&lt;&lt;s)<br>II(a,b,c,d,Mj,s,ti)表示a=b+((a+I(b,c,d)+Mj+ti)&lt;&lt;&lt;s)<br>4.四轮运算<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a=FF(a,b,c,d,M0,7,0xd76aa478)</span><br><span class=\"line\">b=FF(d,a,b,c,M1,12,0xe8c7b756)</span><br><span class=\"line\">c=FF(c,d,a,b,M2,17,0x242070db)</span><br><span class=\"line\">d=FF(b,c,d,a,M3,22,0xc1bdceee)</span><br><span class=\"line\">a=FF(a,b,c,d,M4,7,0xf57c0faf)</span><br><span class=\"line\">b=FF(d,a,b,c,M5,12,0x4787c62a)</span><br><span class=\"line\">c=FF(c,d,a,b,M6,17,0xa8304613)</span><br><span class=\"line\">d=FF(b,c,d,a,M7,22,0xfd469501)</span><br><span class=\"line\">a=FF(a,b,c,d,M8,7,0x698098d8)</span><br><span class=\"line\">b=FF(d,a,b,c,M9,12,0x8b44f7af)</span><br><span class=\"line\">c=FF(c,d,a,b,M10,17,0xffff5bb1)</span><br><span class=\"line\">d=FF(b,c,d,a,M11,22,0x895cd7be)</span><br><span class=\"line\">a=FF(a,b,c,d,M12,7,0x6b901122)</span><br><span class=\"line\">b=FF(d,a,b,c,M13,12,0xfd987193)</span><br><span class=\"line\">c=FF(c,d,a,b,M14,17,0xa679438e)</span><br><span class=\"line\">d=FF(b,c,d,a,M15,22,0x49b40821)</span><br><span class=\"line\"></span><br><span class=\"line\">第二轮</span><br><span class=\"line\">a=GG(a,b,c,d,M1,5,0xf61e2562)</span><br><span class=\"line\">b=GG(d,a,b,c,M6,9,0xc040b340)</span><br><span class=\"line\">c=GG(c,d,a,b,M11,14,0x265e5a51)</span><br><span class=\"line\">d=GG(b,c,d,a,M0,20,0xe9b6c7aa)</span><br><span class=\"line\">a=GG(a,b,c,d,M5,5,0xd62f105d)</span><br><span class=\"line\">b=GG(d,a,b,c,M10,9,0x02441453)</span><br><span class=\"line\">c=GG(c,d,a,b,M15,14,0xd8a1e681)</span><br><span class=\"line\">d=GG(b,c,d,a,M4,20,0xe7d3fbc8)</span><br><span class=\"line\">a=GG(a,b,c,d,M9,5,0x21e1cde6)</span><br><span class=\"line\">b=GG(d,a,b,c,M14,9,0xc33707d6)</span><br><span class=\"line\">c=GG(c,d,a,b,M3,14,0xf4d50d87)</span><br><span class=\"line\">d=GG(b,c,d,a,M8,20,0x455a14ed)</span><br><span class=\"line\">a=GG(a,b,c,d,M13,5,0xa9e3e905)</span><br><span class=\"line\">b=GG(d,a,b,c,M2,9,0xfcefa3f8)</span><br><span class=\"line\">c=GG(c,d,a,b,M7,14,0x676f02d9)</span><br><span class=\"line\">d=GG(b,c,d,a,M12,20,0x8d2a4c8a)</span><br><span class=\"line\"></span><br><span class=\"line\">第三轮</span><br><span class=\"line\">a=HH(a,b,c,d,M5,4,0xfffa3942)</span><br><span class=\"line\">b=HH(d,a,b,c,M8,11,0x8771f681)</span><br><span class=\"line\">c=HH(c,d,a,b,M11,16,0x6d9d6122)</span><br><span class=\"line\">d=HH(b,c,d,a,M14,23,0xfde5380c)</span><br><span class=\"line\">a=HH(a,b,c,d,M1,4,0xa4beea44)</span><br><span class=\"line\">b=HH(d,a,b,c,M4,11,0x4bdecfa9)</span><br><span class=\"line\">c=HH(c,d,a,b,M7,16,0xf6bb4b60)</span><br><span class=\"line\">d=HH(b,c,d,a,M10,23,0xbebfbc70)</span><br><span class=\"line\">a=HH(a,b,c,d,M13,4,0x289b7ec6)</span><br><span class=\"line\">b=HH(d,a,b,c,M0,11,0xeaa127fa)</span><br><span class=\"line\">c=HH(c,d,a,b,M3,16,0xd4ef3085)</span><br><span class=\"line\">d=HH(b,c,d,a,M6,23,0x04881d05)</span><br><span class=\"line\">a=HH(a,b,c,d,M9,4,0xd9d4d039)</span><br><span class=\"line\">b=HH(d,a,b,c,M12,11,0xe6db99e5)</span><br><span class=\"line\">c=HH(c,d,a,b,M15,16,0x1fa27cf8)</span><br><span class=\"line\">d=HH(b,c,d,a,M2,23,0xc4ac5665)</span><br><span class=\"line\"></span><br><span class=\"line\">第四轮</span><br><span class=\"line\">a=II(a,b,c,d,M0,6,0xf4292244)</span><br><span class=\"line\">b=II(d,a,b,c,M7,10,0x432aff97)</span><br><span class=\"line\">c=II(c,d,a,b,M14,15,0xab9423a7)</span><br><span class=\"line\">d=II(b,c,d,a,M5,21,0xfc93a039)</span><br><span class=\"line\">a=II(a,b,c,d,M12,6,0x655b59c3)</span><br><span class=\"line\">b=II(d,a,b,c,M3,10,0x8f0ccc92)</span><br><span class=\"line\">c=II(c,d,a,b,M10,15,0xffeff47d)</span><br><span class=\"line\">d=II(b,c,d,a,M1,21,0x85845dd1)</span><br><span class=\"line\">a=II(a,b,c,d,M8,6,0x6fa87e4f)</span><br><span class=\"line\">b=II(d,a,b,c,M15,10,0xfe2ce6e0)</span><br><span class=\"line\">c=II(c,d,a,b,M6,15,0xa3014314)</span><br><span class=\"line\">d=II(b,c,d,a,M13,21,0x4e0811a1)</span><br><span class=\"line\">a=II(a,b,c,d,M4,6,0xf7537e82)</span><br><span class=\"line\">b=II(d,a,b,c,M11,10,0xbd3af235)</span><br><span class=\"line\">c=II(c,d,a,b,M2,15,0x2ad7d2bb)</span><br><span class=\"line\">d=II(b,c,d,a,M9,21,0xeb86d391)</span><br></pre></td></tr></table></figure></p>\n<p>5.每轮循环后，将A，B，C，D分别加上a，b，c，d，然后进入下一循环。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>MD5和SHA-1都被称作哈希(Hash)函数，用过Java语言的人对这个术语应该相当熟悉。Java类库里的Object类定义了hashCode这个函数，但是java的概念略有不同。正式的哈希函数的定义是“把任意长度的数据计算成固定长度的数据”。也就是说函数的输入是任意长的，输出总是固定长度的。MD5和SHA-1是两种加密用哈希函数，MD5的返回值总是128bit的，SHA-1的返回值是160bit，都是固定长度。MD5如果按十六进制表示的话是32位十六进制的数，SHA-1是40位十六进制的数。<br>你输入任意长度的字符串，都会返回给你相应固定长度的十六进制返回值。这两个函数的返回值都被称为信息摘要(Message Digest，实际上MD就是Message Digest的缩写)。<br>那么两个函数为什么可以用在加密上呢？因为他们都有这几个特性:<br>1.都是“不可逆”的函数。不存在一个算法能够由哈希值倒算出原始信息。<br>2.对原始信息的任何一点改变都会导致结果的哈希值巨大的不同。举个例子，假如原始数据是几百万字的文章，你在其中哪怕改动一个标点，计算出的哈希值都会有很大的变化。<br>3.运算代价是相对较低的。普通的AMDOpteron2.2GHz的芯片，每秒可以计算出335MB数据的MD5值，可以计算192MB数据的SHA-1值。   参见<a href=\"https://en.wikipedia.org/wiki/SHA-1#Comparison_of_SHA_functions。\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/SHA-1#Comparison_of_SHA_functions。</a><br>4.类似于1，除非通过蛮力的穷举法，否则无法找到两段不同的信息而有相同的哈希值。（这一点现在已被证明是不成立的了，请看后文）<br> 那么这两个函数的特点在哪里呢？特点在于都能“通过哈希值唯一标识原信息”。这个怎么讲，就是比如原始信息是A，我知道原始信息的哈希值Ha，如果我有另一段信息，这段信息的哈希值也是Ha的话，我就能“以极大的可靠性”断定这另一段信息就是A。也就是说哈希值能“唯一”标识原始信息。原因是什么呢？</p>\n<p>1.两段不同信息“碰巧”有着相同的哈希值的概率是很低的，对于MD5来说是2的128次方分之一，这个数字是多小呢：太阳的表面积是6万亿平方公里，一个原子的截面积大约是1平方纳米，假设你是一个原子，把你放在56个太阳中任意一个的表面，这个概率是我在这56个太阳上随意指定一点，正好点中你的概率，而你是一个小小小的原子。对SHA-1来说，这个概率就更低了。<br>2.那么有没有办法人工伪造一段信息正好有Ha这个哈希值呢？根据上面的1和4，这个可能性是很低的，要通过穷举法的巨大的运算量才能做到。</p>\n<h1 id=\"他们的用处\"><a href=\"#他们的用处\" class=\"headerlink\" title=\"他们的用处\"></a>他们的用处</h1><p>1.密码加密<br>2.文件校验</p>\n<hr>\n<h1 id=\"MD5相当于超损压缩。其算法过程如下\"><a href=\"#MD5相当于超损压缩。其算法过程如下\" class=\"headerlink\" title=\"MD5相当于超损压缩。其算法过程如下\"></a>MD5相当于超损压缩。其算法过程如下</h1><p>对MD5算法简要的叙述可以为：MD5以512位分组来处理输入的信息，且每一分组又被划分为16个32位子分组，经过了一系列的处理后，算法的输出由四个32位分组组成，将这四个32位分组级联后将生成一个128位散列值。</p>\n<blockquote>\n<p>1.填充：如果输入信息的长度(bit)对512求余的结果不等于448，就需要填充使得对512求余的结果等于448。填充的方法是填充一个1和n个0。填充完后，信息的长度就为N<em>512+448(bit)；<br>2.记录信息长度：用64位来存储填充前信息长度。这64位加在第一步结果的后面，这样信息长度就变为N</em>512+448+64=(N+1)*512位。<br>3.装入标准的幻数（四个整数）：标准的幻数（物理顺序）是（A=(01234567)16，B=(89ABCDEF)16，C=(FEDCBA98)16，D=(76543210)16）。如果在程序中定义应该是:<br>（A=0X67452301L，B=0XEFCDAB89L，C=0X98BADCFEL，D=0X10325476L）。有点晕哈，其实想一想就明白了。<br>4.四轮循环运算：循环的次数是分组的个数（N+1）<br>1.将每一512字节细分成16个小组，每个小组64位（8个字节）<br>2.先认识四个线性函数(&amp;是与,|是或,~是非,^是异或)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F(X,Y,Z)=(X&amp;Y)|((~X)&amp;Z)</span><br><span class=\"line\">G(X,Y,Z)=(X&amp;Z)|(Y&amp;(~Z))</span><br><span class=\"line\">H(X,Y,Z)=X^Y^Z</span><br><span class=\"line\">I(X,Y,Z)=Y^(X|(~Z))</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>3.设Mj表示消息的第j个子分组（从0到15）<br>FF(a,b,c,d,Mj,s,ti)表示a=b+((a+F(b,c,d)+Mj+ti)&lt;&lt;&lt;s)<br>GG(a,b,c,d,Mj,s,ti)表示a=b+((a+G(b,c,d)+Mj+ti)&lt;&lt;&lt;s)<br>HH(a,b,c,d,Mj,s,ti)表示a=b+((a+H(b,c,d)+Mj+ti)&lt;&lt;&lt;s)<br>II(a,b,c,d,Mj,s,ti)表示a=b+((a+I(b,c,d)+Mj+ti)&lt;&lt;&lt;s)<br>4.四轮运算<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a=FF(a,b,c,d,M0,7,0xd76aa478)</span><br><span class=\"line\">b=FF(d,a,b,c,M1,12,0xe8c7b756)</span><br><span class=\"line\">c=FF(c,d,a,b,M2,17,0x242070db)</span><br><span class=\"line\">d=FF(b,c,d,a,M3,22,0xc1bdceee)</span><br><span class=\"line\">a=FF(a,b,c,d,M4,7,0xf57c0faf)</span><br><span class=\"line\">b=FF(d,a,b,c,M5,12,0x4787c62a)</span><br><span class=\"line\">c=FF(c,d,a,b,M6,17,0xa8304613)</span><br><span class=\"line\">d=FF(b,c,d,a,M7,22,0xfd469501)</span><br><span class=\"line\">a=FF(a,b,c,d,M8,7,0x698098d8)</span><br><span class=\"line\">b=FF(d,a,b,c,M9,12,0x8b44f7af)</span><br><span class=\"line\">c=FF(c,d,a,b,M10,17,0xffff5bb1)</span><br><span class=\"line\">d=FF(b,c,d,a,M11,22,0x895cd7be)</span><br><span class=\"line\">a=FF(a,b,c,d,M12,7,0x6b901122)</span><br><span class=\"line\">b=FF(d,a,b,c,M13,12,0xfd987193)</span><br><span class=\"line\">c=FF(c,d,a,b,M14,17,0xa679438e)</span><br><span class=\"line\">d=FF(b,c,d,a,M15,22,0x49b40821)</span><br><span class=\"line\"></span><br><span class=\"line\">第二轮</span><br><span class=\"line\">a=GG(a,b,c,d,M1,5,0xf61e2562)</span><br><span class=\"line\">b=GG(d,a,b,c,M6,9,0xc040b340)</span><br><span class=\"line\">c=GG(c,d,a,b,M11,14,0x265e5a51)</span><br><span class=\"line\">d=GG(b,c,d,a,M0,20,0xe9b6c7aa)</span><br><span class=\"line\">a=GG(a,b,c,d,M5,5,0xd62f105d)</span><br><span class=\"line\">b=GG(d,a,b,c,M10,9,0x02441453)</span><br><span class=\"line\">c=GG(c,d,a,b,M15,14,0xd8a1e681)</span><br><span class=\"line\">d=GG(b,c,d,a,M4,20,0xe7d3fbc8)</span><br><span class=\"line\">a=GG(a,b,c,d,M9,5,0x21e1cde6)</span><br><span class=\"line\">b=GG(d,a,b,c,M14,9,0xc33707d6)</span><br><span class=\"line\">c=GG(c,d,a,b,M3,14,0xf4d50d87)</span><br><span class=\"line\">d=GG(b,c,d,a,M8,20,0x455a14ed)</span><br><span class=\"line\">a=GG(a,b,c,d,M13,5,0xa9e3e905)</span><br><span class=\"line\">b=GG(d,a,b,c,M2,9,0xfcefa3f8)</span><br><span class=\"line\">c=GG(c,d,a,b,M7,14,0x676f02d9)</span><br><span class=\"line\">d=GG(b,c,d,a,M12,20,0x8d2a4c8a)</span><br><span class=\"line\"></span><br><span class=\"line\">第三轮</span><br><span class=\"line\">a=HH(a,b,c,d,M5,4,0xfffa3942)</span><br><span class=\"line\">b=HH(d,a,b,c,M8,11,0x8771f681)</span><br><span class=\"line\">c=HH(c,d,a,b,M11,16,0x6d9d6122)</span><br><span class=\"line\">d=HH(b,c,d,a,M14,23,0xfde5380c)</span><br><span class=\"line\">a=HH(a,b,c,d,M1,4,0xa4beea44)</span><br><span class=\"line\">b=HH(d,a,b,c,M4,11,0x4bdecfa9)</span><br><span class=\"line\">c=HH(c,d,a,b,M7,16,0xf6bb4b60)</span><br><span class=\"line\">d=HH(b,c,d,a,M10,23,0xbebfbc70)</span><br><span class=\"line\">a=HH(a,b,c,d,M13,4,0x289b7ec6)</span><br><span class=\"line\">b=HH(d,a,b,c,M0,11,0xeaa127fa)</span><br><span class=\"line\">c=HH(c,d,a,b,M3,16,0xd4ef3085)</span><br><span class=\"line\">d=HH(b,c,d,a,M6,23,0x04881d05)</span><br><span class=\"line\">a=HH(a,b,c,d,M9,4,0xd9d4d039)</span><br><span class=\"line\">b=HH(d,a,b,c,M12,11,0xe6db99e5)</span><br><span class=\"line\">c=HH(c,d,a,b,M15,16,0x1fa27cf8)</span><br><span class=\"line\">d=HH(b,c,d,a,M2,23,0xc4ac5665)</span><br><span class=\"line\"></span><br><span class=\"line\">第四轮</span><br><span class=\"line\">a=II(a,b,c,d,M0,6,0xf4292244)</span><br><span class=\"line\">b=II(d,a,b,c,M7,10,0x432aff97)</span><br><span class=\"line\">c=II(c,d,a,b,M14,15,0xab9423a7)</span><br><span class=\"line\">d=II(b,c,d,a,M5,21,0xfc93a039)</span><br><span class=\"line\">a=II(a,b,c,d,M12,6,0x655b59c3)</span><br><span class=\"line\">b=II(d,a,b,c,M3,10,0x8f0ccc92)</span><br><span class=\"line\">c=II(c,d,a,b,M10,15,0xffeff47d)</span><br><span class=\"line\">d=II(b,c,d,a,M1,21,0x85845dd1)</span><br><span class=\"line\">a=II(a,b,c,d,M8,6,0x6fa87e4f)</span><br><span class=\"line\">b=II(d,a,b,c,M15,10,0xfe2ce6e0)</span><br><span class=\"line\">c=II(c,d,a,b,M6,15,0xa3014314)</span><br><span class=\"line\">d=II(b,c,d,a,M13,21,0x4e0811a1)</span><br><span class=\"line\">a=II(a,b,c,d,M4,6,0xf7537e82)</span><br><span class=\"line\">b=II(d,a,b,c,M11,10,0xbd3af235)</span><br><span class=\"line\">c=II(c,d,a,b,M2,15,0x2ad7d2bb)</span><br><span class=\"line\">d=II(b,c,d,a,M9,21,0xeb86d391)</span><br></pre></td></tr></table></figure></p>\n<p>5.每轮循环后，将A，B，C，D分别加上a，b，c，d，然后进入下一循环。</p>\n"},{"title":"final关键字的四种用法","date":"2018-07-18T09:12:51.000Z","_content":"## 1 修饰数据\n在编写程序时，我们经常需要说明一个数据是不可变的，我们成为常量。在java中，用final关键字修饰的变量，只能进行一次赋值操作，并且在生存期内不可以改变它的值。更重要的是，final会告诉编译器，这个数据是不会修改的，那么编译器就可能会在编译时期就对该数据进行替换甚至执行计算，这样可以对我们的程序起到一点优化。不过在针对基本类型和引用类型时，final关键字的效果存在细微差别。\n## 2 修饰方法参数\n前面我们可以看到，如果变量是我们自己创建的，那么使用final修饰表示我们只会给它赋值一次且不会改变变量的值。那么如果变量是作为参数传入的，我们怎么保证它的值不会改变呢？这就用到了final的第二种用法，即在我们编写方法时，可以在参数前面添加final关键字，它表示在整个方法中，我们不会（实际上是不能）改变参数的值\n## 3 修饰方法\n第三种方式，即用final关键字修饰方法，它表示该方法不能被覆盖。这种使用方式主要是从设计的角度考虑，即明确告诉其他可能会继承该类的程序员，不希望他们去覆盖这个方法。这种方式我们很容易理解，然而，关于private和final关键字还有一点联系，这就是类中所有的private方法都隐式地指定为是final的，由于无法在类外使用private方法，所以也就无法覆盖它。\n## 4 修饰类\n了解了final关键字的其他用法，我们很容易可以想到使用final关键字修饰类的作用，那就是用final修饰的类是无法被继承的。","source":"_posts/2018.07.18 final关键字的四种用法.md","raw":"---\ntitle: final关键字的四种用法\ntags: 面试\ndate: 2018-07-18 17:12:51\n---\n## 1 修饰数据\n在编写程序时，我们经常需要说明一个数据是不可变的，我们成为常量。在java中，用final关键字修饰的变量，只能进行一次赋值操作，并且在生存期内不可以改变它的值。更重要的是，final会告诉编译器，这个数据是不会修改的，那么编译器就可能会在编译时期就对该数据进行替换甚至执行计算，这样可以对我们的程序起到一点优化。不过在针对基本类型和引用类型时，final关键字的效果存在细微差别。\n## 2 修饰方法参数\n前面我们可以看到，如果变量是我们自己创建的，那么使用final修饰表示我们只会给它赋值一次且不会改变变量的值。那么如果变量是作为参数传入的，我们怎么保证它的值不会改变呢？这就用到了final的第二种用法，即在我们编写方法时，可以在参数前面添加final关键字，它表示在整个方法中，我们不会（实际上是不能）改变参数的值\n## 3 修饰方法\n第三种方式，即用final关键字修饰方法，它表示该方法不能被覆盖。这种使用方式主要是从设计的角度考虑，即明确告诉其他可能会继承该类的程序员，不希望他们去覆盖这个方法。这种方式我们很容易理解，然而，关于private和final关键字还有一点联系，这就是类中所有的private方法都隐式地指定为是final的，由于无法在类外使用private方法，所以也就无法覆盖它。\n## 4 修饰类\n了解了final关键字的其他用法，我们很容易可以想到使用final关键字修饰类的作用，那就是用final修饰的类是无法被继承的。","slug":"final关键字的四种用法","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzce0025dcyu8r8lw3uu","content":"<h2 id=\"1-修饰数据\"><a href=\"#1-修饰数据\" class=\"headerlink\" title=\"1 修饰数据\"></a>1 修饰数据</h2><p>在编写程序时，我们经常需要说明一个数据是不可变的，我们成为常量。在java中，用final关键字修饰的变量，只能进行一次赋值操作，并且在生存期内不可以改变它的值。更重要的是，final会告诉编译器，这个数据是不会修改的，那么编译器就可能会在编译时期就对该数据进行替换甚至执行计算，这样可以对我们的程序起到一点优化。不过在针对基本类型和引用类型时，final关键字的效果存在细微差别。</p>\n<h2 id=\"2-修饰方法参数\"><a href=\"#2-修饰方法参数\" class=\"headerlink\" title=\"2 修饰方法参数\"></a>2 修饰方法参数</h2><p>前面我们可以看到，如果变量是我们自己创建的，那么使用final修饰表示我们只会给它赋值一次且不会改变变量的值。那么如果变量是作为参数传入的，我们怎么保证它的值不会改变呢？这就用到了final的第二种用法，即在我们编写方法时，可以在参数前面添加final关键字，它表示在整个方法中，我们不会（实际上是不能）改变参数的值</p>\n<h2 id=\"3-修饰方法\"><a href=\"#3-修饰方法\" class=\"headerlink\" title=\"3 修饰方法\"></a>3 修饰方法</h2><p>第三种方式，即用final关键字修饰方法，它表示该方法不能被覆盖。这种使用方式主要是从设计的角度考虑，即明确告诉其他可能会继承该类的程序员，不希望他们去覆盖这个方法。这种方式我们很容易理解，然而，关于private和final关键字还有一点联系，这就是类中所有的private方法都隐式地指定为是final的，由于无法在类外使用private方法，所以也就无法覆盖它。</p>\n<h2 id=\"4-修饰类\"><a href=\"#4-修饰类\" class=\"headerlink\" title=\"4 修饰类\"></a>4 修饰类</h2><p>了解了final关键字的其他用法，我们很容易可以想到使用final关键字修饰类的作用，那就是用final修饰的类是无法被继承的。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-修饰数据\"><a href=\"#1-修饰数据\" class=\"headerlink\" title=\"1 修饰数据\"></a>1 修饰数据</h2><p>在编写程序时，我们经常需要说明一个数据是不可变的，我们成为常量。在java中，用final关键字修饰的变量，只能进行一次赋值操作，并且在生存期内不可以改变它的值。更重要的是，final会告诉编译器，这个数据是不会修改的，那么编译器就可能会在编译时期就对该数据进行替换甚至执行计算，这样可以对我们的程序起到一点优化。不过在针对基本类型和引用类型时，final关键字的效果存在细微差别。</p>\n<h2 id=\"2-修饰方法参数\"><a href=\"#2-修饰方法参数\" class=\"headerlink\" title=\"2 修饰方法参数\"></a>2 修饰方法参数</h2><p>前面我们可以看到，如果变量是我们自己创建的，那么使用final修饰表示我们只会给它赋值一次且不会改变变量的值。那么如果变量是作为参数传入的，我们怎么保证它的值不会改变呢？这就用到了final的第二种用法，即在我们编写方法时，可以在参数前面添加final关键字，它表示在整个方法中，我们不会（实际上是不能）改变参数的值</p>\n<h2 id=\"3-修饰方法\"><a href=\"#3-修饰方法\" class=\"headerlink\" title=\"3 修饰方法\"></a>3 修饰方法</h2><p>第三种方式，即用final关键字修饰方法，它表示该方法不能被覆盖。这种使用方式主要是从设计的角度考虑，即明确告诉其他可能会继承该类的程序员，不希望他们去覆盖这个方法。这种方式我们很容易理解，然而，关于private和final关键字还有一点联系，这就是类中所有的private方法都隐式地指定为是final的，由于无法在类外使用private方法，所以也就无法覆盖它。</p>\n<h2 id=\"4-修饰类\"><a href=\"#4-修饰类\" class=\"headerlink\" title=\"4 修饰类\"></a>4 修饰类</h2><p>了解了final关键字的其他用法，我们很容易可以想到使用final关键字修饰类的作用，那就是用final修饰的类是无法被继承的。</p>\n"},{"title":"java类中serialversionuid作用是什么","date":"2018-07-18T12:58:10.000Z","_content":"serialVersionUID适用于Java的序列化机制。简单来说，Java的序列化机制是通过判断类的serialVersionUID来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的serialVersionUID与本地相应实体类的serialVersionUID进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是InvalidCastException。\n\nserialVersionUID有两种显示的生成方式：        \n一是默认的1L，比如：private static final long serialVersionUID = 1L;        \n二是根据类名、接口名、成员方法及属性等来生成一个64位的哈希字段，比如：   \nprivate static final  long   serialVersionUID = xxxxL;\n\n当实现java.io.Serializable接口的类没有显式地定义一个serialVersionUID变量时候，Java序列化机制会根据编译的Class自动生成一个serialVersionUID作序列化版本比较用，这种情况下，如果Class文件(类名，方法明等)没有发生变化(增加空格，换行，增加注释等等)，就算再编译多次，serialVersionUID也不会变化的。\n\n如果我们不希望通过编译来强制划分软件版本，即实现序列化接口的实体能够兼容先前版本，就需要显式地定义一个名为serialVersionUID，类型为long的变量，不修改这个变量值的序列化实体都可以相互进行串行化和反串行化。\n\n# 父类的序列化与 Transient 关键字\n要想将父类对象也序列化，就需要让父类也实现Serializable 接口。如果父类不实现的话的，就 需要有默认的无参的构造函数。在父类没有实现 Serializable 接口时，虚拟机是不会序列化父对象的，而一个 Java 对象的构造必须先有父对象，才有子对象，反序列化也不例外。所以反序列化时，为了构造父对象，只能调用父类的无参构造函数作为默认的父对象。因此当我们取父对象的变量值时，它的值是调用父类无参构造函数后的值。如果你考虑到这种序列化的情况，在父类无参构造函数中对变量进行初始化，否则的话，父类变量值都是默认声明的值，如 int 型的默认是 0，string 型的默认是 null。\n\n# Transient 关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient 变量的值被设为初始值，如 int 型的是 0，对象型的是 null。\n\n\n\n\n\n\n","source":"_posts/2018.07.18 java类中serialversionuid作用是什么.md","raw":"---\ntitle: java类中serialversionuid作用是什么\ntags: 面试\ndate: 2018-07-18 20:58:10\n---\nserialVersionUID适用于Java的序列化机制。简单来说，Java的序列化机制是通过判断类的serialVersionUID来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的serialVersionUID与本地相应实体类的serialVersionUID进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是InvalidCastException。\n\nserialVersionUID有两种显示的生成方式：        \n一是默认的1L，比如：private static final long serialVersionUID = 1L;        \n二是根据类名、接口名、成员方法及属性等来生成一个64位的哈希字段，比如：   \nprivate static final  long   serialVersionUID = xxxxL;\n\n当实现java.io.Serializable接口的类没有显式地定义一个serialVersionUID变量时候，Java序列化机制会根据编译的Class自动生成一个serialVersionUID作序列化版本比较用，这种情况下，如果Class文件(类名，方法明等)没有发生变化(增加空格，换行，增加注释等等)，就算再编译多次，serialVersionUID也不会变化的。\n\n如果我们不希望通过编译来强制划分软件版本，即实现序列化接口的实体能够兼容先前版本，就需要显式地定义一个名为serialVersionUID，类型为long的变量，不修改这个变量值的序列化实体都可以相互进行串行化和反串行化。\n\n# 父类的序列化与 Transient 关键字\n要想将父类对象也序列化，就需要让父类也实现Serializable 接口。如果父类不实现的话的，就 需要有默认的无参的构造函数。在父类没有实现 Serializable 接口时，虚拟机是不会序列化父对象的，而一个 Java 对象的构造必须先有父对象，才有子对象，反序列化也不例外。所以反序列化时，为了构造父对象，只能调用父类的无参构造函数作为默认的父对象。因此当我们取父对象的变量值时，它的值是调用父类无参构造函数后的值。如果你考虑到这种序列化的情况，在父类无参构造函数中对变量进行初始化，否则的话，父类变量值都是默认声明的值，如 int 型的默认是 0，string 型的默认是 null。\n\n# Transient 关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient 变量的值被设为初始值，如 int 型的是 0，对象型的是 null。\n\n\n\n\n\n\n","slug":"java类中serialversionuid作用是什么","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcg0027dcyuc7vgl6dd","content":"<p>serialVersionUID适用于Java的序列化机制。简单来说，Java的序列化机制是通过判断类的serialVersionUID来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的serialVersionUID与本地相应实体类的serialVersionUID进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是InvalidCastException。</p>\n<p>serialVersionUID有两种显示的生成方式：<br>一是默认的1L，比如：private static final long serialVersionUID = 1L;<br>二是根据类名、接口名、成员方法及属性等来生成一个64位的哈希字段，比如：<br>private static final  long   serialVersionUID = xxxxL;</p>\n<p>当实现java.io.Serializable接口的类没有显式地定义一个serialVersionUID变量时候，Java序列化机制会根据编译的Class自动生成一个serialVersionUID作序列化版本比较用，这种情况下，如果Class文件(类名，方法明等)没有发生变化(增加空格，换行，增加注释等等)，就算再编译多次，serialVersionUID也不会变化的。</p>\n<p>如果我们不希望通过编译来强制划分软件版本，即实现序列化接口的实体能够兼容先前版本，就需要显式地定义一个名为serialVersionUID，类型为long的变量，不修改这个变量值的序列化实体都可以相互进行串行化和反串行化。</p>\n<h1 id=\"父类的序列化与-Transient-关键字\"><a href=\"#父类的序列化与-Transient-关键字\" class=\"headerlink\" title=\"父类的序列化与 Transient 关键字\"></a>父类的序列化与 Transient 关键字</h1><p>要想将父类对象也序列化，就需要让父类也实现Serializable 接口。如果父类不实现的话的，就 需要有默认的无参的构造函数。在父类没有实现 Serializable 接口时，虚拟机是不会序列化父对象的，而一个 Java 对象的构造必须先有父对象，才有子对象，反序列化也不例外。所以反序列化时，为了构造父对象，只能调用父类的无参构造函数作为默认的父对象。因此当我们取父对象的变量值时，它的值是调用父类无参构造函数后的值。如果你考虑到这种序列化的情况，在父类无参构造函数中对变量进行初始化，否则的话，父类变量值都是默认声明的值，如 int 型的默认是 0，string 型的默认是 null。</p>\n<h1 id=\"Transient-关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient-变量的值被设为初始值，如-int-型的是-0，对象型的是-null。\"><a href=\"#Transient-关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient-变量的值被设为初始值，如-int-型的是-0，对象型的是-null。\" class=\"headerlink\" title=\"Transient 关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient 变量的值被设为初始值，如 int 型的是 0，对象型的是 null。\"></a>Transient 关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient 变量的值被设为初始值，如 int 型的是 0，对象型的是 null。</h1>","site":{"data":{}},"excerpt":"","more":"<p>serialVersionUID适用于Java的序列化机制。简单来说，Java的序列化机制是通过判断类的serialVersionUID来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的serialVersionUID与本地相应实体类的serialVersionUID进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是InvalidCastException。</p>\n<p>serialVersionUID有两种显示的生成方式：<br>一是默认的1L，比如：private static final long serialVersionUID = 1L;<br>二是根据类名、接口名、成员方法及属性等来生成一个64位的哈希字段，比如：<br>private static final  long   serialVersionUID = xxxxL;</p>\n<p>当实现java.io.Serializable接口的类没有显式地定义一个serialVersionUID变量时候，Java序列化机制会根据编译的Class自动生成一个serialVersionUID作序列化版本比较用，这种情况下，如果Class文件(类名，方法明等)没有发生变化(增加空格，换行，增加注释等等)，就算再编译多次，serialVersionUID也不会变化的。</p>\n<p>如果我们不希望通过编译来强制划分软件版本，即实现序列化接口的实体能够兼容先前版本，就需要显式地定义一个名为serialVersionUID，类型为long的变量，不修改这个变量值的序列化实体都可以相互进行串行化和反串行化。</p>\n<h1 id=\"父类的序列化与-Transient-关键字\"><a href=\"#父类的序列化与-Transient-关键字\" class=\"headerlink\" title=\"父类的序列化与 Transient 关键字\"></a>父类的序列化与 Transient 关键字</h1><p>要想将父类对象也序列化，就需要让父类也实现Serializable 接口。如果父类不实现的话的，就 需要有默认的无参的构造函数。在父类没有实现 Serializable 接口时，虚拟机是不会序列化父对象的，而一个 Java 对象的构造必须先有父对象，才有子对象，反序列化也不例外。所以反序列化时，为了构造父对象，只能调用父类的无参构造函数作为默认的父对象。因此当我们取父对象的变量值时，它的值是调用父类无参构造函数后的值。如果你考虑到这种序列化的情况，在父类无参构造函数中对变量进行初始化，否则的话，父类变量值都是默认声明的值，如 int 型的默认是 0，string 型的默认是 null。</p>\n<h1 id=\"Transient-关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient-变量的值被设为初始值，如-int-型的是-0，对象型的是-null。\"><a href=\"#Transient-关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient-变量的值被设为初始值，如-int-型的是-0，对象型的是-null。\" class=\"headerlink\" title=\"Transient 关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient 变量的值被设为初始值，如 int 型的是 0，对象型的是 null。\"></a>Transient 关键字的作用是控制变量的序列化，在变量声明前加上该关键字，可以阻止该变量被序列化到文件中，在被反序列化后，transient 变量的值被设为初始值，如 int 型的是 0，对象型的是 null。</h1>"},{"title":"markdown语法总结","date":"2018-07-18T01:06:38.000Z","_content":"setext的标题是采用底线的方式==,比如\n====\n再比如--(任何数量都有效果):\n----\n# 这个是atx#\n## 这个是atx小标题##\n\n>这个是区块引用\n>Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加\n* 无序列表\n*无序列表\n+加号也可以\n\n***\n[google][这个是google]\n[google]: http://www.baidu.com/ \"optional title here\"\n***\n*markdown使用星号和底线作为强调的符号*\n**两个星号强调更强**\n***\n如果要标记一小段行内代码，你可以用反引号把它包起来（`），例如：\nuse the 'printf()'函数\n\n\n\n\n\n\n\n\n\n","source":"_posts/2018.07.18 markdown语法总结.md","raw":"---\ntitle: markdown语法总结\ndate: 2018-07-18 09:06:38\ntags: \n---\nsetext的标题是采用底线的方式==,比如\n====\n再比如--(任何数量都有效果):\n----\n# 这个是atx#\n## 这个是atx小标题##\n\n>这个是区块引用\n>Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加\n* 无序列表\n*无序列表\n+加号也可以\n\n***\n[google][这个是google]\n[google]: http://www.baidu.com/ \"optional title here\"\n***\n*markdown使用星号和底线作为强调的符号*\n**两个星号强调更强**\n***\n如果要标记一小段行内代码，你可以用反引号把它包起来（`），例如：\nuse the 'printf()'函数\n\n\n\n\n\n\n\n\n\n","slug":"markdown语法总结","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzch0029dcyuwu5t57d8","content":"<h1 id=\"setext的标题是采用底线的方式-比如\"><a href=\"#setext的标题是采用底线的方式-比如\" class=\"headerlink\" title=\"setext的标题是采用底线的方式==,比如\"></a>setext的标题是采用底线的方式==,比如</h1><h2 id=\"再比如–-任何数量都有效果\"><a href=\"#再比如–-任何数量都有效果\" class=\"headerlink\" title=\"再比如–(任何数量都有效果):\"></a>再比如–(任何数量都有效果):</h2><h1 id=\"这个是atx\"><a href=\"#这个是atx\" class=\"headerlink\" title=\"这个是atx\"></a>这个是atx</h1><h2 id=\"这个是atx小标题\"><a href=\"#这个是atx小标题\" class=\"headerlink\" title=\"这个是atx小标题\"></a>这个是atx小标题</h2><blockquote>\n<p>这个是区块引用<br>Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加</p>\n<ul>\n<li>无序列表<br>*无序列表<br>+加号也可以</li>\n</ul>\n</blockquote>\n<hr>\n<p>[google][这个是google]<br>[google]: <a href=\"http://www.baidu.com/\" target=\"_blank\" rel=\"noopener\">http://www.baidu.com/</a> “optional title here”</p>\n<hr>\n<p><em>markdown使用星号和底线作为强调的符号</em><br><strong>两个星号强调更强</strong></p>\n<hr>\n<p>如果要标记一小段行内代码，你可以用反引号把它包起来（`），例如：<br>use the ‘printf()’函数</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"setext的标题是采用底线的方式-比如\"><a href=\"#setext的标题是采用底线的方式-比如\" class=\"headerlink\" title=\"setext的标题是采用底线的方式==,比如\"></a>setext的标题是采用底线的方式==,比如</h1><h2 id=\"再比如–-任何数量都有效果\"><a href=\"#再比如–-任何数量都有效果\" class=\"headerlink\" title=\"再比如–(任何数量都有效果):\"></a>再比如–(任何数量都有效果):</h2><h1 id=\"这个是atx\"><a href=\"#这个是atx\" class=\"headerlink\" title=\"这个是atx\"></a>这个是atx</h1><h2 id=\"这个是atx小标题\"><a href=\"#这个是atx小标题\" class=\"headerlink\" title=\"这个是atx小标题\"></a>这个是atx小标题</h2><blockquote>\n<p>这个是区块引用<br>Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加Markdown 也允许你偷懒只在整个段落的第一行最前面加</p>\n<ul>\n<li>无序列表<br>*无序列表<br>+加号也可以</li>\n</ul>\n</blockquote>\n<hr>\n<p>[google][这个是google]<br>[google]: <a href=\"http://www.baidu.com/\" target=\"_blank\" rel=\"noopener\">http://www.baidu.com/</a> “optional title here”</p>\n<hr>\n<p><em>markdown使用星号和底线作为强调的符号</em><br><strong>两个星号强调更强</strong></p>\n<hr>\n<p>如果要标记一小段行内代码，你可以用反引号把它包起来（`），例如：<br>use the ‘printf()’函数</p>\n"},{"title":"字节与字符的区别加强记忆","date":"2018-07-18T03:33:07.000Z","_content":"首先得知道byte的概念和作用：\n\n　　byte即字节的意思，是java中的基本数据类型，用来申明字节型的变量，一个字节包含8个位，所以，byte类型的取值范围是-128到127。\n通常在读取非文本文件时（如图片，声音，可执行文件）需要用字节数组来保存文件的内容，在下载文件时，也是用byte数组作临时的缓冲器接收文件内容。所以说byte在文件操作时是必不可少的。不管是对文件写入还是读取都要用到。\n\n机器只知道字节，而字符却是语义上的单位，它是有编码的，一个字符可能编码成1个2个甚至3个4个字节。这跟字符集编码有关系，英文字母和数字是单字节，但汉字这些自然语言中的字符是多字节的。一个字节只能表示255个字符，不可能用于全球那么多种自然语言的处理，因此肯定需要多字节的存储方式。\n那么在文件的输入输出中，InputStream、OutputStream它们是处理字节流的，就是说假设所有东西都是二进制的字节；而 Reader, Writer 则是字符流，它涉及到字符集的问题；按照ANSI编码标准，标点符号、数字、大小写字母都占一个字节，汉字占2个字节。按照UNICODE标准所有字符都占2个字节。\n","source":"_posts/2018.07.18 字节与字符的区别加强记忆.md","raw":"---\ntitle: 字节与字符的区别加强记忆\ndate: 2018-07-18 11:33:07\ntags: 面试\n---\n首先得知道byte的概念和作用：\n\n　　byte即字节的意思，是java中的基本数据类型，用来申明字节型的变量，一个字节包含8个位，所以，byte类型的取值范围是-128到127。\n通常在读取非文本文件时（如图片，声音，可执行文件）需要用字节数组来保存文件的内容，在下载文件时，也是用byte数组作临时的缓冲器接收文件内容。所以说byte在文件操作时是必不可少的。不管是对文件写入还是读取都要用到。\n\n机器只知道字节，而字符却是语义上的单位，它是有编码的，一个字符可能编码成1个2个甚至3个4个字节。这跟字符集编码有关系，英文字母和数字是单字节，但汉字这些自然语言中的字符是多字节的。一个字节只能表示255个字符，不可能用于全球那么多种自然语言的处理，因此肯定需要多字节的存储方式。\n那么在文件的输入输出中，InputStream、OutputStream它们是处理字节流的，就是说假设所有东西都是二进制的字节；而 Reader, Writer 则是字符流，它涉及到字符集的问题；按照ANSI编码标准，标点符号、数字、大小写字母都占一个字节，汉字占2个字节。按照UNICODE标准所有字符都占2个字节。\n","slug":"字节与字符的区别加强记忆","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzci002bdcyuxiuh8ntx","content":"<p>首先得知道byte的概念和作用：</p>\n<p>　　byte即字节的意思，是java中的基本数据类型，用来申明字节型的变量，一个字节包含8个位，所以，byte类型的取值范围是-128到127。<br>通常在读取非文本文件时（如图片，声音，可执行文件）需要用字节数组来保存文件的内容，在下载文件时，也是用byte数组作临时的缓冲器接收文件内容。所以说byte在文件操作时是必不可少的。不管是对文件写入还是读取都要用到。</p>\n<p>机器只知道字节，而字符却是语义上的单位，它是有编码的，一个字符可能编码成1个2个甚至3个4个字节。这跟字符集编码有关系，英文字母和数字是单字节，但汉字这些自然语言中的字符是多字节的。一个字节只能表示255个字符，不可能用于全球那么多种自然语言的处理，因此肯定需要多字节的存储方式。<br>那么在文件的输入输出中，InputStream、OutputStream它们是处理字节流的，就是说假设所有东西都是二进制的字节；而 Reader, Writer 则是字符流，它涉及到字符集的问题；按照ANSI编码标准，标点符号、数字、大小写字母都占一个字节，汉字占2个字节。按照UNICODE标准所有字符都占2个字节。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>首先得知道byte的概念和作用：</p>\n<p>　　byte即字节的意思，是java中的基本数据类型，用来申明字节型的变量，一个字节包含8个位，所以，byte类型的取值范围是-128到127。<br>通常在读取非文本文件时（如图片，声音，可执行文件）需要用字节数组来保存文件的内容，在下载文件时，也是用byte数组作临时的缓冲器接收文件内容。所以说byte在文件操作时是必不可少的。不管是对文件写入还是读取都要用到。</p>\n<p>机器只知道字节，而字符却是语义上的单位，它是有编码的，一个字符可能编码成1个2个甚至3个4个字节。这跟字符集编码有关系，英文字母和数字是单字节，但汉字这些自然语言中的字符是多字节的。一个字节只能表示255个字符，不可能用于全球那么多种自然语言的处理，因此肯定需要多字节的存储方式。<br>那么在文件的输入输出中，InputStream、OutputStream它们是处理字节流的，就是说假设所有东西都是二进制的字节；而 Reader, Writer 则是字符流，它涉及到字符集的问题；按照ANSI编码标准，标点符号、数字、大小写字母都占一个字节，汉字占2个字节。按照UNICODE标准所有字符都占2个字节。</p>\n"},{"title":"红黑树","date":"2018-07-18T07:31:31.000Z","_content":"原文地址：http://blog.csdn.net/hackbuteer1/article/details/7740956\n\n<span style=\"font-family:Verdana;color:rgb(255,0,0);font-size:24px;\">一、红黑树概述</span></strong></h1>\n<span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp; 红黑树和我们以前学过的AVL树类似，都是在进行插入和删除操作时通过特定操作保持二叉查找树的平衡，从而获得较高的查找性能。不过自从红黑树出来后，AVL树就被放到了博物馆里，据说是红黑树有更好的效率，更高的统计性能。这一点在我们了解了红黑树的实现原理后，就会有更加深切的体会。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 红黑树和AVL树的区别在于它使用颜色来标识结点的高度，它所追求的是局部平衡而不是AVL树中的非常严格的平衡。学过数据结构的人应该都已经领教过AVL树的复杂，但AVL树的复杂比起红黑树来说简直是小巫见大巫，红黑树才是真正的变态级数据结构。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 由于STL中的关联式容器默认的底层实现都是红黑树，因此红黑树对于后续学习STL源码还是很重要的，有必要掌握红黑树的实现原理和源码实现。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 红黑树是AVL树的变种，红黑树通过一些着色法则确保没有一条路径会比其它路径长出两倍，因而达到接近平衡的目的。所谓红黑树，不仅是一个二叉搜索树，而且必须满足一下规则：<br>\n&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:#3333ff;\">1、每个节点不是红色就是黑色。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 2、根节点为黑色。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 3、如果节点</span><span style=\"font-family:Verdana;color:#3333ff;font-size:16px;\">为红色，其子节点必须为黑色</span><span style=\"color:#3333ff;\">。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 4、任意一个节点到到NULL（树尾端）的任何路径，所含之黑色节点数必须相同。</span><br>\n上面的这些约束保证了这个树大致上是平衡的，这也决定了红黑树的插入、删除、查询等操作是比较快速的。 根据规则4，新增节点必须为红色；根据规则3，新增节点之父节点必须为黑色。当新<span style=\"font-family:Verdana;font-size:16px;\">增</span>节点根据二叉搜索树的规则到达其插入点时，却未能符合上述条件时，就必须调整颜色并旋转树形，如下图：<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342081846_5019.png\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">假设我们为上图分别插入节点3、8、35、75，根据二叉搜索树的规则，插入这四个节点后，我们会发现它们都破坏了红黑树的规则，因此我们必须调整树形，也就是旋转树形并改变节点的颜色。<br></span>\n<h1><a name=\"t1\"></a><span style=\"font-family:Verdana;font-size:16px;\"><span style=\"font-size:24px;\"><strong><span style=\"font-family:SimHei;color:#ff0000;\">二、红黑树上结点的插入</span></strong></span></span></h1>\n<span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在讨论红黑树的插入操作之前必须要明白，任何一个即将插入的新结点的初始颜色都为红色。这一点很容易理解，因为插入黑点会增加某条路径上黑结点的数目，从而导致整棵树黑高度的不平衡。但如果新结点的父结点为红色时（如下图所示），将会违反红黑树的性质：一条路径上不能出现相邻的两个红色结点。这时就需要通过一系列操作来使红黑树保持平衡。<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342082295_4867.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 为了清楚地表示插入操作以下在结点中使用“新”字表示一个新插入的结点；使用“父”字表示新插入点的父结点；使用“叔”字表示“父”结点的兄弟结点；使用“祖”字表示“父”结点的父结点。插入操作分为以下几种情况：<br><span style=\"color:#3333ff;\">1、黑父</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp; 如下图所示，如果新节点的父结点为黑色结点，那么插入一个红点将不会影响红黑树的平衡，此时插入操作完成。红黑树比AVL树优秀的地方之一在于黑父的情况比较常见，从而使红黑树需要旋转的几率相对AVL树来说会少一些。<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342082985_8252.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\"><span style=\"color:#3366ff;\">2、红父</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp; 如果新节点的父结点为红色，这时就需要进行一系列操作以保证整棵树红黑性质。如下图所示，由于父结点为红色，此时可以判定，祖父结点必定为黑色。这时需要根据叔父结点的颜色来决定做什么样的操作。青色结点表示颜色未知。由于有可能需要根结点到新点的路径上进行多次旋转操作，而每次进行不平衡判断的起始点（我们可将其视为新点）都不一样。所以我们在此使用一个蓝色箭头指向这个起始点，并称之为判定点。<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083075_5573.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\"><span style=\"color:#3333ff;\">2.1 红叔</span><br>\n当叔父结点为红色时，如下图所示，无需进行旋转操作，只要将父和叔结点变为黑色，将祖父结点变为红色即可。但由于祖父结点的父结点有可能为红色，从而违反红黑树性质。此时必须将祖父结点作为新的判定点继续向上（<span style=\"color:#ff0000;\"><strong>迭代</strong></span>）进行平衡操作。<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083201_9333.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">需要注意的是，无论“父节点”在“叔节点”的左边还是右边，无论“新节点”是“父节点”的左孩子还是右孩子，它们的操作都是完全一样的（其实这种情况包括4种，只需调整颜色，不需要旋转树形）。<br><span style=\"color:#3333ff;\">2.2 黑叔</span><br>\n当叔父结点为黑色时，需要进行旋转，以下图示了所有的旋转可能：<br>\nCase 1:<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083532_9981.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">Case 2:<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083571_7513.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">Case 3:<br></span>\n<div align=\"center\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083759_7035.jpg\"><br></div>\n<p><span style=\"font-family:Verdana;font-size:16px;\">Case 4:<br></span></p>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083770_6903.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以观察到，当旋转完成后，新的旋转根全部为黑色，此时不需要再向上回溯进行平衡操作，插入操作完成。需要注意，上面四张图的“叔”、“1”、“2”、“3”结点有可能为黑哨兵结点。<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其实红黑树的插入操作不是很难，甚至比AVL树的插入操作还更简单些。红黑树的插入操作源代码如下：<br></span><pre onclick=\"hljs.copyCode(event)\"><code class=\"language-cpp hljs\"><ol class=\"hljs-ln hundred\" style=\"width:920px\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 元素插入操作  insert_unique()</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 插入新值：节点键值不允许重复，若重复则插入无效</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 注意，返回值是个pair，第一个元素是个红黑树迭代器，指向新增节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 第二个元素表示插入成功与否</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">template</span>&lt;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Key</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Value</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">KeyOfValue</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Compare</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Alloc</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">pair</span>&lt;typename rb_tree&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::iterator , bool&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">rb_tree</span>&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::insert_unique(<span class=\"hljs-keyword\">const</span> Value &amp;v)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\trb_tree_node* y = header;    <span class=\"hljs-comment\">// 根节点root的父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\trb_tree_node* x = root();    <span class=\"hljs-comment\">// 从根节点开始</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">bool</span> comp = <span class=\"hljs-literal\">true</span>;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">while</span>(x != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\ty = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tcomp = key_compare(KeyOfValue()(v) , key(x));    <span class=\"hljs-comment\">// v键值小于目前节点之键值？</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx = comp ? left(x) : right(x);   <span class=\"hljs-comment\">// 遇“大”则往左，遇“小于或等于”则往右</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 离开while循环之后，y所指即插入点之父节点（此时的它必为叶节点）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\titerator j = iterator(y);     <span class=\"hljs-comment\">// 令迭代器j指向插入点之父节点y</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"20\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(comp)     <span class=\"hljs-comment\">// 如果离开while循环时comp为真（表示遇“大”，将插入于左侧）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"21\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"22\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">if</span>(j == begin())    <span class=\"hljs-comment\">// 如果插入点之父节点为最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"23\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(_insert(x , y , z) , <span class=\"hljs-literal\">true</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"24\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">else</span>     <span class=\"hljs-comment\">// 否则（插入点之父节点不为最左节点）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"25\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t--j;   <span class=\"hljs-comment\">// 调整j，回头准备测试</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"26\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"27\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(key_compare(key(j.node) , KeyOfValue()(v) ))</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"28\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-comment\">// 新键值不与既有节点之键值重复，于是以下执行安插操作</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"29\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(_insert(x , y , z) , <span class=\"hljs-literal\">true</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"30\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 以上，x为新值插入点，y为插入点之父节点，v为新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"31\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"32\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 进行至此，表示新值一定与树中键值重复，那么就不应该插入新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"33\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(j , <span class=\"hljs-literal\">false</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"34\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"35\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"36\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 真正地插入执行程序 _insert()</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"37\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">template</span>&lt;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Key</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Value</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">KeyOfValue</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Compare</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Alloc</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"38\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">typename</span>&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::_insert(base_ptr x_ , base_ptr y_ , <span class=\"hljs-keyword\">const</span> Value &amp;v)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"39\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"40\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 参数x_ 为新值插入点，参数y_为插入点之父节点，参数v为新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"41\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tlink_type x = (link_type) x_;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"42\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tlink_type y = (link_type) y_;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"43\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tlink_type z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"44\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"45\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// key_compare 是键值大小比较准则。应该会是个function object</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"46\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(y == header || x != <span class=\"hljs-number\">0</span> || key_compare(KeyOfValue()(v) , key(y) ))</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"47\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"48\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tz = create_node(v);    <span class=\"hljs-comment\">// 产生一个新节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"49\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tleft(y) = z;           <span class=\"hljs-comment\">// 这使得当y即为header时，leftmost() = z</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"50\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">if</span>(y == header)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"51\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"52\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\troot() = z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"53\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\trightmost() = z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"54\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"55\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(y == leftmost())     <span class=\"hljs-comment\">// 如果y为最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"56\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\tleftmost() = z;          <span class=\"hljs-comment\">// 维护leftmost()，使它永远指向最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"57\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"58\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"59\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"60\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tz = create_node(v);        <span class=\"hljs-comment\">// 产生一个新节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"61\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tright(y) = z;              <span class=\"hljs-comment\">// 令新节点成为插入点之父节点y的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"62\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">if</span>(y == rightmost())</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"63\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\trightmost() = z;       <span class=\"hljs-comment\">// 维护rightmost()，使它永远指向最右节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"64\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"65\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tparent(z) = y;      <span class=\"hljs-comment\">// 设定新节点的父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"66\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tleft(z) = <span class=\"hljs-number\">0</span>;        <span class=\"hljs-comment\">// 设定新节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"67\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tright(z) = <span class=\"hljs-number\">0</span>;       <span class=\"hljs-comment\">// 设定新节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"68\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 新节点的颜色将在_rb_tree_rebalance()设定（并调整）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"69\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t_rb_tree_rebalance(z , header-&gt;parent);      <span class=\"hljs-comment\">// 参数一为新增节点，参数二为根节点root</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"70\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t++node_count;       <span class=\"hljs-comment\">// 节点数累加</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"71\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">return</span> iterator(z);  <span class=\"hljs-comment\">// 返回一个迭代器，指向新增节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"72\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"73\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"74\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"75\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 全局函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"76\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 重新令树形平衡（改变颜色及旋转树形）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"77\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 参数一为新增节点，参数二为根节点root</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"78\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rebalance(_rb_tree_node_base* x , _rb_tree_node_base*&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"79\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"80\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;color = _rb_tree_red;    <span class=\"hljs-comment\">//新节点必为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"81\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">while</span>(x != root &amp;&amp; x-&gt;parent-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 父节点为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"82\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"83\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">if</span>(x-&gt;parent == x-&gt;parent-&gt;parent-&gt;left)      <span class=\"hljs-comment\">// 父节点为祖父节点之左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"84\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"85\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t_rb_tree_node_base* y = x-&gt;parent-&gt;parent-&gt;right;    <span class=\"hljs-comment\">// 令y为伯父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"86\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">if</span>(y &amp;&amp; y-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 伯父节点存在，且为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"87\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"88\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;color = _rb_tree_black;           <span class=\"hljs-comment\">// 更改父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"89\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\ty-&gt;color = _rb_tree_black;                   <span class=\"hljs-comment\">// 更改伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"90\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;     <span class=\"hljs-comment\">// 更改祖父节点为红色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"91\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx = x-&gt;parent-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"92\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"93\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">else</span>    <span class=\"hljs-comment\">// 无伯父节点，或伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"94\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"95\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t<span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;right)   <span class=\"hljs-comment\">// 如果新节点为父节点之右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"96\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"97\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t\tx = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"98\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t\t_rb_tree_rotate_left(x , root);    <span class=\"hljs-comment\">// 第一个参数为左旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"99\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"100\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;color = _rb_tree_black;     <span class=\"hljs-comment\">// 改变颜色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"101\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"102\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t_rb_tree_rotate_right(x-&gt;parent-&gt;parent , root);    <span class=\"hljs-comment\">// 第一个参数为右旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"103\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"104\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"105\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">else</span>          <span class=\"hljs-comment\">// 父节点为祖父节点之右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"106\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"107\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t_rb_tree_node_base* y = x-&gt;parent-&gt;parent-&gt;left;    <span class=\"hljs-comment\">// 令y为伯父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"108\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">if</span>(y &amp;&amp; y-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 有伯父节点，且为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"109\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"110\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;color = _rb_tree_black;           <span class=\"hljs-comment\">// 更改父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"111\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\ty-&gt;color = _rb_tree_black;                   <span class=\"hljs-comment\">// 更改伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"112\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;     <span class=\"hljs-comment\">// 更改祖父节点为红色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"113\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx = x-&gt;parent-&gt;parent;          <span class=\"hljs-comment\">// 准备继续往上层检查</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"114\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"115\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">else</span>    <span class=\"hljs-comment\">// 无伯父节点，或伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"116\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"117\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t<span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;left)        <span class=\"hljs-comment\">// 如果新节点为父节点之左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"118\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"119\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t\tx = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"120\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t\t_rb_tree_rotate_right(x , root);    <span class=\"hljs-comment\">// 第一个参数为右旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"121\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"122\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;color = _rb_tree_black;     <span class=\"hljs-comment\">// 改变颜色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"123\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"124\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t_rb_tree_rotate_left(x-&gt;parent-&gt;parent , root);    <span class=\"hljs-comment\">// 第一个参数为左旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"125\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"126\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"127\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}<span class=\"hljs-comment\">//while</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"128\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\troot-&gt;color = _rb_tree_black;    <span class=\"hljs-comment\">// 根节点永远为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"129\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"130\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"131\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"132\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 左旋函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"133\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rotate_left(_rb_tree_node_base* x , _rb_tree_node_base*&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"134\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"135\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// x 为旋转点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"136\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t_rb_tree_node_base* y = x-&gt;right;          <span class=\"hljs-comment\">// 令y为旋转点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"137\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;right = y-&gt;left;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"138\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(y-&gt;left != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"139\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\ty-&gt;left-&gt;parent = x;           <span class=\"hljs-comment\">// 别忘了回马枪设定父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"140\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\ty-&gt;parent = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"141\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"142\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 令y完全顶替x的地位（必须将x对其父节点的关系完全接收过来）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"143\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(x == root)    <span class=\"hljs-comment\">// x为根节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"144\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\troot = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"145\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;left)         <span class=\"hljs-comment\">// x为其父节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"146\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx-&gt;parent-&gt;left = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"147\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span>                                  <span class=\"hljs-comment\">// x为其父节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"148\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx-&gt;parent-&gt;right = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"149\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\ty-&gt;left = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"150\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;parent = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"151\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"152\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"153\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"154\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 右旋函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"155\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rotate_right(_rb_tree_node_base* x , _rb_tree_node_base*&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"156\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"157\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// x 为旋转点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"158\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t_rb_tree_node_base* y = x-&gt;left;          <span class=\"hljs-comment\">// 令y为旋转点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"159\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;left = y-&gt;right;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"160\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(y-&gt;right != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"161\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\ty-&gt;right-&gt;parent = x;           <span class=\"hljs-comment\">// 别忘了回马枪设定父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"162\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\ty-&gt;parent = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"163\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"164\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 令y完全顶替x的地位（必须将x对其父节点的关系完全接收过来）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"165\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(x == root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"166\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\troot = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"167\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;right)         <span class=\"hljs-comment\">// x为其父节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"168\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx-&gt;parent-&gt;right = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"169\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span>                                  <span class=\"hljs-comment\">// x为其父节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"170\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx-&gt;parent-&gt;left = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"171\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\ty-&gt;right = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"172\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;parent = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"173\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div>","source":"_posts/2018.07.18 红黑树.md","raw":"---\ntitle: 红黑树\ntags: 面试\ndate: 2018-07-18 15:31:31\n---\n原文地址：http://blog.csdn.net/hackbuteer1/article/details/7740956\n\n<span style=\"font-family:Verdana;color:rgb(255,0,0);font-size:24px;\">一、红黑树概述</span></strong></h1>\n<span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp; 红黑树和我们以前学过的AVL树类似，都是在进行插入和删除操作时通过特定操作保持二叉查找树的平衡，从而获得较高的查找性能。不过自从红黑树出来后，AVL树就被放到了博物馆里，据说是红黑树有更好的效率，更高的统计性能。这一点在我们了解了红黑树的实现原理后，就会有更加深切的体会。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 红黑树和AVL树的区别在于它使用颜色来标识结点的高度，它所追求的是局部平衡而不是AVL树中的非常严格的平衡。学过数据结构的人应该都已经领教过AVL树的复杂，但AVL树的复杂比起红黑树来说简直是小巫见大巫，红黑树才是真正的变态级数据结构。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 由于STL中的关联式容器默认的底层实现都是红黑树，因此红黑树对于后续学习STL源码还是很重要的，有必要掌握红黑树的实现原理和源码实现。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 红黑树是AVL树的变种，红黑树通过一些着色法则确保没有一条路径会比其它路径长出两倍，因而达到接近平衡的目的。所谓红黑树，不仅是一个二叉搜索树，而且必须满足一下规则：<br>\n&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:#3333ff;\">1、每个节点不是红色就是黑色。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 2、根节点为黑色。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 3、如果节点</span><span style=\"font-family:Verdana;color:#3333ff;font-size:16px;\">为红色，其子节点必须为黑色</span><span style=\"color:#3333ff;\">。<br>\n&nbsp;&nbsp;&nbsp;&nbsp; 4、任意一个节点到到NULL（树尾端）的任何路径，所含之黑色节点数必须相同。</span><br>\n上面的这些约束保证了这个树大致上是平衡的，这也决定了红黑树的插入、删除、查询等操作是比较快速的。 根据规则4，新增节点必须为红色；根据规则3，新增节点之父节点必须为黑色。当新<span style=\"font-family:Verdana;font-size:16px;\">增</span>节点根据二叉搜索树的规则到达其插入点时，却未能符合上述条件时，就必须调整颜色并旋转树形，如下图：<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342081846_5019.png\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">假设我们为上图分别插入节点3、8、35、75，根据二叉搜索树的规则，插入这四个节点后，我们会发现它们都破坏了红黑树的规则，因此我们必须调整树形，也就是旋转树形并改变节点的颜色。<br></span>\n<h1><a name=\"t1\"></a><span style=\"font-family:Verdana;font-size:16px;\"><span style=\"font-size:24px;\"><strong><span style=\"font-family:SimHei;color:#ff0000;\">二、红黑树上结点的插入</span></strong></span></span></h1>\n<span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在讨论红黑树的插入操作之前必须要明白，任何一个即将插入的新结点的初始颜色都为红色。这一点很容易理解，因为插入黑点会增加某条路径上黑结点的数目，从而导致整棵树黑高度的不平衡。但如果新结点的父结点为红色时（如下图所示），将会违反红黑树的性质：一条路径上不能出现相邻的两个红色结点。这时就需要通过一系列操作来使红黑树保持平衡。<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342082295_4867.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 为了清楚地表示插入操作以下在结点中使用“新”字表示一个新插入的结点；使用“父”字表示新插入点的父结点；使用“叔”字表示“父”结点的兄弟结点；使用“祖”字表示“父”结点的父结点。插入操作分为以下几种情况：<br><span style=\"color:#3333ff;\">1、黑父</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp; 如下图所示，如果新节点的父结点为黑色结点，那么插入一个红点将不会影响红黑树的平衡，此时插入操作完成。红黑树比AVL树优秀的地方之一在于黑父的情况比较常见，从而使红黑树需要旋转的几率相对AVL树来说会少一些。<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342082985_8252.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\"><span style=\"color:#3366ff;\">2、红父</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp; 如果新节点的父结点为红色，这时就需要进行一系列操作以保证整棵树红黑性质。如下图所示，由于父结点为红色，此时可以判定，祖父结点必定为黑色。这时需要根据叔父结点的颜色来决定做什么样的操作。青色结点表示颜色未知。由于有可能需要根结点到新点的路径上进行多次旋转操作，而每次进行不平衡判断的起始点（我们可将其视为新点）都不一样。所以我们在此使用一个蓝色箭头指向这个起始点，并称之为判定点。<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083075_5573.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\"><span style=\"color:#3333ff;\">2.1 红叔</span><br>\n当叔父结点为红色时，如下图所示，无需进行旋转操作，只要将父和叔结点变为黑色，将祖父结点变为红色即可。但由于祖父结点的父结点有可能为红色，从而违反红黑树性质。此时必须将祖父结点作为新的判定点继续向上（<span style=\"color:#ff0000;\"><strong>迭代</strong></span>）进行平衡操作。<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083201_9333.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">需要注意的是，无论“父节点”在“叔节点”的左边还是右边，无论“新节点”是“父节点”的左孩子还是右孩子，它们的操作都是完全一样的（其实这种情况包括4种，只需调整颜色，不需要旋转树形）。<br><span style=\"color:#3333ff;\">2.2 黑叔</span><br>\n当叔父结点为黑色时，需要进行旋转，以下图示了所有的旋转可能：<br>\nCase 1:<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083532_9981.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">Case 2:<br></span>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083571_7513.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">Case 3:<br></span>\n<div align=\"center\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083759_7035.jpg\"><br></div>\n<p><span style=\"font-family:Verdana;font-size:16px;\">Case 4:<br></span></p>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083770_6903.jpg\"></span><br></div>\n<span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以观察到，当旋转完成后，新的旋转根全部为黑色，此时不需要再向上回溯进行平衡操作，插入操作完成。需要注意，上面四张图的“叔”、“1”、“2”、“3”结点有可能为黑哨兵结点。<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其实红黑树的插入操作不是很难，甚至比AVL树的插入操作还更简单些。红黑树的插入操作源代码如下：<br></span><pre onclick=\"hljs.copyCode(event)\"><code class=\"language-cpp hljs\"><ol class=\"hljs-ln hundred\" style=\"width:920px\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 元素插入操作  insert_unique()</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 插入新值：节点键值不允许重复，若重复则插入无效</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 注意，返回值是个pair，第一个元素是个红黑树迭代器，指向新增节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 第二个元素表示插入成功与否</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">template</span>&lt;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Key</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Value</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">KeyOfValue</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Compare</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Alloc</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">pair</span>&lt;typename rb_tree&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::iterator , bool&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">rb_tree</span>&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::insert_unique(<span class=\"hljs-keyword\">const</span> Value &amp;v)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\trb_tree_node* y = header;    <span class=\"hljs-comment\">// 根节点root的父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\trb_tree_node* x = root();    <span class=\"hljs-comment\">// 从根节点开始</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">bool</span> comp = <span class=\"hljs-literal\">true</span>;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">while</span>(x != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\ty = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tcomp = key_compare(KeyOfValue()(v) , key(x));    <span class=\"hljs-comment\">// v键值小于目前节点之键值？</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx = comp ? left(x) : right(x);   <span class=\"hljs-comment\">// 遇“大”则往左，遇“小于或等于”则往右</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 离开while循环之后，y所指即插入点之父节点（此时的它必为叶节点）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\titerator j = iterator(y);     <span class=\"hljs-comment\">// 令迭代器j指向插入点之父节点y</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"20\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(comp)     <span class=\"hljs-comment\">// 如果离开while循环时comp为真（表示遇“大”，将插入于左侧）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"21\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"22\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">if</span>(j == begin())    <span class=\"hljs-comment\">// 如果插入点之父节点为最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"23\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(_insert(x , y , z) , <span class=\"hljs-literal\">true</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"24\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">else</span>     <span class=\"hljs-comment\">// 否则（插入点之父节点不为最左节点）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"25\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t--j;   <span class=\"hljs-comment\">// 调整j，回头准备测试</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"26\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"27\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(key_compare(key(j.node) , KeyOfValue()(v) ))</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"28\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-comment\">// 新键值不与既有节点之键值重复，于是以下执行安插操作</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"29\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(_insert(x , y , z) , <span class=\"hljs-literal\">true</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"30\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 以上，x为新值插入点，y为插入点之父节点，v为新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"31\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"32\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 进行至此，表示新值一定与树中键值重复，那么就不应该插入新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"33\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(j , <span class=\"hljs-literal\">false</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"34\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"35\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"36\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 真正地插入执行程序 _insert()</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"37\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">template</span>&lt;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Key</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Value</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">KeyOfValue</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Compare</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Alloc</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"38\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">typename</span>&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::_insert(base_ptr x_ , base_ptr y_ , <span class=\"hljs-keyword\">const</span> Value &amp;v)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"39\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"40\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 参数x_ 为新值插入点，参数y_为插入点之父节点，参数v为新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"41\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tlink_type x = (link_type) x_;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"42\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tlink_type y = (link_type) y_;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"43\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tlink_type z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"44\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"45\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// key_compare 是键值大小比较准则。应该会是个function object</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"46\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(y == header || x != <span class=\"hljs-number\">0</span> || key_compare(KeyOfValue()(v) , key(y) ))</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"47\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"48\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tz = create_node(v);    <span class=\"hljs-comment\">// 产生一个新节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"49\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tleft(y) = z;           <span class=\"hljs-comment\">// 这使得当y即为header时，leftmost() = z</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"50\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">if</span>(y == header)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"51\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"52\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\troot() = z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"53\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\trightmost() = z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"54\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"55\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(y == leftmost())     <span class=\"hljs-comment\">// 如果y为最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"56\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\tleftmost() = z;          <span class=\"hljs-comment\">// 维护leftmost()，使它永远指向最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"57\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"58\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"59\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"60\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tz = create_node(v);        <span class=\"hljs-comment\">// 产生一个新节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"61\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tright(y) = z;              <span class=\"hljs-comment\">// 令新节点成为插入点之父节点y的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"62\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">if</span>(y == rightmost())</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"63\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\trightmost() = z;       <span class=\"hljs-comment\">// 维护rightmost()，使它永远指向最右节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"64\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"65\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tparent(z) = y;      <span class=\"hljs-comment\">// 设定新节点的父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"66\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tleft(z) = <span class=\"hljs-number\">0</span>;        <span class=\"hljs-comment\">// 设定新节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"67\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tright(z) = <span class=\"hljs-number\">0</span>;       <span class=\"hljs-comment\">// 设定新节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"68\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 新节点的颜色将在_rb_tree_rebalance()设定（并调整）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"69\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t_rb_tree_rebalance(z , header-&gt;parent);      <span class=\"hljs-comment\">// 参数一为新增节点，参数二为根节点root</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"70\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t++node_count;       <span class=\"hljs-comment\">// 节点数累加</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"71\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">return</span> iterator(z);  <span class=\"hljs-comment\">// 返回一个迭代器，指向新增节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"72\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"73\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"74\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"75\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 全局函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"76\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 重新令树形平衡（改变颜色及旋转树形）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"77\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 参数一为新增节点，参数二为根节点root</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"78\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rebalance(_rb_tree_node_base* x , _rb_tree_node_base*&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"79\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"80\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;color = _rb_tree_red;    <span class=\"hljs-comment\">//新节点必为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"81\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">while</span>(x != root &amp;&amp; x-&gt;parent-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 父节点为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"82\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"83\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">if</span>(x-&gt;parent == x-&gt;parent-&gt;parent-&gt;left)      <span class=\"hljs-comment\">// 父节点为祖父节点之左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"84\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"85\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t_rb_tree_node_base* y = x-&gt;parent-&gt;parent-&gt;right;    <span class=\"hljs-comment\">// 令y为伯父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"86\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">if</span>(y &amp;&amp; y-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 伯父节点存在，且为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"87\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"88\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;color = _rb_tree_black;           <span class=\"hljs-comment\">// 更改父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"89\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\ty-&gt;color = _rb_tree_black;                   <span class=\"hljs-comment\">// 更改伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"90\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;     <span class=\"hljs-comment\">// 更改祖父节点为红色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"91\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx = x-&gt;parent-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"92\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"93\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">else</span>    <span class=\"hljs-comment\">// 无伯父节点，或伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"94\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"95\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t<span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;right)   <span class=\"hljs-comment\">// 如果新节点为父节点之右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"96\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"97\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t\tx = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"98\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t\t_rb_tree_rotate_left(x , root);    <span class=\"hljs-comment\">// 第一个参数为左旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"99\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"100\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;color = _rb_tree_black;     <span class=\"hljs-comment\">// 改变颜色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"101\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"102\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t_rb_tree_rotate_right(x-&gt;parent-&gt;parent , root);    <span class=\"hljs-comment\">// 第一个参数为右旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"103\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"104\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"105\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t<span class=\"hljs-keyword\">else</span>          <span class=\"hljs-comment\">// 父节点为祖父节点之右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"106\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"107\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t_rb_tree_node_base* y = x-&gt;parent-&gt;parent-&gt;left;    <span class=\"hljs-comment\">// 令y为伯父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"108\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">if</span>(y &amp;&amp; y-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 有伯父节点，且为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"109\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"110\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;color = _rb_tree_black;           <span class=\"hljs-comment\">// 更改父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"111\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\ty-&gt;color = _rb_tree_black;                   <span class=\"hljs-comment\">// 更改伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"112\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;     <span class=\"hljs-comment\">// 更改祖父节点为红色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"113\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx = x-&gt;parent-&gt;parent;          <span class=\"hljs-comment\">// 准备继续往上层检查</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"114\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"115\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t<span class=\"hljs-keyword\">else</span>    <span class=\"hljs-comment\">// 无伯父节点，或伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"116\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"117\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t<span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;left)        <span class=\"hljs-comment\">// 如果新节点为父节点之左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"118\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"119\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t\tx = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"120\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t\t_rb_tree_rotate_right(x , root);    <span class=\"hljs-comment\">// 第一个参数为右旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"121\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"122\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;color = _rb_tree_black;     <span class=\"hljs-comment\">// 改变颜色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"123\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\tx-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"124\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t\t_rb_tree_rotate_left(x-&gt;parent-&gt;parent , root);    <span class=\"hljs-comment\">// 第一个参数为左旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"125\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"126\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\t}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"127\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t}<span class=\"hljs-comment\">//while</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"128\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\troot-&gt;color = _rb_tree_black;    <span class=\"hljs-comment\">// 根节点永远为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"129\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"130\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"131\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"132\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 左旋函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"133\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rotate_left(_rb_tree_node_base* x , _rb_tree_node_base*&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"134\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"135\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// x 为旋转点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"136\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t_rb_tree_node_base* y = x-&gt;right;          <span class=\"hljs-comment\">// 令y为旋转点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"137\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;right = y-&gt;left;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"138\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(y-&gt;left != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"139\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\ty-&gt;left-&gt;parent = x;           <span class=\"hljs-comment\">// 别忘了回马枪设定父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"140\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\ty-&gt;parent = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"141\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"142\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 令y完全顶替x的地位（必须将x对其父节点的关系完全接收过来）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"143\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(x == root)    <span class=\"hljs-comment\">// x为根节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"144\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\troot = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"145\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;left)         <span class=\"hljs-comment\">// x为其父节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"146\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx-&gt;parent-&gt;left = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"147\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span>                                  <span class=\"hljs-comment\">// x为其父节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"148\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx-&gt;parent-&gt;right = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"149\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\ty-&gt;left = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"150\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;parent = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"151\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"152\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"153\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"154\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 右旋函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"155\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rotate_right(_rb_tree_node_base* x , _rb_tree_node_base*&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"156\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"157\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// x 为旋转点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"158\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t_rb_tree_node_base* y = x-&gt;left;          <span class=\"hljs-comment\">// 令y为旋转点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"159\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;left = y-&gt;right;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"160\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(y-&gt;right != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"161\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\ty-&gt;right-&gt;parent = x;           <span class=\"hljs-comment\">// 别忘了回马枪设定父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"162\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\ty-&gt;parent = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"163\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"164\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-comment\">// 令y完全顶替x的地位（必须将x对其父节点的关系完全接收过来）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"165\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">if</span>(x == root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"166\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\troot = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"167\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;right)         <span class=\"hljs-comment\">// x为其父节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"168\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx-&gt;parent-&gt;right = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"169\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t<span class=\"hljs-keyword\">else</span>                                  <span class=\"hljs-comment\">// x为其父节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"170\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\t\tx-&gt;parent-&gt;left = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"171\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\ty-&gt;right = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"172\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">\tx-&gt;parent = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"173\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div>","slug":"红黑树","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcj002ddcyuxz7q98db","content":"<p>原文地址：<a href=\"http://blog.csdn.net/hackbuteer1/article/details/7740956\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/hackbuteer1/article/details/7740956</a></p>\n<p><span style=\"font-family:Verdana;color:rgb(255,0,0);font-size:24px;\">一、红黑树概述</span><br><span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp; 红黑树和我们以前学过的AVL树类似，都是在进行插入和删除操作时通过特定操作保持二叉查找树的平衡，从而获得较高的查找性能。不过自从红黑树出来后，AVL树就被放到了博物馆里，据说是红黑树有更好的效率，更高的统计性能。这一点在我们了解了红黑树的实现原理后，就会有更加深切的体会。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 红黑树和AVL树的区别在于它使用颜色来标识结点的高度，它所追求的是局部平衡而不是AVL树中的非常严格的平衡。学过数据结构的人应该都已经领教过AVL树的复杂，但AVL树的复杂比起红黑树来说简直是小巫见大巫，红黑树才是真正的变态级数据结构。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 由于STL中的关联式容器默认的底层实现都是红黑树，因此红黑树对于后续学习STL源码还是很重要的，有必要掌握红黑树的实现原理和源码实现。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 红黑树是AVL树的变种，红黑树通过一些着色法则确保没有一条路径会比其它路径长出两倍，因而达到接近平衡的目的。所谓红黑树，不仅是一个二叉搜索树，而且必须满足一下规则：<br><br>&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:#3333ff;\">1、每个节点不是红色就是黑色。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 2、根节点为黑色。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 3、如果节点</span><span style=\"font-family:Verdana;color:#3333ff;font-size:16px;\">为红色，其子节点必须为黑色</span><span style=\"color:#3333ff;\">。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 4、任意一个节点到到NULL（树尾端）的任何路径，所含之黑色节点数必须相同。</span><br><br>上面的这些约束保证了这个树大致上是平衡的，这也决定了红黑树的插入、删除、查询等操作是比较快速的。 根据规则4，新增节点必须为红色；根据规则3，新增节点之父节点必须为黑色。当新<span style=\"font-family:Verdana;font-size:16px;\">增</span>节点根据二叉搜索树的规则到达其插入点时，却未能符合上述条件时，就必须调整颜色并旋转树形，如下图：<br></span></p>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342081846_5019.png\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">假设我们为上图分别插入节点3、8、35、75，根据二叉搜索树的规则，插入这四个节点后，我们会发现它们都破坏了红黑树的规则，因此我们必须调整树形，也就是旋转树形并改变节点的颜色。<br></span><br><h1><a name=\"t1\"></a><span style=\"font-family:Verdana;font-size:16px;\"><span style=\"font-size:24px;\"><strong><span style=\"font-family:SimHei;color:#ff0000;\">二、红黑树上结点的插入</span></strong></span></span></h1><br><span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在讨论红黑树的插入操作之前必须要明白，任何一个即将插入的新结点的初始颜色都为红色。这一点很容易理解，因为插入黑点会增加某条路径上黑结点的数目，从而导致整棵树黑高度的不平衡。但如果新结点的父结点为红色时（如下图所示），将会违反红黑树的性质：一条路径上不能出现相邻的两个红色结点。这时就需要通过一系列操作来使红黑树保持平衡。<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342082295_4867.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 为了清楚地表示插入操作以下在结点中使用“新”字表示一个新插入的结点；使用“父”字表示新插入点的父结点；使用“叔”字表示“父”结点的兄弟结点；使用“祖”字表示“父”结点的父结点。插入操作分为以下几种情况：<br><span style=\"color:#3333ff;\">1、黑父</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp; 如下图所示，如果新节点的父结点为黑色结点，那么插入一个红点将不会影响红黑树的平衡，此时插入操作完成。红黑树比AVL树优秀的地方之一在于黑父的情况比较常见，从而使红黑树需要旋转的几率相对AVL树来说会少一些。<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342082985_8252.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\"><span style=\"color:#3366ff;\">2、红父</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp; 如果新节点的父结点为红色，这时就需要进行一系列操作以保证整棵树红黑性质。如下图所示，由于父结点为红色，此时可以判定，祖父结点必定为黑色。这时需要根据叔父结点的颜色来决定做什么样的操作。青色结点表示颜色未知。由于有可能需要根结点到新点的路径上进行多次旋转操作，而每次进行不平衡判断的起始点（我们可将其视为新点）都不一样。所以我们在此使用一个蓝色箭头指向这个起始点，并称之为判定点。<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083075_5573.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\"><span style=\"color:#3333ff;\">2.1 红叔</span><br><br>当叔父结点为红色时，如下图所示，无需进行旋转操作，只要将父和叔结点变为黑色，将祖父结点变为红色即可。但由于祖父结点的父结点有可能为红色，从而违反红黑树性质。此时必须将祖父结点作为新的判定点继续向上（<span style=\"color:#ff0000;\"><strong>迭代</strong></span>）进行平衡操作。<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083201_9333.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">需要注意的是，无论“父节点”在“叔节点”的左边还是右边，无论“新节点”是“父节点”的左孩子还是右孩子，它们的操作都是完全一样的（其实这种情况包括4种，只需调整颜色，不需要旋转树形）。<br><span style=\"color:#3333ff;\">2.2 黑叔</span><br><br>当叔父结点为黑色时，需要进行旋转，以下图示了所有的旋转可能：<br><br>Case 1:<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083532_9981.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">Case 2:<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083571_7513.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">Case 3:<br></span><br><div align=\"center\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083759_7035.jpg\"><br></div><br><p><span style=\"font-family:Verdana;font-size:16px;\">Case 4:<br></span></p><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083770_6903.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以观察到，当旋转完成后，新的旋转根全部为黑色，此时不需要再向上回溯进行平衡操作，插入操作完成。需要注意，上面四张图的“叔”、“1”、“2”、“3”结点有可能为黑哨兵结点。<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其实红黑树的插入操作不是很难，甚至比AVL树的插入操作还更简单些。红黑树的插入操作源代码如下：<br></span><pre onclick=\"hljs.copyCode(event)\"><code class=\"language-cpp hljs\"><ol class=\"hljs-ln hundred\" style=\"width:920px\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 元素插入操作  insert_unique()</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 插入新值：节点键值不允许重复，若重复则插入无效</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 注意，返回值是个pair，第一个元素是个红黑树迭代器，指向新增节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 第二个元素表示插入成功与否</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">template</span>&lt;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Key</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Value</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">KeyOfValue</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Compare</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Alloc</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">pair</span>&lt;typename rb_tree&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::iterator , bool&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">rb_tree</span>&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::insert_unique(<span class=\"hljs-keyword\">const</span> Value &amp;v)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    rb_tree_node<em> y = header;    <span class=\"hljs-comment\">// 根节点root的父节点</span></em></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    rb_tree_node x = root();    <span class=\"hljs-comment\">// 从根节点开始</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">bool</span> comp = <span class=\"hljs-literal\">true</span>;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">while</span>(x != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        y = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        comp = key_compare(KeyOfValue()(v) , key(x));    <span class=\"hljs-comment\">// v键值小于目前节点之键值？</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x = comp ? left(x) : right(x);   <span class=\"hljs-comment\">// 遇“大”则往左，遇“小于或等于”则往右</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 离开while循环之后，y所指即插入点之父节点（此时的它必为叶节点）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    iterator j = iterator(y);     <span class=\"hljs-comment\">// 令迭代器j指向插入点之父节点y</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"20\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(comp)     <span class=\"hljs-comment\">// 如果离开while循环时comp为真（表示遇“大”，将插入于左侧）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"21\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"22\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span>(j == begin())    <span class=\"hljs-comment\">// 如果插入点之父节点为最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"23\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(_insert(x , y , z) , <span class=\"hljs-literal\">true</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"24\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">else</span>     <span class=\"hljs-comment\">// 否则（插入点之父节点不为最左节点）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"25\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            –j;   <span class=\"hljs-comment\">// 调整j，回头准备测试</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"26\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"27\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(key_compare(key(j.node) , KeyOfValue()(v) ))</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"28\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-comment\">// 新键值不与既有节点之键值重复，于是以下执行安插操作</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"29\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(_insert(x , y , z) , <span class=\"hljs-literal\">true</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"30\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 以上，x为新值插入点，y为插入点之父节点，v为新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"31\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"32\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 进行至此，表示新值一定与树中键值重复，那么就不应该插入新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"33\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(j , <span class=\"hljs-literal\">false</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"34\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"35\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"36\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 真正地插入执行程序 _insert()</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"37\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">template</span>&lt;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Key</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Value</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">KeyOfValue</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Compare</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Alloc</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"38\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">typename</span>&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::_insert(base_ptr x_ , base_ptr y_ , <span class=\"hljs-keyword\">const</span> Value &amp;v)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"39\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"40\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 参数x_ 为新值插入点，参数y_为插入点之父节点，参数v为新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"41\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    link_type x = (link_type) x_;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"42\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    link_type y = (link_type) y_;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"43\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    link_type z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"44\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"45\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// key_compare 是键值大小比较准则。应该会是个function object</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"46\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(y == header || x != <span class=\"hljs-number\">0</span> || key_compare(KeyOfValue()(v) , key(y) ))</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"47\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"48\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        z = create_node(v);    <span class=\"hljs-comment\">// 产生一个新节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"49\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        left(y) = z;           <span class=\"hljs-comment\">// 这使得当y即为header时，leftmost() = z</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"50\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span>(y == header)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"51\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"52\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            root() = z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"53\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            rightmost() = z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"54\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"55\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(y == leftmost())     <span class=\"hljs-comment\">// 如果y为最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"56\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            leftmost() = z;          <span class=\"hljs-comment\">// 维护leftmost()，使它永远指向最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"57\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"58\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"59\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"60\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        z = create_node(v);        <span class=\"hljs-comment\">// 产生一个新节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"61\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        right(y) = z;              <span class=\"hljs-comment\">// 令新节点成为插入点之父节点y的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"62\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span>(y == rightmost())</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"63\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            rightmost() = z;       <span class=\"hljs-comment\">// 维护rightmost()，使它永远指向最右节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"64\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"65\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    parent(z) = y;      <span class=\"hljs-comment\">// 设定新节点的父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"66\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    left(z) = <span class=\"hljs-number\">0</span>;        <span class=\"hljs-comment\">// 设定新节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"67\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    right(z) = <span class=\"hljs-number\">0</span>;       <span class=\"hljs-comment\">// 设定新节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"68\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 新节点的颜色将在_rb_tree_rebalance()设定（并调整）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"69\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    _rb_tree_rebalance(z , header-&gt;parent);      <span class=\"hljs-comment\">// 参数一为新增节点，参数二为根节点root</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"70\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    ++node_count;       <span class=\"hljs-comment\">// 节点数累加</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"71\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">return</span> iterator(z);  <span class=\"hljs-comment\">// 返回一个迭代器，指向新增节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"72\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"73\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"74\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"75\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 全局函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"76\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 重新令树形平衡（改变颜色及旋转树形）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"77\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 参数一为新增节点，参数二为根节点root</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"78\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rebalance(_rb_tree_node_base<em> x , _rb_tree_node_base</em>&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"79\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"80\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;color = _rb_tree_red;    <span class=\"hljs-comment\">//新节点必为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"81\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">while</span>(x != root &amp;&amp; x-&gt;parent-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 父节点为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"82\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"83\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span>(x-&gt;parent == x-&gt;parent-&gt;parent-&gt;left)      <span class=\"hljs-comment\">// 父节点为祖父节点之左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"84\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"85\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            _rb_tree_node_base<em> y = x-&gt;parent-&gt;parent-&gt;right;    <span class=\"hljs-comment\">// 令y为伯父节点</span></em></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"86\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">if</span>(y &amp;&amp; y-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 伯父节点存在，且为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"87\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"88\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;color = _rb_tree_black;           <span class=\"hljs-comment\">// 更改父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"89\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                y-&gt;color = _rb_tree_black;                   <span class=\"hljs-comment\">// 更改伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"90\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;     <span class=\"hljs-comment\">// 更改祖父节点为红色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"91\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x = x-&gt;parent-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"92\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"93\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">else</span>    <span class=\"hljs-comment\">// 无伯父节点，或伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"94\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"95\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;right)   <span class=\"hljs-comment\">// 如果新节点为父节点之右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"96\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"97\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    x = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"98\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    _rb_tree_rotate_left(x , root);    <span class=\"hljs-comment\">// 第一个参数为左旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"99\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"100\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;color = _rb_tree_black;     <span class=\"hljs-comment\">// 改变颜色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"101\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"102\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                _rb_tree_rotate_right(x-&gt;parent-&gt;parent , root);    <span class=\"hljs-comment\">// 第一个参数为右旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"103\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"104\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"105\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">else</span>          <span class=\"hljs-comment\">// 父节点为祖父节点之右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"106\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"107\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            _rb_tree_node_base y = x-&gt;parent-&gt;parent-&gt;left;    <span class=\"hljs-comment\">// 令y为伯父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"108\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">if</span>(y &amp;&amp; y-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 有伯父节点，且为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"109\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"110\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;color = _rb_tree_black;           <span class=\"hljs-comment\">// 更改父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"111\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                y-&gt;color = _rb_tree_black;                   <span class=\"hljs-comment\">// 更改伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"112\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;     <span class=\"hljs-comment\">// 更改祖父节点为红色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"113\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x = x-&gt;parent-&gt;parent;          <span class=\"hljs-comment\">// 准备继续往上层检查</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"114\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"115\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">else</span>    <span class=\"hljs-comment\">// 无伯父节点，或伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"116\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"117\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;left)        <span class=\"hljs-comment\">// 如果新节点为父节点之左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"118\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"119\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    x = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"120\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    _rb_tree_rotate_right(x , root);    <span class=\"hljs-comment\">// 第一个参数为右旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"121\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"122\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;color = _rb_tree_black;     <span class=\"hljs-comment\">// 改变颜色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"123\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"124\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                _rb_tree_rotate_left(x-&gt;parent-&gt;parent , root);    <span class=\"hljs-comment\">// 第一个参数为左旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"125\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"126\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"127\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }<span class=\"hljs-comment\">//while</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"128\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    root-&gt;color = _rb_tree_black;    <span class=\"hljs-comment\">// 根节点永远为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"129\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"130\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"131\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"132\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 左旋函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"133\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rotate_left(_rb_tree_node_base<em> x , _rb_tree_node_base</em>&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"134\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"135\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// x 为旋转点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"136\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    _rb_tree_node_base<em> y = x-&gt;right;          <span class=\"hljs-comment\">// 令y为旋转点的右子节点</span></em></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"137\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;right = y-&gt;left;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"138\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(y-&gt;left != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"139\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        y-&gt;left-&gt;parent = x;           <span class=\"hljs-comment\">// 别忘了回马枪设定父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"140\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    y-&gt;parent = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"141\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"142\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 令y完全顶替x的地位（必须将x对其父节点的关系完全接收过来）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"143\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(x == root)    <span class=\"hljs-comment\">// x为根节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"144\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        root = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"145\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;left)         <span class=\"hljs-comment\">// x为其父节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"146\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x-&gt;parent-&gt;left = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"147\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span>                                  <span class=\"hljs-comment\">// x为其父节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"148\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x-&gt;parent-&gt;right = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"149\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    y-&gt;left = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"150\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;parent = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"151\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"152\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"153\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"154\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 右旋函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"155\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rotate_right(_rb_tree_node_base x , _rb_tree_node_base<em>&amp; root)</em></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"156\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"157\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// x 为旋转点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"158\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    _rb_tree_node_base y = x-&gt;left;          <span class=\"hljs-comment\">// 令y为旋转点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"159\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;left = y-&gt;right;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"160\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(y-&gt;right != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"161\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        y-&gt;right-&gt;parent = x;           <span class=\"hljs-comment\">// 别忘了回马枪设定父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"162\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    y-&gt;parent = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"163\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"164\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 令y完全顶替x的地位（必须将x对其父节点的关系完全接收过来）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"165\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(x == root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"166\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        root = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"167\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;right)         <span class=\"hljs-comment\">// x为其父节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"168\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x-&gt;parent-&gt;right = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"169\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span>                                  <span class=\"hljs-comment\">// x为其父节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"170\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x-&gt;parent-&gt;left = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"171\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    y-&gt;right = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"172\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;parent = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"173\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li></ol></code></pre>","site":{"data":{}},"excerpt":"","more":"<p>原文地址：<a href=\"http://blog.csdn.net/hackbuteer1/article/details/7740956\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/hackbuteer1/article/details/7740956</a></p>\n<p><span style=\"font-family:Verdana;color:rgb(255,0,0);font-size:24px;\">一、红黑树概述</span><br><span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp; 红黑树和我们以前学过的AVL树类似，都是在进行插入和删除操作时通过特定操作保持二叉查找树的平衡，从而获得较高的查找性能。不过自从红黑树出来后，AVL树就被放到了博物馆里，据说是红黑树有更好的效率，更高的统计性能。这一点在我们了解了红黑树的实现原理后，就会有更加深切的体会。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 红黑树和AVL树的区别在于它使用颜色来标识结点的高度，它所追求的是局部平衡而不是AVL树中的非常严格的平衡。学过数据结构的人应该都已经领教过AVL树的复杂，但AVL树的复杂比起红黑树来说简直是小巫见大巫，红黑树才是真正的变态级数据结构。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 由于STL中的关联式容器默认的底层实现都是红黑树，因此红黑树对于后续学习STL源码还是很重要的，有必要掌握红黑树的实现原理和源码实现。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 红黑树是AVL树的变种，红黑树通过一些着色法则确保没有一条路径会比其它路径长出两倍，因而达到接近平衡的目的。所谓红黑树，不仅是一个二叉搜索树，而且必须满足一下规则：<br><br>&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:#3333ff;\">1、每个节点不是红色就是黑色。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 2、根节点为黑色。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 3、如果节点</span><span style=\"font-family:Verdana;color:#3333ff;font-size:16px;\">为红色，其子节点必须为黑色</span><span style=\"color:#3333ff;\">。<br><br>&nbsp;&nbsp;&nbsp;&nbsp; 4、任意一个节点到到NULL（树尾端）的任何路径，所含之黑色节点数必须相同。</span><br><br>上面的这些约束保证了这个树大致上是平衡的，这也决定了红黑树的插入、删除、查询等操作是比较快速的。 根据规则4，新增节点必须为红色；根据规则3，新增节点之父节点必须为黑色。当新<span style=\"font-family:Verdana;font-size:16px;\">增</span>节点根据二叉搜索树的规则到达其插入点时，却未能符合上述条件时，就必须调整颜色并旋转树形，如下图：<br></span></p>\n<div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342081846_5019.png\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">假设我们为上图分别插入节点3、8、35、75，根据二叉搜索树的规则，插入这四个节点后，我们会发现它们都破坏了红黑树的规则，因此我们必须调整树形，也就是旋转树形并改变节点的颜色。<br></span><br><h1><a name=\"t1\"></a><span style=\"font-family:Verdana;font-size:16px;\"><span style=\"font-size:24px;\"><strong><span style=\"font-family:SimHei;color:#ff0000;\">二、红黑树上结点的插入</span></strong></span></span></h1><br><span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在讨论红黑树的插入操作之前必须要明白，任何一个即将插入的新结点的初始颜色都为红色。这一点很容易理解，因为插入黑点会增加某条路径上黑结点的数目，从而导致整棵树黑高度的不平衡。但如果新结点的父结点为红色时（如下图所示），将会违反红黑树的性质：一条路径上不能出现相邻的两个红色结点。这时就需要通过一系列操作来使红黑树保持平衡。<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342082295_4867.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 为了清楚地表示插入操作以下在结点中使用“新”字表示一个新插入的结点；使用“父”字表示新插入点的父结点；使用“叔”字表示“父”结点的兄弟结点；使用“祖”字表示“父”结点的父结点。插入操作分为以下几种情况：<br><span style=\"color:#3333ff;\">1、黑父</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp; 如下图所示，如果新节点的父结点为黑色结点，那么插入一个红点将不会影响红黑树的平衡，此时插入操作完成。红黑树比AVL树优秀的地方之一在于黑父的情况比较常见，从而使红黑树需要旋转的几率相对AVL树来说会少一些。<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342082985_8252.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\"><span style=\"color:#3366ff;\">2、红父</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp; 如果新节点的父结点为红色，这时就需要进行一系列操作以保证整棵树红黑性质。如下图所示，由于父结点为红色，此时可以判定，祖父结点必定为黑色。这时需要根据叔父结点的颜色来决定做什么样的操作。青色结点表示颜色未知。由于有可能需要根结点到新点的路径上进行多次旋转操作，而每次进行不平衡判断的起始点（我们可将其视为新点）都不一样。所以我们在此使用一个蓝色箭头指向这个起始点，并称之为判定点。<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083075_5573.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\"><span style=\"color:#3333ff;\">2.1 红叔</span><br><br>当叔父结点为红色时，如下图所示，无需进行旋转操作，只要将父和叔结点变为黑色，将祖父结点变为红色即可。但由于祖父结点的父结点有可能为红色，从而违反红黑树性质。此时必须将祖父结点作为新的判定点继续向上（<span style=\"color:#ff0000;\"><strong>迭代</strong></span>）进行平衡操作。<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083201_9333.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">需要注意的是，无论“父节点”在“叔节点”的左边还是右边，无论“新节点”是“父节点”的左孩子还是右孩子，它们的操作都是完全一样的（其实这种情况包括4种，只需调整颜色，不需要旋转树形）。<br><span style=\"color:#3333ff;\">2.2 黑叔</span><br><br>当叔父结点为黑色时，需要进行旋转，以下图示了所有的旋转可能：<br><br>Case 1:<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083532_9981.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">Case 2:<br></span><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083571_7513.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">Case 3:<br></span><br><div align=\"center\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083759_7035.jpg\"><br></div><br><p><span style=\"font-family:Verdana;font-size:16px;\">Case 4:<br></span></p><br><div align=\"center\"><span style=\"font-family:Verdana;font-size:16px;\"><img alt=\"\" src=\"http://my.csdn.net/uploads/201207/12/1342083770_6903.jpg\"></span><br></div><br><span style=\"font-family:Verdana;font-size:16px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以观察到，当旋转完成后，新的旋转根全部为黑色，此时不需要再向上回溯进行平衡操作，插入操作完成。需要注意，上面四张图的“叔”、“1”、“2”、“3”结点有可能为黑哨兵结点。<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其实红黑树的插入操作不是很难，甚至比AVL树的插入操作还更简单些。红黑树的插入操作源代码如下：<br></span><pre onclick=\"hljs.copyCode(event)\"><code class=\"language-cpp hljs\"><ol class=\"hljs-ln hundred\" style=\"width:920px\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 元素插入操作  insert_unique()</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 插入新值：节点键值不允许重复，若重复则插入无效</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 注意，返回值是个pair，第一个元素是个红黑树迭代器，指向新增节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 第二个元素表示插入成功与否</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">template</span>&lt;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Key</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Value</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">KeyOfValue</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Compare</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Alloc</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">pair</span>&lt;typename rb_tree&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::iterator , bool&gt;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">rb_tree</span>&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::insert_unique(<span class=\"hljs-keyword\">const</span> Value &amp;v)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    rb_tree_node<em> y = header;    <span class=\"hljs-comment\">// 根节点root的父节点</span></em></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    rb_tree_node x = root();    <span class=\"hljs-comment\">// 从根节点开始</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">bool</span> comp = <span class=\"hljs-literal\">true</span>;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">while</span>(x != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        y = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        comp = key_compare(KeyOfValue()(v) , key(x));    <span class=\"hljs-comment\">// v键值小于目前节点之键值？</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x = comp ? left(x) : right(x);   <span class=\"hljs-comment\">// 遇“大”则往左，遇“小于或等于”则往右</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 离开while循环之后，y所指即插入点之父节点（此时的它必为叶节点）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    iterator j = iterator(y);     <span class=\"hljs-comment\">// 令迭代器j指向插入点之父节点y</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"20\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(comp)     <span class=\"hljs-comment\">// 如果离开while循环时comp为真（表示遇“大”，将插入于左侧）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"21\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"22\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span>(j == begin())    <span class=\"hljs-comment\">// 如果插入点之父节点为最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"23\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(_insert(x , y , z) , <span class=\"hljs-literal\">true</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"24\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">else</span>     <span class=\"hljs-comment\">// 否则（插入点之父节点不为最左节点）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"25\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            –j;   <span class=\"hljs-comment\">// 调整j，回头准备测试</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"26\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"27\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(key_compare(key(j.node) , KeyOfValue()(v) ))</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"28\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-comment\">// 新键值不与既有节点之键值重复，于是以下执行安插操作</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"29\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(_insert(x , y , z) , <span class=\"hljs-literal\">true</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"30\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 以上，x为新值插入点，y为插入点之父节点，v为新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"31\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"32\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 进行至此，表示新值一定与树中键值重复，那么就不应该插入新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"33\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">return</span> pair&lt;iterator , <span class=\"hljs-keyword\">bool</span>&gt;(j , <span class=\"hljs-literal\">false</span>);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"34\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"35\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"36\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 真正地插入执行程序 _insert()</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"37\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">template</span>&lt;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Key</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Value</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">KeyOfValue</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Compare</span> , <span class=\"hljs-title\">class</span> <span class=\"hljs-title\">Alloc</span>&gt;</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"38\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-title\">typename</span>&lt;Key , Value , KeyOfValue , Compare , Alloc&gt;::_insert(base_ptr x_ , base_ptr y_ , <span class=\"hljs-keyword\">const</span> Value &amp;v)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"39\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"40\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 参数x_ 为新值插入点，参数y_为插入点之父节点，参数v为新值</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"41\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    link_type x = (link_type) x_;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"42\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    link_type y = (link_type) y_;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"43\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    link_type z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"44\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"45\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// key_compare 是键值大小比较准则。应该会是个function object</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"46\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(y == header || x != <span class=\"hljs-number\">0</span> || key_compare(KeyOfValue()(v) , key(y) ))</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"47\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"48\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        z = create_node(v);    <span class=\"hljs-comment\">// 产生一个新节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"49\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        left(y) = z;           <span class=\"hljs-comment\">// 这使得当y即为header时，leftmost() = z</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"50\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span>(y == header)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"51\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"52\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            root() = z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"53\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            rightmost() = z;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"54\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"55\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(y == leftmost())     <span class=\"hljs-comment\">// 如果y为最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"56\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            leftmost() = z;          <span class=\"hljs-comment\">// 维护leftmost()，使它永远指向最左节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"57\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"58\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"59\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"60\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        z = create_node(v);        <span class=\"hljs-comment\">// 产生一个新节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"61\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        right(y) = z;              <span class=\"hljs-comment\">// 令新节点成为插入点之父节点y的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"62\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span>(y == rightmost())</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"63\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            rightmost() = z;       <span class=\"hljs-comment\">// 维护rightmost()，使它永远指向最右节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"64\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"65\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    parent(z) = y;      <span class=\"hljs-comment\">// 设定新节点的父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"66\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    left(z) = <span class=\"hljs-number\">0</span>;        <span class=\"hljs-comment\">// 设定新节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"67\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    right(z) = <span class=\"hljs-number\">0</span>;       <span class=\"hljs-comment\">// 设定新节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"68\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 新节点的颜色将在_rb_tree_rebalance()设定（并调整）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"69\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    _rb_tree_rebalance(z , header-&gt;parent);      <span class=\"hljs-comment\">// 参数一为新增节点，参数二为根节点root</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"70\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    ++node_count;       <span class=\"hljs-comment\">// 节点数累加</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"71\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">return</span> iterator(z);  <span class=\"hljs-comment\">// 返回一个迭代器，指向新增节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"72\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"73\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"74\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"75\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 全局函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"76\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 重新令树形平衡（改变颜色及旋转树形）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"77\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 参数一为新增节点，参数二为根节点root</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"78\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rebalance(_rb_tree_node_base<em> x , _rb_tree_node_base</em>&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"79\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"80\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;color = _rb_tree_red;    <span class=\"hljs-comment\">//新节点必为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"81\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">while</span>(x != root &amp;&amp; x-&gt;parent-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 父节点为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"82\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"83\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span>(x-&gt;parent == x-&gt;parent-&gt;parent-&gt;left)      <span class=\"hljs-comment\">// 父节点为祖父节点之左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"84\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"85\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            _rb_tree_node_base<em> y = x-&gt;parent-&gt;parent-&gt;right;    <span class=\"hljs-comment\">// 令y为伯父节点</span></em></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"86\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">if</span>(y &amp;&amp; y-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 伯父节点存在，且为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"87\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"88\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;color = _rb_tree_black;           <span class=\"hljs-comment\">// 更改父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"89\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                y-&gt;color = _rb_tree_black;                   <span class=\"hljs-comment\">// 更改伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"90\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;     <span class=\"hljs-comment\">// 更改祖父节点为红色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"91\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x = x-&gt;parent-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"92\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"93\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">else</span>    <span class=\"hljs-comment\">// 无伯父节点，或伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"94\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"95\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;right)   <span class=\"hljs-comment\">// 如果新节点为父节点之右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"96\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"97\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    x = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"98\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    _rb_tree_rotate_left(x , root);    <span class=\"hljs-comment\">// 第一个参数为左旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"99\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"100\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;color = _rb_tree_black;     <span class=\"hljs-comment\">// 改变颜色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"101\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"102\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                _rb_tree_rotate_right(x-&gt;parent-&gt;parent , root);    <span class=\"hljs-comment\">// 第一个参数为右旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"103\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"104\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"105\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">else</span>          <span class=\"hljs-comment\">// 父节点为祖父节点之右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"106\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"107\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            _rb_tree_node_base y = x-&gt;parent-&gt;parent-&gt;left;    <span class=\"hljs-comment\">// 令y为伯父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"108\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">if</span>(y &amp;&amp; y-&gt;color == _rb_tree_red)    <span class=\"hljs-comment\">// 有伯父节点，且为红</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"109\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"110\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;color = _rb_tree_black;           <span class=\"hljs-comment\">// 更改父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"111\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                y-&gt;color = _rb_tree_black;                   <span class=\"hljs-comment\">// 更改伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"112\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;     <span class=\"hljs-comment\">// 更改祖父节点为红色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"113\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x = x-&gt;parent-&gt;parent;          <span class=\"hljs-comment\">// 准备继续往上层检查</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"114\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"115\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">else</span>    <span class=\"hljs-comment\">// 无伯父节点，或伯父节点为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"116\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"117\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;left)        <span class=\"hljs-comment\">// 如果新节点为父节点之左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"118\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"119\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    x = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"120\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    _rb_tree_rotate_right(x , root);    <span class=\"hljs-comment\">// 第一个参数为右旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"121\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"122\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;color = _rb_tree_black;     <span class=\"hljs-comment\">// 改变颜色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"123\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                x-&gt;parent-&gt;parent-&gt;color = _rb_tree_red;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"124\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                _rb_tree_rotate_left(x-&gt;parent-&gt;parent , root);    <span class=\"hljs-comment\">// 第一个参数为左旋点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"125\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"126\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"127\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }<span class=\"hljs-comment\">//while</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"128\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    root-&gt;color = _rb_tree_black;    <span class=\"hljs-comment\">// 根节点永远为黑色</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"129\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"130\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"131\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"132\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 左旋函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"133\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rotate_left(_rb_tree_node_base<em> x , _rb_tree_node_base</em>&amp; root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"134\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"135\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// x 为旋转点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"136\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    _rb_tree_node_base<em> y = x-&gt;right;          <span class=\"hljs-comment\">// 令y为旋转点的右子节点</span></em></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"137\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;right = y-&gt;left;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"138\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(y-&gt;left != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"139\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        y-&gt;left-&gt;parent = x;           <span class=\"hljs-comment\">// 别忘了回马枪设定父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"140\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    y-&gt;parent = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"141\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"142\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 令y完全顶替x的地位（必须将x对其父节点的关系完全接收过来）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"143\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(x == root)    <span class=\"hljs-comment\">// x为根节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"144\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        root = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"145\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;left)         <span class=\"hljs-comment\">// x为其父节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"146\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x-&gt;parent-&gt;left = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"147\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span>                                  <span class=\"hljs-comment\">// x为其父节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"148\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x-&gt;parent-&gt;right = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"149\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    y-&gt;left = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"150\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;parent = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"151\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"152\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"153\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"154\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// 右旋函数</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"155\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-keyword\">void</span> _rb_tree_rotate_right(_rb_tree_node_base x , _rb_tree_node_base<em>&amp; root)</em></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"156\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"157\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// x 为旋转点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"158\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    _rb_tree_node_base y = x-&gt;left;          <span class=\"hljs-comment\">// 令y为旋转点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"159\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;left = y-&gt;right;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"160\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(y-&gt;right != <span class=\"hljs-number\">0</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"161\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        y-&gt;right-&gt;parent = x;           <span class=\"hljs-comment\">// 别忘了回马枪设定父节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"162\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    y-&gt;parent = x-&gt;parent;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"163\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"164\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">// 令y完全顶替x的地位（必须将x对其父节点的关系完全接收过来）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"165\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span>(x == root)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"166\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        root = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"167\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(x == x-&gt;parent-&gt;right)         <span class=\"hljs-comment\">// x为其父节点的右子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"168\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x-&gt;parent-&gt;right = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"169\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">else</span>                                  <span class=\"hljs-comment\">// x为其父节点的左子节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"170\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        x-&gt;parent-&gt;left = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"171\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    y-&gt;right = x;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"172\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    x-&gt;parent = y;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"173\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li></ol></code></pre>"},{"title":"线程和进程较为清晰的解释","date":"2018-07-18T13:49:14.000Z","_content":"<p><img src=\"https://img-blog.csdn.net/20180625012039828?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p>\n线程是进程的一部分,每个操作系统可能同时有几百个进程在运行,每个进程有成百上千个线程在运行.\n\n内存：逻辑内存，比如32位的系统有2的32次方，4G的寻址空间，则该系统的每个进程都有4G的内存空间可用，不一定都用。每个进程的内存都是互相独立的。\n\n文件/网络句柄：是所有进程所共有的，比如说每个进程都可以打开同一个文件，同时去抢一个网络端口。\n\n<p><img src=\"https://img-blog.csdn.net/20180625012056601?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p>\n\n栈：主线程的入口main函数不断进行函数调用，每次调用把参数和返回地址压到栈中去，每个函数的一些局部变量也会放到栈中。\n\nPC：下一条执行指令的地址，操作系统运行的是线程，进程只是一个容器，指令本身放在内存中，每个线程都有PC指针指向自己那串代码的内存（计算机大多数是存储程序型的：数据和程序代码都在一片内存里）\n\nTLS：存放一些线程独有的数据。\n\n<div class=\"htmledit_views\">\n                <p>进程：</p><p><img src=\"https://img-blog.csdn.net/20180625012039828?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><p>线程：是进程的一部分，每个操作系统可能同时有几十到几百个进程在运行，每个进程里有少到几个多到几十个甚至上百个线程在运行。</p><p>&nbsp;</p><p>内存：逻辑内存，比如32位的系统有2的32次方，4G的寻址空间，则该系统的每个进程都有4G的内存空间可用，不一定都用。每个进程的内存都是互相独立的。</p><p>&nbsp;</p><p>文件/网络句柄：是所有进程所共有的，比如说每个进程都可以打开同一个文件，同时去抢一个网络端口。</p><p>&nbsp;</p><p>线程：</p><p><img src=\"https://img-blog.csdn.net/20180625012056601?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><p>栈：主线程的入口main函数不断进行函数调用，每次调用把参数和返回地址压到栈中去，每个函数的一些局部变量也会放到栈中。</p><p>&nbsp;</p><p>PC：下一条执行指令的地址，操作系统运行的是线程，进程只是一个容器，指令本身放在内存中，每个线程都有PC指针指向自己那串代码的内存（计算机大多数是存储程序型的：数据和程序代码都在一片内存里）</p><p>所以漏洞——缓冲区溢出是指黑客把用户名输入得很长，跳出了给用户名分配的缓冲区，写到存取程序那一部分内存，通过这方法植入想要运行的代码。</p><p>防止方法：检测输入的用户名长度。</p><p>&nbsp;</p><p>TLS：存放一些线程独有的数据。</p><p>&nbsp;</p><p>所以进程和线程的一些区别有：</p><p>1、&nbsp; 进程因为不共享内存，所以交互比较麻烦，通过TCPIP端口实现交互是常用的方案（与系统相关性不大）</p><p>2、&nbsp; 线程通信比较简单，因为共享内存</p><p>3、&nbsp; 进程开销大，要分配内存</p><p>4、&nbsp; 线程开销小，只要分配栈和PC</p><p>&nbsp;</p><p>关于线程一些说法：</p><p>1、线程死程序的多个顺序的流动态执行。</p><p>2、线程没有自己独立的地址空间。</p><p>3、线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。</p>            </div>","source":"_posts/2018.07.18 线程和进程较为清晰的解释.md","raw":"---\ntitle: 线程和进程较为清晰的解释\ntags: 面试\ndate: 2018-07-18 21:49:14\n---\n<p><img src=\"https://img-blog.csdn.net/20180625012039828?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p>\n线程是进程的一部分,每个操作系统可能同时有几百个进程在运行,每个进程有成百上千个线程在运行.\n\n内存：逻辑内存，比如32位的系统有2的32次方，4G的寻址空间，则该系统的每个进程都有4G的内存空间可用，不一定都用。每个进程的内存都是互相独立的。\n\n文件/网络句柄：是所有进程所共有的，比如说每个进程都可以打开同一个文件，同时去抢一个网络端口。\n\n<p><img src=\"https://img-blog.csdn.net/20180625012056601?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p>\n\n栈：主线程的入口main函数不断进行函数调用，每次调用把参数和返回地址压到栈中去，每个函数的一些局部变量也会放到栈中。\n\nPC：下一条执行指令的地址，操作系统运行的是线程，进程只是一个容器，指令本身放在内存中，每个线程都有PC指针指向自己那串代码的内存（计算机大多数是存储程序型的：数据和程序代码都在一片内存里）\n\nTLS：存放一些线程独有的数据。\n\n<div class=\"htmledit_views\">\n                <p>进程：</p><p><img src=\"https://img-blog.csdn.net/20180625012039828?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><p>线程：是进程的一部分，每个操作系统可能同时有几十到几百个进程在运行，每个进程里有少到几个多到几十个甚至上百个线程在运行。</p><p>&nbsp;</p><p>内存：逻辑内存，比如32位的系统有2的32次方，4G的寻址空间，则该系统的每个进程都有4G的内存空间可用，不一定都用。每个进程的内存都是互相独立的。</p><p>&nbsp;</p><p>文件/网络句柄：是所有进程所共有的，比如说每个进程都可以打开同一个文件，同时去抢一个网络端口。</p><p>&nbsp;</p><p>线程：</p><p><img src=\"https://img-blog.csdn.net/20180625012056601?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><p>栈：主线程的入口main函数不断进行函数调用，每次调用把参数和返回地址压到栈中去，每个函数的一些局部变量也会放到栈中。</p><p>&nbsp;</p><p>PC：下一条执行指令的地址，操作系统运行的是线程，进程只是一个容器，指令本身放在内存中，每个线程都有PC指针指向自己那串代码的内存（计算机大多数是存储程序型的：数据和程序代码都在一片内存里）</p><p>所以漏洞——缓冲区溢出是指黑客把用户名输入得很长，跳出了给用户名分配的缓冲区，写到存取程序那一部分内存，通过这方法植入想要运行的代码。</p><p>防止方法：检测输入的用户名长度。</p><p>&nbsp;</p><p>TLS：存放一些线程独有的数据。</p><p>&nbsp;</p><p>所以进程和线程的一些区别有：</p><p>1、&nbsp; 进程因为不共享内存，所以交互比较麻烦，通过TCPIP端口实现交互是常用的方案（与系统相关性不大）</p><p>2、&nbsp; 线程通信比较简单，因为共享内存</p><p>3、&nbsp; 进程开销大，要分配内存</p><p>4、&nbsp; 线程开销小，只要分配栈和PC</p><p>&nbsp;</p><p>关于线程一些说法：</p><p>1、线程死程序的多个顺序的流动态执行。</p><p>2、线程没有自己独立的地址空间。</p><p>3、线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。</p>            </div>","slug":"线程和进程较为清晰的解释","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzck002fdcyu24s7em8t","content":"<p><img src=\"https://img-blog.csdn.net/20180625012039828?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><br>线程是进程的一部分,每个操作系统可能同时有几百个进程在运行,每个进程有成百上千个线程在运行.<br><br>内存：逻辑内存，比如32位的系统有2的32次方，4G的寻址空间，则该系统的每个进程都有4G的内存空间可用，不一定都用。每个进程的内存都是互相独立的。<br><br>文件/网络句柄：是所有进程所共有的，比如说每个进程都可以打开同一个文件，同时去抢一个网络端口。<br><br><p><img src=\"https://img-blog.csdn.net/20180625012056601?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p>\n\n<p>栈：主线程的入口main函数不断进行函数调用，每次调用把参数和返回地址压到栈中去，每个函数的一些局部变量也会放到栈中。</p>\n<p>PC：下一条执行指令的地址，操作系统运行的是线程，进程只是一个容器，指令本身放在内存中，每个线程都有PC指针指向自己那串代码的内存（计算机大多数是存储程序型的：数据和程序代码都在一片内存里）</p>\n<p>TLS：存放一些线程独有的数据。</p>\n<div class=\"htmledit_views\"><br>                <p>进程：</p><p><img src=\"https://img-blog.csdn.net/20180625012039828?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><p>线程：是进程的一部分，每个操作系统可能同时有几十到几百个进程在运行，每个进程里有少到几个多到几十个甚至上百个线程在运行。</p><p>&nbsp;</p><p>内存：逻辑内存，比如32位的系统有2的32次方，4G的寻址空间，则该系统的每个进程都有4G的内存空间可用，不一定都用。每个进程的内存都是互相独立的。</p><p>&nbsp;</p><p>文件/网络句柄：是所有进程所共有的，比如说每个进程都可以打开同一个文件，同时去抢一个网络端口。</p><p>&nbsp;</p><p>线程：</p><p><img src=\"https://img-blog.csdn.net/20180625012056601?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><p>栈：主线程的入口main函数不断进行函数调用，每次调用把参数和返回地址压到栈中去，每个函数的一些局部变量也会放到栈中。</p><p>&nbsp;</p><p>PC：下一条执行指令的地址，操作系统运行的是线程，进程只是一个容器，指令本身放在内存中，每个线程都有PC指针指向自己那串代码的内存（计算机大多数是存储程序型的：数据和程序代码都在一片内存里）</p><p>所以漏洞——缓冲区溢出是指黑客把用户名输入得很长，跳出了给用户名分配的缓冲区，写到存取程序那一部分内存，通过这方法植入想要运行的代码。</p><p>防止方法：检测输入的用户名长度。</p><p>&nbsp;</p><p>TLS：存放一些线程独有的数据。</p><p>&nbsp;</p><p>所以进程和线程的一些区别有：</p><p>1、&nbsp; 进程因为不共享内存，所以交互比较麻烦，通过TCPIP端口实现交互是常用的方案（与系统相关性不大）</p><p>2、&nbsp; 线程通信比较简单，因为共享内存</p><p>3、&nbsp; 进程开销大，要分配内存</p><p>4、&nbsp; 线程开销小，只要分配栈和PC</p><p>&nbsp;</p><p>关于线程一些说法：</p><p>1、线程死程序的多个顺序的流动态执行。</p><p>2、线程没有自己独立的地址空间。</p><p>3、线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。</p>            </div>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://img-blog.csdn.net/20180625012039828?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><br>线程是进程的一部分,每个操作系统可能同时有几百个进程在运行,每个进程有成百上千个线程在运行.<br><br>内存：逻辑内存，比如32位的系统有2的32次方，4G的寻址空间，则该系统的每个进程都有4G的内存空间可用，不一定都用。每个进程的内存都是互相独立的。<br><br>文件/网络句柄：是所有进程所共有的，比如说每个进程都可以打开同一个文件，同时去抢一个网络端口。<br><br><p><img src=\"https://img-blog.csdn.net/20180625012056601?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p>\n\n<p>栈：主线程的入口main函数不断进行函数调用，每次调用把参数和返回地址压到栈中去，每个函数的一些局部变量也会放到栈中。</p>\n<p>PC：下一条执行指令的地址，操作系统运行的是线程，进程只是一个容器，指令本身放在内存中，每个线程都有PC指针指向自己那串代码的内存（计算机大多数是存储程序型的：数据和程序代码都在一片内存里）</p>\n<p>TLS：存放一些线程独有的数据。</p>\n<div class=\"htmledit_views\"><br>                <p>进程：</p><p><img src=\"https://img-blog.csdn.net/20180625012039828?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><p>线程：是进程的一部分，每个操作系统可能同时有几十到几百个进程在运行，每个进程里有少到几个多到几十个甚至上百个线程在运行。</p><p>&nbsp;</p><p>内存：逻辑内存，比如32位的系统有2的32次方，4G的寻址空间，则该系统的每个进程都有4G的内存空间可用，不一定都用。每个进程的内存都是互相独立的。</p><p>&nbsp;</p><p>文件/网络句柄：是所有进程所共有的，比如说每个进程都可以打开同一个文件，同时去抢一个网络端口。</p><p>&nbsp;</p><p>线程：</p><p><img src=\"https://img-blog.csdn.net/20180625012056601?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTE3NTIx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"></p><p>栈：主线程的入口main函数不断进行函数调用，每次调用把参数和返回地址压到栈中去，每个函数的一些局部变量也会放到栈中。</p><p>&nbsp;</p><p>PC：下一条执行指令的地址，操作系统运行的是线程，进程只是一个容器，指令本身放在内存中，每个线程都有PC指针指向自己那串代码的内存（计算机大多数是存储程序型的：数据和程序代码都在一片内存里）</p><p>所以漏洞——缓冲区溢出是指黑客把用户名输入得很长，跳出了给用户名分配的缓冲区，写到存取程序那一部分内存，通过这方法植入想要运行的代码。</p><p>防止方法：检测输入的用户名长度。</p><p>&nbsp;</p><p>TLS：存放一些线程独有的数据。</p><p>&nbsp;</p><p>所以进程和线程的一些区别有：</p><p>1、&nbsp; 进程因为不共享内存，所以交互比较麻烦，通过TCPIP端口实现交互是常用的方案（与系统相关性不大）</p><p>2、&nbsp; 线程通信比较简单，因为共享内存</p><p>3、&nbsp; 进程开销大，要分配内存</p><p>4、&nbsp; 线程开销小，只要分配栈和PC</p><p>&nbsp;</p><p>关于线程一些说法：</p><p>1、线程死程序的多个顺序的流动态执行。</p><p>2、线程没有自己独立的地址空间。</p><p>3、线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。</p>            </div>"},{"title":"解决hash碰撞冲突","date":"2018-07-18T14:50:04.000Z","_content":"\n## 哈希碰撞冲突\n我们知道，对象Hash的前提是实现equals()和hashCode()两个方法，那么HashCode()的作用就是保证对象返回唯一hash值，但当两个对象计算值一样时，这就发生了碰撞冲突。如下将介绍如何处理冲突，当然其前提是一致性hash。\n### 1.开放地址法\n开放地执法有一个公式:Hi=(H(key)+di) MOD m i=1,2,…,k(k<=m-1)\n其中，m为哈希表的表长。di 是产生冲突的时候的增量序列。如果di值可能为1,2,3,…m-1，称线性探测再散列。\n如果di取1，则每次冲突之后，向后移动1个位置.如果di取值可能为1,-1,2,-2,4,-4,9,-9,16,-16,…k*k,-k*k(k<=m/2)，称二次探测再散列。\n如果di取值可能为伪随机数列。称伪随机探测再散列。\n### 2.再Hash法\n当发生冲突时，使用第二个、第三个、哈希函数计算地址，直到无冲突时。缺点：计算时间增加。\n比如上面第一次按照姓首字母进行哈希，如果产生冲突可以按照姓字母首字母第二位进行哈希，再冲突，第三位，直到不冲突为止\n### 3.链接地址法\nHashMap的实现方法\n### 4.建立一个公共溢出区\n假设哈希函数的值域为[0,m-1],则设向量HashTable[0..m-1]为基本表，另外设立存储空间向量OverTable[0..v]用以存储发生冲突的记录。\n\n\n\n","source":"_posts/2018.07.18 解决hash碰撞冲突.md","raw":"---\ntitle: 解决hash碰撞冲突\ntags: 面试\ndate: 2018-07-18 22:50:04\n---\n\n## 哈希碰撞冲突\n我们知道，对象Hash的前提是实现equals()和hashCode()两个方法，那么HashCode()的作用就是保证对象返回唯一hash值，但当两个对象计算值一样时，这就发生了碰撞冲突。如下将介绍如何处理冲突，当然其前提是一致性hash。\n### 1.开放地址法\n开放地执法有一个公式:Hi=(H(key)+di) MOD m i=1,2,…,k(k<=m-1)\n其中，m为哈希表的表长。di 是产生冲突的时候的增量序列。如果di值可能为1,2,3,…m-1，称线性探测再散列。\n如果di取1，则每次冲突之后，向后移动1个位置.如果di取值可能为1,-1,2,-2,4,-4,9,-9,16,-16,…k*k,-k*k(k<=m/2)，称二次探测再散列。\n如果di取值可能为伪随机数列。称伪随机探测再散列。\n### 2.再Hash法\n当发生冲突时，使用第二个、第三个、哈希函数计算地址，直到无冲突时。缺点：计算时间增加。\n比如上面第一次按照姓首字母进行哈希，如果产生冲突可以按照姓字母首字母第二位进行哈希，再冲突，第三位，直到不冲突为止\n### 3.链接地址法\nHashMap的实现方法\n### 4.建立一个公共溢出区\n假设哈希函数的值域为[0,m-1],则设向量HashTable[0..m-1]为基本表，另外设立存储空间向量OverTable[0..v]用以存储发生冲突的记录。\n\n\n\n","slug":"解决hash碰撞冲突","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcl002hdcyubeqy2xx9","content":"<h2 id=\"哈希碰撞冲突\"><a href=\"#哈希碰撞冲突\" class=\"headerlink\" title=\"哈希碰撞冲突\"></a>哈希碰撞冲突</h2><p>我们知道，对象Hash的前提是实现equals()和hashCode()两个方法，那么HashCode()的作用就是保证对象返回唯一hash值，但当两个对象计算值一样时，这就发生了碰撞冲突。如下将介绍如何处理冲突，当然其前提是一致性hash。</p>\n<h3 id=\"1-开放地址法\"><a href=\"#1-开放地址法\" class=\"headerlink\" title=\"1.开放地址法\"></a>1.开放地址法</h3><p>开放地执法有一个公式:Hi=(H(key)+di) MOD m i=1,2,…,k(k&lt;=m-1)<br>其中，m为哈希表的表长。di 是产生冲突的时候的增量序列。如果di值可能为1,2,3,…m-1，称线性探测再散列。<br>如果di取1，则每次冲突之后，向后移动1个位置.如果di取值可能为1,-1,2,-2,4,-4,9,-9,16,-16,…k<em>k,-k</em>k(k&lt;=m/2)，称二次探测再散列。<br>如果di取值可能为伪随机数列。称伪随机探测再散列。</p>\n<h3 id=\"2-再Hash法\"><a href=\"#2-再Hash法\" class=\"headerlink\" title=\"2.再Hash法\"></a>2.再Hash法</h3><p>当发生冲突时，使用第二个、第三个、哈希函数计算地址，直到无冲突时。缺点：计算时间增加。<br>比如上面第一次按照姓首字母进行哈希，如果产生冲突可以按照姓字母首字母第二位进行哈希，再冲突，第三位，直到不冲突为止</p>\n<h3 id=\"3-链接地址法\"><a href=\"#3-链接地址法\" class=\"headerlink\" title=\"3.链接地址法\"></a>3.链接地址法</h3><p>HashMap的实现方法</p>\n<h3 id=\"4-建立一个公共溢出区\"><a href=\"#4-建立一个公共溢出区\" class=\"headerlink\" title=\"4.建立一个公共溢出区\"></a>4.建立一个公共溢出区</h3><p>假设哈希函数的值域为[0,m-1],则设向量HashTable[0..m-1]为基本表，另外设立存储空间向量OverTable[0..v]用以存储发生冲突的记录。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"哈希碰撞冲突\"><a href=\"#哈希碰撞冲突\" class=\"headerlink\" title=\"哈希碰撞冲突\"></a>哈希碰撞冲突</h2><p>我们知道，对象Hash的前提是实现equals()和hashCode()两个方法，那么HashCode()的作用就是保证对象返回唯一hash值，但当两个对象计算值一样时，这就发生了碰撞冲突。如下将介绍如何处理冲突，当然其前提是一致性hash。</p>\n<h3 id=\"1-开放地址法\"><a href=\"#1-开放地址法\" class=\"headerlink\" title=\"1.开放地址法\"></a>1.开放地址法</h3><p>开放地执法有一个公式:Hi=(H(key)+di) MOD m i=1,2,…,k(k&lt;=m-1)<br>其中，m为哈希表的表长。di 是产生冲突的时候的增量序列。如果di值可能为1,2,3,…m-1，称线性探测再散列。<br>如果di取1，则每次冲突之后，向后移动1个位置.如果di取值可能为1,-1,2,-2,4,-4,9,-9,16,-16,…k<em>k,-k</em>k(k&lt;=m/2)，称二次探测再散列。<br>如果di取值可能为伪随机数列。称伪随机探测再散列。</p>\n<h3 id=\"2-再Hash法\"><a href=\"#2-再Hash法\" class=\"headerlink\" title=\"2.再Hash法\"></a>2.再Hash法</h3><p>当发生冲突时，使用第二个、第三个、哈希函数计算地址，直到无冲突时。缺点：计算时间增加。<br>比如上面第一次按照姓首字母进行哈希，如果产生冲突可以按照姓字母首字母第二位进行哈希，再冲突，第三位，直到不冲突为止</p>\n<h3 id=\"3-链接地址法\"><a href=\"#3-链接地址法\" class=\"headerlink\" title=\"3.链接地址法\"></a>3.链接地址法</h3><p>HashMap的实现方法</p>\n<h3 id=\"4-建立一个公共溢出区\"><a href=\"#4-建立一个公共溢出区\" class=\"headerlink\" title=\"4.建立一个公共溢出区\"></a>4.建立一个公共溢出区</h3><p>假设哈希函数的值域为[0,m-1],则设向量HashTable[0..m-1]为基本表，另外设立存储空间向量OverTable[0..v]用以存储发生冲突的记录。</p>\n"},{"title":"ReentrantLock了解","date":"2018-07-19T03:16:48.000Z","_content":"在JDK5.0版本之前，重入锁的性能远远好于synchronized关键字，JDK6.0版本之后synchronized 得到了大量的优化，二者性能也不分伯仲，但是重入锁是可以完全替代synchronized关键字的。除此之外，重入锁又自带一系列高逼格UBFF：可中断响应、锁申请等待限时、公平锁。另外可以结合Condition来使用，使其更是逼格满满。\n\n从上可以看出，使用重入锁进行加锁是一种显式操作，通过何时加锁与释放锁使重入锁对逻辑控制的灵活性远远大于synchronized关键字。同时，需要注意，有加锁就必须有释放锁，而且加锁与释放锁的分数要相同，这里就引出了“重”字的概念，如上边代码演示，放开①、②处的注释，与原来效果一致。\n\n对于synchronized块来说，要么获取到锁执行，要么持续等待。而重入锁的中断响应功能就合理地避免了这样的情况。比如，一个正在等待获取锁的线程被“告知”无须继续等待下去，就可以停止工作了。直接上代码，来演示使用重入锁如何解决死锁：\n\n# Synchronized的缺陷\nsynchronized是java中的一个关键字，也就是说是Java语言内置的特性。那么为什么会出现Lock呢？\n\n如果一个代码块被synchronized修饰了，当一个线程获取了对应的锁，并执行该代码块时，其他线程便只能一直等待，等待获取锁的线程释放锁，而这里获取锁的线程释放锁只会有两种情况：\n1.获取锁的线程执行完了该代码块，然后线程释放对锁的占有；\n2.线程执行发生异常，此时JVM会让线程自动释放锁。\n那么如果这个获取锁的线程由于要等待IO或者其他原因（比如调用sleep方法）被阻塞了，但是又没有释放锁，其他线程便只能干巴巴地等待，试想一下，这多么影响程序执行效率。\n因此就需要有一种机制可以不让等待的线程一直无期限地等待下去（比如只等待一定的时间或者能够响应中断），通过Lock就可以办到。\n再举个例子：当有多个线程读写文件时，读操作和写操作会发生冲突现象，写操作和写操作会发生冲突现象，但是读操作和读操作不会发生冲突现象。\n\n但是采用synchronized关键字来实现同步的话，就会导致一个问题：\n如果多个线程都只是进行读操作，所以当一个线程在进行读操作时，其他线程只能等待无法进行读操作。\n总结一下，也就是说Lock提供了比synchronized更多的功能。但是要注意以下几点：\n1）Lock不是Java语言内置的，synchronized是Java语言的关键字，因此是内置特性。Lock是一个类，通过这个类可以实现同步访问；\n\n2）Lock和synchronized有一点非常大的不同，采用synchronized不需要用户去手动释放锁，当synchronized方法或者synchronized代码块执行完之后，系统会自动让线程释放对锁的占用；而Lock则必须要用户去手动释放锁，如果没有主动释放锁，就有可能导致出现死锁现象。\n\n# 锁的相关概念介绍\n1.可重入锁\n　　如果锁具备可重入性，则称作为可重入锁。像synchronized和ReentrantLock都是可重入锁，可重入性在我看来实际上表明了锁的分配机制：基于线程的分配，而不是基于方法调用的分配。举个简单的例子，当一个线程执行到某个synchronized方法时，比如说method1，而在method1中会调用另外一个synchronized方法method2，此时线程不必重新去申请锁，而是可以直接执行方法method2。\n2.可中断锁\nsynchronized就是不可中断的锁,Lock是可中断锁.\n　　如果某一线程A正在执行锁中的代码，另一线程B正在等待获取该锁，可能由于等待时间过长，线程B不想等待了，想先处理其他事情，我们可以让它中断自己或者在别的线程中中断它，这种就是可中断锁。\n3.公平锁。\n公平锁即尽量以请求锁的顺序来获取锁。比如同是有多个线程在等待一个锁，当这个锁被释放时，等待时间最久的线程（最先请求的线程）会获得该所，这种就是公平锁。\n非公平锁即无法保证锁的获取是按照请求锁的顺序进行的。这样就可能导致某个或者一些线程永远获取不到锁。\n　　在Java中，synchronized就是非公平锁，它无法保证等待的线程获取锁的顺序。\n　　而对于ReentrantLock和ReentrantReadWriteLock，它默认情况下是非公平锁，但是可以设置为公平锁。\n4. 读写锁\n读写锁将对一个资源（比如文件）的访问分成了2个锁，一个读锁和一个写锁。\n正因为有了读写锁，才使得多个线程之间的读操作不会发生冲突。\nReadWriteLock就是读写锁，它是一个接口，ReentrantReadWriteLock实现了这个接口。可以通过readLock()获取读锁，通过writeLock()获取写锁。上面已经演示过了读写锁的使用方法，在此不再赘述。\n\n***\n# synchronized锁的对象是谁?\n1.用在代码块上,锁住的是括号内的对象\n2.用在成员函数上,锁住该方法的对象.(对象锁)\n3.用在静态方法上,锁住该类的字节码文件对象.(类锁)\n\n\n\n# 锁的简单应用\n用lock来保证原子性\n原子性:不可分,从头执行到尾,不能被其他线程同时执行.\n可以通过CAS来实现原子操作:CAS(compare and swap):\nCAS操作需要输入两个数值，一个旧值（期望操作前的值）和一个新值，在操作期间先比较下旧值有没有发生变化，如果没有发生变化，才交换成新值，发生了变化则不交换。\nCAS主要通过compareAndSwapXXX()方法来实现，而这个方法的实现需要涉及底层的unsafe类\nunsafe类：java不能直接访问操作系统底层，而是通过本地方法来访问。Unsafe类提供了硬件级别的原子操作.\n\n\n\n\n\n\n","source":"_posts/2018.07.19 ReentrantLock了解.md","raw":"---\ntitle: ReentrantLock了解\ntags: 面试\ndate: 2018-07-19 11:16:48\n---\n在JDK5.0版本之前，重入锁的性能远远好于synchronized关键字，JDK6.0版本之后synchronized 得到了大量的优化，二者性能也不分伯仲，但是重入锁是可以完全替代synchronized关键字的。除此之外，重入锁又自带一系列高逼格UBFF：可中断响应、锁申请等待限时、公平锁。另外可以结合Condition来使用，使其更是逼格满满。\n\n从上可以看出，使用重入锁进行加锁是一种显式操作，通过何时加锁与释放锁使重入锁对逻辑控制的灵活性远远大于synchronized关键字。同时，需要注意，有加锁就必须有释放锁，而且加锁与释放锁的分数要相同，这里就引出了“重”字的概念，如上边代码演示，放开①、②处的注释，与原来效果一致。\n\n对于synchronized块来说，要么获取到锁执行，要么持续等待。而重入锁的中断响应功能就合理地避免了这样的情况。比如，一个正在等待获取锁的线程被“告知”无须继续等待下去，就可以停止工作了。直接上代码，来演示使用重入锁如何解决死锁：\n\n# Synchronized的缺陷\nsynchronized是java中的一个关键字，也就是说是Java语言内置的特性。那么为什么会出现Lock呢？\n\n如果一个代码块被synchronized修饰了，当一个线程获取了对应的锁，并执行该代码块时，其他线程便只能一直等待，等待获取锁的线程释放锁，而这里获取锁的线程释放锁只会有两种情况：\n1.获取锁的线程执行完了该代码块，然后线程释放对锁的占有；\n2.线程执行发生异常，此时JVM会让线程自动释放锁。\n那么如果这个获取锁的线程由于要等待IO或者其他原因（比如调用sleep方法）被阻塞了，但是又没有释放锁，其他线程便只能干巴巴地等待，试想一下，这多么影响程序执行效率。\n因此就需要有一种机制可以不让等待的线程一直无期限地等待下去（比如只等待一定的时间或者能够响应中断），通过Lock就可以办到。\n再举个例子：当有多个线程读写文件时，读操作和写操作会发生冲突现象，写操作和写操作会发生冲突现象，但是读操作和读操作不会发生冲突现象。\n\n但是采用synchronized关键字来实现同步的话，就会导致一个问题：\n如果多个线程都只是进行读操作，所以当一个线程在进行读操作时，其他线程只能等待无法进行读操作。\n总结一下，也就是说Lock提供了比synchronized更多的功能。但是要注意以下几点：\n1）Lock不是Java语言内置的，synchronized是Java语言的关键字，因此是内置特性。Lock是一个类，通过这个类可以实现同步访问；\n\n2）Lock和synchronized有一点非常大的不同，采用synchronized不需要用户去手动释放锁，当synchronized方法或者synchronized代码块执行完之后，系统会自动让线程释放对锁的占用；而Lock则必须要用户去手动释放锁，如果没有主动释放锁，就有可能导致出现死锁现象。\n\n# 锁的相关概念介绍\n1.可重入锁\n　　如果锁具备可重入性，则称作为可重入锁。像synchronized和ReentrantLock都是可重入锁，可重入性在我看来实际上表明了锁的分配机制：基于线程的分配，而不是基于方法调用的分配。举个简单的例子，当一个线程执行到某个synchronized方法时，比如说method1，而在method1中会调用另外一个synchronized方法method2，此时线程不必重新去申请锁，而是可以直接执行方法method2。\n2.可中断锁\nsynchronized就是不可中断的锁,Lock是可中断锁.\n　　如果某一线程A正在执行锁中的代码，另一线程B正在等待获取该锁，可能由于等待时间过长，线程B不想等待了，想先处理其他事情，我们可以让它中断自己或者在别的线程中中断它，这种就是可中断锁。\n3.公平锁。\n公平锁即尽量以请求锁的顺序来获取锁。比如同是有多个线程在等待一个锁，当这个锁被释放时，等待时间最久的线程（最先请求的线程）会获得该所，这种就是公平锁。\n非公平锁即无法保证锁的获取是按照请求锁的顺序进行的。这样就可能导致某个或者一些线程永远获取不到锁。\n　　在Java中，synchronized就是非公平锁，它无法保证等待的线程获取锁的顺序。\n　　而对于ReentrantLock和ReentrantReadWriteLock，它默认情况下是非公平锁，但是可以设置为公平锁。\n4. 读写锁\n读写锁将对一个资源（比如文件）的访问分成了2个锁，一个读锁和一个写锁。\n正因为有了读写锁，才使得多个线程之间的读操作不会发生冲突。\nReadWriteLock就是读写锁，它是一个接口，ReentrantReadWriteLock实现了这个接口。可以通过readLock()获取读锁，通过writeLock()获取写锁。上面已经演示过了读写锁的使用方法，在此不再赘述。\n\n***\n# synchronized锁的对象是谁?\n1.用在代码块上,锁住的是括号内的对象\n2.用在成员函数上,锁住该方法的对象.(对象锁)\n3.用在静态方法上,锁住该类的字节码文件对象.(类锁)\n\n\n\n# 锁的简单应用\n用lock来保证原子性\n原子性:不可分,从头执行到尾,不能被其他线程同时执行.\n可以通过CAS来实现原子操作:CAS(compare and swap):\nCAS操作需要输入两个数值，一个旧值（期望操作前的值）和一个新值，在操作期间先比较下旧值有没有发生变化，如果没有发生变化，才交换成新值，发生了变化则不交换。\nCAS主要通过compareAndSwapXXX()方法来实现，而这个方法的实现需要涉及底层的unsafe类\nunsafe类：java不能直接访问操作系统底层，而是通过本地方法来访问。Unsafe类提供了硬件级别的原子操作.\n\n\n\n\n\n\n","slug":"ReentrantLock了解","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcn002jdcyudtc0igoh","content":"<p>在JDK5.0版本之前，重入锁的性能远远好于synchronized关键字，JDK6.0版本之后synchronized 得到了大量的优化，二者性能也不分伯仲，但是重入锁是可以完全替代synchronized关键字的。除此之外，重入锁又自带一系列高逼格UBFF：可中断响应、锁申请等待限时、公平锁。另外可以结合Condition来使用，使其更是逼格满满。</p>\n<p>从上可以看出，使用重入锁进行加锁是一种显式操作，通过何时加锁与释放锁使重入锁对逻辑控制的灵活性远远大于synchronized关键字。同时，需要注意，有加锁就必须有释放锁，而且加锁与释放锁的分数要相同，这里就引出了“重”字的概念，如上边代码演示，放开①、②处的注释，与原来效果一致。</p>\n<p>对于synchronized块来说，要么获取到锁执行，要么持续等待。而重入锁的中断响应功能就合理地避免了这样的情况。比如，一个正在等待获取锁的线程被“告知”无须继续等待下去，就可以停止工作了。直接上代码，来演示使用重入锁如何解决死锁：</p>\n<h1 id=\"Synchronized的缺陷\"><a href=\"#Synchronized的缺陷\" class=\"headerlink\" title=\"Synchronized的缺陷\"></a>Synchronized的缺陷</h1><p>synchronized是java中的一个关键字，也就是说是Java语言内置的特性。那么为什么会出现Lock呢？</p>\n<p>如果一个代码块被synchronized修饰了，当一个线程获取了对应的锁，并执行该代码块时，其他线程便只能一直等待，等待获取锁的线程释放锁，而这里获取锁的线程释放锁只会有两种情况：<br>1.获取锁的线程执行完了该代码块，然后线程释放对锁的占有；<br>2.线程执行发生异常，此时JVM会让线程自动释放锁。<br>那么如果这个获取锁的线程由于要等待IO或者其他原因（比如调用sleep方法）被阻塞了，但是又没有释放锁，其他线程便只能干巴巴地等待，试想一下，这多么影响程序执行效率。<br>因此就需要有一种机制可以不让等待的线程一直无期限地等待下去（比如只等待一定的时间或者能够响应中断），通过Lock就可以办到。<br>再举个例子：当有多个线程读写文件时，读操作和写操作会发生冲突现象，写操作和写操作会发生冲突现象，但是读操作和读操作不会发生冲突现象。</p>\n<p>但是采用synchronized关键字来实现同步的话，就会导致一个问题：<br>如果多个线程都只是进行读操作，所以当一个线程在进行读操作时，其他线程只能等待无法进行读操作。<br>总结一下，也就是说Lock提供了比synchronized更多的功能。但是要注意以下几点：<br>1）Lock不是Java语言内置的，synchronized是Java语言的关键字，因此是内置特性。Lock是一个类，通过这个类可以实现同步访问；</p>\n<p>2）Lock和synchronized有一点非常大的不同，采用synchronized不需要用户去手动释放锁，当synchronized方法或者synchronized代码块执行完之后，系统会自动让线程释放对锁的占用；而Lock则必须要用户去手动释放锁，如果没有主动释放锁，就有可能导致出现死锁现象。</p>\n<h1 id=\"锁的相关概念介绍\"><a href=\"#锁的相关概念介绍\" class=\"headerlink\" title=\"锁的相关概念介绍\"></a>锁的相关概念介绍</h1><p>1.可重入锁<br>　　如果锁具备可重入性，则称作为可重入锁。像synchronized和ReentrantLock都是可重入锁，可重入性在我看来实际上表明了锁的分配机制：基于线程的分配，而不是基于方法调用的分配。举个简单的例子，当一个线程执行到某个synchronized方法时，比如说method1，而在method1中会调用另外一个synchronized方法method2，此时线程不必重新去申请锁，而是可以直接执行方法method2。<br>2.可中断锁<br>synchronized就是不可中断的锁,Lock是可中断锁.<br>　　如果某一线程A正在执行锁中的代码，另一线程B正在等待获取该锁，可能由于等待时间过长，线程B不想等待了，想先处理其他事情，我们可以让它中断自己或者在别的线程中中断它，这种就是可中断锁。<br>3.公平锁。<br>公平锁即尽量以请求锁的顺序来获取锁。比如同是有多个线程在等待一个锁，当这个锁被释放时，等待时间最久的线程（最先请求的线程）会获得该所，这种就是公平锁。<br>非公平锁即无法保证锁的获取是按照请求锁的顺序进行的。这样就可能导致某个或者一些线程永远获取不到锁。<br>　　在Java中，synchronized就是非公平锁，它无法保证等待的线程获取锁的顺序。<br>　　而对于ReentrantLock和ReentrantReadWriteLock，它默认情况下是非公平锁，但是可以设置为公平锁。</p>\n<ol start=\"4\">\n<li>读写锁<br>读写锁将对一个资源（比如文件）的访问分成了2个锁，一个读锁和一个写锁。<br>正因为有了读写锁，才使得多个线程之间的读操作不会发生冲突。<br>ReadWriteLock就是读写锁，它是一个接口，ReentrantReadWriteLock实现了这个接口。可以通过readLock()获取读锁，通过writeLock()获取写锁。上面已经演示过了读写锁的使用方法，在此不再赘述。</li>\n</ol>\n<hr>\n<h1 id=\"synchronized锁的对象是谁\"><a href=\"#synchronized锁的对象是谁\" class=\"headerlink\" title=\"synchronized锁的对象是谁?\"></a>synchronized锁的对象是谁?</h1><p>1.用在代码块上,锁住的是括号内的对象<br>2.用在成员函数上,锁住该方法的对象.(对象锁)<br>3.用在静态方法上,锁住该类的字节码文件对象.(类锁)</p>\n<h1 id=\"锁的简单应用\"><a href=\"#锁的简单应用\" class=\"headerlink\" title=\"锁的简单应用\"></a>锁的简单应用</h1><p>用lock来保证原子性<br>原子性:不可分,从头执行到尾,不能被其他线程同时执行.<br>可以通过CAS来实现原子操作:CAS(compare and swap):<br>CAS操作需要输入两个数值，一个旧值（期望操作前的值）和一个新值，在操作期间先比较下旧值有没有发生变化，如果没有发生变化，才交换成新值，发生了变化则不交换。<br>CAS主要通过compareAndSwapXXX()方法来实现，而这个方法的实现需要涉及底层的unsafe类<br>unsafe类：java不能直接访问操作系统底层，而是通过本地方法来访问。Unsafe类提供了硬件级别的原子操作.</p>\n","site":{"data":{}},"excerpt":"","more":"<p>在JDK5.0版本之前，重入锁的性能远远好于synchronized关键字，JDK6.0版本之后synchronized 得到了大量的优化，二者性能也不分伯仲，但是重入锁是可以完全替代synchronized关键字的。除此之外，重入锁又自带一系列高逼格UBFF：可中断响应、锁申请等待限时、公平锁。另外可以结合Condition来使用，使其更是逼格满满。</p>\n<p>从上可以看出，使用重入锁进行加锁是一种显式操作，通过何时加锁与释放锁使重入锁对逻辑控制的灵活性远远大于synchronized关键字。同时，需要注意，有加锁就必须有释放锁，而且加锁与释放锁的分数要相同，这里就引出了“重”字的概念，如上边代码演示，放开①、②处的注释，与原来效果一致。</p>\n<p>对于synchronized块来说，要么获取到锁执行，要么持续等待。而重入锁的中断响应功能就合理地避免了这样的情况。比如，一个正在等待获取锁的线程被“告知”无须继续等待下去，就可以停止工作了。直接上代码，来演示使用重入锁如何解决死锁：</p>\n<h1 id=\"Synchronized的缺陷\"><a href=\"#Synchronized的缺陷\" class=\"headerlink\" title=\"Synchronized的缺陷\"></a>Synchronized的缺陷</h1><p>synchronized是java中的一个关键字，也就是说是Java语言内置的特性。那么为什么会出现Lock呢？</p>\n<p>如果一个代码块被synchronized修饰了，当一个线程获取了对应的锁，并执行该代码块时，其他线程便只能一直等待，等待获取锁的线程释放锁，而这里获取锁的线程释放锁只会有两种情况：<br>1.获取锁的线程执行完了该代码块，然后线程释放对锁的占有；<br>2.线程执行发生异常，此时JVM会让线程自动释放锁。<br>那么如果这个获取锁的线程由于要等待IO或者其他原因（比如调用sleep方法）被阻塞了，但是又没有释放锁，其他线程便只能干巴巴地等待，试想一下，这多么影响程序执行效率。<br>因此就需要有一种机制可以不让等待的线程一直无期限地等待下去（比如只等待一定的时间或者能够响应中断），通过Lock就可以办到。<br>再举个例子：当有多个线程读写文件时，读操作和写操作会发生冲突现象，写操作和写操作会发生冲突现象，但是读操作和读操作不会发生冲突现象。</p>\n<p>但是采用synchronized关键字来实现同步的话，就会导致一个问题：<br>如果多个线程都只是进行读操作，所以当一个线程在进行读操作时，其他线程只能等待无法进行读操作。<br>总结一下，也就是说Lock提供了比synchronized更多的功能。但是要注意以下几点：<br>1）Lock不是Java语言内置的，synchronized是Java语言的关键字，因此是内置特性。Lock是一个类，通过这个类可以实现同步访问；</p>\n<p>2）Lock和synchronized有一点非常大的不同，采用synchronized不需要用户去手动释放锁，当synchronized方法或者synchronized代码块执行完之后，系统会自动让线程释放对锁的占用；而Lock则必须要用户去手动释放锁，如果没有主动释放锁，就有可能导致出现死锁现象。</p>\n<h1 id=\"锁的相关概念介绍\"><a href=\"#锁的相关概念介绍\" class=\"headerlink\" title=\"锁的相关概念介绍\"></a>锁的相关概念介绍</h1><p>1.可重入锁<br>　　如果锁具备可重入性，则称作为可重入锁。像synchronized和ReentrantLock都是可重入锁，可重入性在我看来实际上表明了锁的分配机制：基于线程的分配，而不是基于方法调用的分配。举个简单的例子，当一个线程执行到某个synchronized方法时，比如说method1，而在method1中会调用另外一个synchronized方法method2，此时线程不必重新去申请锁，而是可以直接执行方法method2。<br>2.可中断锁<br>synchronized就是不可中断的锁,Lock是可中断锁.<br>　　如果某一线程A正在执行锁中的代码，另一线程B正在等待获取该锁，可能由于等待时间过长，线程B不想等待了，想先处理其他事情，我们可以让它中断自己或者在别的线程中中断它，这种就是可中断锁。<br>3.公平锁。<br>公平锁即尽量以请求锁的顺序来获取锁。比如同是有多个线程在等待一个锁，当这个锁被释放时，等待时间最久的线程（最先请求的线程）会获得该所，这种就是公平锁。<br>非公平锁即无法保证锁的获取是按照请求锁的顺序进行的。这样就可能导致某个或者一些线程永远获取不到锁。<br>　　在Java中，synchronized就是非公平锁，它无法保证等待的线程获取锁的顺序。<br>　　而对于ReentrantLock和ReentrantReadWriteLock，它默认情况下是非公平锁，但是可以设置为公平锁。</p>\n<ol start=\"4\">\n<li>读写锁<br>读写锁将对一个资源（比如文件）的访问分成了2个锁，一个读锁和一个写锁。<br>正因为有了读写锁，才使得多个线程之间的读操作不会发生冲突。<br>ReadWriteLock就是读写锁，它是一个接口，ReentrantReadWriteLock实现了这个接口。可以通过readLock()获取读锁，通过writeLock()获取写锁。上面已经演示过了读写锁的使用方法，在此不再赘述。</li>\n</ol>\n<hr>\n<h1 id=\"synchronized锁的对象是谁\"><a href=\"#synchronized锁的对象是谁\" class=\"headerlink\" title=\"synchronized锁的对象是谁?\"></a>synchronized锁的对象是谁?</h1><p>1.用在代码块上,锁住的是括号内的对象<br>2.用在成员函数上,锁住该方法的对象.(对象锁)<br>3.用在静态方法上,锁住该类的字节码文件对象.(类锁)</p>\n<h1 id=\"锁的简单应用\"><a href=\"#锁的简单应用\" class=\"headerlink\" title=\"锁的简单应用\"></a>锁的简单应用</h1><p>用lock来保证原子性<br>原子性:不可分,从头执行到尾,不能被其他线程同时执行.<br>可以通过CAS来实现原子操作:CAS(compare and swap):<br>CAS操作需要输入两个数值，一个旧值（期望操作前的值）和一个新值，在操作期间先比较下旧值有没有发生变化，如果没有发生变化，才交换成新值，发生了变化则不交换。<br>CAS主要通过compareAndSwapXXX()方法来实现，而这个方法的实现需要涉及底层的unsafe类<br>unsafe类：java不能直接访问操作系统底层，而是通过本地方法来访问。Unsafe类提供了硬件级别的原子操作.</p>\n"},{"title":"wait/notify/notifyAll详解","date":"2018-07-19T09:49:53.000Z","_content":"1. wait()、notify/notifyAll() 方法是Object的本地final方法，无法被重写。\n2. wait()使当前线程阻塞,前提是必须获得锁,一般配合synchronized关键字使用.\n3. 当线程执行wait()方法时,会释放当前的锁,然后让出cpu,进入等待状态.\n只有当notify/notifyAll)()被执行,才会唤醒一个或多个等待状态的线程,然后继续往下执行.直到执行完synchronized 代码块的代码或是中途遇到wait() ，再次释放锁.\n也就是说，notify/notifyAll() 的执行只是唤醒沉睡的线程，而不会立即释放锁，锁的释放要看代码块的具体执行情况。所以在编程中，尽量在使用了notify/notifyAll() 后立即退出临界区，以唤醒其他线程.\n4.notify 和 notifyAll的区别.\nnotify方法只唤醒一个等待（对象的）线程并使该线程开始执行。所以如果有多个线程等待一个对象，这个方法只会唤醒其中一个线程，选择哪个线程取决于操作系统对多线程管理的实现。notifyAll 会唤醒所有等待(对象的)线程，尽管哪一个线程将会第一个处理取决于操作系统的实现。如果当前情况下有多个线程需要被唤醒，推荐使用notifyAll 方法。比如在生产者-消费者里面的使用，每次都需要唤醒所有的消费者或是生产者，以判断程序是否可以继续往下执行。\n","source":"_posts/2018.07.19 wait-notify-notifyAll详解.md","raw":"---\ntitle: wait/notify/notifyAll详解\ntags: 面试\ndate: 2018-07-19 17:49:53\n---\n1. wait()、notify/notifyAll() 方法是Object的本地final方法，无法被重写。\n2. wait()使当前线程阻塞,前提是必须获得锁,一般配合synchronized关键字使用.\n3. 当线程执行wait()方法时,会释放当前的锁,然后让出cpu,进入等待状态.\n只有当notify/notifyAll)()被执行,才会唤醒一个或多个等待状态的线程,然后继续往下执行.直到执行完synchronized 代码块的代码或是中途遇到wait() ，再次释放锁.\n也就是说，notify/notifyAll() 的执行只是唤醒沉睡的线程，而不会立即释放锁，锁的释放要看代码块的具体执行情况。所以在编程中，尽量在使用了notify/notifyAll() 后立即退出临界区，以唤醒其他线程.\n4.notify 和 notifyAll的区别.\nnotify方法只唤醒一个等待（对象的）线程并使该线程开始执行。所以如果有多个线程等待一个对象，这个方法只会唤醒其中一个线程，选择哪个线程取决于操作系统对多线程管理的实现。notifyAll 会唤醒所有等待(对象的)线程，尽管哪一个线程将会第一个处理取决于操作系统的实现。如果当前情况下有多个线程需要被唤醒，推荐使用notifyAll 方法。比如在生产者-消费者里面的使用，每次都需要唤醒所有的消费者或是生产者，以判断程序是否可以继续往下执行。\n","slug":"wait-notify-notifyAll详解","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzco002ldcyu4jmtet2g","content":"<ol>\n<li>wait()、notify/notifyAll() 方法是Object的本地final方法，无法被重写。</li>\n<li>wait()使当前线程阻塞,前提是必须获得锁,一般配合synchronized关键字使用.</li>\n<li>当线程执行wait()方法时,会释放当前的锁,然后让出cpu,进入等待状态.<br>只有当notify/notifyAll)()被执行,才会唤醒一个或多个等待状态的线程,然后继续往下执行.直到执行完synchronized 代码块的代码或是中途遇到wait() ，再次释放锁.<br>也就是说，notify/notifyAll() 的执行只是唤醒沉睡的线程，而不会立即释放锁，锁的释放要看代码块的具体执行情况。所以在编程中，尽量在使用了notify/notifyAll() 后立即退出临界区，以唤醒其他线程.<br>4.notify 和 notifyAll的区别.<br>notify方法只唤醒一个等待（对象的）线程并使该线程开始执行。所以如果有多个线程等待一个对象，这个方法只会唤醒其中一个线程，选择哪个线程取决于操作系统对多线程管理的实现。notifyAll 会唤醒所有等待(对象的)线程，尽管哪一个线程将会第一个处理取决于操作系统的实现。如果当前情况下有多个线程需要被唤醒，推荐使用notifyAll 方法。比如在生产者-消费者里面的使用，每次都需要唤醒所有的消费者或是生产者，以判断程序是否可以继续往下执行。</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>wait()、notify/notifyAll() 方法是Object的本地final方法，无法被重写。</li>\n<li>wait()使当前线程阻塞,前提是必须获得锁,一般配合synchronized关键字使用.</li>\n<li>当线程执行wait()方法时,会释放当前的锁,然后让出cpu,进入等待状态.<br>只有当notify/notifyAll)()被执行,才会唤醒一个或多个等待状态的线程,然后继续往下执行.直到执行完synchronized 代码块的代码或是中途遇到wait() ，再次释放锁.<br>也就是说，notify/notifyAll() 的执行只是唤醒沉睡的线程，而不会立即释放锁，锁的释放要看代码块的具体执行情况。所以在编程中，尽量在使用了notify/notifyAll() 后立即退出临界区，以唤醒其他线程.<br>4.notify 和 notifyAll的区别.<br>notify方法只唤醒一个等待（对象的）线程并使该线程开始执行。所以如果有多个线程等待一个对象，这个方法只会唤醒其中一个线程，选择哪个线程取决于操作系统对多线程管理的实现。notifyAll 会唤醒所有等待(对象的)线程，尽管哪一个线程将会第一个处理取决于操作系统的实现。如果当前情况下有多个线程需要被唤醒，推荐使用notifyAll 方法。比如在生产者-消费者里面的使用，每次都需要唤醒所有的消费者或是生产者，以判断程序是否可以继续往下执行。</li>\n</ol>\n"},{"title":"mybatis遇到的小坑","date":"2018-07-22T02:30:18.000Z","_content":"# 整合mybatis和springboot时,始终取不出某些字段\n不知道为什么,关于Date类型和带有驼峰类型的字段取出一直显示为null.\n# 对比原始项目,发现问题\n在原始项目中,发现多了两个文件:toolbox.xml 和 mybatis-config.xml.这时候找到问题,是缺少了关于驼峰命名法和日期转换的配置.加上后即可.\n# 日期格式化的写法\n$date.format('yyyy-MM-dd HH:mm:ss', $!{vo.question.createdDate})","source":"_posts/2018.07.22 mybatis遇到的小坑.md","raw":"---\ntitle: mybatis遇到的小坑\ntags: 面试\ndate: 2018-07-22 10:30:18\n---\n# 整合mybatis和springboot时,始终取不出某些字段\n不知道为什么,关于Date类型和带有驼峰类型的字段取出一直显示为null.\n# 对比原始项目,发现问题\n在原始项目中,发现多了两个文件:toolbox.xml 和 mybatis-config.xml.这时候找到问题,是缺少了关于驼峰命名法和日期转换的配置.加上后即可.\n# 日期格式化的写法\n$date.format('yyyy-MM-dd HH:mm:ss', $!{vo.question.createdDate})","slug":"mybatis遇到的小坑","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcp002ndcyub2l9wrwi","content":"<h1 id=\"整合mybatis和springboot时-始终取不出某些字段\"><a href=\"#整合mybatis和springboot时-始终取不出某些字段\" class=\"headerlink\" title=\"整合mybatis和springboot时,始终取不出某些字段\"></a>整合mybatis和springboot时,始终取不出某些字段</h1><p>不知道为什么,关于Date类型和带有驼峰类型的字段取出一直显示为null.</p>\n<h1 id=\"对比原始项目-发现问题\"><a href=\"#对比原始项目-发现问题\" class=\"headerlink\" title=\"对比原始项目,发现问题\"></a>对比原始项目,发现问题</h1><p>在原始项目中,发现多了两个文件:toolbox.xml 和 mybatis-config.xml.这时候找到问题,是缺少了关于驼峰命名法和日期转换的配置.加上后即可.</p>\n<h1 id=\"日期格式化的写法\"><a href=\"#日期格式化的写法\" class=\"headerlink\" title=\"日期格式化的写法\"></a>日期格式化的写法</h1><p>$date.format(‘yyyy-MM-dd HH:mm:ss’, $!{vo.question.createdDate})</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"整合mybatis和springboot时-始终取不出某些字段\"><a href=\"#整合mybatis和springboot时-始终取不出某些字段\" class=\"headerlink\" title=\"整合mybatis和springboot时,始终取不出某些字段\"></a>整合mybatis和springboot时,始终取不出某些字段</h1><p>不知道为什么,关于Date类型和带有驼峰类型的字段取出一直显示为null.</p>\n<h1 id=\"对比原始项目-发现问题\"><a href=\"#对比原始项目-发现问题\" class=\"headerlink\" title=\"对比原始项目,发现问题\"></a>对比原始项目,发现问题</h1><p>在原始项目中,发现多了两个文件:toolbox.xml 和 mybatis-config.xml.这时候找到问题,是缺少了关于驼峰命名法和日期转换的配置.加上后即可.</p>\n<h1 id=\"日期格式化的写法\"><a href=\"#日期格式化的写法\" class=\"headerlink\" title=\"日期格式化的写法\"></a>日期格式化的写法</h1><p>$date.format(‘yyyy-MM-dd HH:mm:ss’, $!{vo.question.createdDate})</p>\n"},{"title":"springboot热部署","date":"2018-07-22T02:40:09.000Z","_content":"# 成功实现热部署\n1. pom.xml增加\n```\n<dependency>\n\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-devtools</artifactId>\n\t<optional>true</optional>\n</dependency>\n```\n2. file>setting>Build,Execution,Deployment>Compiler>Bulid project automatically\n3. shift + ctrl + alt + / > Registry\n4. compiler.automake.allow.when.app.running","source":"_posts/2018.07.22 springboot热部署.md","raw":"---\ntitle: springboot热部署\ntags: 项目\ndate: 2018-07-22 10:40:09\n---\n# 成功实现热部署\n1. pom.xml增加\n```\n<dependency>\n\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-devtools</artifactId>\n\t<optional>true</optional>\n</dependency>\n```\n2. file>setting>Build,Execution,Deployment>Compiler>Bulid project automatically\n3. shift + ctrl + alt + / > Registry\n4. compiler.automake.allow.when.app.running","slug":"springboot热部署","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcq002pdcyubwkfm05r","content":"<h1 id=\"成功实现热部署\"><a href=\"#成功实现热部署\" class=\"headerlink\" title=\"成功实现热部署\"></a>成功实现热部署</h1><ol>\n<li><p>pom.xml增加</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class=\"line\">\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br><span class=\"line\">\t&lt;optional&gt;true&lt;/optional&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>file&gt;setting&gt;Build,Execution,Deployment&gt;Compiler&gt;Bulid project automatically</p>\n</li>\n<li>shift + ctrl + alt + / &gt; Registry</li>\n<li>compiler.automake.allow.when.app.running</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"成功实现热部署\"><a href=\"#成功实现热部署\" class=\"headerlink\" title=\"成功实现热部署\"></a>成功实现热部署</h1><ol>\n<li><p>pom.xml增加</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class=\"line\">\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br><span class=\"line\">\t&lt;optional&gt;true&lt;/optional&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>file&gt;setting&gt;Build,Execution,Deployment&gt;Compiler&gt;Bulid project automatically</p>\n</li>\n<li>shift + ctrl + alt + / &gt; Registry</li>\n<li>compiler.automake.allow.when.app.running</li>\n</ol>\n"},{"title":"tomcat服务器实现https","date":"2018-07-26T07:06:08.000Z","_content":"[点击这里](https://blog.csdn.net/feng2qing/article/details/78756453)","source":"_posts/2018.07.24 .tomcat服务器实现https.md","raw":"---\ntitle: tomcat服务器实现https\ntags: 项目\ndate: 2018-07-26 15:06:08\n---\n[点击这里](https://blog.csdn.net/feng2qing/article/details/78756453)","slug":".tomcat服务器实现https","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcr002rdcyux9lpa7dn","content":"<p><a href=\"https://blog.csdn.net/feng2qing/article/details/78756453\" target=\"_blank\" rel=\"noopener\">点击这里</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://blog.csdn.net/feng2qing/article/details/78756453\" target=\"_blank\" rel=\"noopener\">点击这里</a></p>\n"},{"title":"cookie中的path设置","date":"2018-07-24T07:06:08.000Z","_content":"# 一个由path引发的\"血案\"\n本项目是类似于知乎的问答网站,用户注册/登录后会下发一个cookie,但每次登录的cookie可以正常通过HttpServletResponse来获取,但注册后下发的cookie就没用.\n在网页调试中发现,登录后path为\"/\",而注册后cookie的path为\"/reg\".所以猜想这个是问题的根源.\n然后对比了reg和login的代码,发现login中有一步设置cookie.path=\"/\",而注册没有,所以造成了这个小问题.\n# 分析cookie.path的作用\n查看源码:\n```\nSpecifies a path for the cookie to which the client should return the cookie.\n*  The cookie is visible to all the pages in the directory you specify, and\n* all the pages in that directory's subdirectories. A cookie's path must\n* include the servlet that set the cookie, for example, <i>/catalog</i>,\n* which makes the cookie visible to all directories on the server under\n* <i>/catalog</i>.\n```\n大概含义是,cookie只有在path下才可见.因为没有设置path=\"/\",所以默认cookie在\"/reg\"目录下才可见,导致了以上的问题.\n","source":"_posts/2018.07.24 cookie中的path设置.md","raw":"---\ntitle: cookie中的path设置\ntags: 项目\ndate: 2018-07-24 15:06:08\n---\n# 一个由path引发的\"血案\"\n本项目是类似于知乎的问答网站,用户注册/登录后会下发一个cookie,但每次登录的cookie可以正常通过HttpServletResponse来获取,但注册后下发的cookie就没用.\n在网页调试中发现,登录后path为\"/\",而注册后cookie的path为\"/reg\".所以猜想这个是问题的根源.\n然后对比了reg和login的代码,发现login中有一步设置cookie.path=\"/\",而注册没有,所以造成了这个小问题.\n# 分析cookie.path的作用\n查看源码:\n```\nSpecifies a path for the cookie to which the client should return the cookie.\n*  The cookie is visible to all the pages in the directory you specify, and\n* all the pages in that directory's subdirectories. A cookie's path must\n* include the servlet that set the cookie, for example, <i>/catalog</i>,\n* which makes the cookie visible to all directories on the server under\n* <i>/catalog</i>.\n```\n大概含义是,cookie只有在path下才可见.因为没有设置path=\"/\",所以默认cookie在\"/reg\"目录下才可见,导致了以上的问题.\n","slug":"cookie中的path设置","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcs002udcyuqwsrvnuw","content":"<h1 id=\"一个由path引发的”血案”\"><a href=\"#一个由path引发的”血案”\" class=\"headerlink\" title=\"一个由path引发的”血案”\"></a>一个由path引发的”血案”</h1><p>本项目是类似于知乎的问答网站,用户注册/登录后会下发一个cookie,但每次登录的cookie可以正常通过HttpServletResponse来获取,但注册后下发的cookie就没用.<br>在网页调试中发现,登录后path为”/“,而注册后cookie的path为”/reg”.所以猜想这个是问题的根源.<br>然后对比了reg和login的代码,发现login中有一步设置cookie.path=”/“,而注册没有,所以造成了这个小问题.</p>\n<h1 id=\"分析cookie-path的作用\"><a href=\"#分析cookie-path的作用\" class=\"headerlink\" title=\"分析cookie.path的作用\"></a>分析cookie.path的作用</h1><p>查看源码:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Specifies a path for the cookie to which the client should return the cookie.</span><br><span class=\"line\">*  The cookie is visible to all the pages in the directory you specify, and</span><br><span class=\"line\">* all the pages in that directory&apos;s subdirectories. A cookie&apos;s path must</span><br><span class=\"line\">* include the servlet that set the cookie, for example, &lt;i&gt;/catalog&lt;/i&gt;,</span><br><span class=\"line\">* which makes the cookie visible to all directories on the server under</span><br><span class=\"line\">* &lt;i&gt;/catalog&lt;/i&gt;.</span><br></pre></td></tr></table></figure></p>\n<p>大概含义是,cookie只有在path下才可见.因为没有设置path=”/“,所以默认cookie在”/reg”目录下才可见,导致了以上的问题.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"一个由path引发的”血案”\"><a href=\"#一个由path引发的”血案”\" class=\"headerlink\" title=\"一个由path引发的”血案”\"></a>一个由path引发的”血案”</h1><p>本项目是类似于知乎的问答网站,用户注册/登录后会下发一个cookie,但每次登录的cookie可以正常通过HttpServletResponse来获取,但注册后下发的cookie就没用.<br>在网页调试中发现,登录后path为”/“,而注册后cookie的path为”/reg”.所以猜想这个是问题的根源.<br>然后对比了reg和login的代码,发现login中有一步设置cookie.path=”/“,而注册没有,所以造成了这个小问题.</p>\n<h1 id=\"分析cookie-path的作用\"><a href=\"#分析cookie-path的作用\" class=\"headerlink\" title=\"分析cookie.path的作用\"></a>分析cookie.path的作用</h1><p>查看源码:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Specifies a path for the cookie to which the client should return the cookie.</span><br><span class=\"line\">*  The cookie is visible to all the pages in the directory you specify, and</span><br><span class=\"line\">* all the pages in that directory&apos;s subdirectories. A cookie&apos;s path must</span><br><span class=\"line\">* include the servlet that set the cookie, for example, &lt;i&gt;/catalog&lt;/i&gt;,</span><br><span class=\"line\">* which makes the cookie visible to all directories on the server under</span><br><span class=\"line\">* &lt;i&gt;/catalog&lt;/i&gt;.</span><br></pre></td></tr></table></figure></p>\n<p>大概含义是,cookie只有在path下才可见.因为没有设置path=”/“,所以默认cookie在”/reg”目录下才可见,导致了以上的问题.</p>\n"},{"title":"springboot遇到一些问题","date":"2018-07-28T12:34:56.000Z","_content":"## 1.Parent的<version>1.5.14.RELEASE</version>\n","source":"_posts/2018.07.28 springboot遇到一些问题.md","raw":"---\ntitle: springboot遇到一些问题\ntags: 项目\ndate: 2018-07-28 20:34:56\n---\n## 1.Parent的<version>1.5.14.RELEASE</version>\n","slug":"springboot遇到一些问题","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzct002wdcyu0y70fzmn","content":"<h2 id=\"1-Parent的1-5-14-RELEASE\"><a href=\"#1-Parent的1-5-14-RELEASE\" class=\"headerlink\" title=\"1.Parent的1.5.14.RELEASE\"></a>1.Parent的<version>1.5.14.RELEASE</version></h2>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Parent的1-5-14-RELEASE\"><a href=\"#1-Parent的1-5-14-RELEASE\" class=\"headerlink\" title=\"1.Parent的1.5.14.RELEASE\"></a>1.Parent的<version>1.5.14.RELEASE</version></h2>"},{"title":"秒杀活动解决方案","date":"2018-08-14T12:13:57.000Z","id":"123","_content":"## 1万人并发秒杀活动\nredis,decr,原子计数器\n秒杀为了吸引流量\n秒杀,群红包,抢优惠券,抽奖\n特点:读多写少,高并发,资源冲突\n缓存,限流,负载均衡,异步,队列,院子操作\n原子操作:数据库锁(乐观锁,悲观锁),分布式锁,其他原子操作\n日均pv只有几万的企业管理系统\n用户量千万的中型技术社区\n活跃用户过亿的大型购物网站\n基本架构:\n应用层 APP 浏览器缓存,本地缓存,按钮控制,图形验证码\n网络层 网络路由 CDN 超大并发秒杀很有必要\n负载层 Ngnix 负载均衡,动静分离,反向代理缓存,限流\n服务层 java,php 动态页面静态化,分布式缓存,异步队列限流,原子操作\n数据库 oracle mysql 原子操作保障(乐观锁悲观锁)\n秒杀服务器 要单独,保证不影响其他正常业务\n1单台tomcat 300-400并发数\n","source":"_posts/2018.08.14 秒杀活动解决方案.md","raw":"---\ntitle: 秒杀活动解决方案\ntags: 面试\ndate: 2018-08-14 20:13:57\nid: 123\n---\n## 1万人并发秒杀活动\nredis,decr,原子计数器\n秒杀为了吸引流量\n秒杀,群红包,抢优惠券,抽奖\n特点:读多写少,高并发,资源冲突\n缓存,限流,负载均衡,异步,队列,院子操作\n原子操作:数据库锁(乐观锁,悲观锁),分布式锁,其他原子操作\n日均pv只有几万的企业管理系统\n用户量千万的中型技术社区\n活跃用户过亿的大型购物网站\n基本架构:\n应用层 APP 浏览器缓存,本地缓存,按钮控制,图形验证码\n网络层 网络路由 CDN 超大并发秒杀很有必要\n负载层 Ngnix 负载均衡,动静分离,反向代理缓存,限流\n服务层 java,php 动态页面静态化,分布式缓存,异步队列限流,原子操作\n数据库 oracle mysql 原子操作保障(乐观锁悲观锁)\n秒杀服务器 要单独,保证不影响其他正常业务\n1单台tomcat 300-400并发数\n","slug":"秒杀活动解决方案","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcu002xdcyup1rdq8fd","content":"<h2 id=\"1万人并发秒杀活动\"><a href=\"#1万人并发秒杀活动\" class=\"headerlink\" title=\"1万人并发秒杀活动\"></a>1万人并发秒杀活动</h2><p>redis,decr,原子计数器<br>秒杀为了吸引流量<br>秒杀,群红包,抢优惠券,抽奖<br>特点:读多写少,高并发,资源冲突<br>缓存,限流,负载均衡,异步,队列,院子操作<br>原子操作:数据库锁(乐观锁,悲观锁),分布式锁,其他原子操作<br>日均pv只有几万的企业管理系统<br>用户量千万的中型技术社区<br>活跃用户过亿的大型购物网站<br>基本架构:<br>应用层 APP 浏览器缓存,本地缓存,按钮控制,图形验证码<br>网络层 网络路由 CDN 超大并发秒杀很有必要<br>负载层 Ngnix 负载均衡,动静分离,反向代理缓存,限流<br>服务层 java,php 动态页面静态化,分布式缓存,异步队列限流,原子操作<br>数据库 oracle mysql 原子操作保障(乐观锁悲观锁)<br>秒杀服务器 要单独,保证不影响其他正常业务<br>1单台tomcat 300-400并发数</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1万人并发秒杀活动\"><a href=\"#1万人并发秒杀活动\" class=\"headerlink\" title=\"1万人并发秒杀活动\"></a>1万人并发秒杀活动</h2><p>redis,decr,原子计数器<br>秒杀为了吸引流量<br>秒杀,群红包,抢优惠券,抽奖<br>特点:读多写少,高并发,资源冲突<br>缓存,限流,负载均衡,异步,队列,院子操作<br>原子操作:数据库锁(乐观锁,悲观锁),分布式锁,其他原子操作<br>日均pv只有几万的企业管理系统<br>用户量千万的中型技术社区<br>活跃用户过亿的大型购物网站<br>基本架构:<br>应用层 APP 浏览器缓存,本地缓存,按钮控制,图形验证码<br>网络层 网络路由 CDN 超大并发秒杀很有必要<br>负载层 Ngnix 负载均衡,动静分离,反向代理缓存,限流<br>服务层 java,php 动态页面静态化,分布式缓存,异步队列限流,原子操作<br>数据库 oracle mysql 原子操作保障(乐观锁悲观锁)<br>秒杀服务器 要单独,保证不影响其他正常业务<br>1单台tomcat 300-400并发数</p>\n"},{"title":"Redis实现分布式锁","date":"2018-08-17T12:06:48.000Z","id":"1","_content":"CountDownLatch:闭锁\n# 加锁的优化\n1.缩短加锁时间\n2.细粒度的加锁\n3.锁分离\n\n公平锁:ReentrantLock\n非公平锁:synchronized,ReentrantLock,CAS\n\n# 分布式锁:\n1.互斥性:同一时间只有一个客户端可以获取\n2.防死锁:即使有一个客户端在有锁期间崩溃而没解锁,后续其他客户端也能加锁\n3.持锁人解锁:加锁解锁必须同一个客户端\n4.可重入\n\n# Redis分布式锁流程图 \n## Redis-Server Lock\n1.竞争锁\n2.设置锁的有效期\n3.获得锁的线程\n4.分配唯一标识\n## Redis-Server UnLock\n1.有效期到了自动解锁\n2.操作完成主动解锁\n3.需要判断是否有删除锁的权限\n\n## 中间件\n缓存服务,搜索服务,消息队列","source":"_posts/2018.08.17 Redis实现分布式锁.md","raw":"---\ntitle: Redis实现分布式锁\ntags: 面试\ndate: 2018-08-17 20:06:48\nid: 1\n---\nCountDownLatch:闭锁\n# 加锁的优化\n1.缩短加锁时间\n2.细粒度的加锁\n3.锁分离\n\n公平锁:ReentrantLock\n非公平锁:synchronized,ReentrantLock,CAS\n\n# 分布式锁:\n1.互斥性:同一时间只有一个客户端可以获取\n2.防死锁:即使有一个客户端在有锁期间崩溃而没解锁,后续其他客户端也能加锁\n3.持锁人解锁:加锁解锁必须同一个客户端\n4.可重入\n\n# Redis分布式锁流程图 \n## Redis-Server Lock\n1.竞争锁\n2.设置锁的有效期\n3.获得锁的线程\n4.分配唯一标识\n## Redis-Server UnLock\n1.有效期到了自动解锁\n2.操作完成主动解锁\n3.需要判断是否有删除锁的权限\n\n## 中间件\n缓存服务,搜索服务,消息队列","slug":"Redis实现分布式锁","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcw0030dcyus33kzssv","content":"<p>CountDownLatch:闭锁</p>\n<h1 id=\"加锁的优化\"><a href=\"#加锁的优化\" class=\"headerlink\" title=\"加锁的优化\"></a>加锁的优化</h1><p>1.缩短加锁时间<br>2.细粒度的加锁<br>3.锁分离</p>\n<p>公平锁:ReentrantLock<br>非公平锁:synchronized,ReentrantLock,CAS</p>\n<h1 id=\"分布式锁\"><a href=\"#分布式锁\" class=\"headerlink\" title=\"分布式锁:\"></a>分布式锁:</h1><p>1.互斥性:同一时间只有一个客户端可以获取<br>2.防死锁:即使有一个客户端在有锁期间崩溃而没解锁,后续其他客户端也能加锁<br>3.持锁人解锁:加锁解锁必须同一个客户端<br>4.可重入</p>\n<h1 id=\"Redis分布式锁流程图\"><a href=\"#Redis分布式锁流程图\" class=\"headerlink\" title=\"Redis分布式锁流程图\"></a>Redis分布式锁流程图</h1><h2 id=\"Redis-Server-Lock\"><a href=\"#Redis-Server-Lock\" class=\"headerlink\" title=\"Redis-Server Lock\"></a>Redis-Server Lock</h2><p>1.竞争锁<br>2.设置锁的有效期<br>3.获得锁的线程<br>4.分配唯一标识</p>\n<h2 id=\"Redis-Server-UnLock\"><a href=\"#Redis-Server-UnLock\" class=\"headerlink\" title=\"Redis-Server UnLock\"></a>Redis-Server UnLock</h2><p>1.有效期到了自动解锁<br>2.操作完成主动解锁<br>3.需要判断是否有删除锁的权限</p>\n<h2 id=\"中间件\"><a href=\"#中间件\" class=\"headerlink\" title=\"中间件\"></a>中间件</h2><p>缓存服务,搜索服务,消息队列</p>\n","site":{"data":{}},"excerpt":"","more":"<p>CountDownLatch:闭锁</p>\n<h1 id=\"加锁的优化\"><a href=\"#加锁的优化\" class=\"headerlink\" title=\"加锁的优化\"></a>加锁的优化</h1><p>1.缩短加锁时间<br>2.细粒度的加锁<br>3.锁分离</p>\n<p>公平锁:ReentrantLock<br>非公平锁:synchronized,ReentrantLock,CAS</p>\n<h1 id=\"分布式锁\"><a href=\"#分布式锁\" class=\"headerlink\" title=\"分布式锁:\"></a>分布式锁:</h1><p>1.互斥性:同一时间只有一个客户端可以获取<br>2.防死锁:即使有一个客户端在有锁期间崩溃而没解锁,后续其他客户端也能加锁<br>3.持锁人解锁:加锁解锁必须同一个客户端<br>4.可重入</p>\n<h1 id=\"Redis分布式锁流程图\"><a href=\"#Redis分布式锁流程图\" class=\"headerlink\" title=\"Redis分布式锁流程图\"></a>Redis分布式锁流程图</h1><h2 id=\"Redis-Server-Lock\"><a href=\"#Redis-Server-Lock\" class=\"headerlink\" title=\"Redis-Server Lock\"></a>Redis-Server Lock</h2><p>1.竞争锁<br>2.设置锁的有效期<br>3.获得锁的线程<br>4.分配唯一标识</p>\n<h2 id=\"Redis-Server-UnLock\"><a href=\"#Redis-Server-UnLock\" class=\"headerlink\" title=\"Redis-Server UnLock\"></a>Redis-Server UnLock</h2><p>1.有效期到了自动解锁<br>2.操作完成主动解锁<br>3.需要判断是否有删除锁的权限</p>\n<h2 id=\"中间件\"><a href=\"#中间件\" class=\"headerlink\" title=\"中间件\"></a>中间件</h2><p>缓存服务,搜索服务,消息队列</p>\n"},{"title":"电源vb编程","date":"2018-08-23T02:59:33.000Z","_content":"\n# 第一步，初始化MSComm，并引入Sleep函数\n\n```\nPrivate Declare Sub Sleep Lib \"Kernel32\" (ByVal NextRunProgramTimeAsMs As Long)\n\n\nPrivate Sub Form_load()\n\nWith MSComm1\n.CommPort = 3 '选择串口2\n.Settings = \"9600,n,8,1\" '9.6kbit/s,无校验,8位数据位,1位停止位\n.InputMode = comInputModeBinary '以二进制格式读取接收缓冲区\n.RThreshold = 1 '接收字符数大于等于1就会产生接收中断\n.InputLen = 0 '读出接收缓冲区中的所有内容\n.OutBufferCount = 0 '清空发送缓冲区\n.InBufferCount = 0 '清空接收缓冲区\n.InputMode = comInputModeText\n\nEnd With\n\nEnd Sub\n\n```\n\n# 第二步,打开端口\n```\nPrivate Sub Command1_Click()\n\nMSComm1.PortOpen = True\n\nEnd Sub\n```\n\n# 第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以 & Chr(10) 结束）\n```\nPrivate Sub Command2_Click()\n\n\n MSComm1.Output = \"SOUR:CURR:LEV 0.10000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\nSleep (500)\n MSComm1.Output = \"SOUR:CURR:LEV 0.20000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\nSleep (500)\n MSComm1.Output = \"SOUR:CURR:LEV 0.30000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\nSleep (500)\n MSComm1.Output = \"SOUR:CURR:LEV 0.40000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\nSleep (500)\n MSComm1.Output = \"SOUR:CURR:LEV 0.50000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\n \n\nEnd Sub\n```\n\n# 第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）\n```\nPrivate Sub MSComm1_OnComm() 'OnComm事件\n\n\nSelect Case MSComm1.CommEvent\nCase comEvReceive '如果接收到字符\n \nSleep (50)\nText1.Text() = MSComm1.Input\nDebug.Print Text1.Text()\nOpen \"c:\\1.txt\" For Append As #1\n\nPrint #1, Text1.Text()\n\nClose #1\n\nEnd Select\n\n\nEnd Sub\n```\n\n\n\n","source":"_posts/2018.08.23 电源vb编程.md","raw":"---\ntitle: 电源vb编程\ndate: 2018-08-23 10:59:33\ntags:\n---\n\n# 第一步，初始化MSComm，并引入Sleep函数\n\n```\nPrivate Declare Sub Sleep Lib \"Kernel32\" (ByVal NextRunProgramTimeAsMs As Long)\n\n\nPrivate Sub Form_load()\n\nWith MSComm1\n.CommPort = 3 '选择串口2\n.Settings = \"9600,n,8,1\" '9.6kbit/s,无校验,8位数据位,1位停止位\n.InputMode = comInputModeBinary '以二进制格式读取接收缓冲区\n.RThreshold = 1 '接收字符数大于等于1就会产生接收中断\n.InputLen = 0 '读出接收缓冲区中的所有内容\n.OutBufferCount = 0 '清空发送缓冲区\n.InBufferCount = 0 '清空接收缓冲区\n.InputMode = comInputModeText\n\nEnd With\n\nEnd Sub\n\n```\n\n# 第二步,打开端口\n```\nPrivate Sub Command1_Click()\n\nMSComm1.PortOpen = True\n\nEnd Sub\n```\n\n# 第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以 & Chr(10) 结束）\n```\nPrivate Sub Command2_Click()\n\n\n MSComm1.Output = \"SOUR:CURR:LEV 0.10000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\nSleep (500)\n MSComm1.Output = \"SOUR:CURR:LEV 0.20000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\nSleep (500)\n MSComm1.Output = \"SOUR:CURR:LEV 0.30000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\nSleep (500)\n MSComm1.Output = \"SOUR:CURR:LEV 0.40000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\nSleep (500)\n MSComm1.Output = \"SOUR:CURR:LEV 0.50000\" & Chr(10)\n Sleep (100)\n MSComm1.Output = \"SOUR:CURR:LEV?\" & Chr(10)\n \n\nEnd Sub\n```\n\n# 第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）\n```\nPrivate Sub MSComm1_OnComm() 'OnComm事件\n\n\nSelect Case MSComm1.CommEvent\nCase comEvReceive '如果接收到字符\n \nSleep (50)\nText1.Text() = MSComm1.Input\nDebug.Print Text1.Text()\nOpen \"c:\\1.txt\" For Append As #1\n\nPrint #1, Text1.Text()\n\nClose #1\n\nEnd Select\n\n\nEnd Sub\n```\n\n\n\n","slug":"电源vb编程","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcx0032dcyuofus5b5m","content":"<h1 id=\"第一步，初始化MSComm，并引入Sleep函数\"><a href=\"#第一步，初始化MSComm，并引入Sleep函数\" class=\"headerlink\" title=\"第一步，初始化MSComm，并引入Sleep函数\"></a>第一步，初始化MSComm，并引入Sleep函数</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Private Declare Sub Sleep Lib &quot;Kernel32&quot; (ByVal NextRunProgramTimeAsMs As Long)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Private Sub Form_load()</span><br><span class=\"line\"></span><br><span class=\"line\">With MSComm1</span><br><span class=\"line\">.CommPort = 3 &apos;选择串口2</span><br><span class=\"line\">.Settings = &quot;9600,n,8,1&quot; &apos;9.6kbit/s,无校验,8位数据位,1位停止位</span><br><span class=\"line\">.InputMode = comInputModeBinary &apos;以二进制格式读取接收缓冲区</span><br><span class=\"line\">.RThreshold = 1 &apos;接收字符数大于等于1就会产生接收中断</span><br><span class=\"line\">.InputLen = 0 &apos;读出接收缓冲区中的所有内容</span><br><span class=\"line\">.OutBufferCount = 0 &apos;清空发送缓冲区</span><br><span class=\"line\">.InBufferCount = 0 &apos;清空接收缓冲区</span><br><span class=\"line\">.InputMode = comInputModeText</span><br><span class=\"line\"></span><br><span class=\"line\">End With</span><br><span class=\"line\"></span><br><span class=\"line\">End Sub</span><br></pre></td></tr></table></figure>\n<h1 id=\"第二步-打开端口\"><a href=\"#第二步-打开端口\" class=\"headerlink\" title=\"第二步,打开端口\"></a>第二步,打开端口</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Private Sub Command1_Click()</span><br><span class=\"line\"></span><br><span class=\"line\">MSComm1.PortOpen = True</span><br><span class=\"line\"></span><br><span class=\"line\">End Sub</span><br></pre></td></tr></table></figure>\n<h1 id=\"第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以-amp-Chr-10-结束）\"><a href=\"#第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以-amp-Chr-10-结束）\" class=\"headerlink\" title=\"第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以 &amp; Chr(10) 结束）\"></a>第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以 &amp; Chr(10) 结束）</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Private Sub Command2_Click()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.10000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\">Sleep (500)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.20000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\">Sleep (500)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.30000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\">Sleep (500)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.40000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\">Sleep (500)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.50000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">End Sub</span><br></pre></td></tr></table></figure>\n<h1 id=\"第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）\"><a href=\"#第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）\" class=\"headerlink\" title=\"第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）\"></a>第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Private Sub MSComm1_OnComm() &apos;OnComm事件</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Select Case MSComm1.CommEvent</span><br><span class=\"line\">Case comEvReceive &apos;如果接收到字符</span><br><span class=\"line\"> </span><br><span class=\"line\">Sleep (50)</span><br><span class=\"line\">Text1.Text() = MSComm1.Input</span><br><span class=\"line\">Debug.Print Text1.Text()</span><br><span class=\"line\">Open &quot;c:\\1.txt&quot; For Append As #1</span><br><span class=\"line\"></span><br><span class=\"line\">Print #1, Text1.Text()</span><br><span class=\"line\"></span><br><span class=\"line\">Close #1</span><br><span class=\"line\"></span><br><span class=\"line\">End Select</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">End Sub</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"第一步，初始化MSComm，并引入Sleep函数\"><a href=\"#第一步，初始化MSComm，并引入Sleep函数\" class=\"headerlink\" title=\"第一步，初始化MSComm，并引入Sleep函数\"></a>第一步，初始化MSComm，并引入Sleep函数</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Private Declare Sub Sleep Lib &quot;Kernel32&quot; (ByVal NextRunProgramTimeAsMs As Long)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Private Sub Form_load()</span><br><span class=\"line\"></span><br><span class=\"line\">With MSComm1</span><br><span class=\"line\">.CommPort = 3 &apos;选择串口2</span><br><span class=\"line\">.Settings = &quot;9600,n,8,1&quot; &apos;9.6kbit/s,无校验,8位数据位,1位停止位</span><br><span class=\"line\">.InputMode = comInputModeBinary &apos;以二进制格式读取接收缓冲区</span><br><span class=\"line\">.RThreshold = 1 &apos;接收字符数大于等于1就会产生接收中断</span><br><span class=\"line\">.InputLen = 0 &apos;读出接收缓冲区中的所有内容</span><br><span class=\"line\">.OutBufferCount = 0 &apos;清空发送缓冲区</span><br><span class=\"line\">.InBufferCount = 0 &apos;清空接收缓冲区</span><br><span class=\"line\">.InputMode = comInputModeText</span><br><span class=\"line\"></span><br><span class=\"line\">End With</span><br><span class=\"line\"></span><br><span class=\"line\">End Sub</span><br></pre></td></tr></table></figure>\n<h1 id=\"第二步-打开端口\"><a href=\"#第二步-打开端口\" class=\"headerlink\" title=\"第二步,打开端口\"></a>第二步,打开端口</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Private Sub Command1_Click()</span><br><span class=\"line\"></span><br><span class=\"line\">MSComm1.PortOpen = True</span><br><span class=\"line\"></span><br><span class=\"line\">End Sub</span><br></pre></td></tr></table></figure>\n<h1 id=\"第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以-amp-Chr-10-结束）\"><a href=\"#第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以-amp-Chr-10-结束）\" class=\"headerlink\" title=\"第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以 &amp; Chr(10) 结束）\"></a>第三步，向电源发送信息，注意设置间隔时间避免死机（每个命令都以 &amp; Chr(10) 结束）</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Private Sub Command2_Click()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.10000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\">Sleep (500)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.20000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\">Sleep (500)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.30000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\">Sleep (500)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.40000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\">Sleep (500)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV 0.50000&quot; &amp; Chr(10)</span><br><span class=\"line\"> Sleep (100)</span><br><span class=\"line\"> MSComm1.Output = &quot;SOUR:CURR:LEV?&quot; &amp; Chr(10)</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">End Sub</span><br></pre></td></tr></table></figure>\n<h1 id=\"第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）\"><a href=\"#第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）\" class=\"headerlink\" title=\"第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）\"></a>第四步，等待触发OnComm事件，并将返回值写入文件（注意设置间隔时间，等待数据写入完全再读取）</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Private Sub MSComm1_OnComm() &apos;OnComm事件</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Select Case MSComm1.CommEvent</span><br><span class=\"line\">Case comEvReceive &apos;如果接收到字符</span><br><span class=\"line\"> </span><br><span class=\"line\">Sleep (50)</span><br><span class=\"line\">Text1.Text() = MSComm1.Input</span><br><span class=\"line\">Debug.Print Text1.Text()</span><br><span class=\"line\">Open &quot;c:\\1.txt&quot; For Append As #1</span><br><span class=\"line\"></span><br><span class=\"line\">Print #1, Text1.Text()</span><br><span class=\"line\"></span><br><span class=\"line\">Close #1</span><br><span class=\"line\"></span><br><span class=\"line\">End Select</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">End Sub</span><br></pre></td></tr></table></figure>\n"},{"title":"substring导致内存泄漏","date":"2018-08-24T07:56:14.000Z","_content":"# JDK6中会泄漏，在JDK7中得到解决\n\nString是通过字符数组实现的。在jdk 6 中，String类包含三个成员变量：char value[]， int offset，int count。他们分别用来存储真正的字符数组，数组的第一个位置索引以及字符串中包含的字符个数。\n当调用substring方法的时候，会创建一个新的string对象，但是这个string的值仍然指向堆中的同一个字符数组。这两个对象中只有count和offset 的值是不同的。\n在jdk 7 中，substring方法会在堆内存中创建一个新的数组。\n","source":"_posts/2018.08.24 substring导致内存泄漏.md","raw":"---\ntitle: substring导致内存泄漏\ntags: 面试\ndate: 2018-08-24 15:56:14\n---\n# JDK6中会泄漏，在JDK7中得到解决\n\nString是通过字符数组实现的。在jdk 6 中，String类包含三个成员变量：char value[]， int offset，int count。他们分别用来存储真正的字符数组，数组的第一个位置索引以及字符串中包含的字符个数。\n当调用substring方法的时候，会创建一个新的string对象，但是这个string的值仍然指向堆中的同一个字符数组。这两个对象中只有count和offset 的值是不同的。\n在jdk 7 中，substring方法会在堆内存中创建一个新的数组。\n","slug":"substring导致内存泄漏","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzcz0035dcyu5m3jdcn1","content":"<h1 id=\"JDK6中会泄漏，在JDK7中得到解决\"><a href=\"#JDK6中会泄漏，在JDK7中得到解决\" class=\"headerlink\" title=\"JDK6中会泄漏，在JDK7中得到解决\"></a>JDK6中会泄漏，在JDK7中得到解决</h1><p>String是通过字符数组实现的。在jdk 6 中，String类包含三个成员变量：char value[]， int offset，int count。他们分别用来存储真正的字符数组，数组的第一个位置索引以及字符串中包含的字符个数。<br>当调用substring方法的时候，会创建一个新的string对象，但是这个string的值仍然指向堆中的同一个字符数组。这两个对象中只有count和offset 的值是不同的。<br>在jdk 7 中，substring方法会在堆内存中创建一个新的数组。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"JDK6中会泄漏，在JDK7中得到解决\"><a href=\"#JDK6中会泄漏，在JDK7中得到解决\" class=\"headerlink\" title=\"JDK6中会泄漏，在JDK7中得到解决\"></a>JDK6中会泄漏，在JDK7中得到解决</h1><p>String是通过字符数组实现的。在jdk 6 中，String类包含三个成员变量：char value[]， int offset，int count。他们分别用来存储真正的字符数组，数组的第一个位置索引以及字符串中包含的字符个数。<br>当调用substring方法的时候，会创建一个新的string对象，但是这个string的值仍然指向堆中的同一个字符数组。这两个对象中只有count和offset 的值是不同的。<br>在jdk 7 中，substring方法会在堆内存中创建一个新的数组。</p>\n"},{"title":"tomcat系统架构","date":"2018-08-24T01:03:58.000Z","_content":"\n!(https://mp.weixin.qq.com/s/D-lmaFwJBsiWIPmFIcfJnQ)[]\n# Tomcat的顶层架构\n最顶层容器是Server，每个Server可以保护多个Service。每个Service主要包含Connector 和 Container，这两个组件就是Tomcat的心脏。\n```\n1.Connector用于处理连接相关的事情，并提供Socket与Request和Response的转换；\n2.Container用于封装和管理Servlet，以及处理Request请求。\n```\n一个Tomcat中只有一个Server，一个Server可以包含多个Service，一个Service只有一个Container，但是可以有多个Connectors，这是因为一个服务可以有多个连接，如同时提供Http和Https链接，也可以提供向相同协议不同端口的连接,示意图如下（Engine、Host、Context下边会说到）：\n\n多个 Connector 和一个 Container 就形成了一个 Service，有了 Service 就可以对外提供服务了，但是 Service 还要一个生存的环境，必须要有人能够给她生命、掌握其生死大权，那就非 Server 莫属了！所以整个 Tomcat 的生命周期由 Server 控制。\n# Connector和Container的微妙关系\n\nConnector最底层使用的是Socket来进行连接的，Request和Response是按照HTTP协议来封装的，所以Connector同时需要实现TCP/IP协议和HTTP协议！\n# Connector架构分析\n```\n（1）Connector如何接受请求的？ \n（2）如何将请求封装成Request和Response的？ \n（3）封装完之后的Request和Response如何交给Container进行处理的？ \n（4）Container处理完之后如何交给Connector并返回给客户端的？\n```\n\nConnector就是使用ProtocolHandler来处理请求的，不同的ProtocolHandler代表不同的连接类型，比如：Http11Protocol使用的是普通Socket来连接的，Http11NioProtocol使用的是NioSocket来连接的。\n\n其中ProtocolHandler由包含了三个部件：Endpoint、Processor、Adapter。\n\n（1）Endpoint用来处理底层Socket的网络连接，Processor用于将Endpoint接收到的Socket封装成Request，Adapter用于将Request交给Container进行具体的处理。\n\n（2）Endpoint由于是处理底层的Socket网络连接，因此Endpoint是用来实现TCP/IP协议的，而Processor用来实现HTTP协议的，Adapter将请求适配到Servlet容器进行具体的处理。\n\n（3）Endpoint的抽象实现AbstractEndpoint里面定义的Acceptor和AsyncTimeout两个内部类和一个Handler接口。Acceptor用于监听请求，AsyncTimeout用于检查异步Request的超时，Handler用于处理接收到的Socket，在内部调用Processor进行处理。\n\n至此，我们应该很轻松的回答（1）（2）（3）的问题了，但是（4）还是不知道，那么我们就来看一下Container是如何进行处理的以及处理完之后是如何将处理完的结果返回给Connector的？\n\n\n","source":"_posts/2018.08.24 tomcat系统架构.md","raw":"---\ntitle: tomcat系统架构\ntags: 面试\ndate: 2018-08-24 09:03:58\n---\n\n!(https://mp.weixin.qq.com/s/D-lmaFwJBsiWIPmFIcfJnQ)[]\n# Tomcat的顶层架构\n最顶层容器是Server，每个Server可以保护多个Service。每个Service主要包含Connector 和 Container，这两个组件就是Tomcat的心脏。\n```\n1.Connector用于处理连接相关的事情，并提供Socket与Request和Response的转换；\n2.Container用于封装和管理Servlet，以及处理Request请求。\n```\n一个Tomcat中只有一个Server，一个Server可以包含多个Service，一个Service只有一个Container，但是可以有多个Connectors，这是因为一个服务可以有多个连接，如同时提供Http和Https链接，也可以提供向相同协议不同端口的连接,示意图如下（Engine、Host、Context下边会说到）：\n\n多个 Connector 和一个 Container 就形成了一个 Service，有了 Service 就可以对外提供服务了，但是 Service 还要一个生存的环境，必须要有人能够给她生命、掌握其生死大权，那就非 Server 莫属了！所以整个 Tomcat 的生命周期由 Server 控制。\n# Connector和Container的微妙关系\n\nConnector最底层使用的是Socket来进行连接的，Request和Response是按照HTTP协议来封装的，所以Connector同时需要实现TCP/IP协议和HTTP协议！\n# Connector架构分析\n```\n（1）Connector如何接受请求的？ \n（2）如何将请求封装成Request和Response的？ \n（3）封装完之后的Request和Response如何交给Container进行处理的？ \n（4）Container处理完之后如何交给Connector并返回给客户端的？\n```\n\nConnector就是使用ProtocolHandler来处理请求的，不同的ProtocolHandler代表不同的连接类型，比如：Http11Protocol使用的是普通Socket来连接的，Http11NioProtocol使用的是NioSocket来连接的。\n\n其中ProtocolHandler由包含了三个部件：Endpoint、Processor、Adapter。\n\n（1）Endpoint用来处理底层Socket的网络连接，Processor用于将Endpoint接收到的Socket封装成Request，Adapter用于将Request交给Container进行具体的处理。\n\n（2）Endpoint由于是处理底层的Socket网络连接，因此Endpoint是用来实现TCP/IP协议的，而Processor用来实现HTTP协议的，Adapter将请求适配到Servlet容器进行具体的处理。\n\n（3）Endpoint的抽象实现AbstractEndpoint里面定义的Acceptor和AsyncTimeout两个内部类和一个Handler接口。Acceptor用于监听请求，AsyncTimeout用于检查异步Request的超时，Handler用于处理接收到的Socket，在内部调用Processor进行处理。\n\n至此，我们应该很轻松的回答（1）（2）（3）的问题了，但是（4）还是不知道，那么我们就来看一下Container是如何进行处理的以及处理完之后是如何将处理完的结果返回给Connector的？\n\n\n","slug":"tomcat系统架构","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzd00037dcyuoxf10bcr","content":"<p>!(<a href=\"https://mp.weixin.qq.com/s/D-lmaFwJBsiWIPmFIcfJnQ)[]\" target=\"_blank\" rel=\"noopener\">https://mp.weixin.qq.com/s/D-lmaFwJBsiWIPmFIcfJnQ)[]</a></p>\n<h1 id=\"Tomcat的顶层架构\"><a href=\"#Tomcat的顶层架构\" class=\"headerlink\" title=\"Tomcat的顶层架构\"></a>Tomcat的顶层架构</h1><p>最顶层容器是Server，每个Server可以保护多个Service。每个Service主要包含Connector 和 Container，这两个组件就是Tomcat的心脏。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.Connector用于处理连接相关的事情，并提供Socket与Request和Response的转换；</span><br><span class=\"line\">2.Container用于封装和管理Servlet，以及处理Request请求。</span><br></pre></td></tr></table></figure></p>\n<p>一个Tomcat中只有一个Server，一个Server可以包含多个Service，一个Service只有一个Container，但是可以有多个Connectors，这是因为一个服务可以有多个连接，如同时提供Http和Https链接，也可以提供向相同协议不同端口的连接,示意图如下（Engine、Host、Context下边会说到）：</p>\n<p>多个 Connector 和一个 Container 就形成了一个 Service，有了 Service 就可以对外提供服务了，但是 Service 还要一个生存的环境，必须要有人能够给她生命、掌握其生死大权，那就非 Server 莫属了！所以整个 Tomcat 的生命周期由 Server 控制。</p>\n<h1 id=\"Connector和Container的微妙关系\"><a href=\"#Connector和Container的微妙关系\" class=\"headerlink\" title=\"Connector和Container的微妙关系\"></a>Connector和Container的微妙关系</h1><p>Connector最底层使用的是Socket来进行连接的，Request和Response是按照HTTP协议来封装的，所以Connector同时需要实现TCP/IP协议和HTTP协议！</p>\n<h1 id=\"Connector架构分析\"><a href=\"#Connector架构分析\" class=\"headerlink\" title=\"Connector架构分析\"></a>Connector架构分析</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">（1）Connector如何接受请求的？ </span><br><span class=\"line\">（2）如何将请求封装成Request和Response的？ </span><br><span class=\"line\">（3）封装完之后的Request和Response如何交给Container进行处理的？ </span><br><span class=\"line\">（4）Container处理完之后如何交给Connector并返回给客户端的？</span><br></pre></td></tr></table></figure>\n<p>Connector就是使用ProtocolHandler来处理请求的，不同的ProtocolHandler代表不同的连接类型，比如：Http11Protocol使用的是普通Socket来连接的，Http11NioProtocol使用的是NioSocket来连接的。</p>\n<p>其中ProtocolHandler由包含了三个部件：Endpoint、Processor、Adapter。</p>\n<p>（1）Endpoint用来处理底层Socket的网络连接，Processor用于将Endpoint接收到的Socket封装成Request，Adapter用于将Request交给Container进行具体的处理。</p>\n<p>（2）Endpoint由于是处理底层的Socket网络连接，因此Endpoint是用来实现TCP/IP协议的，而Processor用来实现HTTP协议的，Adapter将请求适配到Servlet容器进行具体的处理。</p>\n<p>（3）Endpoint的抽象实现AbstractEndpoint里面定义的Acceptor和AsyncTimeout两个内部类和一个Handler接口。Acceptor用于监听请求，AsyncTimeout用于检查异步Request的超时，Handler用于处理接收到的Socket，在内部调用Processor进行处理。</p>\n<p>至此，我们应该很轻松的回答（1）（2）（3）的问题了，但是（4）还是不知道，那么我们就来看一下Container是如何进行处理的以及处理完之后是如何将处理完的结果返回给Connector的？</p>\n","site":{"data":{}},"excerpt":"","more":"<p>!(<a href=\"https://mp.weixin.qq.com/s/D-lmaFwJBsiWIPmFIcfJnQ)[]\" target=\"_blank\" rel=\"noopener\">https://mp.weixin.qq.com/s/D-lmaFwJBsiWIPmFIcfJnQ)[]</a></p>\n<h1 id=\"Tomcat的顶层架构\"><a href=\"#Tomcat的顶层架构\" class=\"headerlink\" title=\"Tomcat的顶层架构\"></a>Tomcat的顶层架构</h1><p>最顶层容器是Server，每个Server可以保护多个Service。每个Service主要包含Connector 和 Container，这两个组件就是Tomcat的心脏。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.Connector用于处理连接相关的事情，并提供Socket与Request和Response的转换；</span><br><span class=\"line\">2.Container用于封装和管理Servlet，以及处理Request请求。</span><br></pre></td></tr></table></figure></p>\n<p>一个Tomcat中只有一个Server，一个Server可以包含多个Service，一个Service只有一个Container，但是可以有多个Connectors，这是因为一个服务可以有多个连接，如同时提供Http和Https链接，也可以提供向相同协议不同端口的连接,示意图如下（Engine、Host、Context下边会说到）：</p>\n<p>多个 Connector 和一个 Container 就形成了一个 Service，有了 Service 就可以对外提供服务了，但是 Service 还要一个生存的环境，必须要有人能够给她生命、掌握其生死大权，那就非 Server 莫属了！所以整个 Tomcat 的生命周期由 Server 控制。</p>\n<h1 id=\"Connector和Container的微妙关系\"><a href=\"#Connector和Container的微妙关系\" class=\"headerlink\" title=\"Connector和Container的微妙关系\"></a>Connector和Container的微妙关系</h1><p>Connector最底层使用的是Socket来进行连接的，Request和Response是按照HTTP协议来封装的，所以Connector同时需要实现TCP/IP协议和HTTP协议！</p>\n<h1 id=\"Connector架构分析\"><a href=\"#Connector架构分析\" class=\"headerlink\" title=\"Connector架构分析\"></a>Connector架构分析</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">（1）Connector如何接受请求的？ </span><br><span class=\"line\">（2）如何将请求封装成Request和Response的？ </span><br><span class=\"line\">（3）封装完之后的Request和Response如何交给Container进行处理的？ </span><br><span class=\"line\">（4）Container处理完之后如何交给Connector并返回给客户端的？</span><br></pre></td></tr></table></figure>\n<p>Connector就是使用ProtocolHandler来处理请求的，不同的ProtocolHandler代表不同的连接类型，比如：Http11Protocol使用的是普通Socket来连接的，Http11NioProtocol使用的是NioSocket来连接的。</p>\n<p>其中ProtocolHandler由包含了三个部件：Endpoint、Processor、Adapter。</p>\n<p>（1）Endpoint用来处理底层Socket的网络连接，Processor用于将Endpoint接收到的Socket封装成Request，Adapter用于将Request交给Container进行具体的处理。</p>\n<p>（2）Endpoint由于是处理底层的Socket网络连接，因此Endpoint是用来实现TCP/IP协议的，而Processor用来实现HTTP协议的，Adapter将请求适配到Servlet容器进行具体的处理。</p>\n<p>（3）Endpoint的抽象实现AbstractEndpoint里面定义的Acceptor和AsyncTimeout两个内部类和一个Handler接口。Acceptor用于监听请求，AsyncTimeout用于检查异步Request的超时，Handler用于处理接收到的Socket，在内部调用Processor进行处理。</p>\n<p>至此，我们应该很轻松的回答（1）（2）（3）的问题了，但是（4）还是不知道，那么我们就来看一下Container是如何进行处理的以及处理完之后是如何将处理完的结果返回给Connector的？</p>\n"},{"title":"分布式的幂等性","date":"2018-08-24T08:30:35.000Z","_content":"","source":"_posts/2018.08.24 分布式的幂等性.md","raw":"---\ntitle: 分布式的幂等性\ntags: 面试\ndate: 2018-08-24 16:30:35\n---\n","slug":"分布式的幂等性","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzd10039dcyu8839w0pa","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"DOM学习","date":"2018-10-30T01:17:54.000Z","_content":"# 获取属性节点\n\n```\n<div id=\"d1\" align=\"center\" class=\"abc\">hello html dom</div>\n<script>\nvar div = document.getElementById(\"d1\");\nvar as = div.attributes;\n\nfor(i=0;i<as.length;i++){\n    document.write(as[i].nodeName);\n    document.write(\"<br>)\n    document.write(as[i].nodeValue);\n    document.write(\"<br>)\n    document.write(as[\"id\"].nodeValue);\n}\n</script>\n```\n\n# 获取内容节点\n\n```\n<div id=\"d1\" align=\"center\" class=\"abc\">hello html dom</div>\n<script>\n\n<div id=\"d1\" align=\"center\" class=\"abc\">hello html dom</div>\nvar div = document.getElementById(\"d1\");\nvar content = div.childNodes[0];\ndocument.write(content.nodeName);\ndocument.write(\"<br>\");\ndocument.write(content.nodeValue);\n\n</script>\n```\n\n# 获取节点名称与节点值\n```\n<div id=\"d1\">hello HTML DOM</div>\n\n<script>\nfunction p(s){\n    document.write(s);\n    document.write(\"<br>\");\n}\n\nvar div = document.getElementById(\"d1);\np(div.nodeName);\np(div.attributes[0].nodeName);\np(div.attributes[0].nodeValue);\np(div.childNodes[0].nodeName);\np(div.childNodes[0].nodeValue);\n\n</script>\n\n```\n# 元素的文本内容\n\n```\n<html>\n<div id = \"d\">hello HTML DOM</div>\n<script>\n\nfunction changeDiv1(){\n    document.getElementById(\"d).childNodes[0].nodeValue = \"通过childNodes[0].value改变内容\";\n}\n\nfunction changeDiv2(){\n    document.getElementById(\"d).innerHTML = \"通过innerHTML改变内容\";\n}\n\n</script>\n\n<button onclick=\"changeDiv1()\">通过内容节点改变div内容</button>\n<button onclick=\"changeDiv2()\">通过innerHTML改变div内容</button>\n</html>\n```\n\n# 创建节点\n1. createElement\n2. createTextNode\n3. createAttribute\n```\n<html>\n<div id=\"d\">Hello HTML DOM</div>\n<script>\nfunction add(){\n  var hr=document.createElement(\"hr\");\n  var div1 = document.getElementById(\"d\");\n  div1.appendChild(hr);\n}\n</script>\n \n<button onclick=\"add()\">在div中追加一个hr元素</button>\n \n</html>\n```\n\n\n\n","source":"_posts/2018.10.30 DOM学习.md","raw":"---\ntitle: DOM学习\ndate: 2018-10-30 09:17:54\ntags: 前端 编程\n---\n# 获取属性节点\n\n```\n<div id=\"d1\" align=\"center\" class=\"abc\">hello html dom</div>\n<script>\nvar div = document.getElementById(\"d1\");\nvar as = div.attributes;\n\nfor(i=0;i<as.length;i++){\n    document.write(as[i].nodeName);\n    document.write(\"<br>)\n    document.write(as[i].nodeValue);\n    document.write(\"<br>)\n    document.write(as[\"id\"].nodeValue);\n}\n</script>\n```\n\n# 获取内容节点\n\n```\n<div id=\"d1\" align=\"center\" class=\"abc\">hello html dom</div>\n<script>\n\n<div id=\"d1\" align=\"center\" class=\"abc\">hello html dom</div>\nvar div = document.getElementById(\"d1\");\nvar content = div.childNodes[0];\ndocument.write(content.nodeName);\ndocument.write(\"<br>\");\ndocument.write(content.nodeValue);\n\n</script>\n```\n\n# 获取节点名称与节点值\n```\n<div id=\"d1\">hello HTML DOM</div>\n\n<script>\nfunction p(s){\n    document.write(s);\n    document.write(\"<br>\");\n}\n\nvar div = document.getElementById(\"d1);\np(div.nodeName);\np(div.attributes[0].nodeName);\np(div.attributes[0].nodeValue);\np(div.childNodes[0].nodeName);\np(div.childNodes[0].nodeValue);\n\n</script>\n\n```\n# 元素的文本内容\n\n```\n<html>\n<div id = \"d\">hello HTML DOM</div>\n<script>\n\nfunction changeDiv1(){\n    document.getElementById(\"d).childNodes[0].nodeValue = \"通过childNodes[0].value改变内容\";\n}\n\nfunction changeDiv2(){\n    document.getElementById(\"d).innerHTML = \"通过innerHTML改变内容\";\n}\n\n</script>\n\n<button onclick=\"changeDiv1()\">通过内容节点改变div内容</button>\n<button onclick=\"changeDiv2()\">通过innerHTML改变div内容</button>\n</html>\n```\n\n# 创建节点\n1. createElement\n2. createTextNode\n3. createAttribute\n```\n<html>\n<div id=\"d\">Hello HTML DOM</div>\n<script>\nfunction add(){\n  var hr=document.createElement(\"hr\");\n  var div1 = document.getElementById(\"d\");\n  div1.appendChild(hr);\n}\n</script>\n \n<button onclick=\"add()\">在div中追加一个hr元素</button>\n \n</html>\n```\n\n\n\n","slug":"DOM学习","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzd5003bdcyuc42nd4nr","content":"<h1 id=\"获取属性节点\"><a href=\"#获取属性节点\" class=\"headerlink\" title=\"获取属性节点\"></a>获取属性节点</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;d1&quot; align=&quot;center&quot; class=&quot;abc&quot;&gt;hello html dom&lt;/div&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">var div = document.getElementById(&quot;d1&quot;);</span><br><span class=\"line\">var as = div.attributes;</span><br><span class=\"line\"></span><br><span class=\"line\">for(i=0;i&lt;as.length;i++)&#123;</span><br><span class=\"line\">    document.write(as[i].nodeName);</span><br><span class=\"line\">    document.write(&quot;&lt;br&gt;)</span><br><span class=\"line\">    document.write(as[i].nodeValue);</span><br><span class=\"line\">    document.write(&quot;&lt;br&gt;)</span><br><span class=\"line\">    document.write(as[&quot;id&quot;].nodeValue);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"获取内容节点\"><a href=\"#获取内容节点\" class=\"headerlink\" title=\"获取内容节点\"></a>获取内容节点</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;d1&quot; align=&quot;center&quot; class=&quot;abc&quot;&gt;hello html dom&lt;/div&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div id=&quot;d1&quot; align=&quot;center&quot; class=&quot;abc&quot;&gt;hello html dom&lt;/div&gt;</span><br><span class=\"line\">var div = document.getElementById(&quot;d1&quot;);</span><br><span class=\"line\">var content = div.childNodes[0];</span><br><span class=\"line\">document.write(content.nodeName);</span><br><span class=\"line\">document.write(&quot;&lt;br&gt;&quot;);</span><br><span class=\"line\">document.write(content.nodeValue);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"获取节点名称与节点值\"><a href=\"#获取节点名称与节点值\" class=\"headerlink\" title=\"获取节点名称与节点值\"></a>获取节点名称与节点值</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;d1&quot;&gt;hello HTML DOM&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">function p(s)&#123;</span><br><span class=\"line\">    document.write(s);</span><br><span class=\"line\">    document.write(&quot;&lt;br&gt;&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var div = document.getElementById(&quot;d1);</span><br><span class=\"line\">p(div.nodeName);</span><br><span class=\"line\">p(div.attributes[0].nodeName);</span><br><span class=\"line\">p(div.attributes[0].nodeValue);</span><br><span class=\"line\">p(div.childNodes[0].nodeName);</span><br><span class=\"line\">p(div.childNodes[0].nodeValue);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"元素的文本内容\"><a href=\"#元素的文本内容\" class=\"headerlink\" title=\"元素的文本内容\"></a>元素的文本内容</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;div id = &quot;d&quot;&gt;hello HTML DOM&lt;/div&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">function changeDiv1()&#123;</span><br><span class=\"line\">    document.getElementById(&quot;d).childNodes[0].nodeValue = &quot;通过childNodes[0].value改变内容&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function changeDiv2()&#123;</span><br><span class=\"line\">    document.getElementById(&quot;d).innerHTML = &quot;通过innerHTML改变内容&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;button onclick=&quot;changeDiv1()&quot;&gt;通过内容节点改变div内容&lt;/button&gt;</span><br><span class=\"line\">&lt;button onclick=&quot;changeDiv2()&quot;&gt;通过innerHTML改变div内容&lt;/button&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"创建节点\"><a href=\"#创建节点\" class=\"headerlink\" title=\"创建节点\"></a>创建节点</h1><ol>\n<li>createElement</li>\n<li>createTextNode</li>\n<li>createAttribute<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;div id=&quot;d&quot;&gt;Hello HTML DOM&lt;/div&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">function add()&#123;</span><br><span class=\"line\">  var hr=document.createElement(&quot;hr&quot;);</span><br><span class=\"line\">  var div1 = document.getElementById(&quot;d&quot;);</span><br><span class=\"line\">  div1.appendChild(hr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;button onclick=&quot;add()&quot;&gt;在div中追加一个hr元素&lt;/button&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"获取属性节点\"><a href=\"#获取属性节点\" class=\"headerlink\" title=\"获取属性节点\"></a>获取属性节点</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;d1&quot; align=&quot;center&quot; class=&quot;abc&quot;&gt;hello html dom&lt;/div&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">var div = document.getElementById(&quot;d1&quot;);</span><br><span class=\"line\">var as = div.attributes;</span><br><span class=\"line\"></span><br><span class=\"line\">for(i=0;i&lt;as.length;i++)&#123;</span><br><span class=\"line\">    document.write(as[i].nodeName);</span><br><span class=\"line\">    document.write(&quot;&lt;br&gt;)</span><br><span class=\"line\">    document.write(as[i].nodeValue);</span><br><span class=\"line\">    document.write(&quot;&lt;br&gt;)</span><br><span class=\"line\">    document.write(as[&quot;id&quot;].nodeValue);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"获取内容节点\"><a href=\"#获取内容节点\" class=\"headerlink\" title=\"获取内容节点\"></a>获取内容节点</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;d1&quot; align=&quot;center&quot; class=&quot;abc&quot;&gt;hello html dom&lt;/div&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div id=&quot;d1&quot; align=&quot;center&quot; class=&quot;abc&quot;&gt;hello html dom&lt;/div&gt;</span><br><span class=\"line\">var div = document.getElementById(&quot;d1&quot;);</span><br><span class=\"line\">var content = div.childNodes[0];</span><br><span class=\"line\">document.write(content.nodeName);</span><br><span class=\"line\">document.write(&quot;&lt;br&gt;&quot;);</span><br><span class=\"line\">document.write(content.nodeValue);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"获取节点名称与节点值\"><a href=\"#获取节点名称与节点值\" class=\"headerlink\" title=\"获取节点名称与节点值\"></a>获取节点名称与节点值</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;d1&quot;&gt;hello HTML DOM&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">function p(s)&#123;</span><br><span class=\"line\">    document.write(s);</span><br><span class=\"line\">    document.write(&quot;&lt;br&gt;&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var div = document.getElementById(&quot;d1);</span><br><span class=\"line\">p(div.nodeName);</span><br><span class=\"line\">p(div.attributes[0].nodeName);</span><br><span class=\"line\">p(div.attributes[0].nodeValue);</span><br><span class=\"line\">p(div.childNodes[0].nodeName);</span><br><span class=\"line\">p(div.childNodes[0].nodeValue);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"元素的文本内容\"><a href=\"#元素的文本内容\" class=\"headerlink\" title=\"元素的文本内容\"></a>元素的文本内容</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;div id = &quot;d&quot;&gt;hello HTML DOM&lt;/div&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">function changeDiv1()&#123;</span><br><span class=\"line\">    document.getElementById(&quot;d).childNodes[0].nodeValue = &quot;通过childNodes[0].value改变内容&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function changeDiv2()&#123;</span><br><span class=\"line\">    document.getElementById(&quot;d).innerHTML = &quot;通过innerHTML改变内容&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;button onclick=&quot;changeDiv1()&quot;&gt;通过内容节点改变div内容&lt;/button&gt;</span><br><span class=\"line\">&lt;button onclick=&quot;changeDiv2()&quot;&gt;通过innerHTML改变div内容&lt;/button&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"创建节点\"><a href=\"#创建节点\" class=\"headerlink\" title=\"创建节点\"></a>创建节点</h1><ol>\n<li>createElement</li>\n<li>createTextNode</li>\n<li>createAttribute<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;div id=&quot;d&quot;&gt;Hello HTML DOM&lt;/div&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">function add()&#123;</span><br><span class=\"line\">  var hr=document.createElement(&quot;hr&quot;);</span><br><span class=\"line\">  var div1 = document.getElementById(&quot;d&quot;);</span><br><span class=\"line\">  div1.appendChild(hr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;button onclick=&quot;add()&quot;&gt;在div中追加一个hr元素&lt;/button&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n"},{"title":"Vue学习","date":"2018-10-30T02:20:27.000Z","_content":"# 什么是Vue\n我们要把一个 json对象的数据，显示到一个元素上去。\n如果不使用 Vue, 那么就会用到 JS 或者 JQuery，通过操作 HTML DOM 的方式，把数据显示上去。\n如果使用Vue, 那么仅仅需要提供数据，以及数据要绑定到的元素的id,就行了,不需要显式地操作HTML DOM。\n以下就用代码来表示这两种方式，通过比较，就知道Vue 是做什么的了。 \n\n# Vue Demo1\n\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n \n<div id=\"div1\">\n  {{gareen.name}}\n</div>\n  \n<script>\n//准备数据\nvar gareen = {\"name\":\"盖伦\",\"hp\":616};\n//通过vue.js 把数据和对应的视图关联起来\nnew Vue({\n      el: '#div1',\n      data: {\n        message: gareen\n      }\n    })\n</script>\n```\n# v-on 监听事件\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n  \n<div id=\"div1\">\n  <div>一共点击了  {{clickNumber}}次</div> \n  <button v-on:click=\"count\">点击</button>\n</div>\n   \n<script>\n   \nnew Vue({\n      el: '#div1',\n      data: {\n          clickNumber:0\n      },\n      methods:{\n          count: function(){\n              this.clickNumber++;\n          }\n      }\n    })\n</script>\n```\nv-on也可以缩写为@\n```\n<button @click=\"count\">点击</button>\n```\n# v-else-if\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<div id=\"div1\">\n   \n  <button v-on:click=\"toutai\"> 看看下辈子投胎是做什么的 </button>\n  <div v-if=\"number>98\"> 神仙</div>\n  <div v-else-if=\"number>95\"> 国家领导人</div>\n  <div v-else-if=\"number>90\"> 大富商</div>\n  <div v-else-if=\"number>80\"> 大企业主</div>\n  <div v-else-if=\"number>70\"> 演艺明星</div>\n  <div v-else-if=\"number>60\"> 小企业主</div>\n  <div v-else-if=\"number>50\"> 普通公务员</div>\n  <div v-else-if=\"number>40\"> 小个体户</div>\n  <div v-else-if=\"number>30\"> 血汗工厂工人</div>\n  <div v-else-if=\"number>20\"> 偏远山区农民</div>\n  <div v-else> 流浪汉</div>\n     \n</div>\n    \n<script>\n    \nnew Vue({\n      el: '#div1',\n      data: {\n          number:0\n      },\n      methods:{\n          toutai: function(){\n             this.number=Math.random()*100\n          }\n      }\n    })\n    \n</script>\n```\n# v-for循环语句\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<style>\ntable tr td{\n    border:1px solid gray;\n}\ntable{\n    border-collapse:collapse;\n    width:300px;\n}\ntr.firstLine{\n    background-color: lightGray;\n}\n</style>\n \n<div id=\"div1\">\n   \n    <table align=\"center\" >\n        <tr class=\"firstLine\">\n            <td>name</td>\n            <td>hp</td>\n        </tr>\n         \n        <tr v-for=\"hero in heros\">\n            <td>{{hero.name}}</td>\n            <td>{{hero.hp}}</td>\n        </tr>\n         \n    </table>\n \n</div>\n    \n<script>\n  \nvar data = [\n          {name:\"盖伦\",hp:341},\n          {name:\"提莫\",hp:225},\n          {name:\"安妮\",hp:427},\n          {name:\"死歌\",hp:893}\n    ];\nnew Vue({\n      el: '#div1',\n      data: {\n          heros:data\n      }\n    })\n    \n</script>\n```\n# index的用法\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<style>\ntable tr td{\n    border:1px solid gray;\n}\ntable{\n    border-collapse:collapse;\n    width:300px;\n}\ntr.firstLine{\n    background-color: lightGray;\n}\n</style>\n \n<div id=\"div1\">\n   \n    <table align=\"center\" >\n        <tr class=\"firstLine\">\n            <td>number</td>\n            <td>name</td>\n            <td>hp</td>\n        </tr>\n         \n        <tr v-for=\"hero,index in heros\">\n            <td>{{index+1}}</td>\n            <td>{{hero.name}}</td>\n            <td>{{hero.hp}}</td>\n        </tr>\n         \n    </table>\n \n</div>\n    \n<script>\n  \nvar data = [\n          {name:\"盖伦\",hp:341},\n          {name:\"提莫\",hp:225},\n          {name:\"安妮\",hp:427},\n          {name:\"死歌\",hp:893}\n    ];\nnew Vue({\n      el: '#div1',\n      data: {\n          heros:data\n      }\n    })\n    \n</script>\n```\n# 纯数字遍历\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<div id=\"div1\">\n    <div v-for=\"i in 10\">\n     {{ i }}\n    </div>\n</div>\n    \n<script>\n  \nnew Vue({\n      el: '#div1'\n    })\n    \n</script>\n```\n# 属性绑定\nv-bind:href=\"page\"\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<div id=\"div1\">\n    <a v-bind:href=\"page\">http://12306.com</a>\n</div>\n    \n<script>\n  \nnew Vue({\n      el: '#div1',\n      data:{\n          page:'http://12306.com'\n      }\n    })\n    \n</script>\n```\nv-bind:href可以简写成:href\n```\n<div id=\"div1\">\n    <a :href=\"page\">http://12306.com</a>\n</div>\n```\n# 双向绑定 v-model\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<div id=\"div1\">\n     \n    hero name: <input v-model=\"name\" >\n    <button @click=\"doClick\" >提交数据</button>\n     \n</div>\n    \n<script>\n  \nnew Vue({\n      el: '#div1',\n      data:{\n        name:\"teemo\"\n      },\n      methods:{\n          doClick:function(){\n              alert(this.name);\n          }\n      }\n    })\n    \n</script>\n# 监听属性 watch\n```\n<div id=\"div1\">\n     \n    <table align=\"center\" >\n        <tr class=\"firstLine\">\n            <td>人民币</td>\n            <td>美元</td>\n        </tr>      \n        <tr>\n            <td align=\"center\" colspan=\"2\">\n            汇率： <input type=\"number\" v-model.number=\"exchange\" />\n            </td>\n        </tr>\n         \n        <tr>\n         \n            <td align=\"center\">\n                ￥: <input type=\"number\" v-model.number = \"rmb\"  />\n            </td>\n            <td align=\"center\">\n                $: <input type=\"number\" v-model.number = \"dollar\"   />\n            </td>\n        </tr>\n    </table>\n   \n</div>\n      \n<script>\n    \nnew Vue({\n      el: '#div1',\n      data: {\n          exchange:6.4,\n          rmb:0,\n          dollar:0\n      },\n      watch:{\n          rmb:function(val) {\n              this.rmb = val;\n              this.dollar = this.rmb / this.exchange;\n          },\n          dollar:function(val) {\n              this.dollar = val;\n              this.rmb = this.dollar * this.exchange;\n          },\n      }\n       \n    })\n      \n</script>\n```\n# 过滤器 filter\n\n```\n通过如下方式实现两次过滤\"{{ data|capitalize|capitalizeLastLetter }}\"\n\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n \n<style>\ntable tr td{\n    border:1px solid gray;\n    padding:10px;\n      \n}\ntable{\n    border-collapse:collapse;\n    width:800px;\n    table-layout:fixed;\n}\ntr.firstLine{\n    background-color: lightGray;\n}\n</style>\n   \n<div id=\"div1\">\n     \n    <table align=\"center\" >\n        <tr class=\"firstLine\">\n            <td>输入数据</td>\n            <td>过滤后的结果</td>\n        </tr>      \n        <tr>\n            <td align=\"center\">\n                <input v-model= \"data\"  />\n            </td>\n            <td align=\"center\">\n                {{ data|capitalize }}\n            </td>\n        </tr>\n    </table>\n   \n</div>\n      \n<script>\n    \nnew Vue({\n      el: '#div1',\n      data: {\n          data:''\n      },\n      filters:{\n          capitalize:function(value) {\n                if (!value) return '' //如果为空，则返回空字符串\n                value = value.toString()\n                return value.charAt(0).toUpperCase() + value.substring(1)\n          }\n      }\n    })\n      \n</script>\n```\n","source":"_posts/2018.10.30 Vue学习.md","raw":"---\ntitle: Vue学习\ndate: 2018-10-30 10:20:27\ntags:\n---\n# 什么是Vue\n我们要把一个 json对象的数据，显示到一个元素上去。\n如果不使用 Vue, 那么就会用到 JS 或者 JQuery，通过操作 HTML DOM 的方式，把数据显示上去。\n如果使用Vue, 那么仅仅需要提供数据，以及数据要绑定到的元素的id,就行了,不需要显式地操作HTML DOM。\n以下就用代码来表示这两种方式，通过比较，就知道Vue 是做什么的了。 \n\n# Vue Demo1\n\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n \n<div id=\"div1\">\n  {{gareen.name}}\n</div>\n  \n<script>\n//准备数据\nvar gareen = {\"name\":\"盖伦\",\"hp\":616};\n//通过vue.js 把数据和对应的视图关联起来\nnew Vue({\n      el: '#div1',\n      data: {\n        message: gareen\n      }\n    })\n</script>\n```\n# v-on 监听事件\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n  \n<div id=\"div1\">\n  <div>一共点击了  {{clickNumber}}次</div> \n  <button v-on:click=\"count\">点击</button>\n</div>\n   \n<script>\n   \nnew Vue({\n      el: '#div1',\n      data: {\n          clickNumber:0\n      },\n      methods:{\n          count: function(){\n              this.clickNumber++;\n          }\n      }\n    })\n</script>\n```\nv-on也可以缩写为@\n```\n<button @click=\"count\">点击</button>\n```\n# v-else-if\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<div id=\"div1\">\n   \n  <button v-on:click=\"toutai\"> 看看下辈子投胎是做什么的 </button>\n  <div v-if=\"number>98\"> 神仙</div>\n  <div v-else-if=\"number>95\"> 国家领导人</div>\n  <div v-else-if=\"number>90\"> 大富商</div>\n  <div v-else-if=\"number>80\"> 大企业主</div>\n  <div v-else-if=\"number>70\"> 演艺明星</div>\n  <div v-else-if=\"number>60\"> 小企业主</div>\n  <div v-else-if=\"number>50\"> 普通公务员</div>\n  <div v-else-if=\"number>40\"> 小个体户</div>\n  <div v-else-if=\"number>30\"> 血汗工厂工人</div>\n  <div v-else-if=\"number>20\"> 偏远山区农民</div>\n  <div v-else> 流浪汉</div>\n     \n</div>\n    \n<script>\n    \nnew Vue({\n      el: '#div1',\n      data: {\n          number:0\n      },\n      methods:{\n          toutai: function(){\n             this.number=Math.random()*100\n          }\n      }\n    })\n    \n</script>\n```\n# v-for循环语句\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<style>\ntable tr td{\n    border:1px solid gray;\n}\ntable{\n    border-collapse:collapse;\n    width:300px;\n}\ntr.firstLine{\n    background-color: lightGray;\n}\n</style>\n \n<div id=\"div1\">\n   \n    <table align=\"center\" >\n        <tr class=\"firstLine\">\n            <td>name</td>\n            <td>hp</td>\n        </tr>\n         \n        <tr v-for=\"hero in heros\">\n            <td>{{hero.name}}</td>\n            <td>{{hero.hp}}</td>\n        </tr>\n         \n    </table>\n \n</div>\n    \n<script>\n  \nvar data = [\n          {name:\"盖伦\",hp:341},\n          {name:\"提莫\",hp:225},\n          {name:\"安妮\",hp:427},\n          {name:\"死歌\",hp:893}\n    ];\nnew Vue({\n      el: '#div1',\n      data: {\n          heros:data\n      }\n    })\n    \n</script>\n```\n# index的用法\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<style>\ntable tr td{\n    border:1px solid gray;\n}\ntable{\n    border-collapse:collapse;\n    width:300px;\n}\ntr.firstLine{\n    background-color: lightGray;\n}\n</style>\n \n<div id=\"div1\">\n   \n    <table align=\"center\" >\n        <tr class=\"firstLine\">\n            <td>number</td>\n            <td>name</td>\n            <td>hp</td>\n        </tr>\n         \n        <tr v-for=\"hero,index in heros\">\n            <td>{{index+1}}</td>\n            <td>{{hero.name}}</td>\n            <td>{{hero.hp}}</td>\n        </tr>\n         \n    </table>\n \n</div>\n    \n<script>\n  \nvar data = [\n          {name:\"盖伦\",hp:341},\n          {name:\"提莫\",hp:225},\n          {name:\"安妮\",hp:427},\n          {name:\"死歌\",hp:893}\n    ];\nnew Vue({\n      el: '#div1',\n      data: {\n          heros:data\n      }\n    })\n    \n</script>\n```\n# 纯数字遍历\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<div id=\"div1\">\n    <div v-for=\"i in 10\">\n     {{ i }}\n    </div>\n</div>\n    \n<script>\n  \nnew Vue({\n      el: '#div1'\n    })\n    \n</script>\n```\n# 属性绑定\nv-bind:href=\"page\"\n```\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<div id=\"div1\">\n    <a v-bind:href=\"page\">http://12306.com</a>\n</div>\n    \n<script>\n  \nnew Vue({\n      el: '#div1',\n      data:{\n          page:'http://12306.com'\n      }\n    })\n    \n</script>\n```\nv-bind:href可以简写成:href\n```\n<div id=\"div1\">\n    <a :href=\"page\">http://12306.com</a>\n</div>\n```\n# 双向绑定 v-model\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n   \n<div id=\"div1\">\n     \n    hero name: <input v-model=\"name\" >\n    <button @click=\"doClick\" >提交数据</button>\n     \n</div>\n    \n<script>\n  \nnew Vue({\n      el: '#div1',\n      data:{\n        name:\"teemo\"\n      },\n      methods:{\n          doClick:function(){\n              alert(this.name);\n          }\n      }\n    })\n    \n</script>\n# 监听属性 watch\n```\n<div id=\"div1\">\n     \n    <table align=\"center\" >\n        <tr class=\"firstLine\">\n            <td>人民币</td>\n            <td>美元</td>\n        </tr>      \n        <tr>\n            <td align=\"center\" colspan=\"2\">\n            汇率： <input type=\"number\" v-model.number=\"exchange\" />\n            </td>\n        </tr>\n         \n        <tr>\n         \n            <td align=\"center\">\n                ￥: <input type=\"number\" v-model.number = \"rmb\"  />\n            </td>\n            <td align=\"center\">\n                $: <input type=\"number\" v-model.number = \"dollar\"   />\n            </td>\n        </tr>\n    </table>\n   \n</div>\n      \n<script>\n    \nnew Vue({\n      el: '#div1',\n      data: {\n          exchange:6.4,\n          rmb:0,\n          dollar:0\n      },\n      watch:{\n          rmb:function(val) {\n              this.rmb = val;\n              this.dollar = this.rmb / this.exchange;\n          },\n          dollar:function(val) {\n              this.dollar = val;\n              this.rmb = this.dollar * this.exchange;\n          },\n      }\n       \n    })\n      \n</script>\n```\n# 过滤器 filter\n\n```\n通过如下方式实现两次过滤\"{{ data|capitalize|capitalizeLastLetter }}\"\n\n<script src=\"http://how2j.cn/study/vue.min.js\"></script>\n \n<style>\ntable tr td{\n    border:1px solid gray;\n    padding:10px;\n      \n}\ntable{\n    border-collapse:collapse;\n    width:800px;\n    table-layout:fixed;\n}\ntr.firstLine{\n    background-color: lightGray;\n}\n</style>\n   \n<div id=\"div1\">\n     \n    <table align=\"center\" >\n        <tr class=\"firstLine\">\n            <td>输入数据</td>\n            <td>过滤后的结果</td>\n        </tr>      \n        <tr>\n            <td align=\"center\">\n                <input v-model= \"data\"  />\n            </td>\n            <td align=\"center\">\n                {{ data|capitalize }}\n            </td>\n        </tr>\n    </table>\n   \n</div>\n      \n<script>\n    \nnew Vue({\n      el: '#div1',\n      data: {\n          data:''\n      },\n      filters:{\n          capitalize:function(value) {\n                if (!value) return '' //如果为空，则返回空字符串\n                value = value.toString()\n                return value.charAt(0).toUpperCase() + value.substring(1)\n          }\n      }\n    })\n      \n</script>\n```\n","slug":"Vue学习","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzd6003ddcyu4eu5hl7b","content":"<h1 id=\"什么是Vue\"><a href=\"#什么是Vue\" class=\"headerlink\" title=\"什么是Vue\"></a>什么是Vue</h1><p>我们要把一个 json对象的数据，显示到一个元素上去。<br>如果不使用 Vue, 那么就会用到 JS 或者 JQuery，通过操作 HTML DOM 的方式，把数据显示上去。<br>如果使用Vue, 那么仅仅需要提供数据，以及数据要绑定到的元素的id,就行了,不需要显式地操作HTML DOM。<br>以下就用代码来表示这两种方式，通过比较，就知道Vue 是做什么的了。 </p>\n<h1 id=\"Vue-Demo1\"><a href=\"#Vue-Demo1\" class=\"headerlink\" title=\"Vue Demo1\"></a>Vue Demo1</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">  &#123;&#123;gareen.name&#125;&#125;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">//准备数据</span><br><span class=\"line\">var gareen = &#123;&quot;name&quot;:&quot;盖伦&quot;,&quot;hp&quot;:616&#125;;</span><br><span class=\"line\">//通过vue.js 把数据和对应的视图关联起来</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">        message: gareen</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"v-on-监听事件\"><a href=\"#v-on-监听事件\" class=\"headerlink\" title=\"v-on 监听事件\"></a>v-on 监听事件</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">  &lt;div&gt;一共点击了  &#123;&#123;clickNumber&#125;&#125;次&lt;/div&gt; </span><br><span class=\"line\">  &lt;button v-on:click=&quot;count&quot;&gt;点击&lt;/button&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          clickNumber:0</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      methods:&#123;</span><br><span class=\"line\">          count: function()&#123;</span><br><span class=\"line\">              this.clickNumber++;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>v-on也可以缩写为@<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;button @click=&quot;count&quot;&gt;点击&lt;/button&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"v-else-if\"><a href=\"#v-else-if\" class=\"headerlink\" title=\"v-else-if\"></a>v-else-if</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">  &lt;button v-on:click=&quot;toutai&quot;&gt; 看看下辈子投胎是做什么的 &lt;/button&gt;</span><br><span class=\"line\">  &lt;div v-if=&quot;number&gt;98&quot;&gt; 神仙&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;95&quot;&gt; 国家领导人&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;90&quot;&gt; 大富商&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;80&quot;&gt; 大企业主&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;70&quot;&gt; 演艺明星&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;60&quot;&gt; 小企业主&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;50&quot;&gt; 普通公务员&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;40&quot;&gt; 小个体户&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;30&quot;&gt; 血汗工厂工人&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;20&quot;&gt; 偏远山区农民&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else&gt; 流浪汉&lt;/div&gt;</span><br><span class=\"line\">     </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          number:0</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      methods:&#123;</span><br><span class=\"line\">          toutai: function()&#123;</span><br><span class=\"line\">             this.number=Math.random()*100</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"v-for循环语句\"><a href=\"#v-for循环语句\" class=\"headerlink\" title=\"v-for循环语句\"></a>v-for循环语句</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">table tr td&#123;</span><br><span class=\"line\">    border:1px solid gray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">table&#123;</span><br><span class=\"line\">    border-collapse:collapse;</span><br><span class=\"line\">    width:300px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">tr.firstLine&#123;</span><br><span class=\"line\">    background-color: lightGray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">    &lt;table align=&quot;center&quot; &gt;</span><br><span class=\"line\">        &lt;tr class=&quot;firstLine&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;name&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;hp&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">        &lt;tr v-for=&quot;hero in heros&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;hero.name&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;hero.hp&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">    &lt;/table&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">var data = [</span><br><span class=\"line\">          &#123;name:&quot;盖伦&quot;,hp:341&#125;,</span><br><span class=\"line\">          &#123;name:&quot;提莫&quot;,hp:225&#125;,</span><br><span class=\"line\">          &#123;name:&quot;安妮&quot;,hp:427&#125;,</span><br><span class=\"line\">          &#123;name:&quot;死歌&quot;,hp:893&#125;</span><br><span class=\"line\">    ];</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          heros:data</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"index的用法\"><a href=\"#index的用法\" class=\"headerlink\" title=\"index的用法\"></a>index的用法</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">table tr td&#123;</span><br><span class=\"line\">    border:1px solid gray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">table&#123;</span><br><span class=\"line\">    border-collapse:collapse;</span><br><span class=\"line\">    width:300px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">tr.firstLine&#123;</span><br><span class=\"line\">    background-color: lightGray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">    &lt;table align=&quot;center&quot; &gt;</span><br><span class=\"line\">        &lt;tr class=&quot;firstLine&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;number&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;name&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;hp&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">        &lt;tr v-for=&quot;hero,index in heros&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;index+1&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;hero.name&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;hero.hp&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">    &lt;/table&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">var data = [</span><br><span class=\"line\">          &#123;name:&quot;盖伦&quot;,hp:341&#125;,</span><br><span class=\"line\">          &#123;name:&quot;提莫&quot;,hp:225&#125;,</span><br><span class=\"line\">          &#123;name:&quot;安妮&quot;,hp:427&#125;,</span><br><span class=\"line\">          &#123;name:&quot;死歌&quot;,hp:893&#125;</span><br><span class=\"line\">    ];</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          heros:data</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"纯数字遍历\"><a href=\"#纯数字遍历\" class=\"headerlink\" title=\"纯数字遍历\"></a>纯数字遍历</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">    &lt;div v-for=&quot;i in 10&quot;&gt;</span><br><span class=\"line\">     &#123;&#123; i &#125;&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"属性绑定\"><a href=\"#属性绑定\" class=\"headerlink\" title=\"属性绑定\"></a>属性绑定</h1><p>v-bind:href=”page”<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">    &lt;a v-bind:href=&quot;page&quot;&gt;http://12306.com&lt;/a&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data:&#123;</span><br><span class=\"line\">          page:&apos;http://12306.com&apos;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>\n<p>v-bind:href可以简写成:href<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">    &lt;a :href=&quot;page&quot;&gt;http://12306.com&lt;/a&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"双向绑定-v-model\"><a href=\"#双向绑定-v-model\" class=\"headerlink\" title=\"双向绑定 v-model\"></a>双向绑定 v-model</h1><script src=\"http://how2j.cn/study/vue.min.js\"></script>\n\n<div id=\"div1\"><br><br>    hero name: <input v-model=\"name\"><br>    <button @click=\"doClick\">提交数据</button><br><br></div>\n\n<script>\n\n<p>new Vue({<br>      el: ‘#div1’,<br>      data:{<br>        name:”teemo”<br>      },<br>      methods:{<br>          doClick:function(){<br>              alert(this.name);<br>          }<br>      }<br>    })</p>\n<p></script><p></p>\n<h1 id=\"监听属性-watch\"><a href=\"#监听属性-watch\" class=\"headerlink\" title=\"监听属性 watch\"></a>监听属性 watch</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">     </span><br><span class=\"line\">    &lt;table align=&quot;center&quot; &gt;</span><br><span class=\"line\">        &lt;tr class=&quot;firstLine&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;人民币&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;美元&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;      </span><br><span class=\"line\">        &lt;tr&gt;</span><br><span class=\"line\">            &lt;td align=&quot;center&quot; colspan=&quot;2&quot;&gt;</span><br><span class=\"line\">            汇率： &lt;input type=&quot;number&quot; v-model.number=&quot;exchange&quot; /&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">        &lt;tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">            &lt;td align=&quot;center&quot;&gt;</span><br><span class=\"line\">                ￥: &lt;input type=&quot;number&quot; v-model.number = &quot;rmb&quot;  /&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">            &lt;td align=&quot;center&quot;&gt;</span><br><span class=\"line\">                $: &lt;input type=&quot;number&quot; v-model.number = &quot;dollar&quot;   /&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">    &lt;/table&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">      </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          exchange:6.4,</span><br><span class=\"line\">          rmb:0,</span><br><span class=\"line\">          dollar:0</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      watch:&#123;</span><br><span class=\"line\">          rmb:function(val) &#123;</span><br><span class=\"line\">              this.rmb = val;</span><br><span class=\"line\">              this.dollar = this.rmb / this.exchange;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          dollar:function(val) &#123;</span><br><span class=\"line\">              this.dollar = val;</span><br><span class=\"line\">              this.rmb = this.dollar * this.exchange;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">       </span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"过滤器-filter\"><a href=\"#过滤器-filter\" class=\"headerlink\" title=\"过滤器 filter\"></a>过滤器 filter</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">通过如下方式实现两次过滤&quot;&#123;&#123; data|capitalize|capitalizeLastLetter &#125;&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">table tr td&#123;</span><br><span class=\"line\">    border:1px solid gray;</span><br><span class=\"line\">    padding:10px;</span><br><span class=\"line\">      </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">table&#123;</span><br><span class=\"line\">    border-collapse:collapse;</span><br><span class=\"line\">    width:800px;</span><br><span class=\"line\">    table-layout:fixed;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">tr.firstLine&#123;</span><br><span class=\"line\">    background-color: lightGray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">     </span><br><span class=\"line\">    &lt;table align=&quot;center&quot; &gt;</span><br><span class=\"line\">        &lt;tr class=&quot;firstLine&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;输入数据&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;过滤后的结果&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;      </span><br><span class=\"line\">        &lt;tr&gt;</span><br><span class=\"line\">            &lt;td align=&quot;center&quot;&gt;</span><br><span class=\"line\">                &lt;input v-model= &quot;data&quot;  /&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">            &lt;td align=&quot;center&quot;&gt;</span><br><span class=\"line\">                &#123;&#123; data|capitalize &#125;&#125;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">    &lt;/table&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">      </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          data:&apos;&apos;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      filters:&#123;</span><br><span class=\"line\">          capitalize:function(value) &#123;</span><br><span class=\"line\">                if (!value) return &apos;&apos; //如果为空，则返回空字符串</span><br><span class=\"line\">                value = value.toString()</span><br><span class=\"line\">                return value.charAt(0).toUpperCase() + value.substring(1)</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"什么是Vue\"><a href=\"#什么是Vue\" class=\"headerlink\" title=\"什么是Vue\"></a>什么是Vue</h1><p>我们要把一个 json对象的数据，显示到一个元素上去。<br>如果不使用 Vue, 那么就会用到 JS 或者 JQuery，通过操作 HTML DOM 的方式，把数据显示上去。<br>如果使用Vue, 那么仅仅需要提供数据，以及数据要绑定到的元素的id,就行了,不需要显式地操作HTML DOM。<br>以下就用代码来表示这两种方式，通过比较，就知道Vue 是做什么的了。 </p>\n<h1 id=\"Vue-Demo1\"><a href=\"#Vue-Demo1\" class=\"headerlink\" title=\"Vue Demo1\"></a>Vue Demo1</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">  &#123;&#123;gareen.name&#125;&#125;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">//准备数据</span><br><span class=\"line\">var gareen = &#123;&quot;name&quot;:&quot;盖伦&quot;,&quot;hp&quot;:616&#125;;</span><br><span class=\"line\">//通过vue.js 把数据和对应的视图关联起来</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">        message: gareen</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"v-on-监听事件\"><a href=\"#v-on-监听事件\" class=\"headerlink\" title=\"v-on 监听事件\"></a>v-on 监听事件</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">  &lt;div&gt;一共点击了  &#123;&#123;clickNumber&#125;&#125;次&lt;/div&gt; </span><br><span class=\"line\">  &lt;button v-on:click=&quot;count&quot;&gt;点击&lt;/button&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          clickNumber:0</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      methods:&#123;</span><br><span class=\"line\">          count: function()&#123;</span><br><span class=\"line\">              this.clickNumber++;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>v-on也可以缩写为@<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;button @click=&quot;count&quot;&gt;点击&lt;/button&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"v-else-if\"><a href=\"#v-else-if\" class=\"headerlink\" title=\"v-else-if\"></a>v-else-if</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">  &lt;button v-on:click=&quot;toutai&quot;&gt; 看看下辈子投胎是做什么的 &lt;/button&gt;</span><br><span class=\"line\">  &lt;div v-if=&quot;number&gt;98&quot;&gt; 神仙&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;95&quot;&gt; 国家领导人&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;90&quot;&gt; 大富商&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;80&quot;&gt; 大企业主&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;70&quot;&gt; 演艺明星&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;60&quot;&gt; 小企业主&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;50&quot;&gt; 普通公务员&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;40&quot;&gt; 小个体户&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;30&quot;&gt; 血汗工厂工人&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else-if=&quot;number&gt;20&quot;&gt; 偏远山区农民&lt;/div&gt;</span><br><span class=\"line\">  &lt;div v-else&gt; 流浪汉&lt;/div&gt;</span><br><span class=\"line\">     </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          number:0</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      methods:&#123;</span><br><span class=\"line\">          toutai: function()&#123;</span><br><span class=\"line\">             this.number=Math.random()*100</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"v-for循环语句\"><a href=\"#v-for循环语句\" class=\"headerlink\" title=\"v-for循环语句\"></a>v-for循环语句</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">table tr td&#123;</span><br><span class=\"line\">    border:1px solid gray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">table&#123;</span><br><span class=\"line\">    border-collapse:collapse;</span><br><span class=\"line\">    width:300px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">tr.firstLine&#123;</span><br><span class=\"line\">    background-color: lightGray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">    &lt;table align=&quot;center&quot; &gt;</span><br><span class=\"line\">        &lt;tr class=&quot;firstLine&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;name&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;hp&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">        &lt;tr v-for=&quot;hero in heros&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;hero.name&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;hero.hp&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">    &lt;/table&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">var data = [</span><br><span class=\"line\">          &#123;name:&quot;盖伦&quot;,hp:341&#125;,</span><br><span class=\"line\">          &#123;name:&quot;提莫&quot;,hp:225&#125;,</span><br><span class=\"line\">          &#123;name:&quot;安妮&quot;,hp:427&#125;,</span><br><span class=\"line\">          &#123;name:&quot;死歌&quot;,hp:893&#125;</span><br><span class=\"line\">    ];</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          heros:data</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"index的用法\"><a href=\"#index的用法\" class=\"headerlink\" title=\"index的用法\"></a>index的用法</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">table tr td&#123;</span><br><span class=\"line\">    border:1px solid gray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">table&#123;</span><br><span class=\"line\">    border-collapse:collapse;</span><br><span class=\"line\">    width:300px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">tr.firstLine&#123;</span><br><span class=\"line\">    background-color: lightGray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">    &lt;table align=&quot;center&quot; &gt;</span><br><span class=\"line\">        &lt;tr class=&quot;firstLine&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;number&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;name&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;hp&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">        &lt;tr v-for=&quot;hero,index in heros&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;index+1&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;hero.name&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;hero.hp&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">    &lt;/table&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">var data = [</span><br><span class=\"line\">          &#123;name:&quot;盖伦&quot;,hp:341&#125;,</span><br><span class=\"line\">          &#123;name:&quot;提莫&quot;,hp:225&#125;,</span><br><span class=\"line\">          &#123;name:&quot;安妮&quot;,hp:427&#125;,</span><br><span class=\"line\">          &#123;name:&quot;死歌&quot;,hp:893&#125;</span><br><span class=\"line\">    ];</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          heros:data</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"纯数字遍历\"><a href=\"#纯数字遍历\" class=\"headerlink\" title=\"纯数字遍历\"></a>纯数字遍历</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">    &lt;div v-for=&quot;i in 10&quot;&gt;</span><br><span class=\"line\">     &#123;&#123; i &#125;&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"属性绑定\"><a href=\"#属性绑定\" class=\"headerlink\" title=\"属性绑定\"></a>属性绑定</h1><p>v-bind:href=”page”<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">    &lt;a v-bind:href=&quot;page&quot;&gt;http://12306.com&lt;/a&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data:&#123;</span><br><span class=\"line\">          page:&apos;http://12306.com&apos;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>\n<p>v-bind:href可以简写成:href<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">    &lt;a :href=&quot;page&quot;&gt;http://12306.com&lt;/a&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"双向绑定-v-model\"><a href=\"#双向绑定-v-model\" class=\"headerlink\" title=\"双向绑定 v-model\"></a>双向绑定 v-model</h1><script src=\"http://how2j.cn/study/vue.min.js\"></script>\n\n<div id=\"div1\"><br><br>    hero name: <input v-model=\"name\"><br>    <button @click=\"doClick\">提交数据</button><br><br></div>\n\n<script>\n\n<p>new Vue({<br>      el: ‘#div1’,<br>      data:{<br>        name:”teemo”<br>      },<br>      methods:{<br>          doClick:function(){<br>              alert(this.name);<br>          }<br>      }<br>    })</p>\n<p></script><p></p>\n<h1 id=\"监听属性-watch\"><a href=\"#监听属性-watch\" class=\"headerlink\" title=\"监听属性 watch\"></a>监听属性 watch</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">     </span><br><span class=\"line\">    &lt;table align=&quot;center&quot; &gt;</span><br><span class=\"line\">        &lt;tr class=&quot;firstLine&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;人民币&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;美元&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;      </span><br><span class=\"line\">        &lt;tr&gt;</span><br><span class=\"line\">            &lt;td align=&quot;center&quot; colspan=&quot;2&quot;&gt;</span><br><span class=\"line\">            汇率： &lt;input type=&quot;number&quot; v-model.number=&quot;exchange&quot; /&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">        &lt;tr&gt;</span><br><span class=\"line\">         </span><br><span class=\"line\">            &lt;td align=&quot;center&quot;&gt;</span><br><span class=\"line\">                ￥: &lt;input type=&quot;number&quot; v-model.number = &quot;rmb&quot;  /&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">            &lt;td align=&quot;center&quot;&gt;</span><br><span class=\"line\">                $: &lt;input type=&quot;number&quot; v-model.number = &quot;dollar&quot;   /&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">    &lt;/table&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">      </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          exchange:6.4,</span><br><span class=\"line\">          rmb:0,</span><br><span class=\"line\">          dollar:0</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      watch:&#123;</span><br><span class=\"line\">          rmb:function(val) &#123;</span><br><span class=\"line\">              this.rmb = val;</span><br><span class=\"line\">              this.dollar = this.rmb / this.exchange;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          dollar:function(val) &#123;</span><br><span class=\"line\">              this.dollar = val;</span><br><span class=\"line\">              this.rmb = this.dollar * this.exchange;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">       </span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"过滤器-filter\"><a href=\"#过滤器-filter\" class=\"headerlink\" title=\"过滤器 filter\"></a>过滤器 filter</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">通过如下方式实现两次过滤&quot;&#123;&#123; data|capitalize|capitalizeLastLetter &#125;&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">table tr td&#123;</span><br><span class=\"line\">    border:1px solid gray;</span><br><span class=\"line\">    padding:10px;</span><br><span class=\"line\">      </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">table&#123;</span><br><span class=\"line\">    border-collapse:collapse;</span><br><span class=\"line\">    width:800px;</span><br><span class=\"line\">    table-layout:fixed;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">tr.firstLine&#123;</span><br><span class=\"line\">    background-color: lightGray;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;div id=&quot;div1&quot;&gt;</span><br><span class=\"line\">     </span><br><span class=\"line\">    &lt;table align=&quot;center&quot; &gt;</span><br><span class=\"line\">        &lt;tr class=&quot;firstLine&quot;&gt;</span><br><span class=\"line\">            &lt;td&gt;输入数据&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;过滤后的结果&lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;      </span><br><span class=\"line\">        &lt;tr&gt;</span><br><span class=\"line\">            &lt;td align=&quot;center&quot;&gt;</span><br><span class=\"line\">                &lt;input v-model= &quot;data&quot;  /&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">            &lt;td align=&quot;center&quot;&gt;</span><br><span class=\"line\">                &#123;&#123; data|capitalize &#125;&#125;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">    &lt;/table&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">      </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">      el: &apos;#div1&apos;,</span><br><span class=\"line\">      data: &#123;</span><br><span class=\"line\">          data:&apos;&apos;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      filters:&#123;</span><br><span class=\"line\">          capitalize:function(value) &#123;</span><br><span class=\"line\">                if (!value) return &apos;&apos; //如果为空，则返回空字符串</span><br><span class=\"line\">                value = value.toString()</span><br><span class=\"line\">                return value.charAt(0).toUpperCase() + value.substring(1)</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n"},{"title":"varchar能装多少个字符","date":"2018-11-01T07:49:43.000Z","_content":"# varchar(50)是指50个字节\n可以装放50个英文或数字\n一个汉字占两个字节,所以装25个汉字\n\n# varchar的缺点\nVARCHAR使用起来较为灵活，但是从整个系统的性能角度来说，CHAR数据类型的处理速度更快，有时甚至可以超出VARCHAR处理速度的50%。因此，用户在设计数据库时应当综合考虑各方面的因素，以求达到最佳的平衡。\n\n# varchar的特点\n使用额外的1-2字节来存储值长度，列长度<=255使用1字节保存，其它情况使用2字节保存。例如varchar(10)会占用11字节存储空间，varchar(500)会占用502字节存储空间。","source":"_posts/2018.11.01 varchar能装多少个字符.md","raw":"---\ntitle: varchar能装多少个字符\ndate: 2018-11-01 15:49:43\ntags:\n---\n# varchar(50)是指50个字节\n可以装放50个英文或数字\n一个汉字占两个字节,所以装25个汉字\n\n# varchar的缺点\nVARCHAR使用起来较为灵活，但是从整个系统的性能角度来说，CHAR数据类型的处理速度更快，有时甚至可以超出VARCHAR处理速度的50%。因此，用户在设计数据库时应当综合考虑各方面的因素，以求达到最佳的平衡。\n\n# varchar的特点\n使用额外的1-2字节来存储值长度，列长度<=255使用1字节保存，其它情况使用2字节保存。例如varchar(10)会占用11字节存储空间，varchar(500)会占用502字节存储空间。","slug":"varchar能装多少个字符","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzd7003gdcyuwf142xtx","content":"<h1 id=\"varchar-50-是指50个字节\"><a href=\"#varchar-50-是指50个字节\" class=\"headerlink\" title=\"varchar(50)是指50个字节\"></a>varchar(50)是指50个字节</h1><p>可以装放50个英文或数字<br>一个汉字占两个字节,所以装25个汉字</p>\n<h1 id=\"varchar的缺点\"><a href=\"#varchar的缺点\" class=\"headerlink\" title=\"varchar的缺点\"></a>varchar的缺点</h1><p>VARCHAR使用起来较为灵活，但是从整个系统的性能角度来说，CHAR数据类型的处理速度更快，有时甚至可以超出VARCHAR处理速度的50%。因此，用户在设计数据库时应当综合考虑各方面的因素，以求达到最佳的平衡。</p>\n<h1 id=\"varchar的特点\"><a href=\"#varchar的特点\" class=\"headerlink\" title=\"varchar的特点\"></a>varchar的特点</h1><p>使用额外的1-2字节来存储值长度，列长度&lt;=255使用1字节保存，其它情况使用2字节保存。例如varchar(10)会占用11字节存储空间，varchar(500)会占用502字节存储空间。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"varchar-50-是指50个字节\"><a href=\"#varchar-50-是指50个字节\" class=\"headerlink\" title=\"varchar(50)是指50个字节\"></a>varchar(50)是指50个字节</h1><p>可以装放50个英文或数字<br>一个汉字占两个字节,所以装25个汉字</p>\n<h1 id=\"varchar的缺点\"><a href=\"#varchar的缺点\" class=\"headerlink\" title=\"varchar的缺点\"></a>varchar的缺点</h1><p>VARCHAR使用起来较为灵活，但是从整个系统的性能角度来说，CHAR数据类型的处理速度更快，有时甚至可以超出VARCHAR处理速度的50%。因此，用户在设计数据库时应当综合考虑各方面的因素，以求达到最佳的平衡。</p>\n<h1 id=\"varchar的特点\"><a href=\"#varchar的特点\" class=\"headerlink\" title=\"varchar的特点\"></a>varchar的特点</h1><p>使用额外的1-2字节来存储值长度，列长度&lt;=255使用1字节保存，其它情况使用2字节保存。例如varchar(10)会占用11字节存储空间，varchar(500)会占用502字节存储空间。</p>\n"},{"title":"网络地址转换与子网掩码","date":"2018-11-01T09:44:45.000Z","_content":"# 网络地址转换(NAT),也叫做网络掩蔽或IP掩蔽\n这是一种IP数据包通过路由器或者防火墙时,重写来源IP地址或目的IP地址的技术,这种技术普遍用在有多台主机但只通过一个公有IP地址访问因特网的私有网络中.当然,NAT也让主机之间的通信变得复杂,导致了通信效率变低.\n# 概述\n90年代中期,NAT是作为解决IPv4地址短缺以避免保留IP地址困难的方案而流行起来的.所以NAT就成了家庭和小型办公网络连接上的路由器的一个标准特征,因为申请独立的IP地址的代价要高于所带来的效益.\n\n在一个典型的配置中,一个本地网络使用一个专有的网络的指定子网(比如192.168.X.X或10.X.X.X)和连在这个网络上的一个路由器.这个路由器占有这个网络地址空间的一个专有地址(入如192.168.0.1),同时他还有一个Internet服务提供商提供的公有IP地址(叫做过载NAT).当信息从本地网络向Internet传输时,原地址由专有地址转换为公用地址.由路由器跟踪每个连接上的基本数据,主要是目的地址和端口.当有回复返回路由器时,它通过输出阶段记录的连接跟踪数据决定转发给内部网的哪个主机.\n\nIpv6的广泛采用将使得NAT不再需要.\n# 缺点\n在路由器下的主机并没有创建真正的IP地址,并且不能参与一些因特网协议.\nNAT也会使安全协议变得复杂.\n\n# 子网掩码(subnet mask)\n子网掩码(subnet mask)是每个使用互联网的人必须要掌握的基础知识，只有掌握它，才能够真正理解TCP/IP协议的设置.\n子网掩码:屏蔽一个IP地址的网络部分的全1比特模式.\n1. 对于A类地址,默认子网掩码是255.0.0.0;\n2. 对于B类地址,默认子网掩码是255.255.0.0;\n3. 对于C类地址,默认子网掩码是255.255.255.0;\n利用子网掩码可以把大的网络划分成子网，即VLSM（可变长子网掩码），也可以把小的网络归并成大的网络即超网。\n# 子网掩码构成\n要想理解什么是子网掩码，就不能不了解IP地址的构成。互联网是由许多小型网络构成的，每个网络上都有许多主机，这样便构成了一个有层次的结构。IP地址在设计时就考虑到地址分配的层次特点，将每个IP地址都分割成网络号和主机号两部分，以便于IP地址的寻址操作。\nIP地址的网络号和主机号各是多少位呢？如果不指定，就不知道哪些位是网络号、哪些是主机号，这就需要通过子网掩码来实现。\n\n子网掩码的设定必须遵循一定的规则。与二进制IP地址相同，子网掩码由1和0组成，且1和0分别连续。子网掩码的长度也是32位，左边是网络位，用二进制数字“1”表示，1的数目等于网络位的长度；右边是主机位，用二进制数字“0”表示，0的数目等于主机位的长度。这样做的目的是为了让掩码与ip地址做按位与运算时用0遮住原主机数，而不改变原网络段数字，而且很容易通过0的位数确定子网的主机数（2的主机位数次方-2，因为主机号全为1时表示该网络广播地址，全为0时表示该网络的网络号，这是两个特殊地址）。只有通过子网掩码，才能表明一台主机所在的子网与其他子网的关系，使网络正常工作。\n\n# 定义主机数目\n用于子网掩码的位数决定于可能的子网数目和每个子网的主机数目。在定义子网掩码前，必须弄清楚本来使用的子网数和主机数目。\n定义子网掩码的步骤\n1. 确定哪些组地址归我们使用。比如我们申请到的网络号为 “210.73.a.b”，该网络地址为c类IP地址，网络标识为“210.73.a”，主机标识为“b”。\n2. 根据我们所需的子网数以及将来可能扩充到的子网数，用宿主机的一些位来定义子网掩码。比如我们需要12个子网，将来可能需要16个。用第四个字节的前四位确定子网掩码。前四位都置为“1”，即第四个字节为“11110000”，这个数我们暂且称作新的二进制子网掩码。\n\n3. 把对应初始网络的各个位都置为“1”，即前三个字节都置为“1”，则子网掩码的间断二进制形式为：“11111111.11111111.11111111.11110000” 。\n4. 把这个数转化为间断十进制形式为：“255.255.255.240” 。\n# 地址判断\n子网掩码是用来判断任意两台计算机的IP地址是否属于同一子网络的根据。\n最为简单的理解就是两台计算机各自的IP地址与子网掩码进行AND运算后，如果得出的结果是相同的，则说明这两台计算机是处于同一个子网络上的，可以进行直接的通讯。就这么简单。\n# 表示方法\n子网掩码通常有以下2种格式的表示方法：\n1． 通过与IP地址格式相同的点分十进制表示\n如：255.0.0.0 或255.255.255.128\n2． 在IP地址后加上\"/\"符号以及1-32的数字，其中1-32的数字表示子网掩码中网络标识位的长度\n如：192.168.1.1/24 的子网掩码也可以表示为255.255.255.0\n子网掩码一般为255.255.255.0\n\n# ABC类地址  \n0开头的A类，10开头B类，110开头C类，1110开头D类，11110开头E类\n```\n1. A类地址\n\n  A类地址的表示范围为：0.0.0.0~126.255.255.255，默认网络掩码为：255.0.0.0；A类地址分配给规模特别大的网络使用。A类网络用第一组数字表示网络本身的地址，后面三组数字作为连接于网络上的主机的地址。分配给具有大量主机（直接个人用户）而局域网络个数较少的大型网络。例如IBM公司的网络。\n\n  2. B类地址\n\nB类地址的表示范围为：128.0.0.0~191.255.255.255，默认网络掩码为：255.255.0.0；B类地址分配给一般的中型网络。B类网络用第一、二组数字表示网络的地址，后面两组数字代表网络上的主机地址。\n\n  3. C类地址\n\n  C类地址的表示范围为：192.0.0.0~223.255.255.255，默认网络掩码为：255.255.255.0；C类地址分配给小型网络，如一般的局域网和校园网，它可连接的主机数量是最少的，采用把所属的用户分为若干的网段进行管理。C类网络用前三组数字表示网络的地址，最后一组数字作为网络上的主机地址。\n\n  实际上，还存在着D类地址和E类地址。但这两类地址用途比较特殊，在这里只是简单介绍一下：D类地址称为广播地址，供特殊协议向选定的节点发送信息时用。E类地址保留给将来使用。 \n\n```\n\n","source":"_posts/2018.11.01 网络地址转换.md","raw":"---\ntitle: 网络地址转换与子网掩码\ndate: 2018-11-01 17:44:45\ntags:\n---\n# 网络地址转换(NAT),也叫做网络掩蔽或IP掩蔽\n这是一种IP数据包通过路由器或者防火墙时,重写来源IP地址或目的IP地址的技术,这种技术普遍用在有多台主机但只通过一个公有IP地址访问因特网的私有网络中.当然,NAT也让主机之间的通信变得复杂,导致了通信效率变低.\n# 概述\n90年代中期,NAT是作为解决IPv4地址短缺以避免保留IP地址困难的方案而流行起来的.所以NAT就成了家庭和小型办公网络连接上的路由器的一个标准特征,因为申请独立的IP地址的代价要高于所带来的效益.\n\n在一个典型的配置中,一个本地网络使用一个专有的网络的指定子网(比如192.168.X.X或10.X.X.X)和连在这个网络上的一个路由器.这个路由器占有这个网络地址空间的一个专有地址(入如192.168.0.1),同时他还有一个Internet服务提供商提供的公有IP地址(叫做过载NAT).当信息从本地网络向Internet传输时,原地址由专有地址转换为公用地址.由路由器跟踪每个连接上的基本数据,主要是目的地址和端口.当有回复返回路由器时,它通过输出阶段记录的连接跟踪数据决定转发给内部网的哪个主机.\n\nIpv6的广泛采用将使得NAT不再需要.\n# 缺点\n在路由器下的主机并没有创建真正的IP地址,并且不能参与一些因特网协议.\nNAT也会使安全协议变得复杂.\n\n# 子网掩码(subnet mask)\n子网掩码(subnet mask)是每个使用互联网的人必须要掌握的基础知识，只有掌握它，才能够真正理解TCP/IP协议的设置.\n子网掩码:屏蔽一个IP地址的网络部分的全1比特模式.\n1. 对于A类地址,默认子网掩码是255.0.0.0;\n2. 对于B类地址,默认子网掩码是255.255.0.0;\n3. 对于C类地址,默认子网掩码是255.255.255.0;\n利用子网掩码可以把大的网络划分成子网，即VLSM（可变长子网掩码），也可以把小的网络归并成大的网络即超网。\n# 子网掩码构成\n要想理解什么是子网掩码，就不能不了解IP地址的构成。互联网是由许多小型网络构成的，每个网络上都有许多主机，这样便构成了一个有层次的结构。IP地址在设计时就考虑到地址分配的层次特点，将每个IP地址都分割成网络号和主机号两部分，以便于IP地址的寻址操作。\nIP地址的网络号和主机号各是多少位呢？如果不指定，就不知道哪些位是网络号、哪些是主机号，这就需要通过子网掩码来实现。\n\n子网掩码的设定必须遵循一定的规则。与二进制IP地址相同，子网掩码由1和0组成，且1和0分别连续。子网掩码的长度也是32位，左边是网络位，用二进制数字“1”表示，1的数目等于网络位的长度；右边是主机位，用二进制数字“0”表示，0的数目等于主机位的长度。这样做的目的是为了让掩码与ip地址做按位与运算时用0遮住原主机数，而不改变原网络段数字，而且很容易通过0的位数确定子网的主机数（2的主机位数次方-2，因为主机号全为1时表示该网络广播地址，全为0时表示该网络的网络号，这是两个特殊地址）。只有通过子网掩码，才能表明一台主机所在的子网与其他子网的关系，使网络正常工作。\n\n# 定义主机数目\n用于子网掩码的位数决定于可能的子网数目和每个子网的主机数目。在定义子网掩码前，必须弄清楚本来使用的子网数和主机数目。\n定义子网掩码的步骤\n1. 确定哪些组地址归我们使用。比如我们申请到的网络号为 “210.73.a.b”，该网络地址为c类IP地址，网络标识为“210.73.a”，主机标识为“b”。\n2. 根据我们所需的子网数以及将来可能扩充到的子网数，用宿主机的一些位来定义子网掩码。比如我们需要12个子网，将来可能需要16个。用第四个字节的前四位确定子网掩码。前四位都置为“1”，即第四个字节为“11110000”，这个数我们暂且称作新的二进制子网掩码。\n\n3. 把对应初始网络的各个位都置为“1”，即前三个字节都置为“1”，则子网掩码的间断二进制形式为：“11111111.11111111.11111111.11110000” 。\n4. 把这个数转化为间断十进制形式为：“255.255.255.240” 。\n# 地址判断\n子网掩码是用来判断任意两台计算机的IP地址是否属于同一子网络的根据。\n最为简单的理解就是两台计算机各自的IP地址与子网掩码进行AND运算后，如果得出的结果是相同的，则说明这两台计算机是处于同一个子网络上的，可以进行直接的通讯。就这么简单。\n# 表示方法\n子网掩码通常有以下2种格式的表示方法：\n1． 通过与IP地址格式相同的点分十进制表示\n如：255.0.0.0 或255.255.255.128\n2． 在IP地址后加上\"/\"符号以及1-32的数字，其中1-32的数字表示子网掩码中网络标识位的长度\n如：192.168.1.1/24 的子网掩码也可以表示为255.255.255.0\n子网掩码一般为255.255.255.0\n\n# ABC类地址  \n0开头的A类，10开头B类，110开头C类，1110开头D类，11110开头E类\n```\n1. A类地址\n\n  A类地址的表示范围为：0.0.0.0~126.255.255.255，默认网络掩码为：255.0.0.0；A类地址分配给规模特别大的网络使用。A类网络用第一组数字表示网络本身的地址，后面三组数字作为连接于网络上的主机的地址。分配给具有大量主机（直接个人用户）而局域网络个数较少的大型网络。例如IBM公司的网络。\n\n  2. B类地址\n\nB类地址的表示范围为：128.0.0.0~191.255.255.255，默认网络掩码为：255.255.0.0；B类地址分配给一般的中型网络。B类网络用第一、二组数字表示网络的地址，后面两组数字代表网络上的主机地址。\n\n  3. C类地址\n\n  C类地址的表示范围为：192.0.0.0~223.255.255.255，默认网络掩码为：255.255.255.0；C类地址分配给小型网络，如一般的局域网和校园网，它可连接的主机数量是最少的，采用把所属的用户分为若干的网段进行管理。C类网络用前三组数字表示网络的地址，最后一组数字作为网络上的主机地址。\n\n  实际上，还存在着D类地址和E类地址。但这两类地址用途比较特殊，在这里只是简单介绍一下：D类地址称为广播地址，供特殊协议向选定的节点发送信息时用。E类地址保留给将来使用。 \n\n```\n\n","slug":"网络地址转换","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzd8003idcyupiqc122j","content":"<h1 id=\"网络地址转换-NAT-也叫做网络掩蔽或IP掩蔽\"><a href=\"#网络地址转换-NAT-也叫做网络掩蔽或IP掩蔽\" class=\"headerlink\" title=\"网络地址转换(NAT),也叫做网络掩蔽或IP掩蔽\"></a>网络地址转换(NAT),也叫做网络掩蔽或IP掩蔽</h1><p>这是一种IP数据包通过路由器或者防火墙时,重写来源IP地址或目的IP地址的技术,这种技术普遍用在有多台主机但只通过一个公有IP地址访问因特网的私有网络中.当然,NAT也让主机之间的通信变得复杂,导致了通信效率变低.</p>\n<h1 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h1><p>90年代中期,NAT是作为解决IPv4地址短缺以避免保留IP地址困难的方案而流行起来的.所以NAT就成了家庭和小型办公网络连接上的路由器的一个标准特征,因为申请独立的IP地址的代价要高于所带来的效益.</p>\n<p>在一个典型的配置中,一个本地网络使用一个专有的网络的指定子网(比如192.168.X.X或10.X.X.X)和连在这个网络上的一个路由器.这个路由器占有这个网络地址空间的一个专有地址(入如192.168.0.1),同时他还有一个Internet服务提供商提供的公有IP地址(叫做过载NAT).当信息从本地网络向Internet传输时,原地址由专有地址转换为公用地址.由路由器跟踪每个连接上的基本数据,主要是目的地址和端口.当有回复返回路由器时,它通过输出阶段记录的连接跟踪数据决定转发给内部网的哪个主机.</p>\n<p>Ipv6的广泛采用将使得NAT不再需要.</p>\n<h1 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h1><p>在路由器下的主机并没有创建真正的IP地址,并且不能参与一些因特网协议.<br>NAT也会使安全协议变得复杂.</p>\n<h1 id=\"子网掩码-subnet-mask\"><a href=\"#子网掩码-subnet-mask\" class=\"headerlink\" title=\"子网掩码(subnet mask)\"></a>子网掩码(subnet mask)</h1><p>子网掩码(subnet mask)是每个使用互联网的人必须要掌握的基础知识，只有掌握它，才能够真正理解TCP/IP协议的设置.<br>子网掩码:屏蔽一个IP地址的网络部分的全1比特模式.</p>\n<ol>\n<li>对于A类地址,默认子网掩码是255.0.0.0;</li>\n<li>对于B类地址,默认子网掩码是255.255.0.0;</li>\n<li>对于C类地址,默认子网掩码是255.255.255.0;<br>利用子网掩码可以把大的网络划分成子网，即VLSM（可变长子网掩码），也可以把小的网络归并成大的网络即超网。<h1 id=\"子网掩码构成\"><a href=\"#子网掩码构成\" class=\"headerlink\" title=\"子网掩码构成\"></a>子网掩码构成</h1>要想理解什么是子网掩码，就不能不了解IP地址的构成。互联网是由许多小型网络构成的，每个网络上都有许多主机，这样便构成了一个有层次的结构。IP地址在设计时就考虑到地址分配的层次特点，将每个IP地址都分割成网络号和主机号两部分，以便于IP地址的寻址操作。<br>IP地址的网络号和主机号各是多少位呢？如果不指定，就不知道哪些位是网络号、哪些是主机号，这就需要通过子网掩码来实现。</li>\n</ol>\n<p>子网掩码的设定必须遵循一定的规则。与二进制IP地址相同，子网掩码由1和0组成，且1和0分别连续。子网掩码的长度也是32位，左边是网络位，用二进制数字“1”表示，1的数目等于网络位的长度；右边是主机位，用二进制数字“0”表示，0的数目等于主机位的长度。这样做的目的是为了让掩码与ip地址做按位与运算时用0遮住原主机数，而不改变原网络段数字，而且很容易通过0的位数确定子网的主机数（2的主机位数次方-2，因为主机号全为1时表示该网络广播地址，全为0时表示该网络的网络号，这是两个特殊地址）。只有通过子网掩码，才能表明一台主机所在的子网与其他子网的关系，使网络正常工作。</p>\n<h1 id=\"定义主机数目\"><a href=\"#定义主机数目\" class=\"headerlink\" title=\"定义主机数目\"></a>定义主机数目</h1><p>用于子网掩码的位数决定于可能的子网数目和每个子网的主机数目。在定义子网掩码前，必须弄清楚本来使用的子网数和主机数目。<br>定义子网掩码的步骤</p>\n<ol>\n<li>确定哪些组地址归我们使用。比如我们申请到的网络号为 “210.73.a.b”，该网络地址为c类IP地址，网络标识为“210.73.a”，主机标识为“b”。</li>\n<li><p>根据我们所需的子网数以及将来可能扩充到的子网数，用宿主机的一些位来定义子网掩码。比如我们需要12个子网，将来可能需要16个。用第四个字节的前四位确定子网掩码。前四位都置为“1”，即第四个字节为“11110000”，这个数我们暂且称作新的二进制子网掩码。</p>\n</li>\n<li><p>把对应初始网络的各个位都置为“1”，即前三个字节都置为“1”，则子网掩码的间断二进制形式为：“11111111.11111111.11111111.11110000” 。</p>\n</li>\n<li>把这个数转化为间断十进制形式为：“255.255.255.240” 。<h1 id=\"地址判断\"><a href=\"#地址判断\" class=\"headerlink\" title=\"地址判断\"></a>地址判断</h1>子网掩码是用来判断任意两台计算机的IP地址是否属于同一子网络的根据。<br>最为简单的理解就是两台计算机各自的IP地址与子网掩码进行AND运算后，如果得出的结果是相同的，则说明这两台计算机是处于同一个子网络上的，可以进行直接的通讯。就这么简单。<h1 id=\"表示方法\"><a href=\"#表示方法\" class=\"headerlink\" title=\"表示方法\"></a>表示方法</h1>子网掩码通常有以下2种格式的表示方法：<br>1． 通过与IP地址格式相同的点分十进制表示<br>如：255.0.0.0 或255.255.255.128<br>2． 在IP地址后加上”/“符号以及1-32的数字，其中1-32的数字表示子网掩码中网络标识位的长度<br>如：192.168.1.1/24 的子网掩码也可以表示为255.255.255.0<br>子网掩码一般为255.255.255.0</li>\n</ol>\n<h1 id=\"ABC类地址\"><a href=\"#ABC类地址\" class=\"headerlink\" title=\"ABC类地址\"></a>ABC类地址</h1><p>0开头的A类，10开头B类，110开头C类，1110开头D类，11110开头E类<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. A类地址</span><br><span class=\"line\"></span><br><span class=\"line\">  A类地址的表示范围为：0.0.0.0~126.255.255.255，默认网络掩码为：255.0.0.0；A类地址分配给规模特别大的网络使用。A类网络用第一组数字表示网络本身的地址，后面三组数字作为连接于网络上的主机的地址。分配给具有大量主机（直接个人用户）而局域网络个数较少的大型网络。例如IBM公司的网络。</span><br><span class=\"line\"></span><br><span class=\"line\">  2. B类地址</span><br><span class=\"line\"></span><br><span class=\"line\">B类地址的表示范围为：128.0.0.0~191.255.255.255，默认网络掩码为：255.255.0.0；B类地址分配给一般的中型网络。B类网络用第一、二组数字表示网络的地址，后面两组数字代表网络上的主机地址。</span><br><span class=\"line\"></span><br><span class=\"line\">  3. C类地址</span><br><span class=\"line\"></span><br><span class=\"line\">  C类地址的表示范围为：192.0.0.0~223.255.255.255，默认网络掩码为：255.255.255.0；C类地址分配给小型网络，如一般的局域网和校园网，它可连接的主机数量是最少的，采用把所属的用户分为若干的网段进行管理。C类网络用前三组数字表示网络的地址，最后一组数字作为网络上的主机地址。</span><br><span class=\"line\"></span><br><span class=\"line\">  实际上，还存在着D类地址和E类地址。但这两类地址用途比较特殊，在这里只是简单介绍一下：D类地址称为广播地址，供特殊协议向选定的节点发送信息时用。E类地址保留给将来使用。</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"网络地址转换-NAT-也叫做网络掩蔽或IP掩蔽\"><a href=\"#网络地址转换-NAT-也叫做网络掩蔽或IP掩蔽\" class=\"headerlink\" title=\"网络地址转换(NAT),也叫做网络掩蔽或IP掩蔽\"></a>网络地址转换(NAT),也叫做网络掩蔽或IP掩蔽</h1><p>这是一种IP数据包通过路由器或者防火墙时,重写来源IP地址或目的IP地址的技术,这种技术普遍用在有多台主机但只通过一个公有IP地址访问因特网的私有网络中.当然,NAT也让主机之间的通信变得复杂,导致了通信效率变低.</p>\n<h1 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h1><p>90年代中期,NAT是作为解决IPv4地址短缺以避免保留IP地址困难的方案而流行起来的.所以NAT就成了家庭和小型办公网络连接上的路由器的一个标准特征,因为申请独立的IP地址的代价要高于所带来的效益.</p>\n<p>在一个典型的配置中,一个本地网络使用一个专有的网络的指定子网(比如192.168.X.X或10.X.X.X)和连在这个网络上的一个路由器.这个路由器占有这个网络地址空间的一个专有地址(入如192.168.0.1),同时他还有一个Internet服务提供商提供的公有IP地址(叫做过载NAT).当信息从本地网络向Internet传输时,原地址由专有地址转换为公用地址.由路由器跟踪每个连接上的基本数据,主要是目的地址和端口.当有回复返回路由器时,它通过输出阶段记录的连接跟踪数据决定转发给内部网的哪个主机.</p>\n<p>Ipv6的广泛采用将使得NAT不再需要.</p>\n<h1 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h1><p>在路由器下的主机并没有创建真正的IP地址,并且不能参与一些因特网协议.<br>NAT也会使安全协议变得复杂.</p>\n<h1 id=\"子网掩码-subnet-mask\"><a href=\"#子网掩码-subnet-mask\" class=\"headerlink\" title=\"子网掩码(subnet mask)\"></a>子网掩码(subnet mask)</h1><p>子网掩码(subnet mask)是每个使用互联网的人必须要掌握的基础知识，只有掌握它，才能够真正理解TCP/IP协议的设置.<br>子网掩码:屏蔽一个IP地址的网络部分的全1比特模式.</p>\n<ol>\n<li>对于A类地址,默认子网掩码是255.0.0.0;</li>\n<li>对于B类地址,默认子网掩码是255.255.0.0;</li>\n<li>对于C类地址,默认子网掩码是255.255.255.0;<br>利用子网掩码可以把大的网络划分成子网，即VLSM（可变长子网掩码），也可以把小的网络归并成大的网络即超网。<h1 id=\"子网掩码构成\"><a href=\"#子网掩码构成\" class=\"headerlink\" title=\"子网掩码构成\"></a>子网掩码构成</h1>要想理解什么是子网掩码，就不能不了解IP地址的构成。互联网是由许多小型网络构成的，每个网络上都有许多主机，这样便构成了一个有层次的结构。IP地址在设计时就考虑到地址分配的层次特点，将每个IP地址都分割成网络号和主机号两部分，以便于IP地址的寻址操作。<br>IP地址的网络号和主机号各是多少位呢？如果不指定，就不知道哪些位是网络号、哪些是主机号，这就需要通过子网掩码来实现。</li>\n</ol>\n<p>子网掩码的设定必须遵循一定的规则。与二进制IP地址相同，子网掩码由1和0组成，且1和0分别连续。子网掩码的长度也是32位，左边是网络位，用二进制数字“1”表示，1的数目等于网络位的长度；右边是主机位，用二进制数字“0”表示，0的数目等于主机位的长度。这样做的目的是为了让掩码与ip地址做按位与运算时用0遮住原主机数，而不改变原网络段数字，而且很容易通过0的位数确定子网的主机数（2的主机位数次方-2，因为主机号全为1时表示该网络广播地址，全为0时表示该网络的网络号，这是两个特殊地址）。只有通过子网掩码，才能表明一台主机所在的子网与其他子网的关系，使网络正常工作。</p>\n<h1 id=\"定义主机数目\"><a href=\"#定义主机数目\" class=\"headerlink\" title=\"定义主机数目\"></a>定义主机数目</h1><p>用于子网掩码的位数决定于可能的子网数目和每个子网的主机数目。在定义子网掩码前，必须弄清楚本来使用的子网数和主机数目。<br>定义子网掩码的步骤</p>\n<ol>\n<li>确定哪些组地址归我们使用。比如我们申请到的网络号为 “210.73.a.b”，该网络地址为c类IP地址，网络标识为“210.73.a”，主机标识为“b”。</li>\n<li><p>根据我们所需的子网数以及将来可能扩充到的子网数，用宿主机的一些位来定义子网掩码。比如我们需要12个子网，将来可能需要16个。用第四个字节的前四位确定子网掩码。前四位都置为“1”，即第四个字节为“11110000”，这个数我们暂且称作新的二进制子网掩码。</p>\n</li>\n<li><p>把对应初始网络的各个位都置为“1”，即前三个字节都置为“1”，则子网掩码的间断二进制形式为：“11111111.11111111.11111111.11110000” 。</p>\n</li>\n<li>把这个数转化为间断十进制形式为：“255.255.255.240” 。<h1 id=\"地址判断\"><a href=\"#地址判断\" class=\"headerlink\" title=\"地址判断\"></a>地址判断</h1>子网掩码是用来判断任意两台计算机的IP地址是否属于同一子网络的根据。<br>最为简单的理解就是两台计算机各自的IP地址与子网掩码进行AND运算后，如果得出的结果是相同的，则说明这两台计算机是处于同一个子网络上的，可以进行直接的通讯。就这么简单。<h1 id=\"表示方法\"><a href=\"#表示方法\" class=\"headerlink\" title=\"表示方法\"></a>表示方法</h1>子网掩码通常有以下2种格式的表示方法：<br>1． 通过与IP地址格式相同的点分十进制表示<br>如：255.0.0.0 或255.255.255.128<br>2． 在IP地址后加上”/“符号以及1-32的数字，其中1-32的数字表示子网掩码中网络标识位的长度<br>如：192.168.1.1/24 的子网掩码也可以表示为255.255.255.0<br>子网掩码一般为255.255.255.0</li>\n</ol>\n<h1 id=\"ABC类地址\"><a href=\"#ABC类地址\" class=\"headerlink\" title=\"ABC类地址\"></a>ABC类地址</h1><p>0开头的A类，10开头B类，110开头C类，1110开头D类，11110开头E类<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. A类地址</span><br><span class=\"line\"></span><br><span class=\"line\">  A类地址的表示范围为：0.0.0.0~126.255.255.255，默认网络掩码为：255.0.0.0；A类地址分配给规模特别大的网络使用。A类网络用第一组数字表示网络本身的地址，后面三组数字作为连接于网络上的主机的地址。分配给具有大量主机（直接个人用户）而局域网络个数较少的大型网络。例如IBM公司的网络。</span><br><span class=\"line\"></span><br><span class=\"line\">  2. B类地址</span><br><span class=\"line\"></span><br><span class=\"line\">B类地址的表示范围为：128.0.0.0~191.255.255.255，默认网络掩码为：255.255.0.0；B类地址分配给一般的中型网络。B类网络用第一、二组数字表示网络的地址，后面两组数字代表网络上的主机地址。</span><br><span class=\"line\"></span><br><span class=\"line\">  3. C类地址</span><br><span class=\"line\"></span><br><span class=\"line\">  C类地址的表示范围为：192.0.0.0~223.255.255.255，默认网络掩码为：255.255.255.0；C类地址分配给小型网络，如一般的局域网和校园网，它可连接的主机数量是最少的，采用把所属的用户分为若干的网段进行管理。C类网络用前三组数字表示网络的地址，最后一组数字作为网络上的主机地址。</span><br><span class=\"line\"></span><br><span class=\"line\">  实际上，还存在着D类地址和E类地址。但这两类地址用途比较特殊，在这里只是简单介绍一下：D类地址称为广播地址，供特殊协议向选定的节点发送信息时用。E类地址保留给将来使用。</span><br></pre></td></tr></table></figure></p>\n"},{"title":"ssh学习","date":"2018-11-02T14:55:04.000Z","_content":"# SSH（安全外壳协议）\nSSH为Secure Shell的缩写，SSH为应用层基础上的安全协议。SSH是目前较为可靠，ch转为远程登陆会话和其他网络服务提供安全的协议。利用SSHh可以防止远程管理过程中信息泄露的问题。SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。\n\n# 功能\n传统的网络服务程序，如：ftp、pop和telnet在本质上都是不安全的，因为它们在网络上用明文传送口令和数据，别有用心的人非常容易就可以截获这些口令和数据。而且，这些服务程序的安全验证方式也是有其弱点的， 就是很容易受到“中间人”（man-in-the-middle）这种方式的攻击。所谓“中间人”的攻击方式， 就是“中间人”冒充真正的服务器接收你传给服务器的数据，然后再冒充你把数据传给真正的服务器。服务器和你之间的数据传送被“中间人”一转手做了手脚之后，就会出现很严重的问题。通过使用SSH，你可以把所有传输的数据进行加密，这样\"中间人\"这种攻击方式就不可能实现了，而且也能够防止DNS欺骗和IP欺骗。使用SSH，还有一个额外的好处就是传输的数据是经过压缩的，所以可以加快传输的速度。SSH有很多功能，它既可以代替Telnet，又可以为FTP、PoP、甚至为PPP提供一个安全的\"通道\"  。\n# 验证\n1. 基于口令的安全验证\n只要你知道自己帐号和口令，就可以登录到远程主机。所有传输的数据都会被加密，但是不能保证你正在连接的服务器就是你想连接的服务器。可能会有别的服务器在冒充真正的服务器，也就是受到“中间人”这种方式的攻击。\n2. 基于密钥的安全验证\n需要依靠密匙，也就是你必须为自己创建一对密匙，并把公用密匙放在需要访问的服务器上。如果你要连接到SSH服务器上，客户端软件就会向服务器发出请求，请求用你的密匙进行安全验证。服务器收到请求之后，先在该服务器上你的主目录下寻找你的公用密匙，然后把它和你发送过来的公用密匙进行比较。如果两个密匙一致，服务器就用公用密匙加密“质询”（challenge）并把它发送给客户端软件。客户端软件收到“质询”之后就可以用你的私人密匙解密再把它发送给服务器。\n用这种方式，你必须知道自己密匙的口令。但是，与第一种级别相比，第二种级别不需要在网络上传送口令。\n第二种级别不仅加密所有传送的数据，而且“中间人”这种攻击方式也是不可能的（因为他没有你的私人密匙）。但是整个登录的过程可能需要10秒  。\n\n","source":"_posts/2018.11.02 ssh学习.md","raw":"---\ntitle: ssh学习\ndate: 2018-11-02 22:55:04\ntags:\n---\n# SSH（安全外壳协议）\nSSH为Secure Shell的缩写，SSH为应用层基础上的安全协议。SSH是目前较为可靠，ch转为远程登陆会话和其他网络服务提供安全的协议。利用SSHh可以防止远程管理过程中信息泄露的问题。SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。\n\n# 功能\n传统的网络服务程序，如：ftp、pop和telnet在本质上都是不安全的，因为它们在网络上用明文传送口令和数据，别有用心的人非常容易就可以截获这些口令和数据。而且，这些服务程序的安全验证方式也是有其弱点的， 就是很容易受到“中间人”（man-in-the-middle）这种方式的攻击。所谓“中间人”的攻击方式， 就是“中间人”冒充真正的服务器接收你传给服务器的数据，然后再冒充你把数据传给真正的服务器。服务器和你之间的数据传送被“中间人”一转手做了手脚之后，就会出现很严重的问题。通过使用SSH，你可以把所有传输的数据进行加密，这样\"中间人\"这种攻击方式就不可能实现了，而且也能够防止DNS欺骗和IP欺骗。使用SSH，还有一个额外的好处就是传输的数据是经过压缩的，所以可以加快传输的速度。SSH有很多功能，它既可以代替Telnet，又可以为FTP、PoP、甚至为PPP提供一个安全的\"通道\"  。\n# 验证\n1. 基于口令的安全验证\n只要你知道自己帐号和口令，就可以登录到远程主机。所有传输的数据都会被加密，但是不能保证你正在连接的服务器就是你想连接的服务器。可能会有别的服务器在冒充真正的服务器，也就是受到“中间人”这种方式的攻击。\n2. 基于密钥的安全验证\n需要依靠密匙，也就是你必须为自己创建一对密匙，并把公用密匙放在需要访问的服务器上。如果你要连接到SSH服务器上，客户端软件就会向服务器发出请求，请求用你的密匙进行安全验证。服务器收到请求之后，先在该服务器上你的主目录下寻找你的公用密匙，然后把它和你发送过来的公用密匙进行比较。如果两个密匙一致，服务器就用公用密匙加密“质询”（challenge）并把它发送给客户端软件。客户端软件收到“质询”之后就可以用你的私人密匙解密再把它发送给服务器。\n用这种方式，你必须知道自己密匙的口令。但是，与第一种级别相比，第二种级别不需要在网络上传送口令。\n第二种级别不仅加密所有传送的数据，而且“中间人”这种攻击方式也是不可能的（因为他没有你的私人密匙）。但是整个登录的过程可能需要10秒  。\n\n","slug":"ssh学习","published":1,"updated":"2018-11-02T15:04:04.456Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzd9003jdcyuqlhwbe94","content":"<h1 id=\"SSH（安全外壳协议）\"><a href=\"#SSH（安全外壳协议）\" class=\"headerlink\" title=\"SSH（安全外壳协议）\"></a>SSH（安全外壳协议）</h1><p>SSH为Secure Shell的缩写，SSH为应用层基础上的安全协议。SSH是目前较为可靠，ch转为远程登陆会话和其他网络服务提供安全的协议。利用SSHh可以防止远程管理过程中信息泄露的问题。SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。</p>\n<h1 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h1><p>传统的网络服务程序，如：ftp、pop和telnet在本质上都是不安全的，因为它们在网络上用明文传送口令和数据，别有用心的人非常容易就可以截获这些口令和数据。而且，这些服务程序的安全验证方式也是有其弱点的， 就是很容易受到“中间人”（man-in-the-middle）这种方式的攻击。所谓“中间人”的攻击方式， 就是“中间人”冒充真正的服务器接收你传给服务器的数据，然后再冒充你把数据传给真正的服务器。服务器和你之间的数据传送被“中间人”一转手做了手脚之后，就会出现很严重的问题。通过使用SSH，你可以把所有传输的数据进行加密，这样”中间人”这种攻击方式就不可能实现了，而且也能够防止DNS欺骗和IP欺骗。使用SSH，还有一个额外的好处就是传输的数据是经过压缩的，所以可以加快传输的速度。SSH有很多功能，它既可以代替Telnet，又可以为FTP、PoP、甚至为PPP提供一个安全的”通道”  。</p>\n<h1 id=\"验证\"><a href=\"#验证\" class=\"headerlink\" title=\"验证\"></a>验证</h1><ol>\n<li>基于口令的安全验证<br>只要你知道自己帐号和口令，就可以登录到远程主机。所有传输的数据都会被加密，但是不能保证你正在连接的服务器就是你想连接的服务器。可能会有别的服务器在冒充真正的服务器，也就是受到“中间人”这种方式的攻击。</li>\n<li>基于密钥的安全验证<br>需要依靠密匙，也就是你必须为自己创建一对密匙，并把公用密匙放在需要访问的服务器上。如果你要连接到SSH服务器上，客户端软件就会向服务器发出请求，请求用你的密匙进行安全验证。服务器收到请求之后，先在该服务器上你的主目录下寻找你的公用密匙，然后把它和你发送过来的公用密匙进行比较。如果两个密匙一致，服务器就用公用密匙加密“质询”（challenge）并把它发送给客户端软件。客户端软件收到“质询”之后就可以用你的私人密匙解密再把它发送给服务器。<br>用这种方式，你必须知道自己密匙的口令。但是，与第一种级别相比，第二种级别不需要在网络上传送口令。<br>第二种级别不仅加密所有传送的数据，而且“中间人”这种攻击方式也是不可能的（因为他没有你的私人密匙）。但是整个登录的过程可能需要10秒  。</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"SSH（安全外壳协议）\"><a href=\"#SSH（安全外壳协议）\" class=\"headerlink\" title=\"SSH（安全外壳协议）\"></a>SSH（安全外壳协议）</h1><p>SSH为Secure Shell的缩写，SSH为应用层基础上的安全协议。SSH是目前较为可靠，ch转为远程登陆会话和其他网络服务提供安全的协议。利用SSHh可以防止远程管理过程中信息泄露的问题。SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。</p>\n<h1 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h1><p>传统的网络服务程序，如：ftp、pop和telnet在本质上都是不安全的，因为它们在网络上用明文传送口令和数据，别有用心的人非常容易就可以截获这些口令和数据。而且，这些服务程序的安全验证方式也是有其弱点的， 就是很容易受到“中间人”（man-in-the-middle）这种方式的攻击。所谓“中间人”的攻击方式， 就是“中间人”冒充真正的服务器接收你传给服务器的数据，然后再冒充你把数据传给真正的服务器。服务器和你之间的数据传送被“中间人”一转手做了手脚之后，就会出现很严重的问题。通过使用SSH，你可以把所有传输的数据进行加密，这样”中间人”这种攻击方式就不可能实现了，而且也能够防止DNS欺骗和IP欺骗。使用SSH，还有一个额外的好处就是传输的数据是经过压缩的，所以可以加快传输的速度。SSH有很多功能，它既可以代替Telnet，又可以为FTP、PoP、甚至为PPP提供一个安全的”通道”  。</p>\n<h1 id=\"验证\"><a href=\"#验证\" class=\"headerlink\" title=\"验证\"></a>验证</h1><ol>\n<li>基于口令的安全验证<br>只要你知道自己帐号和口令，就可以登录到远程主机。所有传输的数据都会被加密，但是不能保证你正在连接的服务器就是你想连接的服务器。可能会有别的服务器在冒充真正的服务器，也就是受到“中间人”这种方式的攻击。</li>\n<li>基于密钥的安全验证<br>需要依靠密匙，也就是你必须为自己创建一对密匙，并把公用密匙放在需要访问的服务器上。如果你要连接到SSH服务器上，客户端软件就会向服务器发出请求，请求用你的密匙进行安全验证。服务器收到请求之后，先在该服务器上你的主目录下寻找你的公用密匙，然后把它和你发送过来的公用密匙进行比较。如果两个密匙一致，服务器就用公用密匙加密“质询”（challenge）并把它发送给客户端软件。客户端软件收到“质询”之后就可以用你的私人密匙解密再把它发送给服务器。<br>用这种方式，你必须知道自己密匙的口令。但是，与第一种级别相比，第二种级别不需要在网络上传送口令。<br>第二种级别不仅加密所有传送的数据，而且“中间人”这种攻击方式也是不可能的（因为他没有你的私人密匙）。但是整个登录的过程可能需要10秒  。</li>\n</ol>\n"},{"title":"一些琐碎的记录","date":"2018-11-02T13:10:29.000Z","_content":"# linux或者windows远程连接linux\nwindows下打开powershell,linux下打开命令行，然后：\n```\nssh root@119.27.183.248\n```\n再根据提升输入密码即可远程访问，非常方便！\n\n# Hexo访问速度慢的原因\n之前此打开本站点，文字加载速度非常慢。今天索性打开F10调试Network，发现是有一个hexo下一个字体访问延迟过高。所以换了下主题，现在的打开网站的速度就飞快了。\n# Nginx作为服务器\n现在本站点采用了nginx作为静态页面的服务器，配置非常简单，之修改了.conf下的文件路径为hexo的public即可。\n# 域名修改\n之前设置了*.yzchen.info可以访问到本站，但yzchen.info一直访问不到。今天灵机一动，意识到*是任意字符，但不能为空，所以需要增加一个解析 yzchen.info到本站即可。\n\n# Linux用户管理\n把目录/home/wwwroot/ftptest的拥有者设置为ftptest\n使ftptest用户拥有这个目录的读写权限 \n\n```\nchown -R ftptest /home/wwwroot/ftptest\nchmod -R 775 /home/wwwroot/ftptest\n```\n\n","source":"_posts/2018.11.02 一些琐碎的记录.md","raw":"---\ntitle: 一些琐碎的记录\ndate: 2018-11-02 21:10:29\ntags:\n---\n# linux或者windows远程连接linux\nwindows下打开powershell,linux下打开命令行，然后：\n```\nssh root@119.27.183.248\n```\n再根据提升输入密码即可远程访问，非常方便！\n\n# Hexo访问速度慢的原因\n之前此打开本站点，文字加载速度非常慢。今天索性打开F10调试Network，发现是有一个hexo下一个字体访问延迟过高。所以换了下主题，现在的打开网站的速度就飞快了。\n# Nginx作为服务器\n现在本站点采用了nginx作为静态页面的服务器，配置非常简单，之修改了.conf下的文件路径为hexo的public即可。\n# 域名修改\n之前设置了*.yzchen.info可以访问到本站，但yzchen.info一直访问不到。今天灵机一动，意识到*是任意字符，但不能为空，所以需要增加一个解析 yzchen.info到本站即可。\n\n# Linux用户管理\n把目录/home/wwwroot/ftptest的拥有者设置为ftptest\n使ftptest用户拥有这个目录的读写权限 \n\n```\nchown -R ftptest /home/wwwroot/ftptest\nchmod -R 775 /home/wwwroot/ftptest\n```\n\n","slug":"一些琐碎的记录","published":1,"updated":"2018-11-02T15:45:20.833Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzda003ldcyu5uxgacme","content":"<h1 id=\"linux或者windows远程连接linux\"><a href=\"#linux或者windows远程连接linux\" class=\"headerlink\" title=\"linux或者windows远程连接linux\"></a>linux或者windows远程连接linux</h1><p>windows下打开powershell,linux下打开命令行，然后：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh root@119.27.183.248</span><br></pre></td></tr></table></figure></p>\n<p>再根据提升输入密码即可远程访问，非常方便！</p>\n<h1 id=\"Hexo访问速度慢的原因\"><a href=\"#Hexo访问速度慢的原因\" class=\"headerlink\" title=\"Hexo访问速度慢的原因\"></a>Hexo访问速度慢的原因</h1><p>之前此打开本站点，文字加载速度非常慢。今天索性打开F10调试Network，发现是有一个hexo下一个字体访问延迟过高。所以换了下主题，现在的打开网站的速度就飞快了。</p>\n<h1 id=\"Nginx作为服务器\"><a href=\"#Nginx作为服务器\" class=\"headerlink\" title=\"Nginx作为服务器\"></a>Nginx作为服务器</h1><p>现在本站点采用了nginx作为静态页面的服务器，配置非常简单，之修改了.conf下的文件路径为hexo的public即可。</p>\n<h1 id=\"域名修改\"><a href=\"#域名修改\" class=\"headerlink\" title=\"域名修改\"></a>域名修改</h1><p>之前设置了<em>.yzchen.info可以访问到本站，但yzchen.info一直访问不到。今天灵机一动，意识到</em>是任意字符，但不能为空，所以需要增加一个解析 yzchen.info到本站即可。</p>\n<h1 id=\"Linux用户管理\"><a href=\"#Linux用户管理\" class=\"headerlink\" title=\"Linux用户管理\"></a>Linux用户管理</h1><p>把目录/home/wwwroot/ftptest的拥有者设置为ftptest<br>使ftptest用户拥有这个目录的读写权限 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chown -R ftptest /home/wwwroot/ftptest</span><br><span class=\"line\">chmod -R 775 /home/wwwroot/ftptest</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"linux或者windows远程连接linux\"><a href=\"#linux或者windows远程连接linux\" class=\"headerlink\" title=\"linux或者windows远程连接linux\"></a>linux或者windows远程连接linux</h1><p>windows下打开powershell,linux下打开命令行，然后：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh root@119.27.183.248</span><br></pre></td></tr></table></figure></p>\n<p>再根据提升输入密码即可远程访问，非常方便！</p>\n<h1 id=\"Hexo访问速度慢的原因\"><a href=\"#Hexo访问速度慢的原因\" class=\"headerlink\" title=\"Hexo访问速度慢的原因\"></a>Hexo访问速度慢的原因</h1><p>之前此打开本站点，文字加载速度非常慢。今天索性打开F10调试Network，发现是有一个hexo下一个字体访问延迟过高。所以换了下主题，现在的打开网站的速度就飞快了。</p>\n<h1 id=\"Nginx作为服务器\"><a href=\"#Nginx作为服务器\" class=\"headerlink\" title=\"Nginx作为服务器\"></a>Nginx作为服务器</h1><p>现在本站点采用了nginx作为静态页面的服务器，配置非常简单，之修改了.conf下的文件路径为hexo的public即可。</p>\n<h1 id=\"域名修改\"><a href=\"#域名修改\" class=\"headerlink\" title=\"域名修改\"></a>域名修改</h1><p>之前设置了<em>.yzchen.info可以访问到本站，但yzchen.info一直访问不到。今天灵机一动，意识到</em>是任意字符，但不能为空，所以需要增加一个解析 yzchen.info到本站即可。</p>\n<h1 id=\"Linux用户管理\"><a href=\"#Linux用户管理\" class=\"headerlink\" title=\"Linux用户管理\"></a>Linux用户管理</h1><p>把目录/home/wwwroot/ftptest的拥有者设置为ftptest<br>使ftptest用户拥有这个目录的读写权限 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chown -R ftptest /home/wwwroot/ftptest</span><br><span class=\"line\">chmod -R 775 /home/wwwroot/ftptest</span><br></pre></td></tr></table></figure>\n"},{"title":"git踩坑记","date":"2018-11-02T16:13:06.000Z","_content":"# 啊，折磨人的Git\ngit最初是在idea上使用的，傻瓜式按部就班的操作就能正确上传到github上，但脱离了工具，用命令行就不会操作了。\n现在有个想法，把hexo的文章上传到github，保证数据不会丢，所以就用到了linux下git的使用。琢磨了10个小时也没能正确的上传，很是痛苦。\n# 怎么才能正确上传呢？\n```\n1. 首先配置本地与远程git端的密钥\n输入ssh-keygen –t rsa –C 421248827@qq.com\n然后点三次回车（这里卡壳了1个小时，不懂命令行让我输入什么密码，实际上按默认的来即可）\n2. 配置公钥\n此处卡壳也很久，因为每次失败都要重新生成密钥，但最后一次才找到密钥的正确位置。\nlinux默认把密钥放在了/root/.ssh/id_rsa.pub  所以打开这个文件，把其中的密钥复制到剪贴板，然后在github的setttings/ssh keys中add ssh keys ,把刚刚的密钥复制过去，保存。\n回到命令窗口，运行命令 ssh -T git@github.com ，选择yes继续，密钥配置成功。\n3. 配置用户名和密码\ngit config –global user.name \"cyzuestc\"\ngit config –global user.email \"421248827@qq.com\"\n4. 在需要上传文件所在文件夹内，运行  git init ,就生成 .ssh 的隐藏文件\n第一步：增加对我们github上创建的_post仓库的管理：git remote add origin git@github.com:cyzuestc/_post.git\n第二步：拉取仓库中的文件： git pull git@github.com:cyzuestc/_post.git（由于缺少这两步，我折腾了数个小时也没成功上传）。\n第三步： 把本地文件上传到远程仓库\na. git add .(提交所有更改的文件)\nb. git commit -m \"本次提交的评语，必写\"\nc. git push git@github.com:cyzuestc/_post.git 成功推送\n\n```\n# 第二天又操作了一波\n之前的操作虽然成功了，但存在着些个小问题。比如\n1. 某些小文件也没有上传\n2. _post下的文件没有上传\n虽然是小坑，也严重耗费了我将近3个小时时间。欲哭无泪。。。\n对应的解决方案：\n1.在.git目录下，有一个.gitignore文件，里面莫名其妙写了一些忽略的文件，把其删除即可。\n2.之前专门为_post建立了respository并将其内容上传。将github上的respository删除后，又重头上传所有文件，就解决了。 \n\n# 如何新建git？\n之前理解有误，认为必须先pull github的 git才能上传本地git，又查阅了一些博客后得知，并不需要这么反人类的操作。\n具体操作如下：\n先关联一个远程库，远程库的名称默认为origin\n```\ngit remote add origin https://github.com/zongyunqingfeng/testgit 关联一个远程库\n```\n然后将当前master分支推送到远程库\n```\ngit push –u(第一次要用-u 以后不需要) origin master 把当前master分支推送到远程库\n```\n-u的作用是以后直接用git push 代替git push origin master\n\n\n\n\n# 遇到的两次报错\n```\n1. warning: push.default is unset\n```\n需要指定分支：\n```\ngit config --global push.default matching\n```\n```\n2.No refs in common and none specified; doing nothing.\n Perhaps you should specify a branch such as 'master'.\n```\n\n此报错意思为git不知道您当前提交的版本 \n```\ngit push origin master\n```\n\n\n# 再吐槽一次\n要有顺手的电脑，正确的教程，才能顺畅的踩完坑，不然痛苦的要死。。。\n参考教程   https://www.cnblogs.com/nelson-hu/p/6395770.html\n\n# 常用的git命令\nGit基本常用命令如下：\n\nmkdir：         XX (创建一个空目录 XX指目录名)\n\npwd：          显示当前目录的路径。\n\ngit init          把当前的目录变成可以管理的git仓库，生成隐藏.git文件。\n\ngit add XX       把xx文件添加到暂存区去。\n\ngit commit –m “XX”  提交文件 –m 后面的是注释。\n\ngit status        查看仓库状态\n\ngit diff  XX      查看XX文件修改了那些内容\n\ngit log          查看历史记录\n\ngit reset  –hard HEAD^ 或者 git reset  –hard HEAD~ 回退到上一个版本\n\n                    (如果想回退到100个版本，使用git reset –hard HEAD~100 )\n1\n\ncat XX         查看XX文件内容\n\ngit reflog       查看历史记录的版本号id\n\ngit checkout — XX  把XX文件在工作区的修改全部撤销。\n\ngit rm XX          删除XX文件\n\ngit remote add origin https://github.com/zongyunqingfeng/testgit 关联一个远程库\n\ngit push –u(第一次要用-u 以后不需要) origin master 把当前master分支推送到远程库\n\ngit clone https://github.com/zongyunqingfeng/testgit  从远程库中克隆\n\ngit checkout –b dev  创建dev分支 并切换到dev分支上\n\ngit branch  查看当前所有的分支\n\ngit checkout master 切换回master分支\n\ngit merge dev    在当前的分支上合并dev分支\n\ngit branch –d dev 删除dev分支\n\ngit branch name  创建分支\n\ngit stash 把当前的工作隐藏起来 等以后恢复现场后继续工作\n\ngit stash list 查看所有被隐藏的文件列表\n\ngit stash apply 恢复被隐藏的文件，但是内容不删除\n\ngit stash drop 删除文件\n\ngit stash pop 恢复文件的同时 也删除文件\n\ngit remote 查看远程库的信息\n\ngit remote –v 查看远程库的详细信息\n\ngit push origin master  Git会把master分支推送到远程库对应的远程分支上\n\n\n","source":"_posts/2018.11.03 git踩坑记.md","raw":"---\ntitle: git踩坑记\ndate: 2018-11-03 00:13:06\ntags:\n---\n# 啊，折磨人的Git\ngit最初是在idea上使用的，傻瓜式按部就班的操作就能正确上传到github上，但脱离了工具，用命令行就不会操作了。\n现在有个想法，把hexo的文章上传到github，保证数据不会丢，所以就用到了linux下git的使用。琢磨了10个小时也没能正确的上传，很是痛苦。\n# 怎么才能正确上传呢？\n```\n1. 首先配置本地与远程git端的密钥\n输入ssh-keygen –t rsa –C 421248827@qq.com\n然后点三次回车（这里卡壳了1个小时，不懂命令行让我输入什么密码，实际上按默认的来即可）\n2. 配置公钥\n此处卡壳也很久，因为每次失败都要重新生成密钥，但最后一次才找到密钥的正确位置。\nlinux默认把密钥放在了/root/.ssh/id_rsa.pub  所以打开这个文件，把其中的密钥复制到剪贴板，然后在github的setttings/ssh keys中add ssh keys ,把刚刚的密钥复制过去，保存。\n回到命令窗口，运行命令 ssh -T git@github.com ，选择yes继续，密钥配置成功。\n3. 配置用户名和密码\ngit config –global user.name \"cyzuestc\"\ngit config –global user.email \"421248827@qq.com\"\n4. 在需要上传文件所在文件夹内，运行  git init ,就生成 .ssh 的隐藏文件\n第一步：增加对我们github上创建的_post仓库的管理：git remote add origin git@github.com:cyzuestc/_post.git\n第二步：拉取仓库中的文件： git pull git@github.com:cyzuestc/_post.git（由于缺少这两步，我折腾了数个小时也没成功上传）。\n第三步： 把本地文件上传到远程仓库\na. git add .(提交所有更改的文件)\nb. git commit -m \"本次提交的评语，必写\"\nc. git push git@github.com:cyzuestc/_post.git 成功推送\n\n```\n# 第二天又操作了一波\n之前的操作虽然成功了，但存在着些个小问题。比如\n1. 某些小文件也没有上传\n2. _post下的文件没有上传\n虽然是小坑，也严重耗费了我将近3个小时时间。欲哭无泪。。。\n对应的解决方案：\n1.在.git目录下，有一个.gitignore文件，里面莫名其妙写了一些忽略的文件，把其删除即可。\n2.之前专门为_post建立了respository并将其内容上传。将github上的respository删除后，又重头上传所有文件，就解决了。 \n\n# 如何新建git？\n之前理解有误，认为必须先pull github的 git才能上传本地git，又查阅了一些博客后得知，并不需要这么反人类的操作。\n具体操作如下：\n先关联一个远程库，远程库的名称默认为origin\n```\ngit remote add origin https://github.com/zongyunqingfeng/testgit 关联一个远程库\n```\n然后将当前master分支推送到远程库\n```\ngit push –u(第一次要用-u 以后不需要) origin master 把当前master分支推送到远程库\n```\n-u的作用是以后直接用git push 代替git push origin master\n\n\n\n\n# 遇到的两次报错\n```\n1. warning: push.default is unset\n```\n需要指定分支：\n```\ngit config --global push.default matching\n```\n```\n2.No refs in common and none specified; doing nothing.\n Perhaps you should specify a branch such as 'master'.\n```\n\n此报错意思为git不知道您当前提交的版本 \n```\ngit push origin master\n```\n\n\n# 再吐槽一次\n要有顺手的电脑，正确的教程，才能顺畅的踩完坑，不然痛苦的要死。。。\n参考教程   https://www.cnblogs.com/nelson-hu/p/6395770.html\n\n# 常用的git命令\nGit基本常用命令如下：\n\nmkdir：         XX (创建一个空目录 XX指目录名)\n\npwd：          显示当前目录的路径。\n\ngit init          把当前的目录变成可以管理的git仓库，生成隐藏.git文件。\n\ngit add XX       把xx文件添加到暂存区去。\n\ngit commit –m “XX”  提交文件 –m 后面的是注释。\n\ngit status        查看仓库状态\n\ngit diff  XX      查看XX文件修改了那些内容\n\ngit log          查看历史记录\n\ngit reset  –hard HEAD^ 或者 git reset  –hard HEAD~ 回退到上一个版本\n\n                    (如果想回退到100个版本，使用git reset –hard HEAD~100 )\n1\n\ncat XX         查看XX文件内容\n\ngit reflog       查看历史记录的版本号id\n\ngit checkout — XX  把XX文件在工作区的修改全部撤销。\n\ngit rm XX          删除XX文件\n\ngit remote add origin https://github.com/zongyunqingfeng/testgit 关联一个远程库\n\ngit push –u(第一次要用-u 以后不需要) origin master 把当前master分支推送到远程库\n\ngit clone https://github.com/zongyunqingfeng/testgit  从远程库中克隆\n\ngit checkout –b dev  创建dev分支 并切换到dev分支上\n\ngit branch  查看当前所有的分支\n\ngit checkout master 切换回master分支\n\ngit merge dev    在当前的分支上合并dev分支\n\ngit branch –d dev 删除dev分支\n\ngit branch name  创建分支\n\ngit stash 把当前的工作隐藏起来 等以后恢复现场后继续工作\n\ngit stash list 查看所有被隐藏的文件列表\n\ngit stash apply 恢复被隐藏的文件，但是内容不删除\n\ngit stash drop 删除文件\n\ngit stash pop 恢复文件的同时 也删除文件\n\ngit remote 查看远程库的信息\n\ngit remote –v 查看远程库的详细信息\n\ngit push origin master  Git会把master分支推送到远程库对应的远程分支上\n\n\n","slug":"git踩坑记","published":1,"updated":"2018-11-03T03:16:24.607Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdb003mdcyulslbnwm8","content":"<h1 id=\"啊，折磨人的Git\"><a href=\"#啊，折磨人的Git\" class=\"headerlink\" title=\"啊，折磨人的Git\"></a>啊，折磨人的Git</h1><p>git最初是在idea上使用的，傻瓜式按部就班的操作就能正确上传到github上，但脱离了工具，用命令行就不会操作了。<br>现在有个想法，把hexo的文章上传到github，保证数据不会丢，所以就用到了linux下git的使用。琢磨了10个小时也没能正确的上传，很是痛苦。</p>\n<h1 id=\"怎么才能正确上传呢？\"><a href=\"#怎么才能正确上传呢？\" class=\"headerlink\" title=\"怎么才能正确上传呢？\"></a>怎么才能正确上传呢？</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 首先配置本地与远程git端的密钥</span><br><span class=\"line\">输入ssh-keygen –t rsa –C 421248827@qq.com</span><br><span class=\"line\">然后点三次回车（这里卡壳了1个小时，不懂命令行让我输入什么密码，实际上按默认的来即可）</span><br><span class=\"line\">2. 配置公钥</span><br><span class=\"line\">此处卡壳也很久，因为每次失败都要重新生成密钥，但最后一次才找到密钥的正确位置。</span><br><span class=\"line\">linux默认把密钥放在了/root/.ssh/id_rsa.pub  所以打开这个文件，把其中的密钥复制到剪贴板，然后在github的setttings/ssh keys中add ssh keys ,把刚刚的密钥复制过去，保存。</span><br><span class=\"line\">回到命令窗口，运行命令 ssh -T git@github.com ，选择yes继续，密钥配置成功。</span><br><span class=\"line\">3. 配置用户名和密码</span><br><span class=\"line\">git config –global user.name &quot;cyzuestc&quot;</span><br><span class=\"line\">git config –global user.email &quot;421248827@qq.com&quot;</span><br><span class=\"line\">4. 在需要上传文件所在文件夹内，运行  git init ,就生成 .ssh 的隐藏文件</span><br><span class=\"line\">第一步：增加对我们github上创建的_post仓库的管理：git remote add origin git@github.com:cyzuestc/_post.git</span><br><span class=\"line\">第二步：拉取仓库中的文件： git pull git@github.com:cyzuestc/_post.git（由于缺少这两步，我折腾了数个小时也没成功上传）。</span><br><span class=\"line\">第三步： 把本地文件上传到远程仓库</span><br><span class=\"line\">a. git add .(提交所有更改的文件)</span><br><span class=\"line\">b. git commit -m &quot;本次提交的评语，必写&quot;</span><br><span class=\"line\">c. git push git@github.com:cyzuestc/_post.git 成功推送</span><br></pre></td></tr></table></figure>\n<h1 id=\"第二天又操作了一波\"><a href=\"#第二天又操作了一波\" class=\"headerlink\" title=\"第二天又操作了一波\"></a>第二天又操作了一波</h1><p>之前的操作虽然成功了，但存在着些个小问题。比如</p>\n<ol>\n<li>某些小文件也没有上传</li>\n<li>_post下的文件没有上传<br>虽然是小坑，也严重耗费了我将近3个小时时间。欲哭无泪。。。<br>对应的解决方案：<br>1.在.git目录下，有一个.gitignore文件，里面莫名其妙写了一些忽略的文件，把其删除即可。<br>2.之前专门为_post建立了respository并将其内容上传。将github上的respository删除后，又重头上传所有文件，就解决了。 </li>\n</ol>\n<h1 id=\"如何新建git？\"><a href=\"#如何新建git？\" class=\"headerlink\" title=\"如何新建git？\"></a>如何新建git？</h1><p>之前理解有误，认为必须先pull github的 git才能上传本地git，又查阅了一些博客后得知，并不需要这么反人类的操作。<br>具体操作如下：<br>先关联一个远程库，远程库的名称默认为origin<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin https://github.com/zongyunqingfeng/testgit 关联一个远程库</span><br></pre></td></tr></table></figure></p>\n<p>然后将当前master分支推送到远程库<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push –u(第一次要用-u 以后不需要) origin master 把当前master分支推送到远程库</span><br></pre></td></tr></table></figure></p>\n<p>-u的作用是以后直接用git push 代替git push origin master</p>\n<h1 id=\"遇到的两次报错\"><a href=\"#遇到的两次报错\" class=\"headerlink\" title=\"遇到的两次报错\"></a>遇到的两次报错</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. warning: push.default is unset</span><br></pre></td></tr></table></figure>\n<p>需要指定分支：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global push.default matching</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2.No refs in common and none specified; doing nothing.</span><br><span class=\"line\"> Perhaps you should specify a branch such as &apos;master&apos;.</span><br></pre></td></tr></table></figure>\n<p>此报错意思为git不知道您当前提交的版本<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"再吐槽一次\"><a href=\"#再吐槽一次\" class=\"headerlink\" title=\"再吐槽一次\"></a>再吐槽一次</h1><p>要有顺手的电脑，正确的教程，才能顺畅的踩完坑，不然痛苦的要死。。。<br>参考教程   <a href=\"https://www.cnblogs.com/nelson-hu/p/6395770.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/nelson-hu/p/6395770.html</a></p>\n<h1 id=\"常用的git命令\"><a href=\"#常用的git命令\" class=\"headerlink\" title=\"常用的git命令\"></a>常用的git命令</h1><p>Git基本常用命令如下：</p>\n<p>mkdir：         XX (创建一个空目录 XX指目录名)</p>\n<p>pwd：          显示当前目录的路径。</p>\n<p>git init          把当前的目录变成可以管理的git仓库，生成隐藏.git文件。</p>\n<p>git add XX       把xx文件添加到暂存区去。</p>\n<p>git commit –m “XX”  提交文件 –m 后面的是注释。</p>\n<p>git status        查看仓库状态</p>\n<p>git diff  XX      查看XX文件修改了那些内容</p>\n<p>git log          查看历史记录</p>\n<p>git reset  –hard HEAD^ 或者 git reset  –hard HEAD~ 回退到上一个版本</p>\n<pre><code>(如果想回退到100个版本，使用git reset –hard HEAD~100 )\n</code></pre><p>1</p>\n<p>cat XX         查看XX文件内容</p>\n<p>git reflog       查看历史记录的版本号id</p>\n<p>git checkout — XX  把XX文件在工作区的修改全部撤销。</p>\n<p>git rm XX          删除XX文件</p>\n<p>git remote add origin <a href=\"https://github.com/zongyunqingfeng/testgit\" target=\"_blank\" rel=\"noopener\">https://github.com/zongyunqingfeng/testgit</a> 关联一个远程库</p>\n<p>git push –u(第一次要用-u 以后不需要) origin master 把当前master分支推送到远程库</p>\n<p>git clone <a href=\"https://github.com/zongyunqingfeng/testgit\" target=\"_blank\" rel=\"noopener\">https://github.com/zongyunqingfeng/testgit</a>  从远程库中克隆</p>\n<p>git checkout –b dev  创建dev分支 并切换到dev分支上</p>\n<p>git branch  查看当前所有的分支</p>\n<p>git checkout master 切换回master分支</p>\n<p>git merge dev    在当前的分支上合并dev分支</p>\n<p>git branch –d dev 删除dev分支</p>\n<p>git branch name  创建分支</p>\n<p>git stash 把当前的工作隐藏起来 等以后恢复现场后继续工作</p>\n<p>git stash list 查看所有被隐藏的文件列表</p>\n<p>git stash apply 恢复被隐藏的文件，但是内容不删除</p>\n<p>git stash drop 删除文件</p>\n<p>git stash pop 恢复文件的同时 也删除文件</p>\n<p>git remote 查看远程库的信息</p>\n<p>git remote –v 查看远程库的详细信息</p>\n<p>git push origin master  Git会把master分支推送到远程库对应的远程分支上</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"啊，折磨人的Git\"><a href=\"#啊，折磨人的Git\" class=\"headerlink\" title=\"啊，折磨人的Git\"></a>啊，折磨人的Git</h1><p>git最初是在idea上使用的，傻瓜式按部就班的操作就能正确上传到github上，但脱离了工具，用命令行就不会操作了。<br>现在有个想法，把hexo的文章上传到github，保证数据不会丢，所以就用到了linux下git的使用。琢磨了10个小时也没能正确的上传，很是痛苦。</p>\n<h1 id=\"怎么才能正确上传呢？\"><a href=\"#怎么才能正确上传呢？\" class=\"headerlink\" title=\"怎么才能正确上传呢？\"></a>怎么才能正确上传呢？</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 首先配置本地与远程git端的密钥</span><br><span class=\"line\">输入ssh-keygen –t rsa –C 421248827@qq.com</span><br><span class=\"line\">然后点三次回车（这里卡壳了1个小时，不懂命令行让我输入什么密码，实际上按默认的来即可）</span><br><span class=\"line\">2. 配置公钥</span><br><span class=\"line\">此处卡壳也很久，因为每次失败都要重新生成密钥，但最后一次才找到密钥的正确位置。</span><br><span class=\"line\">linux默认把密钥放在了/root/.ssh/id_rsa.pub  所以打开这个文件，把其中的密钥复制到剪贴板，然后在github的setttings/ssh keys中add ssh keys ,把刚刚的密钥复制过去，保存。</span><br><span class=\"line\">回到命令窗口，运行命令 ssh -T git@github.com ，选择yes继续，密钥配置成功。</span><br><span class=\"line\">3. 配置用户名和密码</span><br><span class=\"line\">git config –global user.name &quot;cyzuestc&quot;</span><br><span class=\"line\">git config –global user.email &quot;421248827@qq.com&quot;</span><br><span class=\"line\">4. 在需要上传文件所在文件夹内，运行  git init ,就生成 .ssh 的隐藏文件</span><br><span class=\"line\">第一步：增加对我们github上创建的_post仓库的管理：git remote add origin git@github.com:cyzuestc/_post.git</span><br><span class=\"line\">第二步：拉取仓库中的文件： git pull git@github.com:cyzuestc/_post.git（由于缺少这两步，我折腾了数个小时也没成功上传）。</span><br><span class=\"line\">第三步： 把本地文件上传到远程仓库</span><br><span class=\"line\">a. git add .(提交所有更改的文件)</span><br><span class=\"line\">b. git commit -m &quot;本次提交的评语，必写&quot;</span><br><span class=\"line\">c. git push git@github.com:cyzuestc/_post.git 成功推送</span><br></pre></td></tr></table></figure>\n<h1 id=\"第二天又操作了一波\"><a href=\"#第二天又操作了一波\" class=\"headerlink\" title=\"第二天又操作了一波\"></a>第二天又操作了一波</h1><p>之前的操作虽然成功了，但存在着些个小问题。比如</p>\n<ol>\n<li>某些小文件也没有上传</li>\n<li>_post下的文件没有上传<br>虽然是小坑，也严重耗费了我将近3个小时时间。欲哭无泪。。。<br>对应的解决方案：<br>1.在.git目录下，有一个.gitignore文件，里面莫名其妙写了一些忽略的文件，把其删除即可。<br>2.之前专门为_post建立了respository并将其内容上传。将github上的respository删除后，又重头上传所有文件，就解决了。 </li>\n</ol>\n<h1 id=\"如何新建git？\"><a href=\"#如何新建git？\" class=\"headerlink\" title=\"如何新建git？\"></a>如何新建git？</h1><p>之前理解有误，认为必须先pull github的 git才能上传本地git，又查阅了一些博客后得知，并不需要这么反人类的操作。<br>具体操作如下：<br>先关联一个远程库，远程库的名称默认为origin<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin https://github.com/zongyunqingfeng/testgit 关联一个远程库</span><br></pre></td></tr></table></figure></p>\n<p>然后将当前master分支推送到远程库<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push –u(第一次要用-u 以后不需要) origin master 把当前master分支推送到远程库</span><br></pre></td></tr></table></figure></p>\n<p>-u的作用是以后直接用git push 代替git push origin master</p>\n<h1 id=\"遇到的两次报错\"><a href=\"#遇到的两次报错\" class=\"headerlink\" title=\"遇到的两次报错\"></a>遇到的两次报错</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. warning: push.default is unset</span><br></pre></td></tr></table></figure>\n<p>需要指定分支：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global push.default matching</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2.No refs in common and none specified; doing nothing.</span><br><span class=\"line\"> Perhaps you should specify a branch such as &apos;master&apos;.</span><br></pre></td></tr></table></figure>\n<p>此报错意思为git不知道您当前提交的版本<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"再吐槽一次\"><a href=\"#再吐槽一次\" class=\"headerlink\" title=\"再吐槽一次\"></a>再吐槽一次</h1><p>要有顺手的电脑，正确的教程，才能顺畅的踩完坑，不然痛苦的要死。。。<br>参考教程   <a href=\"https://www.cnblogs.com/nelson-hu/p/6395770.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/nelson-hu/p/6395770.html</a></p>\n<h1 id=\"常用的git命令\"><a href=\"#常用的git命令\" class=\"headerlink\" title=\"常用的git命令\"></a>常用的git命令</h1><p>Git基本常用命令如下：</p>\n<p>mkdir：         XX (创建一个空目录 XX指目录名)</p>\n<p>pwd：          显示当前目录的路径。</p>\n<p>git init          把当前的目录变成可以管理的git仓库，生成隐藏.git文件。</p>\n<p>git add XX       把xx文件添加到暂存区去。</p>\n<p>git commit –m “XX”  提交文件 –m 后面的是注释。</p>\n<p>git status        查看仓库状态</p>\n<p>git diff  XX      查看XX文件修改了那些内容</p>\n<p>git log          查看历史记录</p>\n<p>git reset  –hard HEAD^ 或者 git reset  –hard HEAD~ 回退到上一个版本</p>\n<pre><code>(如果想回退到100个版本，使用git reset –hard HEAD~100 )\n</code></pre><p>1</p>\n<p>cat XX         查看XX文件内容</p>\n<p>git reflog       查看历史记录的版本号id</p>\n<p>git checkout — XX  把XX文件在工作区的修改全部撤销。</p>\n<p>git rm XX          删除XX文件</p>\n<p>git remote add origin <a href=\"https://github.com/zongyunqingfeng/testgit\" target=\"_blank\" rel=\"noopener\">https://github.com/zongyunqingfeng/testgit</a> 关联一个远程库</p>\n<p>git push –u(第一次要用-u 以后不需要) origin master 把当前master分支推送到远程库</p>\n<p>git clone <a href=\"https://github.com/zongyunqingfeng/testgit\" target=\"_blank\" rel=\"noopener\">https://github.com/zongyunqingfeng/testgit</a>  从远程库中克隆</p>\n<p>git checkout –b dev  创建dev分支 并切换到dev分支上</p>\n<p>git branch  查看当前所有的分支</p>\n<p>git checkout master 切换回master分支</p>\n<p>git merge dev    在当前的分支上合并dev分支</p>\n<p>git branch –d dev 删除dev分支</p>\n<p>git branch name  创建分支</p>\n<p>git stash 把当前的工作隐藏起来 等以后恢复现场后继续工作</p>\n<p>git stash list 查看所有被隐藏的文件列表</p>\n<p>git stash apply 恢复被隐藏的文件，但是内容不删除</p>\n<p>git stash drop 删除文件</p>\n<p>git stash pop 恢复文件的同时 也删除文件</p>\n<p>git remote 查看远程库的信息</p>\n<p>git remote –v 查看远程库的详细信息</p>\n<p>git push origin master  Git会把master分支推送到远程库对应的远程分支上</p>\n"},{"title":"关于数据库的几道面试题","date":"2018-11-03T07:45:52.000Z","_content":"# Java连接数据库的步骤\n>1. 加载数据库驱动到JVM中（通过Java.lang.Class类的静态方法forName 实现）\n>2. 创建数据库的连接（Java.sql.DriverManager请求获得Connection对象，该对象代表一个数据库的连接）\n>3. 创建preparedStatement\n>4. 执行SQL语句，遍历结果集，处理异常\n# Mysql优化的几种方法\n>1. 选取合适的字段属性，比如邮政编码char（6）即可，比如尽量把字段设为not null，比如把省份设为Enum\n>2. 使用join来代替子查询\n>3. 使用union来代替手动创建的临时表\n>4. 使用事务\n>5. 锁定表\n>6. 使用外键\n>7. 使用索引\n>8. 优化查询语句，比如有索引的字段上不要用函数操作\n","source":"_posts/2018.11.03 关于数据库的几道面试题.md","raw":"---\ntitle: 关于数据库的几道面试题\ndate: 2018-11-03 15:45:52\ntags: 面试\n---\n# Java连接数据库的步骤\n>1. 加载数据库驱动到JVM中（通过Java.lang.Class类的静态方法forName 实现）\n>2. 创建数据库的连接（Java.sql.DriverManager请求获得Connection对象，该对象代表一个数据库的连接）\n>3. 创建preparedStatement\n>4. 执行SQL语句，遍历结果集，处理异常\n# Mysql优化的几种方法\n>1. 选取合适的字段属性，比如邮政编码char（6）即可，比如尽量把字段设为not null，比如把省份设为Enum\n>2. 使用join来代替子查询\n>3. 使用union来代替手动创建的临时表\n>4. 使用事务\n>5. 锁定表\n>6. 使用外键\n>7. 使用索引\n>8. 优化查询语句，比如有索引的字段上不要用函数操作\n","slug":"关于数据库的几道面试题","published":1,"updated":"2018-11-03T07:53:12.628Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdc003ndcyustttzdwo","content":"<h1 id=\"Java连接数据库的步骤\"><a href=\"#Java连接数据库的步骤\" class=\"headerlink\" title=\"Java连接数据库的步骤\"></a>Java连接数据库的步骤</h1><blockquote>\n<ol>\n<li>加载数据库驱动到JVM中（通过Java.lang.Class类的静态方法forName 实现）</li>\n<li>创建数据库的连接（Java.sql.DriverManager请求获得Connection对象，该对象代表一个数据库的连接）</li>\n<li>创建preparedStatement</li>\n<li>执行SQL语句，遍历结果集，处理异常</li>\n</ol>\n</blockquote>\n<h1 id=\"Mysql优化的几种方法\"><a href=\"#Mysql优化的几种方法\" class=\"headerlink\" title=\"Mysql优化的几种方法\"></a>Mysql优化的几种方法</h1><blockquote>\n<ol>\n<li>选取合适的字段属性，比如邮政编码char（6）即可，比如尽量把字段设为not null，比如把省份设为Enum</li>\n<li>使用join来代替子查询</li>\n<li>使用union来代替手动创建的临时表</li>\n<li>使用事务</li>\n<li>锁定表</li>\n<li>使用外键</li>\n<li>使用索引</li>\n<li>优化查询语句，比如有索引的字段上不要用函数操作</li>\n</ol>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Java连接数据库的步骤\"><a href=\"#Java连接数据库的步骤\" class=\"headerlink\" title=\"Java连接数据库的步骤\"></a>Java连接数据库的步骤</h1><blockquote>\n<ol>\n<li>加载数据库驱动到JVM中（通过Java.lang.Class类的静态方法forName 实现）</li>\n<li>创建数据库的连接（Java.sql.DriverManager请求获得Connection对象，该对象代表一个数据库的连接）</li>\n<li>创建preparedStatement</li>\n<li>执行SQL语句，遍历结果集，处理异常</li>\n</ol>\n</blockquote>\n<h1 id=\"Mysql优化的几种方法\"><a href=\"#Mysql优化的几种方法\" class=\"headerlink\" title=\"Mysql优化的几种方法\"></a>Mysql优化的几种方法</h1><blockquote>\n<ol>\n<li>选取合适的字段属性，比如邮政编码char（6）即可，比如尽量把字段设为not null，比如把省份设为Enum</li>\n<li>使用join来代替子查询</li>\n<li>使用union来代替手动创建的临时表</li>\n<li>使用事务</li>\n<li>锁定表</li>\n<li>使用外键</li>\n<li>使用索引</li>\n<li>优化查询语句，比如有索引的字段上不要用函数操作</li>\n</ol>\n</blockquote>\n"},{"title":"常用的vim命令","date":"2018-11-03T03:19:15.000Z","_content":"# 前言\n用了vim一个多月了，一些常见的vim命令还是要熟记于心，不然每次都去查询效率太低了。\n# 复制命令\n>yy: 单行复制 在命令模式下，将光标移动到将要复制的行处\n>nyy: 多行复制 在命令模式下，将光标移动到将要复制的首行处\n>p: 粘贴到游标后\n>P: 粘贴到游标前\n>nyl: 复制光标后的\n>nyh: 复制光标前的\n>v: 进入visual mode，然后用hjkl方向键选择文本，再按y复制\n\n# 移动光标\n>上:k nk:向上移动n行 9999k或gg可以移到第一行 G移到最后一行\n>下:j nj:向下移动n行\n>左:h nh:向左移动n列\n>右:l nl:向右移动n列\n>$: 移动光标到行尾 n$:移动到第n行的行尾\n>0（Num）：移动光标到行首\n>^: 移动光标到行首第一个非空字符上去\n>%:移动到与制匹配的括号上去（），{}，[]，<>等。\n>nG:移动到第n行上 G:到最后一行\n>CTRL＋G 得到当前光标在文件中的位置\n>向前翻页：CTRL+F\n>向下移动半屏：CTRL＋G\n>向后翻页：CTRL+B\n# 存盘\n>u: 撤销前一次的操作\n>Ctrl+r: 恢复撤销\n>o：在当前行的下面另起一行\n>O（shift+o)：在当前行的上面另起一行\n>nx:执行n次x(删除)操作\n>ZZ：保存当前文档并退出VIM\n>nx:执行n次x(删除)操作\n>ZZ：保存当前文档并退出VIM, n继续下一个查找\n>dnj:向下删除n行\n>dnk:向上删除n行\n>dnj:向下删除n行\n>dnk:向上删除n行\n>dd:删除一行\n>dw:删除当前字符开始的第一个字符\n>d):删除到下一句的开始\n>d}:ch删除到下一段的开始\n\n\n\n\n\n\n\n","source":"_posts/2018.11.03 常用的vim命令.md","raw":"---\ntitle: 常用的vim命令\ndate: 2018-11-03 11:19:15\ntags:\n---\n# 前言\n用了vim一个多月了，一些常见的vim命令还是要熟记于心，不然每次都去查询效率太低了。\n# 复制命令\n>yy: 单行复制 在命令模式下，将光标移动到将要复制的行处\n>nyy: 多行复制 在命令模式下，将光标移动到将要复制的首行处\n>p: 粘贴到游标后\n>P: 粘贴到游标前\n>nyl: 复制光标后的\n>nyh: 复制光标前的\n>v: 进入visual mode，然后用hjkl方向键选择文本，再按y复制\n\n# 移动光标\n>上:k nk:向上移动n行 9999k或gg可以移到第一行 G移到最后一行\n>下:j nj:向下移动n行\n>左:h nh:向左移动n列\n>右:l nl:向右移动n列\n>$: 移动光标到行尾 n$:移动到第n行的行尾\n>0（Num）：移动光标到行首\n>^: 移动光标到行首第一个非空字符上去\n>%:移动到与制匹配的括号上去（），{}，[]，<>等。\n>nG:移动到第n行上 G:到最后一行\n>CTRL＋G 得到当前光标在文件中的位置\n>向前翻页：CTRL+F\n>向下移动半屏：CTRL＋G\n>向后翻页：CTRL+B\n# 存盘\n>u: 撤销前一次的操作\n>Ctrl+r: 恢复撤销\n>o：在当前行的下面另起一行\n>O（shift+o)：在当前行的上面另起一行\n>nx:执行n次x(删除)操作\n>ZZ：保存当前文档并退出VIM\n>nx:执行n次x(删除)操作\n>ZZ：保存当前文档并退出VIM, n继续下一个查找\n>dnj:向下删除n行\n>dnk:向上删除n行\n>dnj:向下删除n行\n>dnk:向上删除n行\n>dd:删除一行\n>dw:删除当前字符开始的第一个字符\n>d):删除到下一句的开始\n>d}:ch删除到下一段的开始\n\n\n\n\n\n\n\n","slug":"常用的vim命令","published":1,"updated":"2018-11-03T05:31:24.693Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdd003odcyun2tgelof","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>用了vim一个多月了，一些常见的vim命令还是要熟记于心，不然每次都去查询效率太低了。</p>\n<h1 id=\"复制命令\"><a href=\"#复制命令\" class=\"headerlink\" title=\"复制命令\"></a>复制命令</h1><blockquote>\n<p>yy: 单行复制 在命令模式下，将光标移动到将要复制的行处<br>nyy: 多行复制 在命令模式下，将光标移动到将要复制的首行处<br>p: 粘贴到游标后<br>P: 粘贴到游标前<br>nyl: 复制光标后的<br>nyh: 复制光标前的<br>v: 进入visual mode，然后用hjkl方向键选择文本，再按y复制</p>\n</blockquote>\n<h1 id=\"移动光标\"><a href=\"#移动光标\" class=\"headerlink\" title=\"移动光标\"></a>移动光标</h1><blockquote>\n<p>上:k nk:向上移动n行 9999k或gg可以移到第一行 G移到最后一行<br>下:j nj:向下移动n行<br>左:h nh:向左移动n列<br>右:l nl:向右移动n列<br>$: 移动光标到行尾 n$:移动到第n行的行尾<br>0（Num）：移动光标到行首<br>^: 移动光标到行首第一个非空字符上去<br>%:移动到与制匹配的括号上去（），{}，[]，&lt;&gt;等。<br>nG:移动到第n行上 G:到最后一行<br>CTRL＋G 得到当前光标在文件中的位置<br>向前翻页：CTRL+F<br>向下移动半屏：CTRL＋G<br>向后翻页：CTRL+B</p>\n</blockquote>\n<h1 id=\"存盘\"><a href=\"#存盘\" class=\"headerlink\" title=\"存盘\"></a>存盘</h1><blockquote>\n<p>u: 撤销前一次的操作<br>Ctrl+r: 恢复撤销<br>o：在当前行的下面另起一行<br>O（shift+o)：在当前行的上面另起一行<br>nx:执行n次x(删除)操作<br>ZZ：保存当前文档并退出VIM<br>nx:执行n次x(删除)操作<br>ZZ：保存当前文档并退出VIM, n继续下一个查找<br>dnj:向下删除n行<br>dnk:向上删除n行<br>dnj:向下删除n行<br>dnk:向上删除n行<br>dd:删除一行<br>dw:删除当前字符开始的第一个字符<br>d):删除到下一句的开始<br>d}:ch删除到下一段的开始</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>用了vim一个多月了，一些常见的vim命令还是要熟记于心，不然每次都去查询效率太低了。</p>\n<h1 id=\"复制命令\"><a href=\"#复制命令\" class=\"headerlink\" title=\"复制命令\"></a>复制命令</h1><blockquote>\n<p>yy: 单行复制 在命令模式下，将光标移动到将要复制的行处<br>nyy: 多行复制 在命令模式下，将光标移动到将要复制的首行处<br>p: 粘贴到游标后<br>P: 粘贴到游标前<br>nyl: 复制光标后的<br>nyh: 复制光标前的<br>v: 进入visual mode，然后用hjkl方向键选择文本，再按y复制</p>\n</blockquote>\n<h1 id=\"移动光标\"><a href=\"#移动光标\" class=\"headerlink\" title=\"移动光标\"></a>移动光标</h1><blockquote>\n<p>上:k nk:向上移动n行 9999k或gg可以移到第一行 G移到最后一行<br>下:j nj:向下移动n行<br>左:h nh:向左移动n列<br>右:l nl:向右移动n列<br>$: 移动光标到行尾 n$:移动到第n行的行尾<br>0（Num）：移动光标到行首<br>^: 移动光标到行首第一个非空字符上去<br>%:移动到与制匹配的括号上去（），{}，[]，&lt;&gt;等。<br>nG:移动到第n行上 G:到最后一行<br>CTRL＋G 得到当前光标在文件中的位置<br>向前翻页：CTRL+F<br>向下移动半屏：CTRL＋G<br>向后翻页：CTRL+B</p>\n</blockquote>\n<h1 id=\"存盘\"><a href=\"#存盘\" class=\"headerlink\" title=\"存盘\"></a>存盘</h1><blockquote>\n<p>u: 撤销前一次的操作<br>Ctrl+r: 恢复撤销<br>o：在当前行的下面另起一行<br>O（shift+o)：在当前行的上面另起一行<br>nx:执行n次x(删除)操作<br>ZZ：保存当前文档并退出VIM<br>nx:执行n次x(删除)操作<br>ZZ：保存当前文档并退出VIM, n继续下一个查找<br>dnj:向下删除n行<br>dnk:向上删除n行<br>dnj:向下删除n行<br>dnk:向上删除n行<br>dd:删除一行<br>dw:删除当前字符开始的第一个字符<br>d):删除到下一句的开始<br>d}:ch删除到下一段的开始</p>\n</blockquote>\n"},{"title":"2017.7.10 学习记录","date":"2017-07-09T23:55:58.000Z","_content":"学习记录\n\n---\n\n1.初始化带参数的Arraylist的方法:\n\n```\nArrayList<Integer> list = new ArrayList<Integer>(){{add(5); add(8);}}; \n```\n2.往装list的list中装数据的方法:\n\n```\nArrayList<ArrayList<Integer>>  res = new ArrayList<ArrayList<Integer>>();\n\nArrayList<Integer> valList = new ArrayList<Integer>();\n\nres.add(new ArrayList<Integer>(valList));\n\nvalList.clear;\n\n```\n\n3.在做编程题目时.第一要想到给的参数如果是null如何处理;如果返回值是ArrayList<ArrayList<Integer>> ,则应该返回刚刚初始化的ArrayList<ArrayList<Integer>> ,而不是直接返回null;\n\n","source":"_posts/7.10日学习记录.md","raw":"---\ntitle: 2017.7.10 学习记录\ndate: 2017-7-10 07:55:58\ntags:\n---\n学习记录\n\n---\n\n1.初始化带参数的Arraylist的方法:\n\n```\nArrayList<Integer> list = new ArrayList<Integer>(){{add(5); add(8);}}; \n```\n2.往装list的list中装数据的方法:\n\n```\nArrayList<ArrayList<Integer>>  res = new ArrayList<ArrayList<Integer>>();\n\nArrayList<Integer> valList = new ArrayList<Integer>();\n\nres.add(new ArrayList<Integer>(valList));\n\nvalList.clear;\n\n```\n\n3.在做编程题目时.第一要想到给的参数如果是null如何处理;如果返回值是ArrayList<ArrayList<Integer>> ,则应该返回刚刚初始化的ArrayList<ArrayList<Integer>> ,而不是直接返回null;\n\n","slug":"7-10日学习记录","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdh003qdcyu797sgchp","content":"<p>学习记录</p>\n<hr>\n<p>1.初始化带参数的Arraylist的方法:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;()&#123;&#123;add(5); add(8);&#125;&#125;;</span><br></pre></td></tr></table></figure>\n<p>2.往装list的list中装数据的方法:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;ArrayList&lt;Integer&gt;&gt;  res = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">ArrayList&lt;Integer&gt; valList = new ArrayList&lt;Integer&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">res.add(new ArrayList&lt;Integer&gt;(valList));</span><br><span class=\"line\"></span><br><span class=\"line\">valList.clear;</span><br></pre></td></tr></table></figure>\n<p>3.在做编程题目时.第一要想到给的参数如果是null如何处理;如果返回值是ArrayList&lt;ArrayList<integer>&gt; ,则应该返回刚刚初始化的ArrayList&lt;ArrayList<integer>&gt; ,而不是直接返回null;</integer></integer></p>\n","site":{"data":{}},"excerpt":"","more":"<p>学习记录</p>\n<hr>\n<p>1.初始化带参数的Arraylist的方法:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;()&#123;&#123;add(5); add(8);&#125;&#125;;</span><br></pre></td></tr></table></figure>\n<p>2.往装list的list中装数据的方法:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;ArrayList&lt;Integer&gt;&gt;  res = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">ArrayList&lt;Integer&gt; valList = new ArrayList&lt;Integer&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">res.add(new ArrayList&lt;Integer&gt;(valList));</span><br><span class=\"line\"></span><br><span class=\"line\">valList.clear;</span><br></pre></td></tr></table></figure>\n<p>3.在做编程题目时.第一要想到给的参数如果是null如何处理;如果返回值是ArrayList&lt;ArrayList<integer>&gt; ,则应该返回刚刚初始化的ArrayList&lt;ArrayList<integer>&gt; ,而不是直接返回null;</integer></integer></p>\n"},{"title":"2017.7.11 print格式化输出","date":"2017-07-10T23:55:58.000Z","_content":"\n\n---\n1.printf主要是继承了C语言的printf的一些特性，可以进行格式化输出\n\n```\nSystem.out.printf(\"%-3s\",\"12345\");//-表示左对齐,输出三列,\"%s\"是一个字符串值的点位符的意思\nSystem.out.printf(\"%8d\",23);      //右对齐,输出8列 \nSystem.out.printf(\"j的值为%.2f\",j);//.2表示小数点后两位\n```\n\n","source":"_posts/7.11学习记录.md","raw":"---\ntitle: 2017.7.11 print格式化输出\ndate: 2017-7-11 07:55:58\ntags:\n---\n\n\n---\n1.printf主要是继承了C语言的printf的一些特性，可以进行格式化输出\n\n```\nSystem.out.printf(\"%-3s\",\"12345\");//-表示左对齐,输出三列,\"%s\"是一个字符串值的点位符的意思\nSystem.out.printf(\"%8d\",23);      //右对齐,输出8列 \nSystem.out.printf(\"j的值为%.2f\",j);//.2表示小数点后两位\n```\n\n","slug":"7-11学习记录","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdi003rdcyu0lwzx65c","content":"<hr>\n<p>1.printf主要是继承了C语言的printf的一些特性，可以进行格式化输出</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.printf(&quot;%-3s&quot;,&quot;12345&quot;);//-表示左对齐,输出三列,&quot;%s&quot;是一个字符串值的点位符的意思</span><br><span class=\"line\">System.out.printf(&quot;%8d&quot;,23);      //右对齐,输出8列 </span><br><span class=\"line\">System.out.printf(&quot;j的值为%.2f&quot;,j);//.2表示小数点后两位</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<hr>\n<p>1.printf主要是继承了C语言的printf的一些特性，可以进行格式化输出</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.printf(&quot;%-3s&quot;,&quot;12345&quot;);//-表示左对齐,输出三列,&quot;%s&quot;是一个字符串值的点位符的意思</span><br><span class=\"line\">System.out.printf(&quot;%8d&quot;,23);      //右对齐,输出8列 </span><br><span class=\"line\">System.out.printf(&quot;j的值为%.2f&quot;,j);//.2表示小数点后两位</span><br></pre></td></tr></table></figure>\n"},{"title":"2017.8.6 思考","date":"2017-08-05T23:55:58.000Z","_content":"以下常用语句不够熟练\n1.\n```\nApplication.Screenupdating = false\n\nActiveSheet.usedrange.clearcontents\n\n//重要的是ff的两个属性,ff.files和ff.subfolders\nset fso = createobject(scripting.filesystemobject)\nset ff = fso.getfolder(pth)\nfor each f in ff.Files\n    cells(rows.count,1).end(3).offset(1) = f.name\n    cells(rows.count,2).end(3).offset(1) = f\nnext f    \nfor each fd in ff.subfolders\n    getfd(fd)\nnext fd    ","source":"_posts/8.6vba学习记录.md","raw":"---\ntitle: 2017.8.6 思考\ndate: 2017-8-6 07:55:58\ntags:\n---\n以下常用语句不够熟练\n1.\n```\nApplication.Screenupdating = false\n\nActiveSheet.usedrange.clearcontents\n\n//重要的是ff的两个属性,ff.files和ff.subfolders\nset fso = createobject(scripting.filesystemobject)\nset ff = fso.getfolder(pth)\nfor each f in ff.Files\n    cells(rows.count,1).end(3).offset(1) = f.name\n    cells(rows.count,2).end(3).offset(1) = f\nnext f    \nfor each fd in ff.subfolders\n    getfd(fd)\nnext fd    ","slug":"8-6vba学习记录","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdj003sdcyu8g372y04","content":"<p>以下常用语句不够熟练<br>1.<br><code>`</code><br>Application.Screenupdating = false</p>\n<p>ActiveSheet.usedrange.clearcontents</p>\n<p>//重要的是ff的两个属性,ff.files和ff.subfolders<br>set fso = createobject(scripting.filesystemobject)<br>set ff = fso.getfolder(pth)<br>for each f in ff.Files<br>    cells(rows.count,1).end(3).offset(1) = f.name<br>    cells(rows.count,2).end(3).offset(1) = f<br>next f<br>for each fd in ff.subfolders<br>    getfd(fd)<br>next fd    </p>\n","site":{"data":{}},"excerpt":"","more":"<p>以下常用语句不够熟练<br>1.<br><code>`</code><br>Application.Screenupdating = false</p>\n<p>ActiveSheet.usedrange.clearcontents</p>\n<p>//重要的是ff的两个属性,ff.files和ff.subfolders<br>set fso = createobject(scripting.filesystemobject)<br>set ff = fso.getfolder(pth)<br>for each f in ff.Files<br>    cells(rows.count,1).end(3).offset(1) = f.name<br>    cells(rows.count,2).end(3).offset(1) = f<br>next f<br>for each fd in ff.subfolders<br>    getfd(fd)<br>next fd    </p>\n"},{"title":"Cells操作方法总结","date":"2017-08-01T01:42:02.000Z","_content":"1.\n```\nActiveSheet.Cells(3,4).value = 20\n```\n2.\n```\n//单元格区域内第2行与第3列相交的单元格\nRange(\"B3:F9\").cells(2,3) = 100\n```\n3.\n```\n//引用整行\nActiveSheet.Rows(\"3:5\").select\n```\n4.\n```\n//引用整列\nActiveSheet.Columns(\"F:G\")\n```\n5.\n```\n//range对象的offset属性,向下2行向右3列\nRange(\"A1\").offset(2,3).value = 30\n```\n6.\n```\n//Range对象的CurrentRegion属性\nRange(\"B5\").CurrentRegion.Select\n```\n7.\n```\n//Range对象的End属性\nRange(\"C5\").End(xlUp).select\n//xlDown,xlUp,xlTOLeft,xlToRight\n```\n8.\n```\n//常用技巧\nActiveSheet.Range(\"A65536\").End(xlIup).offset(1,0).value = \"张青\"\n```\n9.\n```\n//with的用法\n    With Range(\"A1:L1\").Font\n        .name = \"宋体\"\n        .size = 12\n        .color = RGB(255,0,0)\n        .Bold = true\n        .Italic = true\n        .underline = xlUnderlinestyledouble\n        .interior.color = RGB(255,255,0)\n    endwith    \n```\n10.\n```\n//打开自动运行\nprivate sub workbook_open()\n    msgbox \"你好\"\nend sub\n```\n11.\n```\n//关闭对话框提示\nApplication.DisplayAlerts = false\n```\n12.\n```\n//判断元素是否在字典中\ndim dic as object\nset dic=createobject(\"scriptng.dictionary\")\n'先添加元素\ndic(\"XX\")=\"\"\n…… \n判断元素\nif dic.exists(\"XX\")=true then msgbox \"XX存在\"\n```\n13\n","source":"_posts/Cells操作方法总结.md","raw":"---\ntitle: Cells操作方法总结\ndate: 2017-08-01 09:42:02\ntags:\n---\n1.\n```\nActiveSheet.Cells(3,4).value = 20\n```\n2.\n```\n//单元格区域内第2行与第3列相交的单元格\nRange(\"B3:F9\").cells(2,3) = 100\n```\n3.\n```\n//引用整行\nActiveSheet.Rows(\"3:5\").select\n```\n4.\n```\n//引用整列\nActiveSheet.Columns(\"F:G\")\n```\n5.\n```\n//range对象的offset属性,向下2行向右3列\nRange(\"A1\").offset(2,3).value = 30\n```\n6.\n```\n//Range对象的CurrentRegion属性\nRange(\"B5\").CurrentRegion.Select\n```\n7.\n```\n//Range对象的End属性\nRange(\"C5\").End(xlUp).select\n//xlDown,xlUp,xlTOLeft,xlToRight\n```\n8.\n```\n//常用技巧\nActiveSheet.Range(\"A65536\").End(xlIup).offset(1,0).value = \"张青\"\n```\n9.\n```\n//with的用法\n    With Range(\"A1:L1\").Font\n        .name = \"宋体\"\n        .size = 12\n        .color = RGB(255,0,0)\n        .Bold = true\n        .Italic = true\n        .underline = xlUnderlinestyledouble\n        .interior.color = RGB(255,255,0)\n    endwith    \n```\n10.\n```\n//打开自动运行\nprivate sub workbook_open()\n    msgbox \"你好\"\nend sub\n```\n11.\n```\n//关闭对话框提示\nApplication.DisplayAlerts = false\n```\n12.\n```\n//判断元素是否在字典中\ndim dic as object\nset dic=createobject(\"scriptng.dictionary\")\n'先添加元素\ndic(\"XX\")=\"\"\n…… \n判断元素\nif dic.exists(\"XX\")=true then msgbox \"XX存在\"\n```\n13\n","slug":"Cells操作方法总结","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdk003tdcyu2wrtviaa","content":"<p>1.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ActiveSheet.Cells(3,4).value = 20</span><br></pre></td></tr></table></figure></p>\n<p>2.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//单元格区域内第2行与第3列相交的单元格</span><br><span class=\"line\">Range(&quot;B3:F9&quot;).cells(2,3) = 100</span><br></pre></td></tr></table></figure></p>\n<p>3.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//引用整行</span><br><span class=\"line\">ActiveSheet.Rows(&quot;3:5&quot;).select</span><br></pre></td></tr></table></figure></p>\n<p>4.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//引用整列</span><br><span class=\"line\">ActiveSheet.Columns(&quot;F:G&quot;)</span><br></pre></td></tr></table></figure></p>\n<p>5.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//range对象的offset属性,向下2行向右3列</span><br><span class=\"line\">Range(&quot;A1&quot;).offset(2,3).value = 30</span><br></pre></td></tr></table></figure></p>\n<p>6.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//Range对象的CurrentRegion属性</span><br><span class=\"line\">Range(&quot;B5&quot;).CurrentRegion.Select</span><br></pre></td></tr></table></figure></p>\n<p>7.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//Range对象的End属性</span><br><span class=\"line\">Range(&quot;C5&quot;).End(xlUp).select</span><br><span class=\"line\">//xlDown,xlUp,xlTOLeft,xlToRight</span><br></pre></td></tr></table></figure></p>\n<p>8.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//常用技巧</span><br><span class=\"line\">ActiveSheet.Range(&quot;A65536&quot;).End(xlIup).offset(1,0).value = &quot;张青&quot;</span><br></pre></td></tr></table></figure></p>\n<p>9.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//with的用法</span><br><span class=\"line\">    With Range(&quot;A1:L1&quot;).Font</span><br><span class=\"line\">        .name = &quot;宋体&quot;</span><br><span class=\"line\">        .size = 12</span><br><span class=\"line\">        .color = RGB(255,0,0)</span><br><span class=\"line\">        .Bold = true</span><br><span class=\"line\">        .Italic = true</span><br><span class=\"line\">        .underline = xlUnderlinestyledouble</span><br><span class=\"line\">        .interior.color = RGB(255,255,0)</span><br><span class=\"line\">    endwith</span><br></pre></td></tr></table></figure></p>\n<p>10.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//打开自动运行</span><br><span class=\"line\">private sub workbook_open()</span><br><span class=\"line\">    msgbox &quot;你好&quot;</span><br><span class=\"line\">end sub</span><br></pre></td></tr></table></figure></p>\n<p>11.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//关闭对话框提示</span><br><span class=\"line\">Application.DisplayAlerts = false</span><br></pre></td></tr></table></figure></p>\n<p>12.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//判断元素是否在字典中</span><br><span class=\"line\">dim dic as object</span><br><span class=\"line\">set dic=createobject(&quot;scriptng.dictionary&quot;)</span><br><span class=\"line\">&apos;先添加元素</span><br><span class=\"line\">dic(&quot;XX&quot;)=&quot;&quot;</span><br><span class=\"line\">…… </span><br><span class=\"line\">判断元素</span><br><span class=\"line\">if dic.exists(&quot;XX&quot;)=true then msgbox &quot;XX存在&quot;</span><br></pre></td></tr></table></figure></p>\n<p>13</p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ActiveSheet.Cells(3,4).value = 20</span><br></pre></td></tr></table></figure></p>\n<p>2.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//单元格区域内第2行与第3列相交的单元格</span><br><span class=\"line\">Range(&quot;B3:F9&quot;).cells(2,3) = 100</span><br></pre></td></tr></table></figure></p>\n<p>3.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//引用整行</span><br><span class=\"line\">ActiveSheet.Rows(&quot;3:5&quot;).select</span><br></pre></td></tr></table></figure></p>\n<p>4.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//引用整列</span><br><span class=\"line\">ActiveSheet.Columns(&quot;F:G&quot;)</span><br></pre></td></tr></table></figure></p>\n<p>5.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//range对象的offset属性,向下2行向右3列</span><br><span class=\"line\">Range(&quot;A1&quot;).offset(2,3).value = 30</span><br></pre></td></tr></table></figure></p>\n<p>6.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//Range对象的CurrentRegion属性</span><br><span class=\"line\">Range(&quot;B5&quot;).CurrentRegion.Select</span><br></pre></td></tr></table></figure></p>\n<p>7.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//Range对象的End属性</span><br><span class=\"line\">Range(&quot;C5&quot;).End(xlUp).select</span><br><span class=\"line\">//xlDown,xlUp,xlTOLeft,xlToRight</span><br></pre></td></tr></table></figure></p>\n<p>8.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//常用技巧</span><br><span class=\"line\">ActiveSheet.Range(&quot;A65536&quot;).End(xlIup).offset(1,0).value = &quot;张青&quot;</span><br></pre></td></tr></table></figure></p>\n<p>9.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//with的用法</span><br><span class=\"line\">    With Range(&quot;A1:L1&quot;).Font</span><br><span class=\"line\">        .name = &quot;宋体&quot;</span><br><span class=\"line\">        .size = 12</span><br><span class=\"line\">        .color = RGB(255,0,0)</span><br><span class=\"line\">        .Bold = true</span><br><span class=\"line\">        .Italic = true</span><br><span class=\"line\">        .underline = xlUnderlinestyledouble</span><br><span class=\"line\">        .interior.color = RGB(255,255,0)</span><br><span class=\"line\">    endwith</span><br></pre></td></tr></table></figure></p>\n<p>10.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//打开自动运行</span><br><span class=\"line\">private sub workbook_open()</span><br><span class=\"line\">    msgbox &quot;你好&quot;</span><br><span class=\"line\">end sub</span><br></pre></td></tr></table></figure></p>\n<p>11.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//关闭对话框提示</span><br><span class=\"line\">Application.DisplayAlerts = false</span><br></pre></td></tr></table></figure></p>\n<p>12.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//判断元素是否在字典中</span><br><span class=\"line\">dim dic as object</span><br><span class=\"line\">set dic=createobject(&quot;scriptng.dictionary&quot;)</span><br><span class=\"line\">&apos;先添加元素</span><br><span class=\"line\">dic(&quot;XX&quot;)=&quot;&quot;</span><br><span class=\"line\">…… </span><br><span class=\"line\">判断元素</span><br><span class=\"line\">if dic.exists(&quot;XX&quot;)=true then msgbox &quot;XX存在&quot;</span><br></pre></td></tr></table></figure></p>\n<p>13</p>\n"},{"title":"IDEA热部署与tomcat热加载","date":"2017-07-09T01:42:02.000Z","_content":"- 1.打开Configurations\n- 2.On 'Update' action: Redeploy\n- 3.On frame deactivation: Update classes and resources\n- 4.最下面Build中选项目\n- \n\n---\n打开tomcat中conf的context.xml,在context后添加成如下语句:\n<Context reloadable=\"true\">\n\n---\ncss\n- id选择器 以#开头\n- 类选择器 以.开头\n- 元素选择器 选择所有元素\"div\"\n---\n修改类中的text\n```\nvar ele = $(\".myclass\");\nele.text(\"888\");\n\n```\n---\n属性选择器\n```\n$(\"[name=age]\")属性名为name,值为age的元素\n alert($(\"[name=age]\").val(\"hello\")); 将其值改为hello\n```\n---\n获取input中name的值为\"name\"的元素的id\n```\n$(\":input[name=name]\").attr(\"id\")\n```\n将input中name的值为\"name\"的元素的id改为idxxx\n```\n$(\":input[name=name]\").attr(\"id\",\"idxxx\")\n```\n删除\n```\nremoveAttr(name)\n```\n---\n给id为mydiv的追加xxx的样式\n```\n$(\"#mydiv\").addClass(\"xxx\");\n\n<style type=\"text/css\">\n    .xxx{\n        border: 1px solid red;\n        width: 100px;\n        height: 100px;\n    }\n</style>\n```\n---\ncss把元素隐藏\n```\n$(\"#mydiv\").css(\"display\",\"none\");\n```\ncss把元素属性更改\n```\n$(\"#mydiv\").css(\"border\",\"1px solid blue\").css(\"width\",\"100\").css(\"height\",100);\n```\n循环遍历\n```\n$(\"input\").each(function(){\n    \n});\n```\n增加点击事件\n```\n$(\"#btn\").click(function(){\n   alert(\"hello\"); \n});\n```\n给btn绑定click再解除\n```\n\n```\n\n其他事件\n```\n$(\"#xxx\").hover(\n    function () {\n        alert(\"进来\");\n},\nfunction () {\n    alert(\"出去\");\n}\n)\n```\n发送异步请求\n```\n$(\"#xxx1\").blur(function () {\n    alert(\"走了\");\n    $.ajax({\n        url:\"\",\n        data:{},\n        async:true,\n        cache:false,\n        type:\"post\",\n        dataType:\"json\",\n        success:function (result) {\n            if( result){\n            }else {\n            }\n        }\n    })\n});\n```","source":"_posts/IDEA热部署与tomcat热加载.md","raw":"---\ntitle: IDEA热部署与tomcat热加载\ndate: 2017-07-09 09:42:02\ntags:\n---\n- 1.打开Configurations\n- 2.On 'Update' action: Redeploy\n- 3.On frame deactivation: Update classes and resources\n- 4.最下面Build中选项目\n- \n\n---\n打开tomcat中conf的context.xml,在context后添加成如下语句:\n<Context reloadable=\"true\">\n\n---\ncss\n- id选择器 以#开头\n- 类选择器 以.开头\n- 元素选择器 选择所有元素\"div\"\n---\n修改类中的text\n```\nvar ele = $(\".myclass\");\nele.text(\"888\");\n\n```\n---\n属性选择器\n```\n$(\"[name=age]\")属性名为name,值为age的元素\n alert($(\"[name=age]\").val(\"hello\")); 将其值改为hello\n```\n---\n获取input中name的值为\"name\"的元素的id\n```\n$(\":input[name=name]\").attr(\"id\")\n```\n将input中name的值为\"name\"的元素的id改为idxxx\n```\n$(\":input[name=name]\").attr(\"id\",\"idxxx\")\n```\n删除\n```\nremoveAttr(name)\n```\n---\n给id为mydiv的追加xxx的样式\n```\n$(\"#mydiv\").addClass(\"xxx\");\n\n<style type=\"text/css\">\n    .xxx{\n        border: 1px solid red;\n        width: 100px;\n        height: 100px;\n    }\n</style>\n```\n---\ncss把元素隐藏\n```\n$(\"#mydiv\").css(\"display\",\"none\");\n```\ncss把元素属性更改\n```\n$(\"#mydiv\").css(\"border\",\"1px solid blue\").css(\"width\",\"100\").css(\"height\",100);\n```\n循环遍历\n```\n$(\"input\").each(function(){\n    \n});\n```\n增加点击事件\n```\n$(\"#btn\").click(function(){\n   alert(\"hello\"); \n});\n```\n给btn绑定click再解除\n```\n\n```\n\n其他事件\n```\n$(\"#xxx\").hover(\n    function () {\n        alert(\"进来\");\n},\nfunction () {\n    alert(\"出去\");\n}\n)\n```\n发送异步请求\n```\n$(\"#xxx1\").blur(function () {\n    alert(\"走了\");\n    $.ajax({\n        url:\"\",\n        data:{},\n        async:true,\n        cache:false,\n        type:\"post\",\n        dataType:\"json\",\n        success:function (result) {\n            if( result){\n            }else {\n            }\n        }\n    })\n});\n```","slug":"IDEA热部署与tomcat热加载","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdl003udcyu0spu4yfa","content":"<ul>\n<li>1.打开Configurations</li>\n<li>2.On ‘Update’ action: Redeploy</li>\n<li>3.On frame deactivation: Update classes and resources</li>\n<li>4.最下面Build中选项目</li>\n<li></li>\n</ul>\n<hr>\n<p>打开tomcat中conf的context.xml,在context后添加成如下语句:</p>\n<context reloadable=\"true\">\n\n<hr>\n<p>css</p>\n<ul>\n<li>id选择器 以#开头</li>\n<li>类选择器 以.开头</li>\n<li>元素选择器 选择所有元素”div”</li>\n</ul>\n<hr>\n<p>修改类中的text<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var ele = $(&quot;.myclass&quot;);</span><br><span class=\"line\">ele.text(&quot;888&quot;);</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>属性选择器<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;[name=age]&quot;)属性名为name,值为age的元素</span><br><span class=\"line\"> alert($(&quot;[name=age]&quot;).val(&quot;hello&quot;)); 将其值改为hello</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>获取input中name的值为”name”的元素的id<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;:input[name=name]&quot;).attr(&quot;id&quot;)</span><br></pre></td></tr></table></figure></p>\n<p>将input中name的值为”name”的元素的id改为idxxx<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;:input[name=name]&quot;).attr(&quot;id&quot;,&quot;idxxx&quot;)</span><br></pre></td></tr></table></figure></p>\n<p>删除<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">removeAttr(name)</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>给id为mydiv的追加xxx的样式<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#mydiv&quot;).addClass(&quot;xxx&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class=\"line\">    .xxx&#123;</span><br><span class=\"line\">        border: 1px solid red;</span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        height: 100px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>css把元素隐藏<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#mydiv&quot;).css(&quot;display&quot;,&quot;none&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>css把元素属性更改<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#mydiv&quot;).css(&quot;border&quot;,&quot;1px solid blue&quot;).css(&quot;width&quot;,&quot;100&quot;).css(&quot;height&quot;,100);</span><br></pre></td></tr></table></figure></p>\n<p>循环遍历<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;input&quot;).each(function()&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>增加点击事件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#btn&quot;).click(function()&#123;</span><br><span class=\"line\">   alert(&quot;hello&quot;); </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>给btn绑定click再解除<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<p>其他事件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#xxx&quot;).hover(</span><br><span class=\"line\">    function () &#123;</span><br><span class=\"line\">        alert(&quot;进来&quot;);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">function () &#123;</span><br><span class=\"line\">    alert(&quot;出去&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure></p>\n<p>发送异步请求<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#xxx1&quot;).blur(function () &#123;</span><br><span class=\"line\">    alert(&quot;走了&quot;);</span><br><span class=\"line\">    $.ajax(&#123;</span><br><span class=\"line\">        url:&quot;&quot;,</span><br><span class=\"line\">        data:&#123;&#125;,</span><br><span class=\"line\">        async:true,</span><br><span class=\"line\">        cache:false,</span><br><span class=\"line\">        type:&quot;post&quot;,</span><br><span class=\"line\">        dataType:&quot;json&quot;,</span><br><span class=\"line\">        success:function (result) &#123;</span><br><span class=\"line\">            if( result)&#123;</span><br><span class=\"line\">            &#125;else &#123;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n</context>","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>1.打开Configurations</li>\n<li>2.On ‘Update’ action: Redeploy</li>\n<li>3.On frame deactivation: Update classes and resources</li>\n<li>4.最下面Build中选项目</li>\n<li></li>\n</ul>\n<hr>\n<p>打开tomcat中conf的context.xml,在context后添加成如下语句:</p>\n<context reloadable=\"true\">\n\n<hr>\n<p>css</p>\n<ul>\n<li>id选择器 以#开头</li>\n<li>类选择器 以.开头</li>\n<li>元素选择器 选择所有元素”div”</li>\n</ul>\n<hr>\n<p>修改类中的text<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var ele = $(&quot;.myclass&quot;);</span><br><span class=\"line\">ele.text(&quot;888&quot;);</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>属性选择器<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;[name=age]&quot;)属性名为name,值为age的元素</span><br><span class=\"line\"> alert($(&quot;[name=age]&quot;).val(&quot;hello&quot;)); 将其值改为hello</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>获取input中name的值为”name”的元素的id<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;:input[name=name]&quot;).attr(&quot;id&quot;)</span><br></pre></td></tr></table></figure></p>\n<p>将input中name的值为”name”的元素的id改为idxxx<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;:input[name=name]&quot;).attr(&quot;id&quot;,&quot;idxxx&quot;)</span><br></pre></td></tr></table></figure></p>\n<p>删除<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">removeAttr(name)</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>给id为mydiv的追加xxx的样式<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#mydiv&quot;).addClass(&quot;xxx&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class=\"line\">    .xxx&#123;</span><br><span class=\"line\">        border: 1px solid red;</span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        height: 100px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>css把元素隐藏<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#mydiv&quot;).css(&quot;display&quot;,&quot;none&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>css把元素属性更改<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#mydiv&quot;).css(&quot;border&quot;,&quot;1px solid blue&quot;).css(&quot;width&quot;,&quot;100&quot;).css(&quot;height&quot;,100);</span><br></pre></td></tr></table></figure></p>\n<p>循环遍历<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;input&quot;).each(function()&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>增加点击事件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#btn&quot;).click(function()&#123;</span><br><span class=\"line\">   alert(&quot;hello&quot;); </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>给btn绑定click再解除<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<p>其他事件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#xxx&quot;).hover(</span><br><span class=\"line\">    function () &#123;</span><br><span class=\"line\">        alert(&quot;进来&quot;);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">function () &#123;</span><br><span class=\"line\">    alert(&quot;出去&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure></p>\n<p>发送异步请求<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(&quot;#xxx1&quot;).blur(function () &#123;</span><br><span class=\"line\">    alert(&quot;走了&quot;);</span><br><span class=\"line\">    $.ajax(&#123;</span><br><span class=\"line\">        url:&quot;&quot;,</span><br><span class=\"line\">        data:&#123;&#125;,</span><br><span class=\"line\">        async:true,</span><br><span class=\"line\">        cache:false,</span><br><span class=\"line\">        type:&quot;post&quot;,</span><br><span class=\"line\">        dataType:&quot;json&quot;,</span><br><span class=\"line\">        success:function (result) &#123;</span><br><span class=\"line\">            if( result)&#123;</span><br><span class=\"line\">            &#125;else &#123;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n</context>"},{"title":"Scanner用法学习","date":"2017-07-09T01:42:02.000Z","_content":"```\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\tint x =0,y=0 ;\n\t\tint n = sc.nextInt();\n\t\tint xMax = Integer.MIN_VALUE;\n\t\tint yMax = Integer.MIN_VALUE;\n\t\tint xMin = Integer.MAX_VALUE;\n\t\tint yMin = Integer.MAX_VALUE;\n\t\t\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tx = sc.nextInt();\n\t\t\ty = sc.nextInt();\n\t\t\tif(x>xMax)xMax = x;\n\t\t\tif(x<xMin)xMin = x;\n\t\t\tif(y>yMax)yMax = y;\n\t\t\tif(y<yMin)yMin = y;\n\t\t}\n\t\tint side = Math.max(xMax-xMin, yMax-yMin);\n\t\tSystem.out.println(side*side);\n\t\t\n\t\t\n\t}\n```\n","source":"_posts/Scanner用法学习.md","raw":"---\ntitle: Scanner用法学习\ndate: 2017-07-09 09:42:02\ntags:\n---\n```\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\tint x =0,y=0 ;\n\t\tint n = sc.nextInt();\n\t\tint xMax = Integer.MIN_VALUE;\n\t\tint yMax = Integer.MIN_VALUE;\n\t\tint xMin = Integer.MAX_VALUE;\n\t\tint yMin = Integer.MAX_VALUE;\n\t\t\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tx = sc.nextInt();\n\t\t\ty = sc.nextInt();\n\t\t\tif(x>xMax)xMax = x;\n\t\t\tif(x<xMin)xMin = x;\n\t\t\tif(y>yMax)yMax = y;\n\t\t\tif(y<yMin)yMin = y;\n\t\t}\n\t\tint side = Math.max(xMax-xMin, yMax-yMin);\n\t\tSystem.out.println(side*side);\n\t\t\n\t\t\n\t}\n```\n","slug":"Scanner用法学习","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdm003vdcyuv2jzibsx","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123;</span><br><span class=\"line\">\tScanner sc = new Scanner(System.in);</span><br><span class=\"line\">\tint x =0,y=0 ;</span><br><span class=\"line\">\tint n = sc.nextInt();</span><br><span class=\"line\">\tint xMax = Integer.MIN_VALUE;</span><br><span class=\"line\">\tint yMax = Integer.MIN_VALUE;</span><br><span class=\"line\">\tint xMin = Integer.MAX_VALUE;</span><br><span class=\"line\">\tint yMin = Integer.MAX_VALUE;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tfor (int i = 0; i &lt; n; i++) &#123;</span><br><span class=\"line\">\t\tx = sc.nextInt();</span><br><span class=\"line\">\t\ty = sc.nextInt();</span><br><span class=\"line\">\t\tif(x&gt;xMax)xMax = x;</span><br><span class=\"line\">\t\tif(x&lt;xMin)xMin = x;</span><br><span class=\"line\">\t\tif(y&gt;yMax)yMax = y;</span><br><span class=\"line\">\t\tif(y&lt;yMin)yMin = y;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tint side = Math.max(xMax-xMin, yMax-yMin);</span><br><span class=\"line\">\tSystem.out.println(side*side);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123;</span><br><span class=\"line\">\tScanner sc = new Scanner(System.in);</span><br><span class=\"line\">\tint x =0,y=0 ;</span><br><span class=\"line\">\tint n = sc.nextInt();</span><br><span class=\"line\">\tint xMax = Integer.MIN_VALUE;</span><br><span class=\"line\">\tint yMax = Integer.MIN_VALUE;</span><br><span class=\"line\">\tint xMin = Integer.MAX_VALUE;</span><br><span class=\"line\">\tint yMin = Integer.MAX_VALUE;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tfor (int i = 0; i &lt; n; i++) &#123;</span><br><span class=\"line\">\t\tx = sc.nextInt();</span><br><span class=\"line\">\t\ty = sc.nextInt();</span><br><span class=\"line\">\t\tif(x&gt;xMax)xMax = x;</span><br><span class=\"line\">\t\tif(x&lt;xMin)xMin = x;</span><br><span class=\"line\">\t\tif(y&gt;yMax)yMax = y;</span><br><span class=\"line\">\t\tif(y&lt;yMin)yMin = y;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tint side = Math.max(xMax-xMin, yMax-yMin);</span><br><span class=\"line\">\tSystem.out.println(side*side);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"TCP/IP模型各层功能简介","date":"2018-04-08T02:56:45.000Z","_content":"\n# TCP/IP模型结构\n ![tcp/ip结构图](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1523166435440&di=de17fa8e0c26d666f7b2eef8fa27c45b&imgtype=0&src=http%3A%2F%2Fimg694.ph.126.net%2F-cQJOt4nkmF-U2LrVzv74g%3D%3D%2F1151232654747720867.jpg)\n\n# TCP/IP模型的优点\n1. 层次观念不严格,N实体可以跨越N-1实体调用N-2实体,使N-2直接提供服务,如应用层可以直接运行在互联网络之上.\n2. 顶层和底层的协议丰富,中间两层的协议较少.\n3. 使跨平台和异构网络互联成为可能.\n\n ![tcp/ip结构图](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1523166581136&di=9e55f5b86eae5752bcdae14b287dde29&imgtype=jpg&src=http%3A%2F%2Fimg2.imgtn.bdimg.com%2Fit%2Fu%3D2956195152%2C151311456%26fm%3D214%26gp%3D0.jpg)\n \t\n \n \n ![tcp/ip结构图](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1523166517446&di=aa94b41b91ba7bc7b91b9723d2923a1b&imgtype=0&src=http%3A%2F%2Fimg1.ph.126.net%2FhFtRfOyDO_u5gySbDDBlLg%3D%3D%2F6632721431187476380.jpg)\n \n","source":"_posts/TCP-IP模型各层功能简介.md","raw":"---\ntitle: TCP/IP模型各层功能简介\ndate: 2018-04-08 10:56:45\ntags:\ncategories:\n- 计算机网络\n---\n\n# TCP/IP模型结构\n ![tcp/ip结构图](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1523166435440&di=de17fa8e0c26d666f7b2eef8fa27c45b&imgtype=0&src=http%3A%2F%2Fimg694.ph.126.net%2F-cQJOt4nkmF-U2LrVzv74g%3D%3D%2F1151232654747720867.jpg)\n\n# TCP/IP模型的优点\n1. 层次观念不严格,N实体可以跨越N-1实体调用N-2实体,使N-2直接提供服务,如应用层可以直接运行在互联网络之上.\n2. 顶层和底层的协议丰富,中间两层的协议较少.\n3. 使跨平台和异构网络互联成为可能.\n\n ![tcp/ip结构图](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1523166581136&di=9e55f5b86eae5752bcdae14b287dde29&imgtype=jpg&src=http%3A%2F%2Fimg2.imgtn.bdimg.com%2Fit%2Fu%3D2956195152%2C151311456%26fm%3D214%26gp%3D0.jpg)\n \t\n \n \n ![tcp/ip结构图](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1523166517446&di=aa94b41b91ba7bc7b91b9723d2923a1b&imgtype=0&src=http%3A%2F%2Fimg1.ph.126.net%2FhFtRfOyDO_u5gySbDDBlLg%3D%3D%2F6632721431187476380.jpg)\n \n","slug":"TCP-IP模型各层功能简介","published":1,"updated":"2018-11-03T07:12:02.462Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdn003wdcyudmtbnem7","content":"<h1 id=\"TCP-IP模型结构\"><a href=\"#TCP-IP模型结构\" class=\"headerlink\" title=\"TCP/IP模型结构\"></a>TCP/IP模型结构</h1><p> <img src=\"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1523166435440&amp;di=de17fa8e0c26d666f7b2eef8fa27c45b&amp;imgtype=0&amp;src=http%3A%2F%2Fimg694.ph.126.net%2F-cQJOt4nkmF-U2LrVzv74g%3D%3D%2F1151232654747720867.jpg\" alt=\"tcp/ip结构图\"></p>\n<h1 id=\"TCP-IP模型的优点\"><a href=\"#TCP-IP模型的优点\" class=\"headerlink\" title=\"TCP/IP模型的优点\"></a>TCP/IP模型的优点</h1><ol>\n<li>层次观念不严格,N实体可以跨越N-1实体调用N-2实体,使N-2直接提供服务,如应用层可以直接运行在互联网络之上.</li>\n<li>顶层和底层的协议丰富,中间两层的协议较少.</li>\n<li><p>使跨平台和异构网络互联成为可能.</p>\n<p><img src=\"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1523166581136&amp;di=9e55f5b86eae5752bcdae14b287dde29&amp;imgtype=jpg&amp;src=http%3A%2F%2Fimg2.imgtn.bdimg.com%2Fit%2Fu%3D2956195152%2C151311456%26fm%3D214%26gp%3D0.jpg\" alt=\"tcp/ip结构图\"></p>\n</li>\n</ol>\n<p> <img src=\"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1523166517446&amp;di=aa94b41b91ba7bc7b91b9723d2923a1b&amp;imgtype=0&amp;src=http%3A%2F%2Fimg1.ph.126.net%2FhFtRfOyDO_u5gySbDDBlLg%3D%3D%2F6632721431187476380.jpg\" alt=\"tcp/ip结构图\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"TCP-IP模型结构\"><a href=\"#TCP-IP模型结构\" class=\"headerlink\" title=\"TCP/IP模型结构\"></a>TCP/IP模型结构</h1><p> <img src=\"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1523166435440&amp;di=de17fa8e0c26d666f7b2eef8fa27c45b&amp;imgtype=0&amp;src=http%3A%2F%2Fimg694.ph.126.net%2F-cQJOt4nkmF-U2LrVzv74g%3D%3D%2F1151232654747720867.jpg\" alt=\"tcp/ip结构图\"></p>\n<h1 id=\"TCP-IP模型的优点\"><a href=\"#TCP-IP模型的优点\" class=\"headerlink\" title=\"TCP/IP模型的优点\"></a>TCP/IP模型的优点</h1><ol>\n<li>层次观念不严格,N实体可以跨越N-1实体调用N-2实体,使N-2直接提供服务,如应用层可以直接运行在互联网络之上.</li>\n<li>顶层和底层的协议丰富,中间两层的协议较少.</li>\n<li><p>使跨平台和异构网络互联成为可能.</p>\n<p><img src=\"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1523166581136&amp;di=9e55f5b86eae5752bcdae14b287dde29&amp;imgtype=jpg&amp;src=http%3A%2F%2Fimg2.imgtn.bdimg.com%2Fit%2Fu%3D2956195152%2C151311456%26fm%3D214%26gp%3D0.jpg\" alt=\"tcp/ip结构图\"></p>\n</li>\n</ol>\n<p> <img src=\"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1523166517446&amp;di=aa94b41b91ba7bc7b91b9723d2923a1b&amp;imgtype=0&amp;src=http%3A%2F%2Fimg1.ph.126.net%2FhFtRfOyDO_u5gySbDDBlLg%3D%3D%2F6632721431187476380.jpg\" alt=\"tcp/ip结构图\"></p>\n"},{"title":"VBA错误处理","date":"2017-07-09T01:42:02.000Z","_content":"vba错误处理有三种方式:\n\n---\n\n1.执行标签行之后的代码\n```\non error goto a\n\na: msgbox \"没有要选择的工作表\"\n```\n2.继续执行错误语句之后的代码\n```\non error resume next\n```\n3.关闭错误捕捉\n```\non error goto 0\n```\n","source":"_posts/VBA错误处理.md","raw":"---\ntitle: VBA错误处理\ndate: 2017-07-09 09:42:02\ntags:\n---\nvba错误处理有三种方式:\n\n---\n\n1.执行标签行之后的代码\n```\non error goto a\n\na: msgbox \"没有要选择的工作表\"\n```\n2.继续执行错误语句之后的代码\n```\non error resume next\n```\n3.关闭错误捕捉\n```\non error goto 0\n```\n","slug":"VBA错误处理","published":1,"updated":"2018-11-02T06:24:46.033Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdo003xdcyuujq888c9","content":"<p>vba错误处理有三种方式:</p>\n<hr>\n<p>1.执行标签行之后的代码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">on error goto a</span><br><span class=\"line\"></span><br><span class=\"line\">a: msgbox &quot;没有要选择的工作表&quot;</span><br></pre></td></tr></table></figure></p>\n<p>2.继续执行错误语句之后的代码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">on error resume next</span><br></pre></td></tr></table></figure></p>\n<p>3.关闭错误捕捉<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">on error goto 0</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>vba错误处理有三种方式:</p>\n<hr>\n<p>1.执行标签行之后的代码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">on error goto a</span><br><span class=\"line\"></span><br><span class=\"line\">a: msgbox &quot;没有要选择的工作表&quot;</span><br></pre></td></tr></table></figure></p>\n<p>2.继续执行错误语句之后的代码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">on error resume next</span><br></pre></td></tr></table></figure></p>\n<p>3.关闭错误捕捉<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">on error goto 0</span><br></pre></td></tr></table></figure></p>\n"},{"title":"ajax学习","date":"2018-04-25T01:42:31.000Z","_content":"# 提交ajax请求\n参考使用ajax通过无刷新验证账号是否存在, 服务端使用jsp进行验证.当用户输入abc的时候提示已经存在\n完整的$.ajax参数 比较复杂, 这里使用常见的调用方式\n```\n$.ajax(\nurl: page,\ndata: {\"name\":value},\nsuccess: function(result){\n\t$(\"#checkResult\").html(result);\n}\n);\n```\n1. url: page表示访问的是page页面\n2. data: 表示提交的参数\n3. success: function表示服务器成功返回后对应的响应参数\n\n```\n<script>\n$(function(){\n   $(\"#name\").keyup(function(){\n     var page = \"/study/checkName.jsp\";\n     var value = $(this).val();\n        $.ajax({\n            url: page,\n            data:{\"name\":value},\n            success: function(result){\n              $(\"#checkResult\").html(result);\n            }\n        });\n   });\n});\t\n<script>\n```\n以上看起来比较复杂, 其逻辑结构为:\n```\n$( function(){ $(\"#name\").keyup(function(){});  }  );\n\n```\n# 使用get方式提交ajax\n$.get 是$.ajax的简化版, 专门用于发送get请求\n```\n$.get(\n\tpage,\n\t{\"name\":value},\n\tfunction(result){\n\t\t$(\"#checkResult\").html(result);\n\t}\n);\n```\n完整代码\n```\n<script>\n $(function(){\n  $(\"#name\").keyup(function(){\n   var page=\"/study/checkName.jsp\";\n   var value= $(this).val;\n\t$.get(\n\t\tpage,\n\t\t{\"name\":value},\n\t\tfunction(result){\n\t\t\t$(\"#checkResult\").html(result);\n\t\t}\n\t);   \n  });\n });\n</script>\n```\n# 使用post方式提交ajax\n```\n$.post(\n\tpage,\n\t{\"name\":value},\n\tfunction(result){\n\t\t$(\"#checkResult\").html(result);\n\t}\n);\n```\n# get和post的区别\n1. get是form默认提交方式, 通过超链访问某个地址,是get.不可以提交二进制数据.如上传文件.\n2. post必须通过method=\"post\"显示指定, 提交数据不会再浏览器显示, 可以提交二进制数据.\n\n# 最简单的调用ajax的方式\nload比起$.get $.post就简单太多了.\n$(\"#id\").load(page,[data])\n<script>\n\t$(function(){ \n\t\t$(\"#name\").keyup(\n\t\t\tfunction(){\n\t\t\t\tvar value = $(this).val();\n\t\t\t\tvar page=\"/study/checkName.jsp?name=\"+value;\n\t\t\t\t$(\"#checkResult\").load(page);\n\t\t\t});\n\t}  );\n\n</script>\n\n# 格式化form下的输入数据\nform下输入内容比较多的时候, 一个一个取比较麻烦, 就可以用serialize()把输入数据格式化成字符串;\n\n```\n<script src=\"http://how2j.cn/study/jquery.min.js\"></script>\n    \n<div id=\"checkResult\"></div>\n<div id=\"data\"></div>\n<a href=\"http://how2j.cn/study/checkName.jsp\">http://how2j.cn/study/checkName.jsp</a>\n \n<form id=\"form\">   \n输入账号 :<input id=\"name\" type=\"text\" name=\"name\"> <br>\n输入年龄 :<input id=\"age\" type=\"text\" name=\"age\"> <br>\n输入手机号码 :<input id=\"mobile\" type=\"text\" name=\"mobile\"> <br>\n     \n</form>\n \n<script>\n$(function(){\n   $(\"input\").keyup(function(){\n      var data = $(\"#form\").serialize();\n      var url = \"http://how2j.cn/study/checkName.jsp\";\n      var link = url+\"?\"+ data;\n      $(\"a\").html(link);\n      $(\"a\").attr(\"href\",link);\n   });\n});\n    \n</script>\n```\n# 获取一个对象\n1. 创建一个Hero对象\n2. 创建一个JSONObject 对象\n3. 把Hero对象转换为JSONObject 对象，并放在上一个JSONObject对象上，key是\"hero\"\n4. 设置编码方式为UTF-8\n5. 通过response返回 \n```\n        Hero hero = new Hero();\n        hero.setName(\"盖伦\");\n        hero.setHp(353);\n         \n        JSONObject json= new JSONObject();\n   \n        json.put(\"hero\", JSONObject.fromObject(hero));\n        response.setContentType(\"text/html;charset=utf-8\"); \n        response.getWriter().print(json);\n```\n1. 点击按钮之后，通过ajax访问getOneServlet\n2. 获取都数据后，通过JSON.parse 转换为json对象\n3. 获取name和hp\n4. 显示在div里 \n```\n    <script> \n    $('#sender').click(function(){ \n        var url=\"getOneServlet\"; \n        $.post(\n                url,\n                function(data) {\n                     var json=JSON.parse(data); \n                     var name =json.hero.name; \n                     var hp = json.hero.hp;\n                     $(\"#messageDiv\").html(\"英雄名称：\"+name + \"<br>英雄血量:\" +hp );\n                      \n         });  \n    }); \n    </script>  \n```\n# 获取多个对象\n1. 准备一个集合\n2. 向集合中放入 10个Hero对象\n3. 通过JSONSerializer.toJSON(heros)把集合转换为JSON字符串\n4. 返回给浏览器 \n```\nList<Hero> heros = new ArrayList<>();\n        for (int i = 0; i < 10; i++) {\n            Hero hero = new Hero();\n            hero.setName(\"name\"+i);\n            hero.setHp(500+i);\n            heros.add(hero);\n        }\n         \n        String result =JSONSerializer.toJSON(heros).toString();\n \n        response.setContentType(\"text/html;charset=utf-8\"); \n        response.getWriter().print(result);\n    }  \n```\n1. 通过ajax访问getManyServlet\n2. 把返回的数据，通过 $.parseJSON 转换为json数组\n3. 遍历数组，显示在div中 \n```\n    <script> \n    $('#sender').click(function(){ \n        var url=\"getManyServlet\"; \n        $.post(\n                url,\n                function(data) {\n                    var heros = $.parseJSON(data);\n                     for(i in heros){\n                         var old = $(\"#messageDiv\").html();\n                         var hero = heros[i];\n                         $(\"#messageDiv\").html(old + \"<br>\"+hero.name+\"   -----   \"+hero.hp); \n                     }\n         });  \n    }); \n    </script>  \n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/ajax学习.md","raw":"---\ntitle: ajax学习\ndate: 2018-04-25 09:42:31\ntags:\n---\n# 提交ajax请求\n参考使用ajax通过无刷新验证账号是否存在, 服务端使用jsp进行验证.当用户输入abc的时候提示已经存在\n完整的$.ajax参数 比较复杂, 这里使用常见的调用方式\n```\n$.ajax(\nurl: page,\ndata: {\"name\":value},\nsuccess: function(result){\n\t$(\"#checkResult\").html(result);\n}\n);\n```\n1. url: page表示访问的是page页面\n2. data: 表示提交的参数\n3. success: function表示服务器成功返回后对应的响应参数\n\n```\n<script>\n$(function(){\n   $(\"#name\").keyup(function(){\n     var page = \"/study/checkName.jsp\";\n     var value = $(this).val();\n        $.ajax({\n            url: page,\n            data:{\"name\":value},\n            success: function(result){\n              $(\"#checkResult\").html(result);\n            }\n        });\n   });\n});\t\n<script>\n```\n以上看起来比较复杂, 其逻辑结构为:\n```\n$( function(){ $(\"#name\").keyup(function(){});  }  );\n\n```\n# 使用get方式提交ajax\n$.get 是$.ajax的简化版, 专门用于发送get请求\n```\n$.get(\n\tpage,\n\t{\"name\":value},\n\tfunction(result){\n\t\t$(\"#checkResult\").html(result);\n\t}\n);\n```\n完整代码\n```\n<script>\n $(function(){\n  $(\"#name\").keyup(function(){\n   var page=\"/study/checkName.jsp\";\n   var value= $(this).val;\n\t$.get(\n\t\tpage,\n\t\t{\"name\":value},\n\t\tfunction(result){\n\t\t\t$(\"#checkResult\").html(result);\n\t\t}\n\t);   \n  });\n });\n</script>\n```\n# 使用post方式提交ajax\n```\n$.post(\n\tpage,\n\t{\"name\":value},\n\tfunction(result){\n\t\t$(\"#checkResult\").html(result);\n\t}\n);\n```\n# get和post的区别\n1. get是form默认提交方式, 通过超链访问某个地址,是get.不可以提交二进制数据.如上传文件.\n2. post必须通过method=\"post\"显示指定, 提交数据不会再浏览器显示, 可以提交二进制数据.\n\n# 最简单的调用ajax的方式\nload比起$.get $.post就简单太多了.\n$(\"#id\").load(page,[data])\n<script>\n\t$(function(){ \n\t\t$(\"#name\").keyup(\n\t\t\tfunction(){\n\t\t\t\tvar value = $(this).val();\n\t\t\t\tvar page=\"/study/checkName.jsp?name=\"+value;\n\t\t\t\t$(\"#checkResult\").load(page);\n\t\t\t});\n\t}  );\n\n</script>\n\n# 格式化form下的输入数据\nform下输入内容比较多的时候, 一个一个取比较麻烦, 就可以用serialize()把输入数据格式化成字符串;\n\n```\n<script src=\"http://how2j.cn/study/jquery.min.js\"></script>\n    \n<div id=\"checkResult\"></div>\n<div id=\"data\"></div>\n<a href=\"http://how2j.cn/study/checkName.jsp\">http://how2j.cn/study/checkName.jsp</a>\n \n<form id=\"form\">   \n输入账号 :<input id=\"name\" type=\"text\" name=\"name\"> <br>\n输入年龄 :<input id=\"age\" type=\"text\" name=\"age\"> <br>\n输入手机号码 :<input id=\"mobile\" type=\"text\" name=\"mobile\"> <br>\n     \n</form>\n \n<script>\n$(function(){\n   $(\"input\").keyup(function(){\n      var data = $(\"#form\").serialize();\n      var url = \"http://how2j.cn/study/checkName.jsp\";\n      var link = url+\"?\"+ data;\n      $(\"a\").html(link);\n      $(\"a\").attr(\"href\",link);\n   });\n});\n    \n</script>\n```\n# 获取一个对象\n1. 创建一个Hero对象\n2. 创建一个JSONObject 对象\n3. 把Hero对象转换为JSONObject 对象，并放在上一个JSONObject对象上，key是\"hero\"\n4. 设置编码方式为UTF-8\n5. 通过response返回 \n```\n        Hero hero = new Hero();\n        hero.setName(\"盖伦\");\n        hero.setHp(353);\n         \n        JSONObject json= new JSONObject();\n   \n        json.put(\"hero\", JSONObject.fromObject(hero));\n        response.setContentType(\"text/html;charset=utf-8\"); \n        response.getWriter().print(json);\n```\n1. 点击按钮之后，通过ajax访问getOneServlet\n2. 获取都数据后，通过JSON.parse 转换为json对象\n3. 获取name和hp\n4. 显示在div里 \n```\n    <script> \n    $('#sender').click(function(){ \n        var url=\"getOneServlet\"; \n        $.post(\n                url,\n                function(data) {\n                     var json=JSON.parse(data); \n                     var name =json.hero.name; \n                     var hp = json.hero.hp;\n                     $(\"#messageDiv\").html(\"英雄名称：\"+name + \"<br>英雄血量:\" +hp );\n                      \n         });  \n    }); \n    </script>  \n```\n# 获取多个对象\n1. 准备一个集合\n2. 向集合中放入 10个Hero对象\n3. 通过JSONSerializer.toJSON(heros)把集合转换为JSON字符串\n4. 返回给浏览器 \n```\nList<Hero> heros = new ArrayList<>();\n        for (int i = 0; i < 10; i++) {\n            Hero hero = new Hero();\n            hero.setName(\"name\"+i);\n            hero.setHp(500+i);\n            heros.add(hero);\n        }\n         \n        String result =JSONSerializer.toJSON(heros).toString();\n \n        response.setContentType(\"text/html;charset=utf-8\"); \n        response.getWriter().print(result);\n    }  \n```\n1. 通过ajax访问getManyServlet\n2. 把返回的数据，通过 $.parseJSON 转换为json数组\n3. 遍历数组，显示在div中 \n```\n    <script> \n    $('#sender').click(function(){ \n        var url=\"getManyServlet\"; \n        $.post(\n                url,\n                function(data) {\n                    var heros = $.parseJSON(data);\n                     for(i in heros){\n                         var old = $(\"#messageDiv\").html();\n                         var hero = heros[i];\n                         $(\"#messageDiv\").html(old + \"<br>\"+hero.name+\"   -----   \"+hero.hp); \n                     }\n         });  \n    }); \n    </script>  \n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"ajax学习","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdq003zdcyuxpdk6jmq","content":"<h1 id=\"提交ajax请求\"><a href=\"#提交ajax请求\" class=\"headerlink\" title=\"提交ajax请求\"></a>提交ajax请求</h1><p>参考使用ajax通过无刷新验证账号是否存在, 服务端使用jsp进行验证.当用户输入abc的时候提示已经存在<br>完整的$.ajax参数 比较复杂, 这里使用常见的调用方式<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax(</span><br><span class=\"line\">url: page,</span><br><span class=\"line\">data: &#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">success: function(result)&#123;</span><br><span class=\"line\">\t$(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></p>\n<ol>\n<li>url: page表示访问的是page页面</li>\n<li>data: 表示提交的参数</li>\n<li>success: function表示服务器成功返回后对应的响应参数</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">$(function()&#123;</span><br><span class=\"line\">   $(&quot;#name&quot;).keyup(function()&#123;</span><br><span class=\"line\">     var page = &quot;/study/checkName.jsp&quot;;</span><br><span class=\"line\">     var value = $(this).val();</span><br><span class=\"line\">        $.ajax(&#123;</span><br><span class=\"line\">            url: page,</span><br><span class=\"line\">            data:&#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">            success: function(result)&#123;</span><br><span class=\"line\">              $(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\">&#125;);\t</span><br><span class=\"line\">&lt;script&gt;</span><br></pre></td></tr></table></figure>\n<p>以上看起来比较复杂, 其逻辑结构为:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$( function()&#123; $(&quot;#name&quot;).keyup(function()&#123;&#125;);  &#125;  );</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"使用get方式提交ajax\"><a href=\"#使用get方式提交ajax\" class=\"headerlink\" title=\"使用get方式提交ajax\"></a>使用get方式提交ajax</h1><p>$.get 是$.ajax的简化版, 专门用于发送get请求<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.get(</span><br><span class=\"line\">\tpage,</span><br><span class=\"line\">\t&#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">\tfunction(result)&#123;</span><br><span class=\"line\">\t\t$(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></p>\n<p>完整代码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"> $(function()&#123;</span><br><span class=\"line\">  $(&quot;#name&quot;).keyup(function()&#123;</span><br><span class=\"line\">   var page=&quot;/study/checkName.jsp&quot;;</span><br><span class=\"line\">   var value= $(this).val;</span><br><span class=\"line\">\t$.get(</span><br><span class=\"line\">\t\tpage,</span><br><span class=\"line\">\t\t&#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">\t\tfunction(result)&#123;</span><br><span class=\"line\">\t\t\t$(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t);   </span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"使用post方式提交ajax\"><a href=\"#使用post方式提交ajax\" class=\"headerlink\" title=\"使用post方式提交ajax\"></a>使用post方式提交ajax</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.post(</span><br><span class=\"line\">\tpage,</span><br><span class=\"line\">\t&#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">\tfunction(result)&#123;</span><br><span class=\"line\">\t\t$(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h1 id=\"get和post的区别\"><a href=\"#get和post的区别\" class=\"headerlink\" title=\"get和post的区别\"></a>get和post的区别</h1><ol>\n<li>get是form默认提交方式, 通过超链访问某个地址,是get.不可以提交二进制数据.如上传文件.</li>\n<li>post必须通过method=”post”显示指定, 提交数据不会再浏览器显示, 可以提交二进制数据.</li>\n</ol>\n<h1 id=\"最简单的调用ajax的方式\"><a href=\"#最简单的调用ajax的方式\" class=\"headerlink\" title=\"最简单的调用ajax的方式\"></a>最简单的调用ajax的方式</h1><p>load比起$.get $.post就简单太多了.<br>$(“#id”).load(page,[data])</p>\n<script>\n    $(function(){ \n        $(\"#name\").keyup(\n            function(){\n                var value = $(this).val();\n                var page=\"/study/checkName.jsp?name=\"+value;\n                $(\"#checkResult\").load(page);\n            });\n    }  );\n\n</script>\n\n<h1 id=\"格式化form下的输入数据\"><a href=\"#格式化form下的输入数据\" class=\"headerlink\" title=\"格式化form下的输入数据\"></a>格式化form下的输入数据</h1><p>form下输入内容比较多的时候, 一个一个取比较麻烦, 就可以用serialize()把输入数据格式化成字符串;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;div id=&quot;checkResult&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">&lt;div id=&quot;data&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">&lt;a href=&quot;http://how2j.cn/study/checkName.jsp&quot;&gt;http://how2j.cn/study/checkName.jsp&lt;/a&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;form id=&quot;form&quot;&gt;   </span><br><span class=\"line\">输入账号 :&lt;input id=&quot;name&quot; type=&quot;text&quot; name=&quot;name&quot;&gt; &lt;br&gt;</span><br><span class=\"line\">输入年龄 :&lt;input id=&quot;age&quot; type=&quot;text&quot; name=&quot;age&quot;&gt; &lt;br&gt;</span><br><span class=\"line\">输入手机号码 :&lt;input id=&quot;mobile&quot; type=&quot;text&quot; name=&quot;mobile&quot;&gt; &lt;br&gt;</span><br><span class=\"line\">     </span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">$(function()&#123;</span><br><span class=\"line\">   $(&quot;input&quot;).keyup(function()&#123;</span><br><span class=\"line\">      var data = $(&quot;#form&quot;).serialize();</span><br><span class=\"line\">      var url = &quot;http://how2j.cn/study/checkName.jsp&quot;;</span><br><span class=\"line\">      var link = url+&quot;?&quot;+ data;</span><br><span class=\"line\">      $(&quot;a&quot;).html(link);</span><br><span class=\"line\">      $(&quot;a&quot;).attr(&quot;href&quot;,link);</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"获取一个对象\"><a href=\"#获取一个对象\" class=\"headerlink\" title=\"获取一个对象\"></a>获取一个对象</h1><ol>\n<li>创建一个Hero对象</li>\n<li>创建一个JSONObject 对象</li>\n<li>把Hero对象转换为JSONObject 对象，并放在上一个JSONObject对象上，key是”hero”</li>\n<li>设置编码方式为UTF-8</li>\n<li><p>通过response返回 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hero hero = new Hero();</span><br><span class=\"line\">hero.setName(&quot;盖伦&quot;);</span><br><span class=\"line\">hero.setHp(353);</span><br><span class=\"line\"> </span><br><span class=\"line\">JSONObject json= new JSONObject();</span><br><span class=\"line\">   </span><br><span class=\"line\">json.put(&quot;hero&quot;, JSONObject.fromObject(hero));</span><br><span class=\"line\">response.setContentType(&quot;text/html;charset=utf-8&quot;); </span><br><span class=\"line\">response.getWriter().print(json);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>点击按钮之后，通过ajax访问getOneServlet</p>\n</li>\n<li>获取都数据后，通过JSON.parse 转换为json对象</li>\n<li>获取name和hp</li>\n<li>显示在div里 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt; </span><br><span class=\"line\">$(&apos;#sender&apos;).click(function()&#123; </span><br><span class=\"line\">    var url=&quot;getOneServlet&quot;; </span><br><span class=\"line\">    $.post(</span><br><span class=\"line\">            url,</span><br><span class=\"line\">            function(data) &#123;</span><br><span class=\"line\">                 var json=JSON.parse(data); </span><br><span class=\"line\">                 var name =json.hero.name; </span><br><span class=\"line\">                 var hp = json.hero.hp;</span><br><span class=\"line\">                 $(&quot;#messageDiv&quot;).html(&quot;英雄名称：&quot;+name + &quot;&lt;br&gt;英雄血量:&quot; +hp );</span><br><span class=\"line\">                  </span><br><span class=\"line\">     &#125;);  </span><br><span class=\"line\">&#125;); </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"获取多个对象\"><a href=\"#获取多个对象\" class=\"headerlink\" title=\"获取多个对象\"></a>获取多个对象</h1><ol>\n<li>准备一个集合</li>\n<li>向集合中放入 10个Hero对象</li>\n<li>通过JSONSerializer.toJSON(heros)把集合转换为JSON字符串</li>\n<li><p>返回给浏览器 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Hero&gt; heros = new ArrayList&lt;&gt;();</span><br><span class=\"line\">        for (int i = 0; i &lt; 10; i++) &#123;</span><br><span class=\"line\">            Hero hero = new Hero();</span><br><span class=\"line\">            hero.setName(&quot;name&quot;+i);</span><br><span class=\"line\">            hero.setHp(500+i);</span><br><span class=\"line\">            heros.add(hero);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">         </span><br><span class=\"line\">        String result =JSONSerializer.toJSON(heros).toString();</span><br><span class=\"line\"> </span><br><span class=\"line\">        response.setContentType(&quot;text/html;charset=utf-8&quot;); </span><br><span class=\"line\">        response.getWriter().print(result);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>通过ajax访问getManyServlet</p>\n</li>\n<li>把返回的数据，通过 $.parseJSON 转换为json数组</li>\n<li>遍历数组，显示在div中 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt; </span><br><span class=\"line\">$(&apos;#sender&apos;).click(function()&#123; </span><br><span class=\"line\">    var url=&quot;getManyServlet&quot;; </span><br><span class=\"line\">    $.post(</span><br><span class=\"line\">            url,</span><br><span class=\"line\">            function(data) &#123;</span><br><span class=\"line\">                var heros = $.parseJSON(data);</span><br><span class=\"line\">                 for(i in heros)&#123;</span><br><span class=\"line\">                     var old = $(&quot;#messageDiv&quot;).html();</span><br><span class=\"line\">                     var hero = heros[i];</span><br><span class=\"line\">                     $(&quot;#messageDiv&quot;).html(old + &quot;&lt;br&gt;&quot;+hero.name+&quot;   -----   &quot;+hero.hp); </span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">     &#125;);  </span><br><span class=\"line\">&#125;); </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"提交ajax请求\"><a href=\"#提交ajax请求\" class=\"headerlink\" title=\"提交ajax请求\"></a>提交ajax请求</h1><p>参考使用ajax通过无刷新验证账号是否存在, 服务端使用jsp进行验证.当用户输入abc的时候提示已经存在<br>完整的$.ajax参数 比较复杂, 这里使用常见的调用方式<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax(</span><br><span class=\"line\">url: page,</span><br><span class=\"line\">data: &#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">success: function(result)&#123;</span><br><span class=\"line\">\t$(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></p>\n<ol>\n<li>url: page表示访问的是page页面</li>\n<li>data: 表示提交的参数</li>\n<li>success: function表示服务器成功返回后对应的响应参数</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">$(function()&#123;</span><br><span class=\"line\">   $(&quot;#name&quot;).keyup(function()&#123;</span><br><span class=\"line\">     var page = &quot;/study/checkName.jsp&quot;;</span><br><span class=\"line\">     var value = $(this).val();</span><br><span class=\"line\">        $.ajax(&#123;</span><br><span class=\"line\">            url: page,</span><br><span class=\"line\">            data:&#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">            success: function(result)&#123;</span><br><span class=\"line\">              $(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\">&#125;);\t</span><br><span class=\"line\">&lt;script&gt;</span><br></pre></td></tr></table></figure>\n<p>以上看起来比较复杂, 其逻辑结构为:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$( function()&#123; $(&quot;#name&quot;).keyup(function()&#123;&#125;);  &#125;  );</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"使用get方式提交ajax\"><a href=\"#使用get方式提交ajax\" class=\"headerlink\" title=\"使用get方式提交ajax\"></a>使用get方式提交ajax</h1><p>$.get 是$.ajax的简化版, 专门用于发送get请求<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.get(</span><br><span class=\"line\">\tpage,</span><br><span class=\"line\">\t&#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">\tfunction(result)&#123;</span><br><span class=\"line\">\t\t$(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></p>\n<p>完整代码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"> $(function()&#123;</span><br><span class=\"line\">  $(&quot;#name&quot;).keyup(function()&#123;</span><br><span class=\"line\">   var page=&quot;/study/checkName.jsp&quot;;</span><br><span class=\"line\">   var value= $(this).val;</span><br><span class=\"line\">\t$.get(</span><br><span class=\"line\">\t\tpage,</span><br><span class=\"line\">\t\t&#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">\t\tfunction(result)&#123;</span><br><span class=\"line\">\t\t\t$(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t);   </span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"使用post方式提交ajax\"><a href=\"#使用post方式提交ajax\" class=\"headerlink\" title=\"使用post方式提交ajax\"></a>使用post方式提交ajax</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.post(</span><br><span class=\"line\">\tpage,</span><br><span class=\"line\">\t&#123;&quot;name&quot;:value&#125;,</span><br><span class=\"line\">\tfunction(result)&#123;</span><br><span class=\"line\">\t\t$(&quot;#checkResult&quot;).html(result);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h1 id=\"get和post的区别\"><a href=\"#get和post的区别\" class=\"headerlink\" title=\"get和post的区别\"></a>get和post的区别</h1><ol>\n<li>get是form默认提交方式, 通过超链访问某个地址,是get.不可以提交二进制数据.如上传文件.</li>\n<li>post必须通过method=”post”显示指定, 提交数据不会再浏览器显示, 可以提交二进制数据.</li>\n</ol>\n<h1 id=\"最简单的调用ajax的方式\"><a href=\"#最简单的调用ajax的方式\" class=\"headerlink\" title=\"最简单的调用ajax的方式\"></a>最简单的调用ajax的方式</h1><p>load比起$.get $.post就简单太多了.<br>$(“#id”).load(page,[data])</p>\n<script>\n    $(function(){ \n        $(\"#name\").keyup(\n            function(){\n                var value = $(this).val();\n                var page=\"/study/checkName.jsp?name=\"+value;\n                $(\"#checkResult\").load(page);\n            });\n    }  );\n\n</script>\n\n<h1 id=\"格式化form下的输入数据\"><a href=\"#格式化form下的输入数据\" class=\"headerlink\" title=\"格式化form下的输入数据\"></a>格式化form下的输入数据</h1><p>form下输入内容比较多的时候, 一个一个取比较麻烦, 就可以用serialize()把输入数据格式化成字符串;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;http://how2j.cn/study/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;div id=&quot;checkResult&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">&lt;div id=&quot;data&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">&lt;a href=&quot;http://how2j.cn/study/checkName.jsp&quot;&gt;http://how2j.cn/study/checkName.jsp&lt;/a&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;form id=&quot;form&quot;&gt;   </span><br><span class=\"line\">输入账号 :&lt;input id=&quot;name&quot; type=&quot;text&quot; name=&quot;name&quot;&gt; &lt;br&gt;</span><br><span class=\"line\">输入年龄 :&lt;input id=&quot;age&quot; type=&quot;text&quot; name=&quot;age&quot;&gt; &lt;br&gt;</span><br><span class=\"line\">输入手机号码 :&lt;input id=&quot;mobile&quot; type=&quot;text&quot; name=&quot;mobile&quot;&gt; &lt;br&gt;</span><br><span class=\"line\">     </span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">$(function()&#123;</span><br><span class=\"line\">   $(&quot;input&quot;).keyup(function()&#123;</span><br><span class=\"line\">      var data = $(&quot;#form&quot;).serialize();</span><br><span class=\"line\">      var url = &quot;http://how2j.cn/study/checkName.jsp&quot;;</span><br><span class=\"line\">      var link = url+&quot;?&quot;+ data;</span><br><span class=\"line\">      $(&quot;a&quot;).html(link);</span><br><span class=\"line\">      $(&quot;a&quot;).attr(&quot;href&quot;,link);</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"获取一个对象\"><a href=\"#获取一个对象\" class=\"headerlink\" title=\"获取一个对象\"></a>获取一个对象</h1><ol>\n<li>创建一个Hero对象</li>\n<li>创建一个JSONObject 对象</li>\n<li>把Hero对象转换为JSONObject 对象，并放在上一个JSONObject对象上，key是”hero”</li>\n<li>设置编码方式为UTF-8</li>\n<li><p>通过response返回 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hero hero = new Hero();</span><br><span class=\"line\">hero.setName(&quot;盖伦&quot;);</span><br><span class=\"line\">hero.setHp(353);</span><br><span class=\"line\"> </span><br><span class=\"line\">JSONObject json= new JSONObject();</span><br><span class=\"line\">   </span><br><span class=\"line\">json.put(&quot;hero&quot;, JSONObject.fromObject(hero));</span><br><span class=\"line\">response.setContentType(&quot;text/html;charset=utf-8&quot;); </span><br><span class=\"line\">response.getWriter().print(json);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>点击按钮之后，通过ajax访问getOneServlet</p>\n</li>\n<li>获取都数据后，通过JSON.parse 转换为json对象</li>\n<li>获取name和hp</li>\n<li>显示在div里 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt; </span><br><span class=\"line\">$(&apos;#sender&apos;).click(function()&#123; </span><br><span class=\"line\">    var url=&quot;getOneServlet&quot;; </span><br><span class=\"line\">    $.post(</span><br><span class=\"line\">            url,</span><br><span class=\"line\">            function(data) &#123;</span><br><span class=\"line\">                 var json=JSON.parse(data); </span><br><span class=\"line\">                 var name =json.hero.name; </span><br><span class=\"line\">                 var hp = json.hero.hp;</span><br><span class=\"line\">                 $(&quot;#messageDiv&quot;).html(&quot;英雄名称：&quot;+name + &quot;&lt;br&gt;英雄血量:&quot; +hp );</span><br><span class=\"line\">                  </span><br><span class=\"line\">     &#125;);  </span><br><span class=\"line\">&#125;); </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"获取多个对象\"><a href=\"#获取多个对象\" class=\"headerlink\" title=\"获取多个对象\"></a>获取多个对象</h1><ol>\n<li>准备一个集合</li>\n<li>向集合中放入 10个Hero对象</li>\n<li>通过JSONSerializer.toJSON(heros)把集合转换为JSON字符串</li>\n<li><p>返回给浏览器 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Hero&gt; heros = new ArrayList&lt;&gt;();</span><br><span class=\"line\">        for (int i = 0; i &lt; 10; i++) &#123;</span><br><span class=\"line\">            Hero hero = new Hero();</span><br><span class=\"line\">            hero.setName(&quot;name&quot;+i);</span><br><span class=\"line\">            hero.setHp(500+i);</span><br><span class=\"line\">            heros.add(hero);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">         </span><br><span class=\"line\">        String result =JSONSerializer.toJSON(heros).toString();</span><br><span class=\"line\"> </span><br><span class=\"line\">        response.setContentType(&quot;text/html;charset=utf-8&quot;); </span><br><span class=\"line\">        response.getWriter().print(result);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>通过ajax访问getManyServlet</p>\n</li>\n<li>把返回的数据，通过 $.parseJSON 转换为json数组</li>\n<li>遍历数组，显示在div中 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt; </span><br><span class=\"line\">$(&apos;#sender&apos;).click(function()&#123; </span><br><span class=\"line\">    var url=&quot;getManyServlet&quot;; </span><br><span class=\"line\">    $.post(</span><br><span class=\"line\">            url,</span><br><span class=\"line\">            function(data) &#123;</span><br><span class=\"line\">                var heros = $.parseJSON(data);</span><br><span class=\"line\">                 for(i in heros)&#123;</span><br><span class=\"line\">                     var old = $(&quot;#messageDiv&quot;).html();</span><br><span class=\"line\">                     var hero = heros[i];</span><br><span class=\"line\">                     $(&quot;#messageDiv&quot;).html(old + &quot;&lt;br&gt;&quot;+hero.name+&quot;   -----   &quot;+hero.hp); </span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">     &#125;);  </span><br><span class=\"line\">&#125;); </span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n"},{"title":"cmd打开文件","date":"2018-04-06T08:32:51.000Z","_content":"# 很简单 start .","source":"_posts/cmd打开文件.md","raw":"---\ntitle: cmd打开文件\ndate: 2018-04-06 16:32:51\ntags:\n---\n# 很简单 start .","slug":"cmd打开文件","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdt0040dcyufudeb2hq","content":"<h1 id=\"很简单-start\"><a href=\"#很简单-start\" class=\"headerlink\" title=\"很简单 start .\"></a>很简单 start .</h1>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"很简单-start\"><a href=\"#很简单-start\" class=\"headerlink\" title=\"很简单 start .\"></a>很简单 start .</h1>"},{"title":"getResourceAsStream学习","date":"2018-04-23T03:06:57.000Z","_content":"# getResourceAsStream到底是个啥东西?\n![图片][pic]\n右键设置文件夹为properties,然后就可以\n```\nInputStream is = TestTmall.class.getResourceAsStream(\"/jdbc.properties\");\n```\n结论:resources可以很方便的读取配置文件.\n\n\n\n[pic]:data:image/png;base64,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","source":"_posts/getResourceAsStream学习.md","raw":"---\ntitle: getResourceAsStream学习\ndate: 2018-04-23 11:06:57\ntags:\n---\n# getResourceAsStream到底是个啥东西?\n![图片][pic]\n右键设置文件夹为properties,然后就可以\n```\nInputStream is = TestTmall.class.getResourceAsStream(\"/jdbc.properties\");\n```\n结论:resources可以很方便的读取配置文件.\n\n\n\n[pic]:data:image/png;base64,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","slug":"getResourceAsStream学习","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdu0041dcyu9sb0g4sp","content":"<h1 id=\"getResourceAsStream到底是个啥东西\"><a href=\"#getResourceAsStream到底是个啥东西\" class=\"headerlink\" title=\"getResourceAsStream到底是个啥东西?\"></a>getResourceAsStream到底是个啥东西?</h1><p><img src=\"data:image/png;base64,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\" alt=\"图片\"><br>右键设置文件夹为properties,然后就可以<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InputStream is = TestTmall.class.getResourceAsStream(&quot;/jdbc.properties&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>结论:resources可以很方便的读取配置文件.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"getResourceAsStream到底是个啥东西\"><a href=\"#getResourceAsStream到底是个啥东西\" class=\"headerlink\" title=\"getResourceAsStream到底是个啥东西?\"></a>getResourceAsStream到底是个啥东西?</h1><p><img src=\"data:image/png;base64,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\" alt=\"图片\"><br>右键设置文件夹为properties,然后就可以<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InputStream is = TestTmall.class.getResourceAsStream(&quot;/jdbc.properties&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>结论:resources可以很方便的读取配置文件.</p>\n"},{"title":"init-param 与 context-param","date":"2018-05-08T07:39:31.000Z","_content":"# 一些碎话\n又好多天没写了, 5月1放假,5.4放假, 都没有怎么学习, 想到记写笔记就有些怠倦, 但还是要记录一下.\n\n对于ssm的配置,我一直稀里糊涂的, 这些跟着抄对了,下次就指不定那里出错了,所以还是要一点点把每个配置搞清楚.\n# <context-param>配置是一组键值对\n```\n<context-param>\n\t<param-name>home-page</param-name>\n\t<param-value>home.jsp</param-value>\n</context-param>\n```\nparam-name是键,param-value是值, 想到与参数值.\n# 当服务器启动时，服务器会读取web.xml配置\n当服务器启动时，服务器会读取web.xml配置，当读到<listener></listener>和<context-param></context-param>这两个节点的时候，容器会将这两个节点set到ServletContext(上下文对象)中，这样我们在程序中就能通过这个上下文对象去取得我们这个配置值。\n具体代码实现:\n```\nString sHomePage = getServletContext().getInitParameter(\"home-page\");\n```\n通过上面这句代码，我们就可以取得web.xml中配置的home.jsp这个值。\n说白了，他就相当于设定了一个固定值，我们可以在程序中去使用它。就这么个作用。\n注：我看到很多文章都是把它和监听一起说的，写说这个配置在监听中怎么用。我要说的他并不是为了监听去设定的。程序中的所有servlet可以利用这个值，我在这里强调一下这一点，希望大家不要被误导\n# <context-param>配置和<init-param>的区别：\n```\n<servlet>\n        <servlet-name>ServletInit</servlet-name>\n        <servlet-class>com.sunrain.datalk.wserver.util.servlet.ServletInit</servlet-class>\n        <init-param>\n                  <param-name>home-page</param-name>\n                 <param-value>home.jsp</param-value>\n        </init-param>\n  </servlet>\n```\n所以他们的区别就有点像全局变量和和局部变量的<context-param>是针对整个项目，所有的servlet都可以取得使用，<init-param>只能是在那个servlet下面\n\n\n\n\n\n","source":"_posts/init-param 与 context-param.md","raw":"---\ntitle: init-param 与 context-param\ndate: 2018-05-08 15:39:31\ntags:\n---\n# 一些碎话\n又好多天没写了, 5月1放假,5.4放假, 都没有怎么学习, 想到记写笔记就有些怠倦, 但还是要记录一下.\n\n对于ssm的配置,我一直稀里糊涂的, 这些跟着抄对了,下次就指不定那里出错了,所以还是要一点点把每个配置搞清楚.\n# <context-param>配置是一组键值对\n```\n<context-param>\n\t<param-name>home-page</param-name>\n\t<param-value>home.jsp</param-value>\n</context-param>\n```\nparam-name是键,param-value是值, 想到与参数值.\n# 当服务器启动时，服务器会读取web.xml配置\n当服务器启动时，服务器会读取web.xml配置，当读到<listener></listener>和<context-param></context-param>这两个节点的时候，容器会将这两个节点set到ServletContext(上下文对象)中，这样我们在程序中就能通过这个上下文对象去取得我们这个配置值。\n具体代码实现:\n```\nString sHomePage = getServletContext().getInitParameter(\"home-page\");\n```\n通过上面这句代码，我们就可以取得web.xml中配置的home.jsp这个值。\n说白了，他就相当于设定了一个固定值，我们可以在程序中去使用它。就这么个作用。\n注：我看到很多文章都是把它和监听一起说的，写说这个配置在监听中怎么用。我要说的他并不是为了监听去设定的。程序中的所有servlet可以利用这个值，我在这里强调一下这一点，希望大家不要被误导\n# <context-param>配置和<init-param>的区别：\n```\n<servlet>\n        <servlet-name>ServletInit</servlet-name>\n        <servlet-class>com.sunrain.datalk.wserver.util.servlet.ServletInit</servlet-class>\n        <init-param>\n                  <param-name>home-page</param-name>\n                 <param-value>home.jsp</param-value>\n        </init-param>\n  </servlet>\n```\n所以他们的区别就有点像全局变量和和局部变量的<context-param>是针对整个项目，所有的servlet都可以取得使用，<init-param>只能是在那个servlet下面\n\n\n\n\n\n","slug":"init-param-与-context-param","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdv0042dcyus2vkil0p","content":"<h1 id=\"一些碎话\"><a href=\"#一些碎话\" class=\"headerlink\" title=\"一些碎话\"></a>一些碎话</h1><p>又好多天没写了, 5月1放假,5.4放假, 都没有怎么学习, 想到记写笔记就有些怠倦, 但还是要记录一下.</p>\n<p>对于ssm的配置,我一直稀里糊涂的, 这些跟着抄对了,下次就指不定那里出错了,所以还是要一点点把每个配置搞清楚.</p>\n<h1 id=\"配置是一组键值对\"><a href=\"#配置是一组键值对\" class=\"headerlink\" title=\"配置是一组键值对\"></a><context-param>配置是一组键值对</context-param></h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;context-param&gt;</span><br><span class=\"line\">\t&lt;param-name&gt;home-page&lt;/param-name&gt;</span><br><span class=\"line\">\t&lt;param-value&gt;home.jsp&lt;/param-value&gt;</span><br><span class=\"line\">&lt;/context-param&gt;</span><br></pre></td></tr></table></figure>\n<p>param-name是键,param-value是值, 想到与参数值.</p>\n<h1 id=\"当服务器启动时，服务器会读取web-xml配置\"><a href=\"#当服务器启动时，服务器会读取web-xml配置\" class=\"headerlink\" title=\"当服务器启动时，服务器会读取web.xml配置\"></a>当服务器启动时，服务器会读取web.xml配置</h1><p>当服务器启动时，服务器会读取web.xml配置，当读到<listener></listener>和<context-param></context-param>这两个节点的时候，容器会将这两个节点set到ServletContext(上下文对象)中，这样我们在程序中就能通过这个上下文对象去取得我们这个配置值。<br>具体代码实现:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String sHomePage = getServletContext().getInitParameter(&quot;home-page&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>通过上面这句代码，我们就可以取得web.xml中配置的home.jsp这个值。<br>说白了，他就相当于设定了一个固定值，我们可以在程序中去使用它。就这么个作用。<br>注：我看到很多文章都是把它和监听一起说的，写说这个配置在监听中怎么用。我要说的他并不是为了监听去设定的。程序中的所有servlet可以利用这个值，我在这里强调一下这一点，希望大家不要被误导</p>\n<h1 id=\"配置和的区别：\"><a href=\"#配置和的区别：\" class=\"headerlink\" title=\"配置和的区别：\"></a><context-param>配置和<init-param>的区别：</init-param></context-param></h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;servlet&gt;</span><br><span class=\"line\">        &lt;servlet-name&gt;ServletInit&lt;/servlet-name&gt;</span><br><span class=\"line\">        &lt;servlet-class&gt;com.sunrain.datalk.wserver.util.servlet.ServletInit&lt;/servlet-class&gt;</span><br><span class=\"line\">        &lt;init-param&gt;</span><br><span class=\"line\">                  &lt;param-name&gt;home-page&lt;/param-name&gt;</span><br><span class=\"line\">                 &lt;param-value&gt;home.jsp&lt;/param-value&gt;</span><br><span class=\"line\">        &lt;/init-param&gt;</span><br><span class=\"line\">  &lt;/servlet&gt;</span><br></pre></td></tr></table></figure>\n<p>所以他们的区别就有点像全局变量和和局部变量的<context-param>是针对整个项目，所有的servlet都可以取得使用，<init-param>只能是在那个servlet下面</init-param></context-param></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"一些碎话\"><a href=\"#一些碎话\" class=\"headerlink\" title=\"一些碎话\"></a>一些碎话</h1><p>又好多天没写了, 5月1放假,5.4放假, 都没有怎么学习, 想到记写笔记就有些怠倦, 但还是要记录一下.</p>\n<p>对于ssm的配置,我一直稀里糊涂的, 这些跟着抄对了,下次就指不定那里出错了,所以还是要一点点把每个配置搞清楚.</p>\n<h1 id=\"配置是一组键值对\"><a href=\"#配置是一组键值对\" class=\"headerlink\" title=\"配置是一组键值对\"></a><context-param>配置是一组键值对</context-param></h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;context-param&gt;</span><br><span class=\"line\">\t&lt;param-name&gt;home-page&lt;/param-name&gt;</span><br><span class=\"line\">\t&lt;param-value&gt;home.jsp&lt;/param-value&gt;</span><br><span class=\"line\">&lt;/context-param&gt;</span><br></pre></td></tr></table></figure>\n<p>param-name是键,param-value是值, 想到与参数值.</p>\n<h1 id=\"当服务器启动时，服务器会读取web-xml配置\"><a href=\"#当服务器启动时，服务器会读取web-xml配置\" class=\"headerlink\" title=\"当服务器启动时，服务器会读取web.xml配置\"></a>当服务器启动时，服务器会读取web.xml配置</h1><p>当服务器启动时，服务器会读取web.xml配置，当读到<listener></listener>和<context-param></context-param>这两个节点的时候，容器会将这两个节点set到ServletContext(上下文对象)中，这样我们在程序中就能通过这个上下文对象去取得我们这个配置值。<br>具体代码实现:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String sHomePage = getServletContext().getInitParameter(&quot;home-page&quot;);</span><br></pre></td></tr></table></figure></p>\n<p>通过上面这句代码，我们就可以取得web.xml中配置的home.jsp这个值。<br>说白了，他就相当于设定了一个固定值，我们可以在程序中去使用它。就这么个作用。<br>注：我看到很多文章都是把它和监听一起说的，写说这个配置在监听中怎么用。我要说的他并不是为了监听去设定的。程序中的所有servlet可以利用这个值，我在这里强调一下这一点，希望大家不要被误导</p>\n<h1 id=\"配置和的区别：\"><a href=\"#配置和的区别：\" class=\"headerlink\" title=\"配置和的区别：\"></a><context-param>配置和<init-param>的区别：</init-param></context-param></h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;servlet&gt;</span><br><span class=\"line\">        &lt;servlet-name&gt;ServletInit&lt;/servlet-name&gt;</span><br><span class=\"line\">        &lt;servlet-class&gt;com.sunrain.datalk.wserver.util.servlet.ServletInit&lt;/servlet-class&gt;</span><br><span class=\"line\">        &lt;init-param&gt;</span><br><span class=\"line\">                  &lt;param-name&gt;home-page&lt;/param-name&gt;</span><br><span class=\"line\">                 &lt;param-value&gt;home.jsp&lt;/param-value&gt;</span><br><span class=\"line\">        &lt;/init-param&gt;</span><br><span class=\"line\">  &lt;/servlet&gt;</span><br></pre></td></tr></table></figure>\n<p>所以他们的区别就有点像全局变量和和局部变量的<context-param>是针对整个项目，所有的servlet都可以取得使用，<init-param>只能是在那个servlet下面</init-param></context-param></p>\n"},{"title":"javaMail学习记录","date":"2018-04-16T01:27:38.000Z","_content":"# 前言\n这段时间需要实时给自己发送消息,思来想去最方便快捷的还是邮件. 所以搜了很多教程, 填了很多坑. 在搞完这些之际,特回头来总结一下.\n其中, 关键的步骤为:\n```\n Properties prop = new Properties;\n Session session = javax.mail.Session.getInstance(prop);\n Transport ts = session.getTransport();\n Message msg = createSimpleMail(session);\n ts.sendMessage(msg,msg.getAllRecipients);\n```\n\n# 设置邮件properties 和session\n```\npublic void sendMail(){\n\t//new 一个properties\n\tProperties prop = new Properties();\n\tprop.put(\"mail.host\",\"smtp.qq.com\");\n\tprop.put(\"mail.transport.protocol\",\"smtp\");\n\tprop.put(\"mail.smtp.auth\",true);\n\t//此行缺失会导致qq邮箱无法发送,但163可以发送\n\tprop.put(\"mail.smtp.starttls.enable\",\"true\");\n\tSecurity.addProvider(new com.sun.net.ssl.internal.ssl.Provider);\n\t\n\t//获取session\n\tSession session = javax.mail.Session.getInstance(prop);\n\tsession.setDebug(true);\n\t\n\t//获取transport\n\tTransport ts = session.getTransport();\n\tts.connect(user,pass);\n\t\n\t//获取Message\n\tMessage msg = createSimpleMail(session);\n\t\n\t//发送\n\tts.sendMessage(msg,msg.getAllRecipients);\n\t\n\t\n\t\n}\n\n```\n\n\n\n# MimeMessage :构建邮件体\n```\npublic static MimeMessage createSimpleMail(Session session) throw AddressException,MessagingException{\n\tMimeMessage mm = new MimeMessage(session);\n\t//设置发件人\n\tmm.setFrom(new InternetAddress(\"from@qq.com\"));\n\t//设置收件人\n\tmm.setRecipient(Message.RecipientType.TO,new InternetAddress(\"to@qq.com\"));\n\t//设置抄送人\n\tmm.setRecipient(Message.RecipientType.CC, new InternetAddress(\"用户名@163.com\"));\n\t//设置题目和内容\n\tmm.setSubject(mail_title);\n    mm.setContent(mail_content, \"text/html;charset=gbk\");\n\t\n\treturn mm;\n```","source":"_posts/javaMail学习记录.md","raw":"---\ntitle: javaMail学习记录\ndate: 2018-04-16 09:27:38\ntags:\n---\n# 前言\n这段时间需要实时给自己发送消息,思来想去最方便快捷的还是邮件. 所以搜了很多教程, 填了很多坑. 在搞完这些之际,特回头来总结一下.\n其中, 关键的步骤为:\n```\n Properties prop = new Properties;\n Session session = javax.mail.Session.getInstance(prop);\n Transport ts = session.getTransport();\n Message msg = createSimpleMail(session);\n ts.sendMessage(msg,msg.getAllRecipients);\n```\n\n# 设置邮件properties 和session\n```\npublic void sendMail(){\n\t//new 一个properties\n\tProperties prop = new Properties();\n\tprop.put(\"mail.host\",\"smtp.qq.com\");\n\tprop.put(\"mail.transport.protocol\",\"smtp\");\n\tprop.put(\"mail.smtp.auth\",true);\n\t//此行缺失会导致qq邮箱无法发送,但163可以发送\n\tprop.put(\"mail.smtp.starttls.enable\",\"true\");\n\tSecurity.addProvider(new com.sun.net.ssl.internal.ssl.Provider);\n\t\n\t//获取session\n\tSession session = javax.mail.Session.getInstance(prop);\n\tsession.setDebug(true);\n\t\n\t//获取transport\n\tTransport ts = session.getTransport();\n\tts.connect(user,pass);\n\t\n\t//获取Message\n\tMessage msg = createSimpleMail(session);\n\t\n\t//发送\n\tts.sendMessage(msg,msg.getAllRecipients);\n\t\n\t\n\t\n}\n\n```\n\n\n\n# MimeMessage :构建邮件体\n```\npublic static MimeMessage createSimpleMail(Session session) throw AddressException,MessagingException{\n\tMimeMessage mm = new MimeMessage(session);\n\t//设置发件人\n\tmm.setFrom(new InternetAddress(\"from@qq.com\"));\n\t//设置收件人\n\tmm.setRecipient(Message.RecipientType.TO,new InternetAddress(\"to@qq.com\"));\n\t//设置抄送人\n\tmm.setRecipient(Message.RecipientType.CC, new InternetAddress(\"用户名@163.com\"));\n\t//设置题目和内容\n\tmm.setSubject(mail_title);\n    mm.setContent(mail_content, \"text/html;charset=gbk\");\n\t\n\treturn mm;\n```","slug":"javaMail学习记录","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdw0043dcyuk0spsmmm","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>这段时间需要实时给自己发送消息,思来想去最方便快捷的还是邮件. 所以搜了很多教程, 填了很多坑. 在搞完这些之际,特回头来总结一下.<br>其中, 关键的步骤为:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Properties prop = new Properties;</span><br><span class=\"line\">Session session = javax.mail.Session.getInstance(prop);</span><br><span class=\"line\">Transport ts = session.getTransport();</span><br><span class=\"line\">Message msg = createSimpleMail(session);</span><br><span class=\"line\">ts.sendMessage(msg,msg.getAllRecipients);</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"设置邮件properties-和session\"><a href=\"#设置邮件properties-和session\" class=\"headerlink\" title=\"设置邮件properties 和session\"></a>设置邮件properties 和session</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void sendMail()&#123;</span><br><span class=\"line\">\t//new 一个properties</span><br><span class=\"line\">\tProperties prop = new Properties();</span><br><span class=\"line\">\tprop.put(&quot;mail.host&quot;,&quot;smtp.qq.com&quot;);</span><br><span class=\"line\">\tprop.put(&quot;mail.transport.protocol&quot;,&quot;smtp&quot;);</span><br><span class=\"line\">\tprop.put(&quot;mail.smtp.auth&quot;,true);</span><br><span class=\"line\">\t//此行缺失会导致qq邮箱无法发送,但163可以发送</span><br><span class=\"line\">\tprop.put(&quot;mail.smtp.starttls.enable&quot;,&quot;true&quot;);</span><br><span class=\"line\">\tSecurity.addProvider(new com.sun.net.ssl.internal.ssl.Provider);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t//获取session</span><br><span class=\"line\">\tSession session = javax.mail.Session.getInstance(prop);</span><br><span class=\"line\">\tsession.setDebug(true);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t//获取transport</span><br><span class=\"line\">\tTransport ts = session.getTransport();</span><br><span class=\"line\">\tts.connect(user,pass);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t//获取Message</span><br><span class=\"line\">\tMessage msg = createSimpleMail(session);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t//发送</span><br><span class=\"line\">\tts.sendMessage(msg,msg.getAllRecipients);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"MimeMessage-构建邮件体\"><a href=\"#MimeMessage-构建邮件体\" class=\"headerlink\" title=\"MimeMessage :构建邮件体\"></a>MimeMessage :构建邮件体</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static MimeMessage createSimpleMail(Session session) throw AddressException,MessagingException&#123;</span><br><span class=\"line\">\tMimeMessage mm = new MimeMessage(session);</span><br><span class=\"line\">\t//设置发件人</span><br><span class=\"line\">\tmm.setFrom(new InternetAddress(&quot;from@qq.com&quot;));</span><br><span class=\"line\">\t//设置收件人</span><br><span class=\"line\">\tmm.setRecipient(Message.RecipientType.TO,new InternetAddress(&quot;to@qq.com&quot;));</span><br><span class=\"line\">\t//设置抄送人</span><br><span class=\"line\">\tmm.setRecipient(Message.RecipientType.CC, new InternetAddress(&quot;用户名@163.com&quot;));</span><br><span class=\"line\">\t//设置题目和内容</span><br><span class=\"line\">\tmm.setSubject(mail_title);</span><br><span class=\"line\">    mm.setContent(mail_content, &quot;text/html;charset=gbk&quot;);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\treturn mm;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>这段时间需要实时给自己发送消息,思来想去最方便快捷的还是邮件. 所以搜了很多教程, 填了很多坑. 在搞完这些之际,特回头来总结一下.<br>其中, 关键的步骤为:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Properties prop = new Properties;</span><br><span class=\"line\">Session session = javax.mail.Session.getInstance(prop);</span><br><span class=\"line\">Transport ts = session.getTransport();</span><br><span class=\"line\">Message msg = createSimpleMail(session);</span><br><span class=\"line\">ts.sendMessage(msg,msg.getAllRecipients);</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"设置邮件properties-和session\"><a href=\"#设置邮件properties-和session\" class=\"headerlink\" title=\"设置邮件properties 和session\"></a>设置邮件properties 和session</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void sendMail()&#123;</span><br><span class=\"line\">\t//new 一个properties</span><br><span class=\"line\">\tProperties prop = new Properties();</span><br><span class=\"line\">\tprop.put(&quot;mail.host&quot;,&quot;smtp.qq.com&quot;);</span><br><span class=\"line\">\tprop.put(&quot;mail.transport.protocol&quot;,&quot;smtp&quot;);</span><br><span class=\"line\">\tprop.put(&quot;mail.smtp.auth&quot;,true);</span><br><span class=\"line\">\t//此行缺失会导致qq邮箱无法发送,但163可以发送</span><br><span class=\"line\">\tprop.put(&quot;mail.smtp.starttls.enable&quot;,&quot;true&quot;);</span><br><span class=\"line\">\tSecurity.addProvider(new com.sun.net.ssl.internal.ssl.Provider);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t//获取session</span><br><span class=\"line\">\tSession session = javax.mail.Session.getInstance(prop);</span><br><span class=\"line\">\tsession.setDebug(true);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t//获取transport</span><br><span class=\"line\">\tTransport ts = session.getTransport();</span><br><span class=\"line\">\tts.connect(user,pass);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t//获取Message</span><br><span class=\"line\">\tMessage msg = createSimpleMail(session);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t//发送</span><br><span class=\"line\">\tts.sendMessage(msg,msg.getAllRecipients);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"MimeMessage-构建邮件体\"><a href=\"#MimeMessage-构建邮件体\" class=\"headerlink\" title=\"MimeMessage :构建邮件体\"></a>MimeMessage :构建邮件体</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static MimeMessage createSimpleMail(Session session) throw AddressException,MessagingException&#123;</span><br><span class=\"line\">\tMimeMessage mm = new MimeMessage(session);</span><br><span class=\"line\">\t//设置发件人</span><br><span class=\"line\">\tmm.setFrom(new InternetAddress(&quot;from@qq.com&quot;));</span><br><span class=\"line\">\t//设置收件人</span><br><span class=\"line\">\tmm.setRecipient(Message.RecipientType.TO,new InternetAddress(&quot;to@qq.com&quot;));</span><br><span class=\"line\">\t//设置抄送人</span><br><span class=\"line\">\tmm.setRecipient(Message.RecipientType.CC, new InternetAddress(&quot;用户名@163.com&quot;));</span><br><span class=\"line\">\t//设置题目和内容</span><br><span class=\"line\">\tmm.setSubject(mail_title);</span><br><span class=\"line\">    mm.setContent(mail_content, &quot;text/html;charset=gbk&quot;);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\treturn mm;</span><br></pre></td></tr></table></figure>"},{"title":"javaSocket简单学习","date":"2018-04-18T08:26:25.000Z","_content":"# 没有看源码, 从字面上来看 很好理解\n```\n        try {\n            ServerSocket ss = new ServerSocket(8888);\n            Socket s = ss.accept();\n\n            InputStream is = s.getInputStream();\n\n            int msg = is.read();\n            System.out.println(msg);\n            is.close();\n            s.close();\n            ss.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\t\t\n\t\t\n\t\ttry {\n            Socket s = new Socket(\"127.0.0.1\",8888);\n            OutputStream os = s.getOutputStream();\n            os.write(110);\n            os.close();\n            s.close();\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n```","source":"_posts/javaSocket简单学习.md","raw":"---\ntitle: javaSocket简单学习\ndate: 2018-04-18 16:26:25\ntags:\n---\n# 没有看源码, 从字面上来看 很好理解\n```\n        try {\n            ServerSocket ss = new ServerSocket(8888);\n            Socket s = ss.accept();\n\n            InputStream is = s.getInputStream();\n\n            int msg = is.read();\n            System.out.println(msg);\n            is.close();\n            s.close();\n            ss.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\t\t\n\t\t\n\t\ttry {\n            Socket s = new Socket(\"127.0.0.1\",8888);\n            OutputStream os = s.getOutputStream();\n            os.write(110);\n            os.close();\n            s.close();\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n```","slug":"javaSocket简单学习","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdx0045dcyudswnsa2i","content":"<h1 id=\"没有看源码-从字面上来看-很好理解\"><a href=\"#没有看源码-从字面上来看-很好理解\" class=\"headerlink\" title=\"没有看源码, 从字面上来看 很好理解\"></a>没有看源码, 从字面上来看 很好理解</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">      try &#123;</span><br><span class=\"line\">          ServerSocket ss = new ServerSocket(8888);</span><br><span class=\"line\">          Socket s = ss.accept();</span><br><span class=\"line\"></span><br><span class=\"line\">          InputStream is = s.getInputStream();</span><br><span class=\"line\"></span><br><span class=\"line\">          int msg = is.read();</span><br><span class=\"line\">          System.out.println(msg);</span><br><span class=\"line\">          is.close();</span><br><span class=\"line\">          s.close();</span><br><span class=\"line\">          ss.close();</span><br><span class=\"line\">      &#125; catch (IOException e) &#123;</span><br><span class=\"line\">          e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">try &#123;</span><br><span class=\"line\">          Socket s = new Socket(&quot;127.0.0.1&quot;,8888);</span><br><span class=\"line\">          OutputStream os = s.getOutputStream();</span><br><span class=\"line\">          os.write(110);</span><br><span class=\"line\">          os.close();</span><br><span class=\"line\">          s.close();</span><br><span class=\"line\"></span><br><span class=\"line\">      &#125; catch (IOException e) &#123;</span><br><span class=\"line\">          e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"没有看源码-从字面上来看-很好理解\"><a href=\"#没有看源码-从字面上来看-很好理解\" class=\"headerlink\" title=\"没有看源码, 从字面上来看 很好理解\"></a>没有看源码, 从字面上来看 很好理解</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">      try &#123;</span><br><span class=\"line\">          ServerSocket ss = new ServerSocket(8888);</span><br><span class=\"line\">          Socket s = ss.accept();</span><br><span class=\"line\"></span><br><span class=\"line\">          InputStream is = s.getInputStream();</span><br><span class=\"line\"></span><br><span class=\"line\">          int msg = is.read();</span><br><span class=\"line\">          System.out.println(msg);</span><br><span class=\"line\">          is.close();</span><br><span class=\"line\">          s.close();</span><br><span class=\"line\">          ss.close();</span><br><span class=\"line\">      &#125; catch (IOException e) &#123;</span><br><span class=\"line\">          e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">try &#123;</span><br><span class=\"line\">          Socket s = new Socket(&quot;127.0.0.1&quot;,8888);</span><br><span class=\"line\">          OutputStream os = s.getOutputStream();</span><br><span class=\"line\">          os.write(110);</span><br><span class=\"line\">          os.close();</span><br><span class=\"line\">          s.close();</span><br><span class=\"line\"></span><br><span class=\"line\">      &#125; catch (IOException e) &#123;</span><br><span class=\"line\">          e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>"},{"title":"linux后台运行方法学习","date":"2018-04-16T03:59:38.000Z","_content":"# 前言\n我们经常会碰到这样的问题,用telnet/ssh登陆了远程的linux服务器,运行了有些耗时较长的任务, 结果由于本地关闭终端窗口/网络断开而断开连接. \n\n## 场景:\n如果只是临时有个命令需要长时间运行,什么方法能最简便的保证它在后台稳定运行?\n## 解决办法:\n当用户注销(logout)或者网络断开时, 终端会收到HUP(hangup)信号从而关闭其所有子程序.因此,我们的解决办法就有两种途径:要么让进程忽略hup信号,要么让进程运行再新的会话里,从而不属于此终端的子进程.\n\n# 1.nohup\n## 语法\nnohup的用途就是让提交的命令忽略hangup信号.(run a command immune to hangups, with output to a non-tty).\nnohup 的使用是十分方便的，只需在要处理的命令前加上 nohup 即可，标准输出和标准错误缺省会被重定向到 nohup.out 文件中。一般我们可在结尾加上\"&\"来将命令同时放入后台运行,也可用\">filename 2>&1\"来更改缺省的重定向文件名。\n```\n语法：nohup Command [ Arg … ] [　& ]\n\n　　无论是否将 nohup 命令的输出重定向到终端，输出都将附加到当前目录的 nohup.out 文件中。\n\n　　如果当前目录的 nohup.out 文件不可写，输出重定向到 $HOME/nohup.out 文件中。\n\n　　如果没有文件能创建或打开以用于追加，那么 Command 参数指定的命令不可调用。\n```\n## 实例\n```\nnohup /usr/local/node/bin/node /www/im/chat.js > /usr/local/node/output.log 2>&1 &\n或者(这个操作很关键)\nnohup command > myout.file 2>&1 &\ntailf myout.file\n```\n## 其他命令\n```\njobs -l \t\t\t只看当前终端.\nps -ef|grep java 查看进程\nlsof -i:8080     查看使用某个端口的进程\nnetstat -ap|grep 8090  查看使用某个端口的进程\nkill -9  进程号   终止后台进程\ntailf myout.file 等同于tail -f -n 10（貌似tail -f或-F默认也是打印最后10行，然后追踪文件），与tail -f不同的是，如果文件不增长，它不会去访问磁盘文件\n```\n# setsid\nnohup 无疑能通过忽略 HUP 信号来使我们的进程避免中途被中断，但如果我们换个角度思考，如果我们的进程不属于接受 HUP 信号的终端的子进程，那么自然也就不会受到 HUP 信号的影响了。setsid 就能帮助我们做到这一点。让我们先来看一下 setsid 的帮助信息：\n```\nSETSID(8)                 Linux Programmer’s Manual(手册,指南)              SETSID(8)\n \nNAME\n       setsid - run a program in a new session\n \nSYNOPSIS\n       setsid program [ arg ... ]\n \nDESCRIPTION\n       setsid runs a program in a new session.\n```\n可见 setsid 的使用也是非常方便的，也只需在要处理的命令前加上 setsid 即可。\nsetsid实例\n```\n[root@pvcent107 ~]# setsid ping www.ibm.com\n[root@pvcent107 ~]# ps -ef |grep www.ibm.com\nroot     31094     1  0 07:28 ?        00:00:00 ping www.ibm.com\nroot     31102 29217  0 07:29 pts/4    00:00:00 grep www.ibm.com\n```\n值得注意的是，上例中我们的进程 ID(PID)为31094，而它的父 ID（PPID）为1（即为 init 进程 ID），并不是当前终端的进程 ID。请将此例与nohup 例中的父 ID 做比较。\n# &\n这里还有一个关于 subshell 的小技巧。我们知道，将一个或多个命名包含在“()”中就能让这些命令在子 shell 中运行中，从而扩展出很多有趣的功能，我们现在要讨论的就是其中之一。\n当我们将\"&\"也放入“()”内之后，我们就会发现所提交的作业并不在作业列表中，也就是说，是无法通过jobs来查看的。让我们来看看为什么这样就能躲过 HUP 信号的影响吧。\n```\n[root@pvcent107 ~]# (ping www.ibm.com &)\n[root@pvcent107 ~]# ps -ef |grep www.ibm.com\nroot     16270     1  0 14:13 pts/4    00:00:00 ping www.ibm.com\nroot     16278 15362  0 14:13 pts/4    00:00:00 grep www.ibm.com\n[root@pvcent107 ~]#\n```\n从上例中可以看出，新提交的进程的父 ID（PPID）为1（init 进程的 PID），并不是当前终端的进程 ID。因此并不属于当前终端的子进程，从而也就不会受到当前终端的 HUP 信号的影响了。\n# disown\n## 场景\n我们已经知道，如果事先在命令前加上 nohup 或者 setsid 就可以避免 HUP 信号的影响。但是如果我们未加任何处理就已经提交了命令，该如何补救才能让它避免 HUP 信号的影响呢？ \n## 解决方法\n这时想加 nohup 或者 setsid 已经为时已晚，只能通过作业调度和 disown 来解决这个问题了。让我们来看一下 disown 的帮助信息： \n```\ndisown [-ar] [-h] [jobspec ...]\n    Without options, each jobspec is  removed  from  the  table  of\n    active  jobs.   If  the -h option is given, each jobspec is not\n    removed from the table, but is marked so  that  SIGHUP  is  not\n    sent  to the job if the shell receives a SIGHUP.  If no jobspec\n    is present, and neither the -a nor the -r option  is  supplied,\n    the  current  job  is  used.  If no jobspec is supplied, the -a\n    option means to remove or mark all jobs; the -r option  without\n    a  jobspec  argument  restricts operation to running jobs.  The\n    return value is 0 unless a jobspec does  not  specify  a  valid\n    job.\n\n```\n可以看出:\n1. 用disown -h jobspec来使某个作业忽略HUP信号。\n2. 用disown -ah 来使所有的作业都忽略HUP信号。\n3. 用disown -rh 来使正在运行的作业忽略HUP信号。\n需要注意的是，当使用过 disown 之后，会将把目标作业从作业列表中移除，我们将不能再使用jobs来查看它，但是依然能够用ps -ef查找到它。\n\n\n\n\n\n","source":"_posts/linux后台运行方法学习.md","raw":"---\ntitle: linux后台运行方法学习\ndate: 2018-04-16 11:59:38\ntags:\n---\n# 前言\n我们经常会碰到这样的问题,用telnet/ssh登陆了远程的linux服务器,运行了有些耗时较长的任务, 结果由于本地关闭终端窗口/网络断开而断开连接. \n\n## 场景:\n如果只是临时有个命令需要长时间运行,什么方法能最简便的保证它在后台稳定运行?\n## 解决办法:\n当用户注销(logout)或者网络断开时, 终端会收到HUP(hangup)信号从而关闭其所有子程序.因此,我们的解决办法就有两种途径:要么让进程忽略hup信号,要么让进程运行再新的会话里,从而不属于此终端的子进程.\n\n# 1.nohup\n## 语法\nnohup的用途就是让提交的命令忽略hangup信号.(run a command immune to hangups, with output to a non-tty).\nnohup 的使用是十分方便的，只需在要处理的命令前加上 nohup 即可，标准输出和标准错误缺省会被重定向到 nohup.out 文件中。一般我们可在结尾加上\"&\"来将命令同时放入后台运行,也可用\">filename 2>&1\"来更改缺省的重定向文件名。\n```\n语法：nohup Command [ Arg … ] [　& ]\n\n　　无论是否将 nohup 命令的输出重定向到终端，输出都将附加到当前目录的 nohup.out 文件中。\n\n　　如果当前目录的 nohup.out 文件不可写，输出重定向到 $HOME/nohup.out 文件中。\n\n　　如果没有文件能创建或打开以用于追加，那么 Command 参数指定的命令不可调用。\n```\n## 实例\n```\nnohup /usr/local/node/bin/node /www/im/chat.js > /usr/local/node/output.log 2>&1 &\n或者(这个操作很关键)\nnohup command > myout.file 2>&1 &\ntailf myout.file\n```\n## 其他命令\n```\njobs -l \t\t\t只看当前终端.\nps -ef|grep java 查看进程\nlsof -i:8080     查看使用某个端口的进程\nnetstat -ap|grep 8090  查看使用某个端口的进程\nkill -9  进程号   终止后台进程\ntailf myout.file 等同于tail -f -n 10（貌似tail -f或-F默认也是打印最后10行，然后追踪文件），与tail -f不同的是，如果文件不增长，它不会去访问磁盘文件\n```\n# setsid\nnohup 无疑能通过忽略 HUP 信号来使我们的进程避免中途被中断，但如果我们换个角度思考，如果我们的进程不属于接受 HUP 信号的终端的子进程，那么自然也就不会受到 HUP 信号的影响了。setsid 就能帮助我们做到这一点。让我们先来看一下 setsid 的帮助信息：\n```\nSETSID(8)                 Linux Programmer’s Manual(手册,指南)              SETSID(8)\n \nNAME\n       setsid - run a program in a new session\n \nSYNOPSIS\n       setsid program [ arg ... ]\n \nDESCRIPTION\n       setsid runs a program in a new session.\n```\n可见 setsid 的使用也是非常方便的，也只需在要处理的命令前加上 setsid 即可。\nsetsid实例\n```\n[root@pvcent107 ~]# setsid ping www.ibm.com\n[root@pvcent107 ~]# ps -ef |grep www.ibm.com\nroot     31094     1  0 07:28 ?        00:00:00 ping www.ibm.com\nroot     31102 29217  0 07:29 pts/4    00:00:00 grep www.ibm.com\n```\n值得注意的是，上例中我们的进程 ID(PID)为31094，而它的父 ID（PPID）为1（即为 init 进程 ID），并不是当前终端的进程 ID。请将此例与nohup 例中的父 ID 做比较。\n# &\n这里还有一个关于 subshell 的小技巧。我们知道，将一个或多个命名包含在“()”中就能让这些命令在子 shell 中运行中，从而扩展出很多有趣的功能，我们现在要讨论的就是其中之一。\n当我们将\"&\"也放入“()”内之后，我们就会发现所提交的作业并不在作业列表中，也就是说，是无法通过jobs来查看的。让我们来看看为什么这样就能躲过 HUP 信号的影响吧。\n```\n[root@pvcent107 ~]# (ping www.ibm.com &)\n[root@pvcent107 ~]# ps -ef |grep www.ibm.com\nroot     16270     1  0 14:13 pts/4    00:00:00 ping www.ibm.com\nroot     16278 15362  0 14:13 pts/4    00:00:00 grep www.ibm.com\n[root@pvcent107 ~]#\n```\n从上例中可以看出，新提交的进程的父 ID（PPID）为1（init 进程的 PID），并不是当前终端的进程 ID。因此并不属于当前终端的子进程，从而也就不会受到当前终端的 HUP 信号的影响了。\n# disown\n## 场景\n我们已经知道，如果事先在命令前加上 nohup 或者 setsid 就可以避免 HUP 信号的影响。但是如果我们未加任何处理就已经提交了命令，该如何补救才能让它避免 HUP 信号的影响呢？ \n## 解决方法\n这时想加 nohup 或者 setsid 已经为时已晚，只能通过作业调度和 disown 来解决这个问题了。让我们来看一下 disown 的帮助信息： \n```\ndisown [-ar] [-h] [jobspec ...]\n    Without options, each jobspec is  removed  from  the  table  of\n    active  jobs.   If  the -h option is given, each jobspec is not\n    removed from the table, but is marked so  that  SIGHUP  is  not\n    sent  to the job if the shell receives a SIGHUP.  If no jobspec\n    is present, and neither the -a nor the -r option  is  supplied,\n    the  current  job  is  used.  If no jobspec is supplied, the -a\n    option means to remove or mark all jobs; the -r option  without\n    a  jobspec  argument  restricts operation to running jobs.  The\n    return value is 0 unless a jobspec does  not  specify  a  valid\n    job.\n\n```\n可以看出:\n1. 用disown -h jobspec来使某个作业忽略HUP信号。\n2. 用disown -ah 来使所有的作业都忽略HUP信号。\n3. 用disown -rh 来使正在运行的作业忽略HUP信号。\n需要注意的是，当使用过 disown 之后，会将把目标作业从作业列表中移除，我们将不能再使用jobs来查看它，但是依然能够用ps -ef查找到它。\n\n\n\n\n\n","slug":"linux后台运行方法学习","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzdy0046dcyu6xzmfv3c","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>我们经常会碰到这样的问题,用telnet/ssh登陆了远程的linux服务器,运行了有些耗时较长的任务, 结果由于本地关闭终端窗口/网络断开而断开连接. </p>\n<h2 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景:\"></a>场景:</h2><p>如果只是临时有个命令需要长时间运行,什么方法能最简便的保证它在后台稳定运行?</p>\n<h2 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法:\"></a>解决办法:</h2><p>当用户注销(logout)或者网络断开时, 终端会收到HUP(hangup)信号从而关闭其所有子程序.因此,我们的解决办法就有两种途径:要么让进程忽略hup信号,要么让进程运行再新的会话里,从而不属于此终端的子进程.</p>\n<h1 id=\"1-nohup\"><a href=\"#1-nohup\" class=\"headerlink\" title=\"1.nohup\"></a>1.nohup</h1><h2 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h2><p>nohup的用途就是让提交的命令忽略hangup信号.(run a command immune to hangups, with output to a non-tty).<br>nohup 的使用是十分方便的，只需在要处理的命令前加上 nohup 即可，标准输出和标准错误缺省会被重定向到 nohup.out 文件中。一般我们可在结尾加上”&amp;”来将命令同时放入后台运行,也可用”&gt;filename 2&gt;&amp;1”来更改缺省的重定向文件名。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法：nohup Command [ Arg … ] [　&amp; ]</span><br><span class=\"line\"></span><br><span class=\"line\">　　无论是否将 nohup 命令的输出重定向到终端，输出都将附加到当前目录的 nohup.out 文件中。</span><br><span class=\"line\"></span><br><span class=\"line\">　　如果当前目录的 nohup.out 文件不可写，输出重定向到 $HOME/nohup.out 文件中。</span><br><span class=\"line\"></span><br><span class=\"line\">　　如果没有文件能创建或打开以用于追加，那么 Command 参数指定的命令不可调用。</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup /usr/local/node/bin/node /www/im/chat.js &gt; /usr/local/node/output.log 2&gt;&amp;1 &amp;</span><br><span class=\"line\">或者(这个操作很关键)</span><br><span class=\"line\">nohup command &gt; myout.file 2&gt;&amp;1 &amp;</span><br><span class=\"line\">tailf myout.file</span><br></pre></td></tr></table></figure>\n<h2 id=\"其他命令\"><a href=\"#其他命令\" class=\"headerlink\" title=\"其他命令\"></a>其他命令</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jobs -l \t\t\t只看当前终端.</span><br><span class=\"line\">ps -ef|grep java 查看进程</span><br><span class=\"line\">lsof -i:8080     查看使用某个端口的进程</span><br><span class=\"line\">netstat -ap|grep 8090  查看使用某个端口的进程</span><br><span class=\"line\">kill -9  进程号   终止后台进程</span><br><span class=\"line\">tailf myout.file 等同于tail -f -n 10（貌似tail -f或-F默认也是打印最后10行，然后追踪文件），与tail -f不同的是，如果文件不增长，它不会去访问磁盘文件</span><br></pre></td></tr></table></figure>\n<h1 id=\"setsid\"><a href=\"#setsid\" class=\"headerlink\" title=\"setsid\"></a>setsid</h1><p>nohup 无疑能通过忽略 HUP 信号来使我们的进程避免中途被中断，但如果我们换个角度思考，如果我们的进程不属于接受 HUP 信号的终端的子进程，那么自然也就不会受到 HUP 信号的影响了。setsid 就能帮助我们做到这一点。让我们先来看一下 setsid 的帮助信息：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SETSID(8)                 Linux Programmer’s Manual(手册,指南)              SETSID(8)</span><br><span class=\"line\"> </span><br><span class=\"line\">NAME</span><br><span class=\"line\">       setsid - run a program in a new session</span><br><span class=\"line\"> </span><br><span class=\"line\">SYNOPSIS</span><br><span class=\"line\">       setsid program [ arg ... ]</span><br><span class=\"line\"> </span><br><span class=\"line\">DESCRIPTION</span><br><span class=\"line\">       setsid runs a program in a new session.</span><br></pre></td></tr></table></figure></p>\n<p>可见 setsid 的使用也是非常方便的，也只需在要处理的命令前加上 setsid 即可。<br>setsid实例<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@pvcent107 ~]# setsid ping www.ibm.com</span><br><span class=\"line\">[root@pvcent107 ~]# ps -ef |grep www.ibm.com</span><br><span class=\"line\">root     31094     1  0 07:28 ?        00:00:00 ping www.ibm.com</span><br><span class=\"line\">root     31102 29217  0 07:29 pts/4    00:00:00 grep www.ibm.com</span><br></pre></td></tr></table></figure></p>\n<p>值得注意的是，上例中我们的进程 ID(PID)为31094，而它的父 ID（PPID）为1（即为 init 进程 ID），并不是当前终端的进程 ID。请将此例与nohup 例中的父 ID 做比较。</p>\n<h1 id=\"amp\"><a href=\"#amp\" class=\"headerlink\" title=\"&amp;\"></a>&amp;</h1><p>这里还有一个关于 subshell 的小技巧。我们知道，将一个或多个命名包含在“()”中就能让这些命令在子 shell 中运行中，从而扩展出很多有趣的功能，我们现在要讨论的就是其中之一。<br>当我们将”&amp;”也放入“()”内之后，我们就会发现所提交的作业并不在作业列表中，也就是说，是无法通过jobs来查看的。让我们来看看为什么这样就能躲过 HUP 信号的影响吧。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@pvcent107 ~]# (ping www.ibm.com &amp;)</span><br><span class=\"line\">[root@pvcent107 ~]# ps -ef |grep www.ibm.com</span><br><span class=\"line\">root     16270     1  0 14:13 pts/4    00:00:00 ping www.ibm.com</span><br><span class=\"line\">root     16278 15362  0 14:13 pts/4    00:00:00 grep www.ibm.com</span><br><span class=\"line\">[root@pvcent107 ~]#</span><br></pre></td></tr></table></figure></p>\n<p>从上例中可以看出，新提交的进程的父 ID（PPID）为1（init 进程的 PID），并不是当前终端的进程 ID。因此并不属于当前终端的子进程，从而也就不会受到当前终端的 HUP 信号的影响了。</p>\n<h1 id=\"disown\"><a href=\"#disown\" class=\"headerlink\" title=\"disown\"></a>disown</h1><h2 id=\"场景-1\"><a href=\"#场景-1\" class=\"headerlink\" title=\"场景\"></a>场景</h2><p>我们已经知道，如果事先在命令前加上 nohup 或者 setsid 就可以避免 HUP 信号的影响。但是如果我们未加任何处理就已经提交了命令，该如何补救才能让它避免 HUP 信号的影响呢？ </p>\n<h2 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h2><p>这时想加 nohup 或者 setsid 已经为时已晚，只能通过作业调度和 disown 来解决这个问题了。让我们来看一下 disown 的帮助信息：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">disown [-ar] [-h] [jobspec ...]</span><br><span class=\"line\">    Without options, each jobspec is  removed  from  the  table  of</span><br><span class=\"line\">    active  jobs.   If  the -h option is given, each jobspec is not</span><br><span class=\"line\">    removed from the table, but is marked so  that  SIGHUP  is  not</span><br><span class=\"line\">    sent  to the job if the shell receives a SIGHUP.  If no jobspec</span><br><span class=\"line\">    is present, and neither the -a nor the -r option  is  supplied,</span><br><span class=\"line\">    the  current  job  is  used.  If no jobspec is supplied, the -a</span><br><span class=\"line\">    option means to remove or mark all jobs; the -r option  without</span><br><span class=\"line\">    a  jobspec  argument  restricts operation to running jobs.  The</span><br><span class=\"line\">    return value is 0 unless a jobspec does  not  specify  a  valid</span><br><span class=\"line\">    job.</span><br></pre></td></tr></table></figure></p>\n<p>可以看出:</p>\n<ol>\n<li>用disown -h jobspec来使某个作业忽略HUP信号。</li>\n<li>用disown -ah 来使所有的作业都忽略HUP信号。</li>\n<li>用disown -rh 来使正在运行的作业忽略HUP信号。<br>需要注意的是，当使用过 disown 之后，会将把目标作业从作业列表中移除，我们将不能再使用jobs来查看它，但是依然能够用ps -ef查找到它。</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>我们经常会碰到这样的问题,用telnet/ssh登陆了远程的linux服务器,运行了有些耗时较长的任务, 结果由于本地关闭终端窗口/网络断开而断开连接. </p>\n<h2 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景:\"></a>场景:</h2><p>如果只是临时有个命令需要长时间运行,什么方法能最简便的保证它在后台稳定运行?</p>\n<h2 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法:\"></a>解决办法:</h2><p>当用户注销(logout)或者网络断开时, 终端会收到HUP(hangup)信号从而关闭其所有子程序.因此,我们的解决办法就有两种途径:要么让进程忽略hup信号,要么让进程运行再新的会话里,从而不属于此终端的子进程.</p>\n<h1 id=\"1-nohup\"><a href=\"#1-nohup\" class=\"headerlink\" title=\"1.nohup\"></a>1.nohup</h1><h2 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h2><p>nohup的用途就是让提交的命令忽略hangup信号.(run a command immune to hangups, with output to a non-tty).<br>nohup 的使用是十分方便的，只需在要处理的命令前加上 nohup 即可，标准输出和标准错误缺省会被重定向到 nohup.out 文件中。一般我们可在结尾加上”&amp;”来将命令同时放入后台运行,也可用”&gt;filename 2&gt;&amp;1”来更改缺省的重定向文件名。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法：nohup Command [ Arg … ] [　&amp; ]</span><br><span class=\"line\"></span><br><span class=\"line\">　　无论是否将 nohup 命令的输出重定向到终端，输出都将附加到当前目录的 nohup.out 文件中。</span><br><span class=\"line\"></span><br><span class=\"line\">　　如果当前目录的 nohup.out 文件不可写，输出重定向到 $HOME/nohup.out 文件中。</span><br><span class=\"line\"></span><br><span class=\"line\">　　如果没有文件能创建或打开以用于追加，那么 Command 参数指定的命令不可调用。</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup /usr/local/node/bin/node /www/im/chat.js &gt; /usr/local/node/output.log 2&gt;&amp;1 &amp;</span><br><span class=\"line\">或者(这个操作很关键)</span><br><span class=\"line\">nohup command &gt; myout.file 2&gt;&amp;1 &amp;</span><br><span class=\"line\">tailf myout.file</span><br></pre></td></tr></table></figure>\n<h2 id=\"其他命令\"><a href=\"#其他命令\" class=\"headerlink\" title=\"其他命令\"></a>其他命令</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jobs -l \t\t\t只看当前终端.</span><br><span class=\"line\">ps -ef|grep java 查看进程</span><br><span class=\"line\">lsof -i:8080     查看使用某个端口的进程</span><br><span class=\"line\">netstat -ap|grep 8090  查看使用某个端口的进程</span><br><span class=\"line\">kill -9  进程号   终止后台进程</span><br><span class=\"line\">tailf myout.file 等同于tail -f -n 10（貌似tail -f或-F默认也是打印最后10行，然后追踪文件），与tail -f不同的是，如果文件不增长，它不会去访问磁盘文件</span><br></pre></td></tr></table></figure>\n<h1 id=\"setsid\"><a href=\"#setsid\" class=\"headerlink\" title=\"setsid\"></a>setsid</h1><p>nohup 无疑能通过忽略 HUP 信号来使我们的进程避免中途被中断，但如果我们换个角度思考，如果我们的进程不属于接受 HUP 信号的终端的子进程，那么自然也就不会受到 HUP 信号的影响了。setsid 就能帮助我们做到这一点。让我们先来看一下 setsid 的帮助信息：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SETSID(8)                 Linux Programmer’s Manual(手册,指南)              SETSID(8)</span><br><span class=\"line\"> </span><br><span class=\"line\">NAME</span><br><span class=\"line\">       setsid - run a program in a new session</span><br><span class=\"line\"> </span><br><span class=\"line\">SYNOPSIS</span><br><span class=\"line\">       setsid program [ arg ... ]</span><br><span class=\"line\"> </span><br><span class=\"line\">DESCRIPTION</span><br><span class=\"line\">       setsid runs a program in a new session.</span><br></pre></td></tr></table></figure></p>\n<p>可见 setsid 的使用也是非常方便的，也只需在要处理的命令前加上 setsid 即可。<br>setsid实例<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@pvcent107 ~]# setsid ping www.ibm.com</span><br><span class=\"line\">[root@pvcent107 ~]# ps -ef |grep www.ibm.com</span><br><span class=\"line\">root     31094     1  0 07:28 ?        00:00:00 ping www.ibm.com</span><br><span class=\"line\">root     31102 29217  0 07:29 pts/4    00:00:00 grep www.ibm.com</span><br></pre></td></tr></table></figure></p>\n<p>值得注意的是，上例中我们的进程 ID(PID)为31094，而它的父 ID（PPID）为1（即为 init 进程 ID），并不是当前终端的进程 ID。请将此例与nohup 例中的父 ID 做比较。</p>\n<h1 id=\"amp\"><a href=\"#amp\" class=\"headerlink\" title=\"&amp;\"></a>&amp;</h1><p>这里还有一个关于 subshell 的小技巧。我们知道，将一个或多个命名包含在“()”中就能让这些命令在子 shell 中运行中，从而扩展出很多有趣的功能，我们现在要讨论的就是其中之一。<br>当我们将”&amp;”也放入“()”内之后，我们就会发现所提交的作业并不在作业列表中，也就是说，是无法通过jobs来查看的。让我们来看看为什么这样就能躲过 HUP 信号的影响吧。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@pvcent107 ~]# (ping www.ibm.com &amp;)</span><br><span class=\"line\">[root@pvcent107 ~]# ps -ef |grep www.ibm.com</span><br><span class=\"line\">root     16270     1  0 14:13 pts/4    00:00:00 ping www.ibm.com</span><br><span class=\"line\">root     16278 15362  0 14:13 pts/4    00:00:00 grep www.ibm.com</span><br><span class=\"line\">[root@pvcent107 ~]#</span><br></pre></td></tr></table></figure></p>\n<p>从上例中可以看出，新提交的进程的父 ID（PPID）为1（init 进程的 PID），并不是当前终端的进程 ID。因此并不属于当前终端的子进程，从而也就不会受到当前终端的 HUP 信号的影响了。</p>\n<h1 id=\"disown\"><a href=\"#disown\" class=\"headerlink\" title=\"disown\"></a>disown</h1><h2 id=\"场景-1\"><a href=\"#场景-1\" class=\"headerlink\" title=\"场景\"></a>场景</h2><p>我们已经知道，如果事先在命令前加上 nohup 或者 setsid 就可以避免 HUP 信号的影响。但是如果我们未加任何处理就已经提交了命令，该如何补救才能让它避免 HUP 信号的影响呢？ </p>\n<h2 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h2><p>这时想加 nohup 或者 setsid 已经为时已晚，只能通过作业调度和 disown 来解决这个问题了。让我们来看一下 disown 的帮助信息：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">disown [-ar] [-h] [jobspec ...]</span><br><span class=\"line\">    Without options, each jobspec is  removed  from  the  table  of</span><br><span class=\"line\">    active  jobs.   If  the -h option is given, each jobspec is not</span><br><span class=\"line\">    removed from the table, but is marked so  that  SIGHUP  is  not</span><br><span class=\"line\">    sent  to the job if the shell receives a SIGHUP.  If no jobspec</span><br><span class=\"line\">    is present, and neither the -a nor the -r option  is  supplied,</span><br><span class=\"line\">    the  current  job  is  used.  If no jobspec is supplied, the -a</span><br><span class=\"line\">    option means to remove or mark all jobs; the -r option  without</span><br><span class=\"line\">    a  jobspec  argument  restricts operation to running jobs.  The</span><br><span class=\"line\">    return value is 0 unless a jobspec does  not  specify  a  valid</span><br><span class=\"line\">    job.</span><br></pre></td></tr></table></figure></p>\n<p>可以看出:</p>\n<ol>\n<li>用disown -h jobspec来使某个作业忽略HUP信号。</li>\n<li>用disown -ah 来使所有的作业都忽略HUP信号。</li>\n<li>用disown -rh 来使正在运行的作业忽略HUP信号。<br>需要注意的是，当使用过 disown 之后，会将把目标作业从作业列表中移除，我们将不能再使用jobs来查看它，但是依然能够用ps -ef查找到它。</li>\n</ol>\n"},{"title":"log4j学习","date":"2018-04-18T01:37:46.000Z","_content":"# 使用场景\n没有日志记录程序的运行过程,就无法对程序运行过程有一个宏观的反馈. 随着河畔鸡毛信的渐渐成熟, 添加log4j插件也是要摆上日程了.\n\n# 使用概况\n使用之前觉得很麻烦,使用之后发觉非常简单. \n1. 添加maven依赖\n2. 编辑properties/xml文件\n3. 添加到程序中\n# 具体方法\n```\n //使用jar包:log4j-1.2.17.jar\n static Logger logger = Logger.getLogger(TestLog4j.class);\n BasicConfigurator.configure();//默认的配置\n logger.setLevel(level.Debug);\n \n //或者自己配置\n PropertyConfigurator.configure(\"e:\\\\project\\\\log4j\\\\src\\\\log4j.properties\");\n```\n配置文件的格式:\n```\nlog4j.rootLogger=debug, stdout, R\n \nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\n \n# Pattern to output the caller's file name and line number.\nlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n\n \nlog4j.appender.R=org.apache.log4j.RollingFileAppender\nlog4j.appender.R.File=example.log\nlog4j.appender.R.MaxFileSize=100KB\nlog4j.appender.R.MaxBackupIndex=5\n \nlog4j.appender.R.layout=org.apache.log4j.PatternLayout\nlog4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n\n```\nlog4j日志输出格式一览：\n%c 输出日志信息所属的类的全名\n%d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy-MM-dd HH:mm:ss }，输出类似：2002-10-18- 22：10：28\n%f 输出日志信息所属的类的类名\n%l 输出日志事件的发生位置，即输出日志信息的语句处于它所在的类的第几行\n%m 输出代码中指定的信息，如log(message)中的message\n%n 输出一个回车换行符，Windows平台为“rn”，Unix平台为“n”\n%p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL。如果是调用debug()输出的，则为DEBUG，依此类推\n%r 输出自应用启动到输出该日志信息所耗费的毫秒数\n%t 输出产生该日志事件的线程名\n\n\n\n","source":"_posts/log4j学习.md","raw":"---\ntitle: log4j学习\ndate: 2018-04-18 09:37:46\ntags:\n---\n# 使用场景\n没有日志记录程序的运行过程,就无法对程序运行过程有一个宏观的反馈. 随着河畔鸡毛信的渐渐成熟, 添加log4j插件也是要摆上日程了.\n\n# 使用概况\n使用之前觉得很麻烦,使用之后发觉非常简单. \n1. 添加maven依赖\n2. 编辑properties/xml文件\n3. 添加到程序中\n# 具体方法\n```\n //使用jar包:log4j-1.2.17.jar\n static Logger logger = Logger.getLogger(TestLog4j.class);\n BasicConfigurator.configure();//默认的配置\n logger.setLevel(level.Debug);\n \n //或者自己配置\n PropertyConfigurator.configure(\"e:\\\\project\\\\log4j\\\\src\\\\log4j.properties\");\n```\n配置文件的格式:\n```\nlog4j.rootLogger=debug, stdout, R\n \nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\n \n# Pattern to output the caller's file name and line number.\nlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n\n \nlog4j.appender.R=org.apache.log4j.RollingFileAppender\nlog4j.appender.R.File=example.log\nlog4j.appender.R.MaxFileSize=100KB\nlog4j.appender.R.MaxBackupIndex=5\n \nlog4j.appender.R.layout=org.apache.log4j.PatternLayout\nlog4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n\n```\nlog4j日志输出格式一览：\n%c 输出日志信息所属的类的全名\n%d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy-MM-dd HH:mm:ss }，输出类似：2002-10-18- 22：10：28\n%f 输出日志信息所属的类的类名\n%l 输出日志事件的发生位置，即输出日志信息的语句处于它所在的类的第几行\n%m 输出代码中指定的信息，如log(message)中的message\n%n 输出一个回车换行符，Windows平台为“rn”，Unix平台为“n”\n%p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL。如果是调用debug()输出的，则为DEBUG，依此类推\n%r 输出自应用启动到输出该日志信息所耗费的毫秒数\n%t 输出产生该日志事件的线程名\n\n\n\n","slug":"log4j学习","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzpj0047dcyujym1zkzx","content":"<h1 id=\"使用场景\"><a href=\"#使用场景\" class=\"headerlink\" title=\"使用场景\"></a>使用场景</h1><p>没有日志记录程序的运行过程,就无法对程序运行过程有一个宏观的反馈. 随着河畔鸡毛信的渐渐成熟, 添加log4j插件也是要摆上日程了.</p>\n<h1 id=\"使用概况\"><a href=\"#使用概况\" class=\"headerlink\" title=\"使用概况\"></a>使用概况</h1><p>使用之前觉得很麻烦,使用之后发觉非常简单. </p>\n<ol>\n<li>添加maven依赖</li>\n<li>编辑properties/xml文件</li>\n<li>添加到程序中<h1 id=\"具体方法\"><a href=\"#具体方法\" class=\"headerlink\" title=\"具体方法\"></a>具体方法</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//使用jar包:log4j-1.2.17.jar</span><br><span class=\"line\">static Logger logger = Logger.getLogger(TestLog4j.class);</span><br><span class=\"line\">BasicConfigurator.configure();//默认的配置</span><br><span class=\"line\">logger.setLevel(level.Debug);</span><br><span class=\"line\"></span><br><span class=\"line\">//或者自己配置</span><br><span class=\"line\">PropertyConfigurator.configure(&quot;e:\\\\project\\\\log4j\\\\src\\\\log4j.properties&quot;);</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>配置文件的格式:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">log4j.rootLogger=debug, stdout, R</span><br><span class=\"line\"> </span><br><span class=\"line\">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class=\"line\">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\"> </span><br><span class=\"line\"># Pattern to output the caller&apos;s file name and line number.</span><br><span class=\"line\">log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n</span><br><span class=\"line\"> </span><br><span class=\"line\">log4j.appender.R=org.apache.log4j.RollingFileAppender</span><br><span class=\"line\">log4j.appender.R.File=example.log</span><br><span class=\"line\">log4j.appender.R.MaxFileSize=100KB</span><br><span class=\"line\">log4j.appender.R.MaxBackupIndex=5</span><br><span class=\"line\"> </span><br><span class=\"line\">log4j.appender.R.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\">log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n</span><br></pre></td></tr></table></figure></p>\n<p>log4j日志输出格式一览：<br>%c 输出日志信息所属的类的全名<br>%d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy-MM-dd HH:mm:ss }，输出类似：2002-10-18- 22：10：28<br>%f 输出日志信息所属的类的类名<br>%l 输出日志事件的发生位置，即输出日志信息的语句处于它所在的类的第几行<br>%m 输出代码中指定的信息，如log(message)中的message<br>%n 输出一个回车换行符，Windows平台为“rn”，Unix平台为“n”<br>%p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL。如果是调用debug()输出的，则为DEBUG，依此类推<br>%r 输出自应用启动到输出该日志信息所耗费的毫秒数<br>%t 输出产生该日志事件的线程名</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"使用场景\"><a href=\"#使用场景\" class=\"headerlink\" title=\"使用场景\"></a>使用场景</h1><p>没有日志记录程序的运行过程,就无法对程序运行过程有一个宏观的反馈. 随着河畔鸡毛信的渐渐成熟, 添加log4j插件也是要摆上日程了.</p>\n<h1 id=\"使用概况\"><a href=\"#使用概况\" class=\"headerlink\" title=\"使用概况\"></a>使用概况</h1><p>使用之前觉得很麻烦,使用之后发觉非常简单. </p>\n<ol>\n<li>添加maven依赖</li>\n<li>编辑properties/xml文件</li>\n<li>添加到程序中<h1 id=\"具体方法\"><a href=\"#具体方法\" class=\"headerlink\" title=\"具体方法\"></a>具体方法</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//使用jar包:log4j-1.2.17.jar</span><br><span class=\"line\">static Logger logger = Logger.getLogger(TestLog4j.class);</span><br><span class=\"line\">BasicConfigurator.configure();//默认的配置</span><br><span class=\"line\">logger.setLevel(level.Debug);</span><br><span class=\"line\"></span><br><span class=\"line\">//或者自己配置</span><br><span class=\"line\">PropertyConfigurator.configure(&quot;e:\\\\project\\\\log4j\\\\src\\\\log4j.properties&quot;);</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>配置文件的格式:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">log4j.rootLogger=debug, stdout, R</span><br><span class=\"line\"> </span><br><span class=\"line\">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class=\"line\">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\"> </span><br><span class=\"line\"># Pattern to output the caller&apos;s file name and line number.</span><br><span class=\"line\">log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n</span><br><span class=\"line\"> </span><br><span class=\"line\">log4j.appender.R=org.apache.log4j.RollingFileAppender</span><br><span class=\"line\">log4j.appender.R.File=example.log</span><br><span class=\"line\">log4j.appender.R.MaxFileSize=100KB</span><br><span class=\"line\">log4j.appender.R.MaxBackupIndex=5</span><br><span class=\"line\"> </span><br><span class=\"line\">log4j.appender.R.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\">log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n</span><br></pre></td></tr></table></figure></p>\n<p>log4j日志输出格式一览：<br>%c 输出日志信息所属的类的全名<br>%d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy-MM-dd HH:mm:ss }，输出类似：2002-10-18- 22：10：28<br>%f 输出日志信息所属的类的类名<br>%l 输出日志事件的发生位置，即输出日志信息的语句处于它所在的类的第几行<br>%m 输出代码中指定的信息，如log(message)中的message<br>%n 输出一个回车换行符，Windows平台为“rn”，Unix平台为“n”<br>%p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL。如果是调用debug()输出的，则为DEBUG，依此类推<br>%r 输出自应用启动到输出该日志信息所耗费的毫秒数<br>%t 输出产生该日志事件的线程名</p>\n"},{"title":"mysql更改密码","date":"2018-04-06T07:33:36.000Z","_content":"# 虽然简单,但也有坑\n\n 1. 使用set password方式\n\n```\nset password for root@localhost = password(‘123’); \n```\n 2. mysql5.6.6版本之后增加了密码强调验证插件validate_password,validate_password_length 默认为8\n```\nmysql> alter user root@'localhost' identified by 'oracle';\nERROR 1819 (HY000): Your password does not satisfy the current policy requirements\n---报错，密码不满足制定的密码负责度要求\n```\n 3. 解决方法如下\n  ```\n mysql> set global validate_password_policy=0;  \nQuery OK, 0 rows affected (0.05 sec)  \n  \nmysql>   \nmysql>   \nmysql> set global validate_password_mixed_case_count=0;  \nQuery OK, 0 rows affected (0.00 sec)  \n  \nmysql> set global validate_password_number_count=3;  \nQuery OK, 0 rows affected (0.00 sec)  \n  \nmysql> set global validate_password_special_char_count=0;  \nQuery OK, 0 rows affected (0.00 sec)  \n  \nmysql> set global validate_password_length=3;  \nQuery OK, 0 rows affected (0.00 sec)  \n```\n    \n\n\n","source":"_posts/mysql更改密码.md","raw":"---\ntitle: mysql更改密码\ndate: 2018-04-06 15:33:36\ntags:\n---\n# 虽然简单,但也有坑\n\n 1. 使用set password方式\n\n```\nset password for root@localhost = password(‘123’); \n```\n 2. mysql5.6.6版本之后增加了密码强调验证插件validate_password,validate_password_length 默认为8\n```\nmysql> alter user root@'localhost' identified by 'oracle';\nERROR 1819 (HY000): Your password does not satisfy the current policy requirements\n---报错，密码不满足制定的密码负责度要求\n```\n 3. 解决方法如下\n  ```\n mysql> set global validate_password_policy=0;  \nQuery OK, 0 rows affected (0.05 sec)  \n  \nmysql>   \nmysql>   \nmysql> set global validate_password_mixed_case_count=0;  \nQuery OK, 0 rows affected (0.00 sec)  \n  \nmysql> set global validate_password_number_count=3;  \nQuery OK, 0 rows affected (0.00 sec)  \n  \nmysql> set global validate_password_special_char_count=0;  \nQuery OK, 0 rows affected (0.00 sec)  \n  \nmysql> set global validate_password_length=3;  \nQuery OK, 0 rows affected (0.00 sec)  \n```\n    \n\n\n","slug":"mysql更改密码","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzpv0049dcyua1r4j8i0","content":"<h1 id=\"虽然简单-但也有坑\"><a href=\"#虽然简单-但也有坑\" class=\"headerlink\" title=\"虽然简单,但也有坑\"></a>虽然简单,但也有坑</h1><ol>\n<li>使用set password方式</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set password for root@localhost = password(‘123’);</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><p>mysql5.6.6版本之后增加了密码强调验证插件validate_password,validate_password_length 默认为8</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; alter user root@&apos;localhost&apos; identified by &apos;oracle&apos;;</span><br><span class=\"line\">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</span><br><span class=\"line\">---报错，密码不满足制定的密码负责度要求</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>解决方法如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> mysql&gt; set global validate_password_policy=0;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.05 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt;   </span><br><span class=\"line\">mysql&gt;   </span><br><span class=\"line\">mysql&gt; set global validate_password_mixed_case_count=0;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt; set global validate_password_number_count=3;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt; set global validate_password_special_char_count=0;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt; set global validate_password_length=3;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"虽然简单-但也有坑\"><a href=\"#虽然简单-但也有坑\" class=\"headerlink\" title=\"虽然简单,但也有坑\"></a>虽然简单,但也有坑</h1><ol>\n<li>使用set password方式</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set password for root@localhost = password(‘123’);</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><p>mysql5.6.6版本之后增加了密码强调验证插件validate_password,validate_password_length 默认为8</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; alter user root@&apos;localhost&apos; identified by &apos;oracle&apos;;</span><br><span class=\"line\">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</span><br><span class=\"line\">---报错，密码不满足制定的密码负责度要求</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>解决方法如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> mysql&gt; set global validate_password_policy=0;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.05 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt;   </span><br><span class=\"line\">mysql&gt;   </span><br><span class=\"line\">mysql&gt; set global validate_password_mixed_case_count=0;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt; set global validate_password_number_count=3;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt; set global validate_password_special_char_count=0;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt; set global validate_password_length=3;  </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n"},{"title":"servlet学习","date":"2018-04-24T00:52:03.000Z","_content":"# servlet简介\nservlet是web开发首先要学的知识. 半年前到一年前我就跟着视频学并敲了代码,但当时云里雾里也没搞清楚内部的逻辑.现在重新撸一遍,收获会大很多!\nservlet本身不能独立运行,需要在web应用中运行,而web应用是部署在tomcat中的.\n所以开发servlet需要如下几个步骤:\n1. 创建web应用项目\n2. 编写servlet代码\n3. 部署到tomcat中\n# jar包导入\n开发servlet需要servlet-api.jar这个包,其位于tomcat中.\n# web.xml配置\n```\n    <servlet>\n        <servlet-name>HelloServlet</servlet-name>\n        <servlet-class>HelloServlet</servlet-class>\n    </servlet>\n \n    <servlet-mapping>\n        <servlet-name>HelloServlet</servlet-name>\n        <url-pattern>/hello</url-pattern>\n    </servlet-mapping>\n```\n# 指定项目输出到classes目录\ntomcat启动后,默认会到WEB-INF/classes目录下找这些class文件.\n# 配置tomcat的server.xml中的context\n```\n<Context path=\"/\" docBase=\"e:\\\\project\\\\j2ee\\\\web\" debug=\"0\" reloadable=\"false\" />\n```\n# 一把辛酸泪\n以上捣鼓了很久,还是没有在idea之上运行起来......\n数个小时的挣扎后,终于成功的架在了tomcat之上!\n![](artifacts)\n![](pic1)\n\n\n[artifacts]:data:image/png;base64,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\n\n\n[pic1]:data:image/jpeg;base64,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\n","source":"_posts/servlet学习.md","raw":"---\ntitle: servlet学习\ndate: 2018-04-24 08:52:03\ntags:\n---\n# servlet简介\nservlet是web开发首先要学的知识. 半年前到一年前我就跟着视频学并敲了代码,但当时云里雾里也没搞清楚内部的逻辑.现在重新撸一遍,收获会大很多!\nservlet本身不能独立运行,需要在web应用中运行,而web应用是部署在tomcat中的.\n所以开发servlet需要如下几个步骤:\n1. 创建web应用项目\n2. 编写servlet代码\n3. 部署到tomcat中\n# jar包导入\n开发servlet需要servlet-api.jar这个包,其位于tomcat中.\n# web.xml配置\n```\n    <servlet>\n        <servlet-name>HelloServlet</servlet-name>\n        <servlet-class>HelloServlet</servlet-class>\n    </servlet>\n \n    <servlet-mapping>\n        <servlet-name>HelloServlet</servlet-name>\n        <url-pattern>/hello</url-pattern>\n    </servlet-mapping>\n```\n# 指定项目输出到classes目录\ntomcat启动后,默认会到WEB-INF/classes目录下找这些class文件.\n# 配置tomcat的server.xml中的context\n```\n<Context path=\"/\" docBase=\"e:\\\\project\\\\j2ee\\\\web\" debug=\"0\" reloadable=\"false\" />\n```\n# 一把辛酸泪\n以上捣鼓了很久,还是没有在idea之上运行起来......\n数个小时的挣扎后,终于成功的架在了tomcat之上!\n![](artifacts)\n![](pic1)\n\n\n[artifacts]:data:image/png;base64,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\n\n\n[pic1]:data:image/jpeg;base64,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\n","slug":"servlet学习","published":1,"updated":"2018-11-02T06:24:46.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzpw004adcyu319me61y","content":"<h1 id=\"servlet简介\"><a href=\"#servlet简介\" class=\"headerlink\" title=\"servlet简介\"></a>servlet简介</h1><p>servlet是web开发首先要学的知识. 半年前到一年前我就跟着视频学并敲了代码,但当时云里雾里也没搞清楚内部的逻辑.现在重新撸一遍,收获会大很多!<br>servlet本身不能独立运行,需要在web应用中运行,而web应用是部署在tomcat中的.<br>所以开发servlet需要如下几个步骤:</p>\n<ol>\n<li>创建web应用项目</li>\n<li>编写servlet代码</li>\n<li>部署到tomcat中<h1 id=\"jar包导入\"><a href=\"#jar包导入\" class=\"headerlink\" title=\"jar包导入\"></a>jar包导入</h1>开发servlet需要servlet-api.jar这个包,其位于tomcat中.<h1 id=\"web-xml配置\"><a href=\"#web-xml配置\" class=\"headerlink\" title=\"web.xml配置\"></a>web.xml配置</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;servlet&gt;</span><br><span class=\"line\">    &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;</span><br><span class=\"line\">    &lt;servlet-class&gt;HelloServlet&lt;/servlet-class&gt;</span><br><span class=\"line\">&lt;/servlet&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;servlet-mapping&gt;</span><br><span class=\"line\">    &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;</span><br><span class=\"line\">    &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;</span><br><span class=\"line\">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"指定项目输出到classes目录\"><a href=\"#指定项目输出到classes目录\" class=\"headerlink\" title=\"指定项目输出到classes目录\"></a>指定项目输出到classes目录</h1><p>tomcat启动后,默认会到WEB-INF/classes目录下找这些class文件.</p>\n<h1 id=\"配置tomcat的server-xml中的context\"><a href=\"#配置tomcat的server-xml中的context\" class=\"headerlink\" title=\"配置tomcat的server.xml中的context\"></a>配置tomcat的server.xml中的context</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Context path=&quot;/&quot; docBase=&quot;e:\\\\project\\\\j2ee\\\\web&quot; debug=&quot;0&quot; reloadable=&quot;false&quot; /&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"一把辛酸泪\"><a href=\"#一把辛酸泪\" class=\"headerlink\" title=\"一把辛酸泪\"></a>一把辛酸泪</h1><p>以上捣鼓了很久,还是没有在idea之上运行起来……<br>数个小时的挣扎后,终于成功的架在了tomcat之上!<br><img src=\"artifacts\" alt=\"\"><br><img src=\"pic1\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"servlet简介\"><a href=\"#servlet简介\" class=\"headerlink\" title=\"servlet简介\"></a>servlet简介</h1><p>servlet是web开发首先要学的知识. 半年前到一年前我就跟着视频学并敲了代码,但当时云里雾里也没搞清楚内部的逻辑.现在重新撸一遍,收获会大很多!<br>servlet本身不能独立运行,需要在web应用中运行,而web应用是部署在tomcat中的.<br>所以开发servlet需要如下几个步骤:</p>\n<ol>\n<li>创建web应用项目</li>\n<li>编写servlet代码</li>\n<li>部署到tomcat中<h1 id=\"jar包导入\"><a href=\"#jar包导入\" class=\"headerlink\" title=\"jar包导入\"></a>jar包导入</h1>开发servlet需要servlet-api.jar这个包,其位于tomcat中.<h1 id=\"web-xml配置\"><a href=\"#web-xml配置\" class=\"headerlink\" title=\"web.xml配置\"></a>web.xml配置</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;servlet&gt;</span><br><span class=\"line\">    &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;</span><br><span class=\"line\">    &lt;servlet-class&gt;HelloServlet&lt;/servlet-class&gt;</span><br><span class=\"line\">&lt;/servlet&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;servlet-mapping&gt;</span><br><span class=\"line\">    &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;</span><br><span class=\"line\">    &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;</span><br><span class=\"line\">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"指定项目输出到classes目录\"><a href=\"#指定项目输出到classes目录\" class=\"headerlink\" title=\"指定项目输出到classes目录\"></a>指定项目输出到classes目录</h1><p>tomcat启动后,默认会到WEB-INF/classes目录下找这些class文件.</p>\n<h1 id=\"配置tomcat的server-xml中的context\"><a href=\"#配置tomcat的server-xml中的context\" class=\"headerlink\" title=\"配置tomcat的server.xml中的context\"></a>配置tomcat的server.xml中的context</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Context path=&quot;/&quot; docBase=&quot;e:\\\\project\\\\j2ee\\\\web&quot; debug=&quot;0&quot; reloadable=&quot;false&quot; /&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"一把辛酸泪\"><a href=\"#一把辛酸泪\" class=\"headerlink\" title=\"一把辛酸泪\"></a>一把辛酸泪</h1><p>以上捣鼓了很久,还是没有在idea之上运行起来……<br>数个小时的挣扎后,终于成功的架在了tomcat之上!<br><img src=\"artifacts\" alt=\"\"><br><img src=\"pic1\" alt=\"\"></p>\n"},{"title":"tomcat复习","date":"2018-04-03T02:15:38.000Z","_content":"# Tomcat是什么?\nTomcat 是由 Apache 开发的一个 Servlet 容器，实现了对 Servlet 和 JSP 的支持，并提供了作为Web服务器的一些特有功能，如Tomcat管理和控制平台、安全域管理和Tomcat阀等。\n\n由于 Tomcat 本身也内含了一个 HTTP 服务器，它也可以被视作一个单独的 Web 服务器。但是，不能将 Tomcat 和 Apache HTTP 服务器混淆，Apache HTTP 服务器是一个用 C 语言实现的 HTTP Web 服务器；这两个 HTTP web server 不是捆绑在一起的。Tomcat 包含了一个配置管理工具，也可以通过编辑XML格式的配置文件来进行配置。\n\n# tomcat重要目录\n- /bin -Tomcat脚本存放目录. .sh文件用于Unix文件\n- /conf - Tomcat配置文件目录\n- /logs - Tomcat默认日志目录\n- /webapps - webapp 运行目录\n\n# web工程发布目录结构\n```\n|-- webapp                         # 站点根目录\n    |-- META-INF                   # META-INF 目录\n    |   `-- MANIFEST.MF            # 配置清单文件\n    |-- WEB-INF                    # WEB-INF 目录\n    |   |-- classes                # class文件目录\n    |   |   |-- *.class            # 程序需要的 class 文件\n    |   |   `-- *.xml              # 程序需要的 xml 文件\n    |   |-- lib                    # 库文件夹\n    |   |   `-- *.jar              # 程序需要的 jar 包\n    |   `-- web.xml                # Web应用程序的部署描述文件\n    |-- <userdir>                  # 自定义的目录\n    |-- <userfiles>                # 自定义的资源文件\n```\n```\nwebapp：工程发布文件夹。其实每个 war 包都可以视为 webapp 的压缩包。\n\nMETA-INF：META-INF 目录用于存放工程自身相关的一些信息，元文件信息，通常由开发工具，环境自动生成。\n\nWEB-INF：Java web应用的安全目录。所谓安全就是客户端无法访问，只有服务端可以访问的目录。\n\n/WEB-INF/classes：存放程序所需要的所有 Java class 文件。\n\n/WEB-INF/lib：存放程序所需要的所有 jar 文件。\n\n/WEB-INF/web.xml：web 应用的部署配置文件。它是工程中最重要的配置文件，它描述了 servlet 和组成应用的其它组件，以及应用初始化参数、安全管理约束等\n```\n# Server\nServer元表示整个Catelina servlet容器\n因此,它必须是conf/server.xml配置文件的根元素,它的属性代表了整个servlet容器的特性\n## 属性表\n\n属性 | 描述 | 备注\n---|---|---\nclassname|这个类必须实现org.apache.catalina.Server接口|默认org.apache.catalina.core.StandardServer\naddress|服务器等待关机命令的TCP/IP地址. 如果没有指定地址,则使用localhost| \nport|服务器等待关机命令的TCP/IP端口号.设置-1以禁止关闭端口\nshutdown|必须通过TCP / IP连接接收到指定端口号的命令字符串，以关闭Tomcat。\n\n# Service\nService元素表示一个或多个连接器组件的组合，这些组件共享一个用于处理传入请求的引擎组件。Server 中可以有多个 Service。\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Server port=\"8080\" shutdown=\"SHUTDOWN\">\n  <Service name=\"xxx\">\n  ...\n  </Service>\n</Server>\n```\n\n#Executor\nexecutor表示可以在Tomcat的组件之间共享的线程池\n```\n<Service name=\"xxx\">\n  <Executor name=\"tomcatThreadPool\" namePrefix=\"catalina-exec-\" maxThreads=\"300\" minSpareThreads=\"25\"/>\n</Service>\n```\n# Connector\nConnector代表连接组件.Tomcat 支持三种协议：HTTP/1.1、HTTP/2.0、AJP。\n \n属性 | 描述 | 备注 \n---|---|---\nasyncTimeout| \tServlet3.0规范中的异步请求超时| \t默认30s\nport |\t请求连接的TCP Port |\t设置为0,则会随机选取一个未占用的端口号\nprotocol |\t协议. 一般情况下设置为 HTTP/1.1,这种情况下连接模型会在NIO和APR/native中自动根据配置选择 \t\nURIEncoding |\t对URI的编码方式. |\t如果设置系统变量org.apache.catalina.STRICT_SERVLET_COMPLIANCE为true,使用 ISO-8859-1编码;如果未设置此系统变量且未设置此属性, 使用UTF-8编码\nuseBodyEncodingForURI |\t是否采用指定的contentType而不是URIEncoding来编码URI中的请求参数\n\n# Context\nContext元素表示一个Web应用程序, 它在特定的虚拟主机中运行,每个web应用程序都基于Web应用程序存档（WAR）文件，或者包含相应的解包内容的相应目录，如Servlet规范中所述。\n\n属性 | 描述 | 备注 \n---|---|---\naltDDName |\tweb.xml部署描述符路径 |\t默认 /WEB-INF/web.xml\ndocBase |\tContext的Root路径 |\t和Host的appBase相结合, 可确定web应用的实际目录\nfailCtxIfServletStartFails |\t同Host中的failCtxIfServletStartFails, 只对当前Context有效 |\t默认为false\nlogEffectiveWebXml |\t是否日志打印web.xml内容(web.xml由默认的web.xml和应用中的web.xml组成) |\t默认为false\npath |\tweb应用的context path |\t如果为根路径,则配置为空字符串(\"\"), 不能不配置\nprivileged \t| 是否使用Tomcat提供的manager servlet \t| \nreloadable \t| /WEB-INF/classes/ 和/WEB-INF/lib/ 目录中class文件发生变化是否自动重新加载 |\t默认为false\nswallowOutput |\ttrue情况下, System.out和System.err输出将被定向到web应用日志中 |\t默认为false\n\n# Engine\n\nEngine元素表示与特定的Catalina服务相关联的整个请求处理机器。它接收并处理来自一个或多个连接器的所有请求，并将完成的响应返回给连接器，以便最终传输回客户端。\n# Host\nHost元素表示一个虚拟主机，它是一个服务器的网络名称（如“www.mycompany.com”）与运行Tomcat的特定服务器的关联。\n\n# 启动\n\n1. 部署方式\n```\n将打包好的 war 包放在 Tomcat 安装目录下的 webapps 目录下，然后在 bin 目录下执行 startup.bat 或 startup.sh ，Tomcat 会自动解压 webapps 目录下的 war 包。\n\n成功后，可以访问 http://localhost:8080/xxx （xxx 是 war 包文件名）。\n```\n2. 嵌入式\n```\n在 pom.xml 中添加依赖\n\n<dependency>\n  <groupId>org.apache.tomcat.embed</groupId>\n  <artifactId>tomcat-embed-core</artifactId>\n  <version>8.5.24</version>\n</dependency>\n\n添加 SimpleEmbedTomcatServer.java 文件\n```\n\n","source":"_posts/tomcat复习.md","raw":"---\ntitle: tomcat复习\ndate: 2018-04-03 10:15:38\ntags:\n---\n# Tomcat是什么?\nTomcat 是由 Apache 开发的一个 Servlet 容器，实现了对 Servlet 和 JSP 的支持，并提供了作为Web服务器的一些特有功能，如Tomcat管理和控制平台、安全域管理和Tomcat阀等。\n\n由于 Tomcat 本身也内含了一个 HTTP 服务器，它也可以被视作一个单独的 Web 服务器。但是，不能将 Tomcat 和 Apache HTTP 服务器混淆，Apache HTTP 服务器是一个用 C 语言实现的 HTTP Web 服务器；这两个 HTTP web server 不是捆绑在一起的。Tomcat 包含了一个配置管理工具，也可以通过编辑XML格式的配置文件来进行配置。\n\n# tomcat重要目录\n- /bin -Tomcat脚本存放目录. .sh文件用于Unix文件\n- /conf - Tomcat配置文件目录\n- /logs - Tomcat默认日志目录\n- /webapps - webapp 运行目录\n\n# web工程发布目录结构\n```\n|-- webapp                         # 站点根目录\n    |-- META-INF                   # META-INF 目录\n    |   `-- MANIFEST.MF            # 配置清单文件\n    |-- WEB-INF                    # WEB-INF 目录\n    |   |-- classes                # class文件目录\n    |   |   |-- *.class            # 程序需要的 class 文件\n    |   |   `-- *.xml              # 程序需要的 xml 文件\n    |   |-- lib                    # 库文件夹\n    |   |   `-- *.jar              # 程序需要的 jar 包\n    |   `-- web.xml                # Web应用程序的部署描述文件\n    |-- <userdir>                  # 自定义的目录\n    |-- <userfiles>                # 自定义的资源文件\n```\n```\nwebapp：工程发布文件夹。其实每个 war 包都可以视为 webapp 的压缩包。\n\nMETA-INF：META-INF 目录用于存放工程自身相关的一些信息，元文件信息，通常由开发工具，环境自动生成。\n\nWEB-INF：Java web应用的安全目录。所谓安全就是客户端无法访问，只有服务端可以访问的目录。\n\n/WEB-INF/classes：存放程序所需要的所有 Java class 文件。\n\n/WEB-INF/lib：存放程序所需要的所有 jar 文件。\n\n/WEB-INF/web.xml：web 应用的部署配置文件。它是工程中最重要的配置文件，它描述了 servlet 和组成应用的其它组件，以及应用初始化参数、安全管理约束等\n```\n# Server\nServer元表示整个Catelina servlet容器\n因此,它必须是conf/server.xml配置文件的根元素,它的属性代表了整个servlet容器的特性\n## 属性表\n\n属性 | 描述 | 备注\n---|---|---\nclassname|这个类必须实现org.apache.catalina.Server接口|默认org.apache.catalina.core.StandardServer\naddress|服务器等待关机命令的TCP/IP地址. 如果没有指定地址,则使用localhost| \nport|服务器等待关机命令的TCP/IP端口号.设置-1以禁止关闭端口\nshutdown|必须通过TCP / IP连接接收到指定端口号的命令字符串，以关闭Tomcat。\n\n# Service\nService元素表示一个或多个连接器组件的组合，这些组件共享一个用于处理传入请求的引擎组件。Server 中可以有多个 Service。\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Server port=\"8080\" shutdown=\"SHUTDOWN\">\n  <Service name=\"xxx\">\n  ...\n  </Service>\n</Server>\n```\n\n#Executor\nexecutor表示可以在Tomcat的组件之间共享的线程池\n```\n<Service name=\"xxx\">\n  <Executor name=\"tomcatThreadPool\" namePrefix=\"catalina-exec-\" maxThreads=\"300\" minSpareThreads=\"25\"/>\n</Service>\n```\n# Connector\nConnector代表连接组件.Tomcat 支持三种协议：HTTP/1.1、HTTP/2.0、AJP。\n \n属性 | 描述 | 备注 \n---|---|---\nasyncTimeout| \tServlet3.0规范中的异步请求超时| \t默认30s\nport |\t请求连接的TCP Port |\t设置为0,则会随机选取一个未占用的端口号\nprotocol |\t协议. 一般情况下设置为 HTTP/1.1,这种情况下连接模型会在NIO和APR/native中自动根据配置选择 \t\nURIEncoding |\t对URI的编码方式. |\t如果设置系统变量org.apache.catalina.STRICT_SERVLET_COMPLIANCE为true,使用 ISO-8859-1编码;如果未设置此系统变量且未设置此属性, 使用UTF-8编码\nuseBodyEncodingForURI |\t是否采用指定的contentType而不是URIEncoding来编码URI中的请求参数\n\n# Context\nContext元素表示一个Web应用程序, 它在特定的虚拟主机中运行,每个web应用程序都基于Web应用程序存档（WAR）文件，或者包含相应的解包内容的相应目录，如Servlet规范中所述。\n\n属性 | 描述 | 备注 \n---|---|---\naltDDName |\tweb.xml部署描述符路径 |\t默认 /WEB-INF/web.xml\ndocBase |\tContext的Root路径 |\t和Host的appBase相结合, 可确定web应用的实际目录\nfailCtxIfServletStartFails |\t同Host中的failCtxIfServletStartFails, 只对当前Context有效 |\t默认为false\nlogEffectiveWebXml |\t是否日志打印web.xml内容(web.xml由默认的web.xml和应用中的web.xml组成) |\t默认为false\npath |\tweb应用的context path |\t如果为根路径,则配置为空字符串(\"\"), 不能不配置\nprivileged \t| 是否使用Tomcat提供的manager servlet \t| \nreloadable \t| /WEB-INF/classes/ 和/WEB-INF/lib/ 目录中class文件发生变化是否自动重新加载 |\t默认为false\nswallowOutput |\ttrue情况下, System.out和System.err输出将被定向到web应用日志中 |\t默认为false\n\n# Engine\n\nEngine元素表示与特定的Catalina服务相关联的整个请求处理机器。它接收并处理来自一个或多个连接器的所有请求，并将完成的响应返回给连接器，以便最终传输回客户端。\n# Host\nHost元素表示一个虚拟主机，它是一个服务器的网络名称（如“www.mycompany.com”）与运行Tomcat的特定服务器的关联。\n\n# 启动\n\n1. 部署方式\n```\n将打包好的 war 包放在 Tomcat 安装目录下的 webapps 目录下，然后在 bin 目录下执行 startup.bat 或 startup.sh ，Tomcat 会自动解压 webapps 目录下的 war 包。\n\n成功后，可以访问 http://localhost:8080/xxx （xxx 是 war 包文件名）。\n```\n2. 嵌入式\n```\n在 pom.xml 中添加依赖\n\n<dependency>\n  <groupId>org.apache.tomcat.embed</groupId>\n  <artifactId>tomcat-embed-core</artifactId>\n  <version>8.5.24</version>\n</dependency>\n\n添加 SimpleEmbedTomcatServer.java 文件\n```\n\n","slug":"tomcat复习","published":1,"updated":"2018-11-02T06:24:46.033Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzpx004bdcyuo9aya2fl","content":"<h1 id=\"Tomcat是什么\"><a href=\"#Tomcat是什么\" class=\"headerlink\" title=\"Tomcat是什么?\"></a>Tomcat是什么?</h1><p>Tomcat 是由 Apache 开发的一个 Servlet 容器，实现了对 Servlet 和 JSP 的支持，并提供了作为Web服务器的一些特有功能，如Tomcat管理和控制平台、安全域管理和Tomcat阀等。</p>\n<p>由于 Tomcat 本身也内含了一个 HTTP 服务器，它也可以被视作一个单独的 Web 服务器。但是，不能将 Tomcat 和 Apache HTTP 服务器混淆，Apache HTTP 服务器是一个用 C 语言实现的 HTTP Web 服务器；这两个 HTTP web server 不是捆绑在一起的。Tomcat 包含了一个配置管理工具，也可以通过编辑XML格式的配置文件来进行配置。</p>\n<h1 id=\"tomcat重要目录\"><a href=\"#tomcat重要目录\" class=\"headerlink\" title=\"tomcat重要目录\"></a>tomcat重要目录</h1><ul>\n<li>/bin -Tomcat脚本存放目录. .sh文件用于Unix文件</li>\n<li>/conf - Tomcat配置文件目录</li>\n<li>/logs - Tomcat默认日志目录</li>\n<li>/webapps - webapp 运行目录</li>\n</ul>\n<h1 id=\"web工程发布目录结构\"><a href=\"#web工程发布目录结构\" class=\"headerlink\" title=\"web工程发布目录结构\"></a>web工程发布目录结构</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|-- webapp                         # 站点根目录</span><br><span class=\"line\">    |-- META-INF                   # META-INF 目录</span><br><span class=\"line\">    |   `-- MANIFEST.MF            # 配置清单文件</span><br><span class=\"line\">    |-- WEB-INF                    # WEB-INF 目录</span><br><span class=\"line\">    |   |-- classes                # class文件目录</span><br><span class=\"line\">    |   |   |-- *.class            # 程序需要的 class 文件</span><br><span class=\"line\">    |   |   `-- *.xml              # 程序需要的 xml 文件</span><br><span class=\"line\">    |   |-- lib                    # 库文件夹</span><br><span class=\"line\">    |   |   `-- *.jar              # 程序需要的 jar 包</span><br><span class=\"line\">    |   `-- web.xml                # Web应用程序的部署描述文件</span><br><span class=\"line\">    |-- &lt;userdir&gt;                  # 自定义的目录</span><br><span class=\"line\">    |-- &lt;userfiles&gt;                # 自定义的资源文件</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webapp：工程发布文件夹。其实每个 war 包都可以视为 webapp 的压缩包。</span><br><span class=\"line\"></span><br><span class=\"line\">META-INF：META-INF 目录用于存放工程自身相关的一些信息，元文件信息，通常由开发工具，环境自动生成。</span><br><span class=\"line\"></span><br><span class=\"line\">WEB-INF：Java web应用的安全目录。所谓安全就是客户端无法访问，只有服务端可以访问的目录。</span><br><span class=\"line\"></span><br><span class=\"line\">/WEB-INF/classes：存放程序所需要的所有 Java class 文件。</span><br><span class=\"line\"></span><br><span class=\"line\">/WEB-INF/lib：存放程序所需要的所有 jar 文件。</span><br><span class=\"line\"></span><br><span class=\"line\">/WEB-INF/web.xml：web 应用的部署配置文件。它是工程中最重要的配置文件，它描述了 servlet 和组成应用的其它组件，以及应用初始化参数、安全管理约束等</span><br></pre></td></tr></table></figure>\n<h1 id=\"Server\"><a href=\"#Server\" class=\"headerlink\" title=\"Server\"></a>Server</h1><p>Server元表示整个Catelina servlet容器<br>因此,它必须是conf/server.xml配置文件的根元素,它的属性代表了整个servlet容器的特性</p>\n<h2 id=\"属性表\"><a href=\"#属性表\" class=\"headerlink\" title=\"属性表\"></a>属性表</h2><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>classname</td>\n<td>这个类必须实现org.apache.catalina.Server接口</td>\n<td>默认org.apache.catalina.core.StandardServer</td>\n</tr>\n<tr>\n<td>address</td>\n<td>服务器等待关机命令的TCP/IP地址. 如果没有指定地址,则使用localhost</td>\n<td></td>\n</tr>\n<tr>\n<td>port</td>\n<td>服务器等待关机命令的TCP/IP端口号.设置-1以禁止关闭端口</td>\n</tr>\n<tr>\n<td>shutdown</td>\n<td>必须通过TCP / IP连接接收到指定端口号的命令字符串，以关闭Tomcat。</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h1><p>Service元素表示一个或多个连接器组件的组合，这些组件共享一个用于处理传入请求的引擎组件。Server 中可以有多个 Service。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class=\"line\">&lt;Server port=&quot;8080&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</span><br><span class=\"line\">  &lt;Service name=&quot;xxx&quot;&gt;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  &lt;/Service&gt;</span><br><span class=\"line\">&lt;/Server&gt;</span><br></pre></td></tr></table></figure></p>\n<p>#Executor<br>executor表示可以在Tomcat的组件之间共享的线程池<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Service name=&quot;xxx&quot;&gt;</span><br><span class=\"line\">  &lt;Executor name=&quot;tomcatThreadPool&quot; namePrefix=&quot;catalina-exec-&quot; maxThreads=&quot;300&quot; minSpareThreads=&quot;25&quot;/&gt;</span><br><span class=\"line\">&lt;/Service&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"Connector\"><a href=\"#Connector\" class=\"headerlink\" title=\"Connector\"></a>Connector</h1><p>Connector代表连接组件.Tomcat 支持三种协议：HTTP/1.1、HTTP/2.0、AJP。</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>备注 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>asyncTimeout</td>\n<td>Servlet3.0规范中的异步请求超时</td>\n<td>默认30s</td>\n</tr>\n<tr>\n<td>port</td>\n<td>请求连接的TCP Port</td>\n<td>设置为0,则会随机选取一个未占用的端口号</td>\n</tr>\n<tr>\n<td>protocol</td>\n<td>协议. 一般情况下设置为 HTTP/1.1,这种情况下连接模型会在NIO和APR/native中自动根据配置选择     </td>\n</tr>\n<tr>\n<td>URIEncoding</td>\n<td>对URI的编码方式.</td>\n<td>如果设置系统变量org.apache.catalina.STRICT_SERVLET_COMPLIANCE为true,使用 ISO-8859-1编码;如果未设置此系统变量且未设置此属性, 使用UTF-8编码</td>\n</tr>\n<tr>\n<td>useBodyEncodingForURI</td>\n<td>是否采用指定的contentType而不是URIEncoding来编码URI中的请求参数</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Context\"><a href=\"#Context\" class=\"headerlink\" title=\"Context\"></a>Context</h1><p>Context元素表示一个Web应用程序, 它在特定的虚拟主机中运行,每个web应用程序都基于Web应用程序存档（WAR）文件，或者包含相应的解包内容的相应目录，如Servlet规范中所述。</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>备注 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>altDDName</td>\n<td>web.xml部署描述符路径</td>\n<td>默认 /WEB-INF/web.xml</td>\n</tr>\n<tr>\n<td>docBase</td>\n<td>Context的Root路径</td>\n<td>和Host的appBase相结合, 可确定web应用的实际目录</td>\n</tr>\n<tr>\n<td>failCtxIfServletStartFails</td>\n<td>同Host中的failCtxIfServletStartFails, 只对当前Context有效</td>\n<td>默认为false</td>\n</tr>\n<tr>\n<td>logEffectiveWebXml</td>\n<td>是否日志打印web.xml内容(web.xml由默认的web.xml和应用中的web.xml组成)</td>\n<td>默认为false</td>\n</tr>\n<tr>\n<td>path</td>\n<td>web应用的context path</td>\n<td>如果为根路径,则配置为空字符串(“”), 不能不配置</td>\n</tr>\n<tr>\n<td>privileged</td>\n<td>是否使用Tomcat提供的manager servlet</td>\n<td></td>\n</tr>\n<tr>\n<td>reloadable</td>\n<td>/WEB-INF/classes/ 和/WEB-INF/lib/ 目录中class文件发生变化是否自动重新加载</td>\n<td>默认为false</td>\n</tr>\n<tr>\n<td>swallowOutput</td>\n<td>true情况下, System.out和System.err输出将被定向到web应用日志中</td>\n<td>默认为false</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Engine\"><a href=\"#Engine\" class=\"headerlink\" title=\"Engine\"></a>Engine</h1><p>Engine元素表示与特定的Catalina服务相关联的整个请求处理机器。它接收并处理来自一个或多个连接器的所有请求，并将完成的响应返回给连接器，以便最终传输回客户端。</p>\n<h1 id=\"Host\"><a href=\"#Host\" class=\"headerlink\" title=\"Host\"></a>Host</h1><p>Host元素表示一个虚拟主机，它是一个服务器的网络名称（如“<a href=\"http://www.mycompany.com”）与运行Tomcat的特定服务器的关联。\" target=\"_blank\" rel=\"noopener\">www.mycompany.com”）与运行Tomcat的特定服务器的关联。</a></p>\n<h1 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h1><ol>\n<li><p>部署方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">将打包好的 war 包放在 Tomcat 安装目录下的 webapps 目录下，然后在 bin 目录下执行 startup.bat 或 startup.sh ，Tomcat 会自动解压 webapps 目录下的 war 包。</span><br><span class=\"line\"></span><br><span class=\"line\">成功后，可以访问 http://localhost:8080/xxx （xxx 是 war 包文件名）。</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>嵌入式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在 pom.xml 中添加依赖</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">  &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;</span><br><span class=\"line\">  &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;</span><br><span class=\"line\">  &lt;version&gt;8.5.24&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">添加 SimpleEmbedTomcatServer.java 文件</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Tomcat是什么\"><a href=\"#Tomcat是什么\" class=\"headerlink\" title=\"Tomcat是什么?\"></a>Tomcat是什么?</h1><p>Tomcat 是由 Apache 开发的一个 Servlet 容器，实现了对 Servlet 和 JSP 的支持，并提供了作为Web服务器的一些特有功能，如Tomcat管理和控制平台、安全域管理和Tomcat阀等。</p>\n<p>由于 Tomcat 本身也内含了一个 HTTP 服务器，它也可以被视作一个单独的 Web 服务器。但是，不能将 Tomcat 和 Apache HTTP 服务器混淆，Apache HTTP 服务器是一个用 C 语言实现的 HTTP Web 服务器；这两个 HTTP web server 不是捆绑在一起的。Tomcat 包含了一个配置管理工具，也可以通过编辑XML格式的配置文件来进行配置。</p>\n<h1 id=\"tomcat重要目录\"><a href=\"#tomcat重要目录\" class=\"headerlink\" title=\"tomcat重要目录\"></a>tomcat重要目录</h1><ul>\n<li>/bin -Tomcat脚本存放目录. .sh文件用于Unix文件</li>\n<li>/conf - Tomcat配置文件目录</li>\n<li>/logs - Tomcat默认日志目录</li>\n<li>/webapps - webapp 运行目录</li>\n</ul>\n<h1 id=\"web工程发布目录结构\"><a href=\"#web工程发布目录结构\" class=\"headerlink\" title=\"web工程发布目录结构\"></a>web工程发布目录结构</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|-- webapp                         # 站点根目录</span><br><span class=\"line\">    |-- META-INF                   # META-INF 目录</span><br><span class=\"line\">    |   `-- MANIFEST.MF            # 配置清单文件</span><br><span class=\"line\">    |-- WEB-INF                    # WEB-INF 目录</span><br><span class=\"line\">    |   |-- classes                # class文件目录</span><br><span class=\"line\">    |   |   |-- *.class            # 程序需要的 class 文件</span><br><span class=\"line\">    |   |   `-- *.xml              # 程序需要的 xml 文件</span><br><span class=\"line\">    |   |-- lib                    # 库文件夹</span><br><span class=\"line\">    |   |   `-- *.jar              # 程序需要的 jar 包</span><br><span class=\"line\">    |   `-- web.xml                # Web应用程序的部署描述文件</span><br><span class=\"line\">    |-- &lt;userdir&gt;                  # 自定义的目录</span><br><span class=\"line\">    |-- &lt;userfiles&gt;                # 自定义的资源文件</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webapp：工程发布文件夹。其实每个 war 包都可以视为 webapp 的压缩包。</span><br><span class=\"line\"></span><br><span class=\"line\">META-INF：META-INF 目录用于存放工程自身相关的一些信息，元文件信息，通常由开发工具，环境自动生成。</span><br><span class=\"line\"></span><br><span class=\"line\">WEB-INF：Java web应用的安全目录。所谓安全就是客户端无法访问，只有服务端可以访问的目录。</span><br><span class=\"line\"></span><br><span class=\"line\">/WEB-INF/classes：存放程序所需要的所有 Java class 文件。</span><br><span class=\"line\"></span><br><span class=\"line\">/WEB-INF/lib：存放程序所需要的所有 jar 文件。</span><br><span class=\"line\"></span><br><span class=\"line\">/WEB-INF/web.xml：web 应用的部署配置文件。它是工程中最重要的配置文件，它描述了 servlet 和组成应用的其它组件，以及应用初始化参数、安全管理约束等</span><br></pre></td></tr></table></figure>\n<h1 id=\"Server\"><a href=\"#Server\" class=\"headerlink\" title=\"Server\"></a>Server</h1><p>Server元表示整个Catelina servlet容器<br>因此,它必须是conf/server.xml配置文件的根元素,它的属性代表了整个servlet容器的特性</p>\n<h2 id=\"属性表\"><a href=\"#属性表\" class=\"headerlink\" title=\"属性表\"></a>属性表</h2><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>classname</td>\n<td>这个类必须实现org.apache.catalina.Server接口</td>\n<td>默认org.apache.catalina.core.StandardServer</td>\n</tr>\n<tr>\n<td>address</td>\n<td>服务器等待关机命令的TCP/IP地址. 如果没有指定地址,则使用localhost</td>\n<td></td>\n</tr>\n<tr>\n<td>port</td>\n<td>服务器等待关机命令的TCP/IP端口号.设置-1以禁止关闭端口</td>\n</tr>\n<tr>\n<td>shutdown</td>\n<td>必须通过TCP / IP连接接收到指定端口号的命令字符串，以关闭Tomcat。</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h1><p>Service元素表示一个或多个连接器组件的组合，这些组件共享一个用于处理传入请求的引擎组件。Server 中可以有多个 Service。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class=\"line\">&lt;Server port=&quot;8080&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</span><br><span class=\"line\">  &lt;Service name=&quot;xxx&quot;&gt;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  &lt;/Service&gt;</span><br><span class=\"line\">&lt;/Server&gt;</span><br></pre></td></tr></table></figure></p>\n<p>#Executor<br>executor表示可以在Tomcat的组件之间共享的线程池<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Service name=&quot;xxx&quot;&gt;</span><br><span class=\"line\">  &lt;Executor name=&quot;tomcatThreadPool&quot; namePrefix=&quot;catalina-exec-&quot; maxThreads=&quot;300&quot; minSpareThreads=&quot;25&quot;/&gt;</span><br><span class=\"line\">&lt;/Service&gt;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"Connector\"><a href=\"#Connector\" class=\"headerlink\" title=\"Connector\"></a>Connector</h1><p>Connector代表连接组件.Tomcat 支持三种协议：HTTP/1.1、HTTP/2.0、AJP。</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>备注 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>asyncTimeout</td>\n<td>Servlet3.0规范中的异步请求超时</td>\n<td>默认30s</td>\n</tr>\n<tr>\n<td>port</td>\n<td>请求连接的TCP Port</td>\n<td>设置为0,则会随机选取一个未占用的端口号</td>\n</tr>\n<tr>\n<td>protocol</td>\n<td>协议. 一般情况下设置为 HTTP/1.1,这种情况下连接模型会在NIO和APR/native中自动根据配置选择     </td>\n</tr>\n<tr>\n<td>URIEncoding</td>\n<td>对URI的编码方式.</td>\n<td>如果设置系统变量org.apache.catalina.STRICT_SERVLET_COMPLIANCE为true,使用 ISO-8859-1编码;如果未设置此系统变量且未设置此属性, 使用UTF-8编码</td>\n</tr>\n<tr>\n<td>useBodyEncodingForURI</td>\n<td>是否采用指定的contentType而不是URIEncoding来编码URI中的请求参数</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Context\"><a href=\"#Context\" class=\"headerlink\" title=\"Context\"></a>Context</h1><p>Context元素表示一个Web应用程序, 它在特定的虚拟主机中运行,每个web应用程序都基于Web应用程序存档（WAR）文件，或者包含相应的解包内容的相应目录，如Servlet规范中所述。</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>备注 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>altDDName</td>\n<td>web.xml部署描述符路径</td>\n<td>默认 /WEB-INF/web.xml</td>\n</tr>\n<tr>\n<td>docBase</td>\n<td>Context的Root路径</td>\n<td>和Host的appBase相结合, 可确定web应用的实际目录</td>\n</tr>\n<tr>\n<td>failCtxIfServletStartFails</td>\n<td>同Host中的failCtxIfServletStartFails, 只对当前Context有效</td>\n<td>默认为false</td>\n</tr>\n<tr>\n<td>logEffectiveWebXml</td>\n<td>是否日志打印web.xml内容(web.xml由默认的web.xml和应用中的web.xml组成)</td>\n<td>默认为false</td>\n</tr>\n<tr>\n<td>path</td>\n<td>web应用的context path</td>\n<td>如果为根路径,则配置为空字符串(“”), 不能不配置</td>\n</tr>\n<tr>\n<td>privileged</td>\n<td>是否使用Tomcat提供的manager servlet</td>\n<td></td>\n</tr>\n<tr>\n<td>reloadable</td>\n<td>/WEB-INF/classes/ 和/WEB-INF/lib/ 目录中class文件发生变化是否自动重新加载</td>\n<td>默认为false</td>\n</tr>\n<tr>\n<td>swallowOutput</td>\n<td>true情况下, System.out和System.err输出将被定向到web应用日志中</td>\n<td>默认为false</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Engine\"><a href=\"#Engine\" class=\"headerlink\" title=\"Engine\"></a>Engine</h1><p>Engine元素表示与特定的Catalina服务相关联的整个请求处理机器。它接收并处理来自一个或多个连接器的所有请求，并将完成的响应返回给连接器，以便最终传输回客户端。</p>\n<h1 id=\"Host\"><a href=\"#Host\" class=\"headerlink\" title=\"Host\"></a>Host</h1><p>Host元素表示一个虚拟主机，它是一个服务器的网络名称（如“<a href=\"http://www.mycompany.com”）与运行Tomcat的特定服务器的关联。\" target=\"_blank\" rel=\"noopener\">www.mycompany.com”）与运行Tomcat的特定服务器的关联。</a></p>\n<h1 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h1><ol>\n<li><p>部署方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">将打包好的 war 包放在 Tomcat 安装目录下的 webapps 目录下，然后在 bin 目录下执行 startup.bat 或 startup.sh ，Tomcat 会自动解压 webapps 目录下的 war 包。</span><br><span class=\"line\"></span><br><span class=\"line\">成功后，可以访问 http://localhost:8080/xxx （xxx 是 war 包文件名）。</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>嵌入式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在 pom.xml 中添加依赖</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">  &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;</span><br><span class=\"line\">  &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;</span><br><span class=\"line\">  &lt;version&gt;8.5.24&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">添加 SimpleEmbedTomcatServer.java 文件</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n"},{"title":"B树B-树B+树B*树总结","date":"2018-07-18T06:42:54.000Z","_content":"\n题目1： Mysql数据库用过吧？l里面的索引是基于什么数据结构。\n\n答：主要是基于Hash表和B+树\n\n题目2： 很好请你说一下B+树的实现细节是什么样的？B-树和B+树有什么区别？联合索引在B+树中如何存储？\n\n答: 首先，数据库使用树型结构来增加查询效率，并保持有序。那么，为什么不使用二叉树来实现数据结构呢，二叉树算法时间复杂度是lg(N)，查询速度和比较次数都是较小的。\n\n实际上，查询索引操作最耗资源的不在内存中，而是磁盘IO。索引是存在磁盘上的，当数据量比较大的时候，索引的大小可能达到几个G。那么，我们利用索引进行查询的时候，不可能把索引直接加载到内存中，只能一次读取一个磁盘页，一个磁盘页对应着一个节点，一次读取操作时一个磁盘io。\n\n在二叉树查询时，最坏的情况下查找的次数是树的高度，即io次数为树的高度。B-树就是比二叉树“矮胖”的树。\n\n二叉树的特征如下：\n\n1. 根节点至少有两个子女\n\n2. 每个中间节点包含k-1个元素和k个孩子，其中 m/2 <= k <= m\n\n3. 每个叶子节点包含k-1个元素，其中 m/2 <= k <= m\n\n4. 所有叶子节点位于同一层\n\n5. 节点中的元素从小到大排列，正好是孩子节点的值域。（就是孩子节点的元素都比父节点中元素的最小值大，比父节点元素的最大值小）\n\nB-树查询的次数并不比二叉树的次数小，但是相比起磁盘io速度，内存中比较的耗时就不足为提了。所以只要树的高度足够低，io次数少，就可以提升查找性能。而每个节点中有多个元素，都只在内存中操作。\n\n而B+树是基于B-树的，增加了如下规则：\n\n1. 有k个子树的中间节点包含有k个元素（B树中是k-1个元素），每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。\n\n2. 所有的叶子结点中包含了全部元素的信息，及指向含这些元素记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。\n\n3. 所有的中间节点元素都同时存在于子节点，在子节点元素中是最大（或最小）元素。\n\n所以，B+树对比B-树有如下好处：\n\nio次数少：b+树中间节点只存索引，不存在实际的数据，所以可以存储更多的数据。索引树更加的矮胖，io次数更少。\n性能稳定：b+树数据只存在于叶子节点，查询性能稳定\n范围查询简单：b+树不需要中序遍历，遍历链表即可。\n***\n<div class=\"markdown_views\">\n                <p>B树是为实现高效的磁盘存取而设计的多叉平衡搜索树。这个概念在文件系统，数据库系统中非常重要。当然，有关于B树的产生，发展，结构等等方面的介绍已经非常详细，所以本文只是介绍有关于B树和B+树最核心的知识点，也算是我本人的学习笔记。至于详细的资料，因为毕竟有着太多，所以不再赘述。可以向大家推荐一篇博客：<a href=\"http://blog.csdn.net/v_july_v/article/details/6530142\" rel=\"nofollow\" target=\"_blank\">从B树、B+树、B*树谈到R 树</a>，这篇文章中，作者对于B树系列数据结构的讲解非常详细，我的这篇博客，也是大量参考了人家的很多例子和描述。</p>\n\n\n\n<h2 id=\"b树\"><a name=\"t0\"></a>B树</h2>\n\n\n\n<h3 id=\"一基本原理\"><a name=\"t1\"></a>一、基本原理</h3>\n\n<p>首先，简单说一下B树产生的原因。B树是一种查找树，我们知道，这一类树（比如二叉查找树，红黑树等等）最初生成的目的都是为了解决某种系统中，查找效率低的问题。B树也是如此，它最初启发于二叉查找树，二叉查找树的特点是每个非叶节点都只有两个孩子节点。然而这种做法会导致当数据量非常大时，二叉查找树的深度过深，搜索算法自根节点向下搜索时，需要访问的节点也就变的相当多。如果这些节点存储在外存储器中，每访问一个节点，相当于就是进行了一次I/O操作，随着树高度的增加，频繁的I/O操作一定会降低查询的效率。</p>\n\n<p>这里有一个基本的概念，就是说我们从外存储器中读取信息的步骤，简单来分，大致有两步：</p>\n\n<ol>\n<li>找到存储这个数据所对应的磁盘页面，这个过程是机械化的过程，需要依靠磁臂的转动，找到对应磁道，所以耗时长。</li>\n<li>读取数据进内存，并实施运算，这是电子化的过程，相当快。</li>\n</ol>\n\n<p>综上，对于外存储器的信息读取最大的时间消耗在于寻找磁盘页面。那么一个基本的想法就是能不能减少这种读取的次数，在一个磁盘页面上，多存储一些索引信息。B树的基本逻辑就是这个思路，它要改二叉为多叉，每个节点存储更多的指针信息，以降低I/O操作数。</p>\n\n\n\n<h3 id=\"二基本结构\"><a name=\"t2\"></a>二、基本结构</h3>\n\n\n\n<h4 id=\"1-b树的定义\">1. B树的定义</h4>\n\n<p>有关于B树概念的定义，不同的资料在表述上有所差别。我在这里采用《算导》中的定义，用最小度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mi\" id=\"MathJax-Span-3\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">t</script>来定义B树。一棵最小度为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-2-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-4\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-5\"><span class=\"mi\" id=\"MathJax-Span-6\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-2\">t</script>的B树是满足如下四个条件的平衡多叉树：</p>\n\n<ul>\n<li><p>每个节点最多包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-3-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-7\" style=\"width: 3.128em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.604em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.53em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-8\"><span class=\"mn\" id=\"MathJax-Span-9\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mi\" id=\"MathJax-Span-10\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-11\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-12\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>2</mn><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-3\">2t - 1</script>个关键字；除根节点外的每个节点至少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-4-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-13\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-14\"><span class=\"mi\" id=\"MathJax-Span-15\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-16\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-17\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-4\">t - 1</script>个关键字（<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-5-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2264;</mo><mn>2</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-18\" style=\"width: 2.659em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.188em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.14em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-19\"><span class=\"mi\" id=\"MathJax-Span-20\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-21\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mn\" id=\"MathJax-Span-22\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">2</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>≤</mo><mn>2</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-5\">t \\leq 2</script>），根节点至少有一个关键字；</p></li>\n<li><p>一个节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-6-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-23\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-24\"><span class=\"mi\" id=\"MathJax-Span-25\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-6\">u</script>中的关键字按非降序排列：<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-7-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>&amp;#x2264;</mo><mo>&amp;#x2026;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>n</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-26\" style=\"width: 15.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 12.865em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1012.87em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-27\"><span class=\"mi\" id=\"MathJax-Span-28\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-29\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-30\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-31\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-32\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-33\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-34\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-35\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-36\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-37\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-38\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-39\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-40\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-41\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-42\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-43\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mo\" id=\"MathJax-Span-44\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">…</span><span class=\"mi\" id=\"MathJax-Span-45\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">u</span><span class=\"mo\" id=\"MathJax-Span-46\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-47\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-48\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-49\"><span style=\"display: inline-block; position: relative; width: 0.989em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-50\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-51\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>≤</mo><mo>…</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>n</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-7\">u.key_1 \\leq u.key_2 \\leq \\dots u.key_n</script>；</p></li>\n<li><p>每个节点的关键字对其子树的范围分割。设节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-8-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-52\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-53\"><span class=\"mi\" id=\"MathJax-Span-54\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-8\">u</script>有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-9-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>+</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-55\" style=\"width: 2.815em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.344em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.27em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-56\"><span class=\"mi\" id=\"MathJax-Span-57\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-58\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-59\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>+</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-9\">n + 1</script>个指针，指向其<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-10-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>+</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-60\" style=\"width: 2.815em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.344em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.27em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-61\"><span class=\"mi\" id=\"MathJax-Span-62\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-63\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-64\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>+</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-10\">n + 1</script>棵子树，指针为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-11-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>&amp;#x2026;</mo><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>n</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-65\" style=\"width: 6.878em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.729em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1005.73em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-66\"><span class=\"mi\" id=\"MathJax-Span-67\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-68\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-69\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.932em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-70\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mn\" id=\"MathJax-Span-71\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-72\" style=\"font-family: MathJax_Main;\">,</span><span class=\"mo\" id=\"MathJax-Span-73\" style=\"font-family: MathJax_Main; padding-left: 0.167em;\">…</span><span class=\"mi\" id=\"MathJax-Span-74\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">u</span><span class=\"mo\" id=\"MathJax-Span-75\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-76\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.002em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-77\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-78\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>n</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-11\">u.p_1, \\dots u.p_n</script>，关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-12-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-79\" style=\"width: 1.044em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.833em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.389em, 1000.83em, 2.554em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-80\"><span class=\"msubsup\" id=\"MathJax-Span-81\"><span style=\"display: inline-block; position: relative; width: 0.84em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-82\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mi\" id=\"MathJax-Span-83\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.252em; border-left: 0px solid; width: 0px; height: 1.147em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>k</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-12\">k_i</script>为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-13-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-84\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-85\"><span class=\"mi\" id=\"MathJax-Span-86\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-87\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-88\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-89\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-90\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-13\">u.p_i</script>所指的子树中的关键字，有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-14-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><msub><mi>k</mi><mn>2</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>&amp;#x2026;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-91\" style=\"width: 15.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 13.073em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1012.99em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-92\"><span class=\"msubsup\" id=\"MathJax-Span-93\"><span style=\"display: inline-block; position: relative; width: 0.95em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-94\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mn\" id=\"MathJax-Span-95\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-96\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-97\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-98\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-99\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-100\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-101\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-102\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-103\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-104\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-105\" style=\"padding-left: 0.278em;\"><span style=\"display: inline-block; position: relative; width: 0.95em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-106\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mn\" id=\"MathJax-Span-107\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-108\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-109\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-110\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-111\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-112\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-113\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-114\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-115\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-116\" style=\"font-family: MathJax_Main; padding-left: 0.167em;\">…</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>k</mi><mn>1</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>≤</mo><msub><mi>k</mi><mn>2</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>…</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-14\">k_1 \\leq u.key_1 \\leq k_2 \\leq u.key_2 \\dots</script>成立；</p></li>\n<li><p>所有叶子节点具有相同的深度，即树的高度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-15-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-117\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-118\"><span class=\"mi\" id=\"MathJax-Span-119\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>h</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-15\">h</script>。这表明B树是平衡的。平衡性其实正是B树名字的来源，B表示的正是单词Balanced；</p></li>\n</ul>\n\n<p>一个标准的B树如下图：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320103506070?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%\" height=\"50%\"></center><p></p>\n\n\n\n<h4 id=\"2-b树的高度\">2. B树的高度</h4>\n\n<p>我直接给出结论了：对于一个包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-16-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-120\" style=\"width: 0.784em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.625em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.61em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-121\"><span class=\"mi\" id=\"MathJax-Span-122\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-16\">n</script>个关键字(<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-17-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>&amp;#x2265;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-123\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.38em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-124\"><span class=\"mi\" id=\"MathJax-Span-125\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-126\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-127\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>≥</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-17\">n \\geq 1</script>)，最小度数<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-18-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2265;</mo><mn>2</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-128\" style=\"width: 2.659em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.188em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.14em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-129\"><span class=\"mi\" id=\"MathJax-Span-130\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-131\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-132\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">2</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>≥</mo><mn>2</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-18\">t \\geq 2</script>的B树T，其高度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-19-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-133\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-134\"><span class=\"mi\" id=\"MathJax-Span-135\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>h</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-19\">h</script>满足如下规律：</p>\n\n\n\n<p><span class=\"MathJax_Preview\"></span></p><div class=\"MathJax_Display\" role=\"textbox\" aria-readonly=\"true\" style=\"text-align: center;\"></div><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-20-Frame\" tabindex=\"0\" style=\"text-align: center; position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mo>&amp;#x2264;</mo><msub><mi>log</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi></mrow></msub><mo>&amp;#x2061;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-136\" style=\"width: 7.682em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 6.369em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.8em, 1006.37em, 3.186em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-137\"><span class=\"mi\" id=\"MathJax-Span-138\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span><span class=\"mo\" id=\"MathJax-Span-139\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-140\" style=\"padding-left: 0.278em;\"><span style=\"display: inline-block; position: relative; width: 1.608em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.116em, 1001.26em, 4.373em, -1000em); top: -3.988em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-141\" style=\"font-family: MathJax_Main;\">log</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; top: -3.747em; left: 1.278em;\"><span class=\"texatom\" id=\"MathJax-Span-142\"><span class=\"mrow\" id=\"MathJax-Span-143\"><span class=\"mi\" id=\"MathJax-Span-144\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span></span></span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-145\"></span><span class=\"texatom\" id=\"MathJax-Span-146\" style=\"padding-left: 0.167em;\"><span class=\"mrow\" id=\"MathJax-Span-147\"><span class=\"mfrac\" id=\"MathJax-Span-148\"><span style=\"display: inline-block; position: relative; width: 2.442em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.144em, 1002.25em, 4.249em, -1000em); top: -4.665em; left: 50%; margin-left: -1.161em;\"><span class=\"mrow\" id=\"MathJax-Span-149\"><span class=\"mi\" id=\"MathJax-Span-150\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-151\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-152\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.144em, 1000.45em, 4.167em, -1000em); top: -3.302em; left: 50%; margin-left: -0.25em;\"><span class=\"mn\" id=\"MathJax-Span-153\" style=\"font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1002.44em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.442em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.895em; border-left: 0px solid; width: 0px; height: 2.577em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi>h</mi><mo>≤</mo><msub><mi>log</mi><mrow class=\"MJX-TeXAtom-ORD\"><mi>t</mi></mrow></msub><mo>⁡</mo><mrow class=\"MJX-TeXAtom-ORD\"><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-20\">\\begin{equation}\nh \\leq \\log_{t}{\\frac{n + 1}{2}}\n\\end{equation}</script><p></p>\n\n<p>在搜索B树时，很明显，访问节点（即读取磁盘）的次数与树的高度呈正比，而B树与红黑树和普通的二叉查找树相比，虽然高度都是对数数量级，但是显然B树中<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-21-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi><mi>o</mi><mi>g</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-154\" style=\"width: 1.513em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.25em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1001.25em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-155\"><span class=\"mi\" id=\"MathJax-Span-156\" style=\"font-family: MathJax_Math; font-style: italic;\">l</span><span class=\"mi\" id=\"MathJax-Span-157\" style=\"font-family: MathJax_Math; font-style: italic;\">o</span><span class=\"mi\" id=\"MathJax-Span-158\" style=\"font-family: MathJax_Math; font-style: italic;\">g<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>l</mi><mi>o</mi><mi>g</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-21\">log</script>函数的底可以比2更大，因此，和二叉树相比，极大地减少了磁盘读取的次数。</p>\n\n\n\n<h3 id=\"三搜索算法\"><a name=\"t3\"></a>三、搜索算法</h3>\n\n<p>这里，我直接用博客<a href=\"http://blog.csdn.net/v_july_v/article/details/6530142\" rel=\"nofollow\" target=\"_blank\">从B树、B+树、B*树谈到R 树</a>中的例子（因为这个例子非常好，也有现成的图示，就直接拿来用，不再自己班门弄斧了），一棵已经建立好的B树如下图所示，我们的目的是查找关键字为29的文件：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320103957037?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%\"></center><p></p>\n\n<p>先简单对上图说明一下：</p>\n\n<ul>\n<li><p>图中的小红方块表示对应关键字所代表的文件的存储位置，实际上可以看做是一个地址，比如根节点中17旁边的小红块表示的就是关键字17所对应的文件在硬盘中的存储地址。</p></li>\n<li><p>P是指针，不用多说了，需要注意的是：指针，关键字，以及关键字所代表的文件地址这三样东西合起来构成了B树的一个节点，这个节点存储在一个磁盘块上</p></li>\n</ul>\n\n<p>下面，看看搜索关键字的29的文件的过程：</p>\n\n<ol>\n<li><p>从根节点开始，读取根节点信息，根节点有2个关键字：17和35。因为17 &lt; 29 &lt; 35，所以找到指针P2指向的子树，也就是磁盘块3（1次I/0操作）</p></li>\n<li><p>读取当前节点信息，当前节点有2个关键字：26和30。26 &lt; 29 &lt; 30，找到指针P2指向的子树，也就是磁盘块8（2次I/0操作）</p></li>\n<li><p>读取当前节点信息，当前节点有2个关键字：28和29。找到了！（3次I/0操作）</p></li>\n</ol>\n\n<p>由上面的过程可见，同样的操作，如果使用平衡二叉树，那么需要至少4次I/O操作，B树比之二叉树的这种优势，还会随着节点数的增加而增加。另外，因为B树节点中的关键字都是排序好的，所以，在节点中的信息被读入内存之后，可以采用二分查找这种快速的查找方式，更进一步减少了读入内存之后的计算时间，由此更能说明对于外存数据结构来说，I/O次数是其查找信息中最大的时间消耗，而我们要做的所有努力就是尽量在搜索过程中减少I/O操作的次数。</p>\n\n\n\n<h3 id=\"四向b树插入关键字\"><a name=\"t4\"></a>四、向B树插入关键字</h3>\n\n<p>向B树种插入关键字的过程与向二叉查找树中插入关键字的过程类似，但是要稍微复杂一点，因为根据上面B树的定义，我们可以看出，B树每个节点中关键字的个数是有范围要求的，同时，B树是平衡的，所以，如果像二叉查找树那样，直接找到相关的叶子，插入关键字，有可能会导致B树的结构发生变化而这种变化会使得B树不再是B树。</p>\n\n<p>所以，我们这样来设计B树种对新关键字的插入：首先找到要插入的关键字应该插入的叶子节点（为方便描述，设这个叶子节点为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-22-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-159\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-160\"><span class=\"mi\" id=\"MathJax-Span-161\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-22\">u</script>），如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-23-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-162\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-163\"><span class=\"mi\" id=\"MathJax-Span-164\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-23\">u</script>是满的（恰好有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-24-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-165\" style=\"width: 3.128em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.604em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.53em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-166\"><span class=\"mn\" id=\"MathJax-Span-167\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mi\" id=\"MathJax-Span-168\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-169\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-170\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>2</mn><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-24\">2t - 1</script>个关键字），那么由于不能将一个关键字插入满的节点，我们需要对<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-25-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-171\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-172\"><span class=\"mi\" id=\"MathJax-Span-173\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-25\">u</script>按其<font color=\"RED\">当前排在中间关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-26-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-174\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-175\"><span class=\"mi\" id=\"MathJax-Span-176\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-177\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-178\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-179\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-180\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-181\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-182\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-26\">u.key_t</script><font color=\"K\">进行分裂，分裂成两个节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-27-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-183\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.693em, 1002.45em, 2.642em, -1000em); top: -2.292em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-184\"><span class=\"msubsup\" id=\"MathJax-Span-185\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-186\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-187\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-188\" style=\"font-family: MathJax_Main;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-189\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-190\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-191\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.292em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-27\">u_1, u_2</script>；同时，作为分裂标准的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-28-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-192\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-193\"><span class=\"mi\" id=\"MathJax-Span-194\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-195\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-196\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-197\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-198\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-199\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-200\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-28\">u.key_t</script>会被上移到<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-29-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-201\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-202\"><span class=\"mi\" id=\"MathJax-Span-203\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-29\">u</script>的父节点中，在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-30-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-204\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-205\"><span class=\"mi\" id=\"MathJax-Span-206\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-207\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-208\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-209\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-210\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-211\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-212\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-30\">u.key_t</script>插入前，如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-31-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-213\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-214\"><span class=\"mi\" id=\"MathJax-Span-215\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-31\">u</script>的父节点未满，则直接插入即可；如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-32-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-216\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-217\"><span class=\"mi\" id=\"MathJax-Span-218\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-32\">u</script>的父节点已满，则按照上面的方法对<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-33-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-219\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-220\"><span class=\"mi\" id=\"MathJax-Span-221\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-33\">u</script>的父节点分裂，这个过程如果一直不停止的话，最终会导致B树的根节点分裂，B树的高度增加一层。</font></font></p>\n\n<p>我用《算导》中的一个题目展示一下这种插入关键字的过程：</p>\n\n<p>现在我们要将关键字序列：F, S, Q, K, C, L, H, T, V, W, M, R, N, P, A, B, X, Y依次插入一棵最小度为2的B树中。也就是说，这棵树的节点中，最多有3个关键字，最少有1个关键字。</p>\n\n<p><strong>第1步</strong>，F, S, Q可以被插入一个节点（也就是根节点）</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320110812239?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第2步</strong>，插入关键字K，因为节点已满，所以在插入前，发生分裂，中间关键字Q上移，建立了一个新的根节点：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320112233417?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第3步</strong>，插入关键字C:</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320112758203?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第4步</strong>，插入关键字L，L应该被插入到根节点的左侧的孩子中，因为此时该节点已满，所以在插入前，发生分裂：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320113252304?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第5步</strong>，插入关键字H, T, V，这个过程没有发生节点的分裂：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320113755967?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第6步</strong>，插入关键字W，W应该被插入到根节点的最右侧的孩子中，因为此时该节点已满，所以在插入前，关键字T上移，最右端的叶子节点发生分裂：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20171203222249465?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第7步</strong>，插入关键字M，M应该被插入到根节点的左起第2个孩子中，因为此时该节点已满，所以在插入前，发生分裂，分裂之后，中间关键字K上移，导致根节点发生分裂，树高增加1：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20171203222333265?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p>第8步，同样的道理，插入关键字R, N, P, A, B, X, Y：最终得到的B树如下：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20171203222406990?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n\n\n<h3 id=\"五从b树删除关键字\"><a name=\"t5\"></a>五、从B树删除关键字</h3>\n\n<p>删除操作的基本思想和插入操作是一样的，都是不能因为关键字的改变而改变B树的结构。插入操作主要防止的是某个节点中关键字的个数太多，所以采用了分裂；删除则是要防止某个节点中，因删除了关键字而导致这个节点的关键字个数太少，所以采用了合并操作。</p>\n\n<p>下面分三种情况来讨论下删除操作是如何工作的，这个过程的顺序是自根节点起向下遍历B树</p>\n\n<p><strong>Case - 1：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-176-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-222\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-223\"><span class=\"mi\" id=\"MathJax-Span-224\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-176\">k</script>在节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-177-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-225\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-226\"><span class=\"mi\" id=\"MathJax-Span-227\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-177\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-178-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-228\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-229\"><span class=\"mi\" id=\"MathJax-Span-230\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-178\">u</script>是叶子节点，那么直接删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-179-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-231\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-232\"><span class=\"mi\" id=\"MathJax-Span-233\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-179\">k</script></p>\n\n<p><strong>Case - 2：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-180-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-234\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-235\"><span class=\"mi\" id=\"MathJax-Span-236\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-180\">k</script>在节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-181-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-237\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-238\"><span class=\"mi\" id=\"MathJax-Span-239\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-181\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-182-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-240\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-241\"><span class=\"mi\" id=\"MathJax-Span-242\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-182\">u</script>是内部节点，那么分以下3种情况讨论：</p>\n\n<p>(1) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-183-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-243\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-244\"><span class=\"mi\" id=\"MathJax-Span-245\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-183\">u</script>中<font color=\"red\">前于<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-184-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-246\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-247\"><span class=\"mi\" id=\"MathJax-Span-248\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-184\">k</script>的子节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-185-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-249\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-250\"><span class=\"msubsup\" id=\"MathJax-Span-251\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-252\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-253\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-185\">u_1</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-186-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-254\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-255\"><span class=\"mi\" id=\"MathJax-Span-256\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-186\">t</script>个关键字，则找出<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-187-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-257\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-258\"><span class=\"mi\" id=\"MathJax-Span-259\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-187\">k</script>在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-188-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-260\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-261\"><span class=\"msubsup\" id=\"MathJax-Span-262\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-263\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-264\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-188\">u_1</script>为根的子树中的<font color=\"red\">前驱<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-189-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-265\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-266\"><span class=\"msup\" id=\"MathJax-Span-267\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-268\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-269\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-189\">k'</script>（前驱的意思是<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-190-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-270\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-271\"><span class=\"msubsup\" id=\"MathJax-Span-272\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-273\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-274\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-190\">u_1</script>中比<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-191-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-275\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-276\"><span class=\"mi\" id=\"MathJax-Span-277\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-191\">k</script>小的关键字中最大的），然后在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-192-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-278\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-279\"><span class=\"msubsup\" id=\"MathJax-Span-280\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-281\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-282\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-192\">u_1</script>为根的子树中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-193-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-283\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-284\"><span class=\"msup\" id=\"MathJax-Span-285\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-286\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-287\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-193\">k'</script>，并在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-194-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-288\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-289\"><span class=\"mi\" id=\"MathJax-Span-290\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-194\">u</script>中以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-195-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-291\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-292\"><span class=\"msup\" id=\"MathJax-Span-293\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-294\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-295\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-195\">k'</script>替代<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-196-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-296\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-297\"><span class=\"mi\" id=\"MathJax-Span-298\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-196\">k</script></font></font></font></font></p>\n\n<p>(2) 如果上面的条件(1)不成立，也就是说，前于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-197-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-299\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-300\"><span class=\"mi\" id=\"MathJax-Span-301\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-197\">k</script>的子节点中关键字的个数小于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-198-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-302\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-303\"><span class=\"mi\" id=\"MathJax-Span-304\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-198\">t</script>了，那么就去找<font color=\"red\">后于<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-199-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-305\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-306\"><span class=\"mi\" id=\"MathJax-Span-307\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-199\">k</script>的子节点，记为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-200-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-308\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-309\"><span class=\"msubsup\" id=\"MathJax-Span-310\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-311\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-312\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-200\">u_2</script>。若<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-201-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-313\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-314\"><span class=\"msubsup\" id=\"MathJax-Span-315\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-316\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-317\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-201\">u_2</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-202-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-318\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-319\"><span class=\"mi\" id=\"MathJax-Span-320\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-202\">t</script>个关键字，则找出<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-203-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-321\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-322\"><span class=\"mi\" id=\"MathJax-Span-323\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-203\">k</script>在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-204-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-324\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-325\"><span class=\"msubsup\" id=\"MathJax-Span-326\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-327\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-328\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-204\">u_2</script>为根的子树中的<font color=\"red\">后继<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-205-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-329\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-330\"><span class=\"msup\" id=\"MathJax-Span-331\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-332\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-333\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-205\">k'</script>(大于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-206-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-334\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-335\"><span class=\"mi\" id=\"MathJax-Span-336\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-206\">k</script>的关键字中最小的)，然后在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-207-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-337\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-338\"><span class=\"msubsup\" id=\"MathJax-Span-339\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-340\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-341\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-207\">u_2</script>为根的子树中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-208-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-342\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-343\"><span class=\"msup\" id=\"MathJax-Span-344\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-345\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-346\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-208\">k'</script>，并在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-209-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-347\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-348\"><span class=\"mi\" id=\"MathJax-Span-349\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-209\">u</script>中以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-210-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-350\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-351\"><span class=\"msup\" id=\"MathJax-Span-352\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-353\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-354\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-210\">k'</script>替代<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-211-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-355\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-356\"><span class=\"mi\" id=\"MathJax-Span-357\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-211\">k</script>。可以看出（2）是（1）的一个对称过程</font></font></font></font></p>\n\n<p>(3) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-212-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-358\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.693em, 1002.45em, 2.642em, -1000em); top: -2.292em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-359\"><span class=\"msubsup\" id=\"MathJax-Span-360\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-361\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-362\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-363\" style=\"font-family: MathJax_Main;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-364\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-365\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-366\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.292em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-212\">u_1, u_2</script>中的关键字个数都是<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-213-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-367\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-368\"><span class=\"mi\" id=\"MathJax-Span-369\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-370\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-371\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-213\">t - 1</script>，则将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-214-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-372\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-373\"><span class=\"mi\" id=\"MathJax-Span-374\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-214\">k</script>和<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-215-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-375\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-376\"><span class=\"msubsup\" id=\"MathJax-Span-377\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-378\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-379\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-215\">u_2</script>合并后并入<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-216-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-380\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-381\"><span class=\"msubsup\" id=\"MathJax-Span-382\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-383\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-384\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-216\">u_1</script>，这样<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-217-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-385\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-386\"><span class=\"mi\" id=\"MathJax-Span-387\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-217\">u</script>就失去了<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-218-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-388\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-389\"><span class=\"mi\" id=\"MathJax-Span-390\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-218\">k</script>和指向<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-219-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-391\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-392\"><span class=\"msubsup\" id=\"MathJax-Span-393\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-394\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-395\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-219\">u_2</script>的指针，最后递归地从<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-220-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-396\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-397\"><span class=\"msubsup\" id=\"MathJax-Span-398\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-399\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-400\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-220\">u_1</script>中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-221-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-401\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-402\"><span class=\"mi\" id=\"MathJax-Span-403\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-221\">k</script></p>\n\n<p><strong>Case - 3：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-222-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-404\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-405\"><span class=\"mi\" id=\"MathJax-Span-406\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-222\">k</script>不在当前节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-223-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-407\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-408\"><span class=\"mi\" id=\"MathJax-Span-409\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-223\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-224-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-410\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-411\"><span class=\"mi\" id=\"MathJax-Span-412\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-224\">u</script>是内部节点（如果自上而下扫描到叶子都没有这个关键字的话，那就说明要删除的关键字根本就不存在，所以此处只考虑<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-225-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-413\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-414\"><span class=\"mi\" id=\"MathJax-Span-415\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-225\">u</script>是内部节点的情况），则首先确定包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-226-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-416\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-417\"><span class=\"mi\" id=\"MathJax-Span-418\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-226\">k</script>的<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-227-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-419\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-420\"><span class=\"mi\" id=\"MathJax-Span-421\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-227\">u</script>的子树，我们这里设为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-228-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-422\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-423\"><span class=\"mi\" id=\"MathJax-Span-424\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-425\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-426\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-427\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-428\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-228\">u.p_i</script>。如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-229-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-429\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-430\"><span class=\"mi\" id=\"MathJax-Span-431\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-432\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-433\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-434\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-435\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-229\">u.p_i</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-230-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-436\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-437\"><span class=\"mi\" id=\"MathJax-Span-438\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-230\">t</script>个关键字，那么继续扫描，寻找下一个要被扫描的子树；如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-231-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-439\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-440\"><span class=\"mi\" id=\"MathJax-Span-441\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-442\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-443\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-444\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-445\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-231\">u.p_i</script>中只含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-232-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-446\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-447\"><span class=\"mi\" id=\"MathJax-Span-448\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-449\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-450\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-232\">t - 1</script>个关键字，则需要分下面两种情况进行操作：</p>\n\n<p>(1) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-233-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-451\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-452\"><span class=\"mi\" id=\"MathJax-Span-453\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-454\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-455\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-456\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-457\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-233\">u.p_i</script>至少有一个相邻的兄弟比较“丰满”（即这个兄弟至少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-234-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-458\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-459\"><span class=\"mi\" id=\"MathJax-Span-460\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-234\">t</script>个关键字）。则将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-235-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-461\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-462\"><span class=\"mi\" id=\"MathJax-Span-463\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-235\">u</script>中的一个关键字降至<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-236-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-464\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-465\"><span class=\"mi\" id=\"MathJax-Span-466\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-467\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-468\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-469\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-470\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-236\">u.p_i</script>，同时令<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-237-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-471\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-472\"><span class=\"mi\" id=\"MathJax-Span-473\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-474\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-475\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-476\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-477\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-237\">u.p_i</script>的最“丰满”的兄弟中升一个关键至<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-238-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-478\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-479\"><span class=\"mi\" id=\"MathJax-Span-480\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-238\">u</script>。然后继续扫描B树，寻找<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-239-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-481\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-482\"><span class=\"mi\" id=\"MathJax-Span-483\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-239\">k</script></p>\n\n<p>(2) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-240-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-484\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-485\"><span class=\"mi\" id=\"MathJax-Span-486\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-487\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-488\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-489\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-490\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-240\">u.p_i</script>的两个相邻的兄弟都不“丰满”（都只有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-241-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-491\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-492\"><span class=\"mi\" id=\"MathJax-Span-493\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-494\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-495\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-241\">t - 1</script>个关键字）。则令<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-242-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-496\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-497\"><span class=\"mi\" id=\"MathJax-Span-498\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-499\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-500\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-501\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-502\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-242\">u.p_i</script>和其一个兄弟合并，再将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-243-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-503\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-504\"><span class=\"mi\" id=\"MathJax-Span-505\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-243\">u</script>的一个关键字降至新合并的节点。使之成为该节点的中间关键字。</p>\n\n<p>举个例子，就可以清晰看到上面说的这几种删除的情况。拿下图所示的最小度为3的B树为例（即树中除根和叶子之外的节点只能有2，3，4三种情况的关键字个数）：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320142505013?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 1: 删除上图中的关键字F，过程如下：先扫描根节点（含P），再扫描其左孩子（含CGM），发现丰满，继续扫描到左起第二个叶子，然后就是符合<strong>Case - 1</strong>的情况了。结果如下图所示：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20171228154424767?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 2: 再删除M，此时遇到<strong>Case - 2(1)</strong>的情况，结果如下图所示：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320143230759?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 3: 再删除G，G的前驱、后驱都是不丰满的。也就是<strong>Case - 2(3)</strong>的情况，结果如下图所示：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320143617327?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 4: 再删除D，扫描至含CL的节点后，发现它不丰满，且他的兄弟也不丰满。则将节点CL和TX合并，并降关键字P至新合并的节点。也就是<strong>Case - 3(2)</strong>的情况，结果如下图所示，此时，树高减1：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320153842292?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 5: 再删除B，也就是<strong>Case - 3(1)</strong>的情况，结果如下图所示：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320154130371?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>下面总结一下B树的删除原理：</p>\n\n<ol>\n<li>基本原则是不能破坏关键字个数的限制；</li>\n<li>如果在当前节点中，找到了要删的关键字，且当前节点为内部节点。那么，如果有比较丰满的前驱或后继，借一个上来，再把要删的关键字降下去，在子树中递归删除；如果没有比较丰满的前驱或后继，则令前驱与后继合并，把要删的关键字降下去，递归删除；</li>\n<li>如果在当前节点中，还未找到要删的关键字，且当前节点为内部节点。那么去找下一步应该扫描的孩子，并判断这个孩子是否丰满，如果丰满，继续扫描；如果不丰满，则看其有无丰满的兄弟，有的话，从父亲那里接一个，父亲再找其最丰满的兄弟借一个；如果没有丰满的兄弟，则合并，再令父亲下降，以保证B树的结构。</li>\n</ol>\n\n<h2 id=\"b树-1\"><a name=\"t6\"></a>B+树</h2>\n\n\n\n<h3 id=\"b树的定义\"><a name=\"t7\"></a>B+树的定义</h3>\n\n<p>B+树是B树的一种变形，它更适合实际应用中操作系统的文件索引和数据库索引。定义如下：（为和大多资料保持一致，这里使用阶数<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-102-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-506\" style=\"width: 1.096em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.885em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.86em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-507\"><span class=\"mi\" id=\"MathJax-Span-508\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-102\">m</script>来定义B+树，而不像之前的B树中，使用的是最小度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-103-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-509\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-510\"><span class=\"mi\" id=\"MathJax-Span-511\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-103\">t</script>来定义）</p>\n\n<ol>\n<li>除根节点外的内部节点，每个节点最多有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-104-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-512\" style=\"width: 1.074em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.893em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.87em, 2.451em, -1000em); top: -2.262em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-513\"><span class=\"mi\" id=\"MathJax-Span-514\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.262em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.085em; border-left: 0px solid; width: 0px; height: 0.686em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-104\">m</script>个关键字，最少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-105-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2308;</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2309;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-515\" style=\"width: 2.265em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.845em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.393em, 1001.67em, 2.893em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-516\"><span class=\"mo\" id=\"MathJax-Span-517\" style=\"font-family: MathJax_Main;\">⌈</span><span class=\"mfrac\" id=\"MathJax-Span-518\"><span style=\"display: inline-block; position: relative; width: 0.741em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.497em, 1000.61em, 4.174em, -1000em); top: -4.417em; left: 50%; margin-left: -0.31em;\"><span class=\"mi\" id=\"MathJax-Span-519\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">m</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.339em, 1000.32em, 4.167em, -1000em); top: -3.596em; left: 50%; margin-left: -0.177em;\"><span class=\"mn\" id=\"MathJax-Span-520\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1000.74em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.741em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-521\" style=\"font-family: MathJax_Main;\">⌉</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.542em; border-left: 0px solid; width: 0px; height: 1.514em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo fence=\"false\" stretchy=\"false\">⌈</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=\"false\" stretchy=\"false\">⌉</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-105\">\\lceil \\frac{m}{2} \\rceil</script>个关键字。其中每个关键字对应一个子树（也就是最多有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-106-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-522\" style=\"width: 1.074em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.893em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.87em, 2.451em, -1000em); top: -2.262em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-523\"><span class=\"mi\" id=\"MathJax-Span-524\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.262em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.085em; border-left: 0px solid; width: 0px; height: 0.686em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-106\">m</script>棵子树，最少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-107-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2308;</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2309;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-525\" style=\"width: 2.265em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.845em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.393em, 1001.67em, 2.893em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-526\"><span class=\"mo\" id=\"MathJax-Span-527\" style=\"font-family: MathJax_Main;\">⌈</span><span class=\"mfrac\" id=\"MathJax-Span-528\"><span style=\"display: inline-block; position: relative; width: 0.741em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.497em, 1000.61em, 4.174em, -1000em); top: -4.417em; left: 50%; margin-left: -0.31em;\"><span class=\"mi\" id=\"MathJax-Span-529\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">m</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.339em, 1000.32em, 4.167em, -1000em); top: -3.596em; left: 50%; margin-left: -0.177em;\"><span class=\"mn\" id=\"MathJax-Span-530\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1000.74em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.741em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-531\" style=\"font-family: MathJax_Main;\">⌉</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.542em; border-left: 0px solid; width: 0px; height: 1.514em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo fence=\"false\" stretchy=\"false\">⌈</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=\"false\" stretchy=\"false\">⌉</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-107\">\\lceil \\frac{m}{2} \\rceil</script>棵子树）；</li>\n<li>根节点要么没有子树，要么至少有2棵子树；</li>\n<li><p>所有的叶子节点包含了全部的关键字以及这些关键字指向文件的指针，并且：</p>\n\n<ul><li>所有叶子节点中的关键字按大小顺序排列</li>\n<li>相邻的叶子节点顺序链接（相当于是构成了一个顺序链表）</li>\n<li>所有叶子节点在同一层</li></ul></li>\n<li>所有分支节点的关键字都是对应子树中关键字的最大值</li>\n</ol>\n\n<p>比如，下图就是一个非常典型的B+树的例子。</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320155354653?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>B+树和B树相比，主要的不同点在以下3项：</p>\n\n<ul>\n<li>内部节点中，关键字的个数与其子树的个数相同，不像B树种，子树的个数总比关键字个数多1个</li>\n<li>所有指向文件的关键字及其指针都在叶子节点中，不像B树，有的指向文件的关键字是在内部节点中。换句话说，B+树中，内部节点仅仅起到索引的作用，</li>\n<li>在搜索过程中，如果查询和内部节点的关键字一致，那么搜索过程不停止，而是继续向下搜索这个分支。</li>\n</ul>\n\n<p>根据B+树的结构，我们可以发现B+树相比于B树，在文件系统，数据库系统当中，更有优势，原因如下：</p>\n\n<ol>\n<li><p>B+树的磁盘读写代价更低 <br>\nB+树的内部结点并没有指向关键字具体信息的指针。因此其内部结点相对B树更小。如果把所有同一内部结点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。一次性读入内存中的需要查找的关键字也就越多。相对来说I/O读写次数也就降低了。</p></li>\n<li><p>B+树的查询效率更加稳定 <br>\n由于内部结点并不是最终指向文件内容的结点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须走一条从根结点到叶子结点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当。</p></li>\n<li><p>B+树更有利于对数据库的扫描 <br>\nB树在提高了磁盘IO性能的同时并没有解决元素遍历的效率低下的问题，而B+树只需要遍历叶子节点就可以解决对全部关键字信息的扫描，所以对于数据库中频繁使用的range query，B+树有着更高的性能。</p></li>\n</ol>            </div>","source":"_posts/2018.07.18 B树B-树B-树B-树总结.md","raw":"---\ntitle: B树B-树B+树B*树总结\ntags: 面试\ndate: 2018-07-18 14:42:54\n---\n\n题目1： Mysql数据库用过吧？l里面的索引是基于什么数据结构。\n\n答：主要是基于Hash表和B+树\n\n题目2： 很好请你说一下B+树的实现细节是什么样的？B-树和B+树有什么区别？联合索引在B+树中如何存储？\n\n答: 首先，数据库使用树型结构来增加查询效率，并保持有序。那么，为什么不使用二叉树来实现数据结构呢，二叉树算法时间复杂度是lg(N)，查询速度和比较次数都是较小的。\n\n实际上，查询索引操作最耗资源的不在内存中，而是磁盘IO。索引是存在磁盘上的，当数据量比较大的时候，索引的大小可能达到几个G。那么，我们利用索引进行查询的时候，不可能把索引直接加载到内存中，只能一次读取一个磁盘页，一个磁盘页对应着一个节点，一次读取操作时一个磁盘io。\n\n在二叉树查询时，最坏的情况下查找的次数是树的高度，即io次数为树的高度。B-树就是比二叉树“矮胖”的树。\n\n二叉树的特征如下：\n\n1. 根节点至少有两个子女\n\n2. 每个中间节点包含k-1个元素和k个孩子，其中 m/2 <= k <= m\n\n3. 每个叶子节点包含k-1个元素，其中 m/2 <= k <= m\n\n4. 所有叶子节点位于同一层\n\n5. 节点中的元素从小到大排列，正好是孩子节点的值域。（就是孩子节点的元素都比父节点中元素的最小值大，比父节点元素的最大值小）\n\nB-树查询的次数并不比二叉树的次数小，但是相比起磁盘io速度，内存中比较的耗时就不足为提了。所以只要树的高度足够低，io次数少，就可以提升查找性能。而每个节点中有多个元素，都只在内存中操作。\n\n而B+树是基于B-树的，增加了如下规则：\n\n1. 有k个子树的中间节点包含有k个元素（B树中是k-1个元素），每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。\n\n2. 所有的叶子结点中包含了全部元素的信息，及指向含这些元素记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。\n\n3. 所有的中间节点元素都同时存在于子节点，在子节点元素中是最大（或最小）元素。\n\n所以，B+树对比B-树有如下好处：\n\nio次数少：b+树中间节点只存索引，不存在实际的数据，所以可以存储更多的数据。索引树更加的矮胖，io次数更少。\n性能稳定：b+树数据只存在于叶子节点，查询性能稳定\n范围查询简单：b+树不需要中序遍历，遍历链表即可。\n***\n<div class=\"markdown_views\">\n                <p>B树是为实现高效的磁盘存取而设计的多叉平衡搜索树。这个概念在文件系统，数据库系统中非常重要。当然，有关于B树的产生，发展，结构等等方面的介绍已经非常详细，所以本文只是介绍有关于B树和B+树最核心的知识点，也算是我本人的学习笔记。至于详细的资料，因为毕竟有着太多，所以不再赘述。可以向大家推荐一篇博客：<a href=\"http://blog.csdn.net/v_july_v/article/details/6530142\" rel=\"nofollow\" target=\"_blank\">从B树、B+树、B*树谈到R 树</a>，这篇文章中，作者对于B树系列数据结构的讲解非常详细，我的这篇博客，也是大量参考了人家的很多例子和描述。</p>\n\n\n\n<h2 id=\"b树\"><a name=\"t0\"></a>B树</h2>\n\n\n\n<h3 id=\"一基本原理\"><a name=\"t1\"></a>一、基本原理</h3>\n\n<p>首先，简单说一下B树产生的原因。B树是一种查找树，我们知道，这一类树（比如二叉查找树，红黑树等等）最初生成的目的都是为了解决某种系统中，查找效率低的问题。B树也是如此，它最初启发于二叉查找树，二叉查找树的特点是每个非叶节点都只有两个孩子节点。然而这种做法会导致当数据量非常大时，二叉查找树的深度过深，搜索算法自根节点向下搜索时，需要访问的节点也就变的相当多。如果这些节点存储在外存储器中，每访问一个节点，相当于就是进行了一次I/O操作，随着树高度的增加，频繁的I/O操作一定会降低查询的效率。</p>\n\n<p>这里有一个基本的概念，就是说我们从外存储器中读取信息的步骤，简单来分，大致有两步：</p>\n\n<ol>\n<li>找到存储这个数据所对应的磁盘页面，这个过程是机械化的过程，需要依靠磁臂的转动，找到对应磁道，所以耗时长。</li>\n<li>读取数据进内存，并实施运算，这是电子化的过程，相当快。</li>\n</ol>\n\n<p>综上，对于外存储器的信息读取最大的时间消耗在于寻找磁盘页面。那么一个基本的想法就是能不能减少这种读取的次数，在一个磁盘页面上，多存储一些索引信息。B树的基本逻辑就是这个思路，它要改二叉为多叉，每个节点存储更多的指针信息，以降低I/O操作数。</p>\n\n\n\n<h3 id=\"二基本结构\"><a name=\"t2\"></a>二、基本结构</h3>\n\n\n\n<h4 id=\"1-b树的定义\">1. B树的定义</h4>\n\n<p>有关于B树概念的定义，不同的资料在表述上有所差别。我在这里采用《算导》中的定义，用最小度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mi\" id=\"MathJax-Span-3\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">t</script>来定义B树。一棵最小度为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-2-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-4\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-5\"><span class=\"mi\" id=\"MathJax-Span-6\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-2\">t</script>的B树是满足如下四个条件的平衡多叉树：</p>\n\n<ul>\n<li><p>每个节点最多包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-3-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-7\" style=\"width: 3.128em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.604em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.53em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-8\"><span class=\"mn\" id=\"MathJax-Span-9\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mi\" id=\"MathJax-Span-10\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-11\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-12\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>2</mn><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-3\">2t - 1</script>个关键字；除根节点外的每个节点至少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-4-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-13\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-14\"><span class=\"mi\" id=\"MathJax-Span-15\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-16\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-17\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-4\">t - 1</script>个关键字（<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-5-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2264;</mo><mn>2</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-18\" style=\"width: 2.659em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.188em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.14em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-19\"><span class=\"mi\" id=\"MathJax-Span-20\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-21\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mn\" id=\"MathJax-Span-22\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">2</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>≤</mo><mn>2</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-5\">t \\leq 2</script>），根节点至少有一个关键字；</p></li>\n<li><p>一个节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-6-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-23\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-24\"><span class=\"mi\" id=\"MathJax-Span-25\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-6\">u</script>中的关键字按非降序排列：<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-7-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>&amp;#x2264;</mo><mo>&amp;#x2026;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>n</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-26\" style=\"width: 15.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 12.865em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1012.87em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-27\"><span class=\"mi\" id=\"MathJax-Span-28\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-29\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-30\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-31\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-32\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-33\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-34\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-35\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-36\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-37\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-38\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-39\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-40\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-41\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-42\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-43\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mo\" id=\"MathJax-Span-44\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">…</span><span class=\"mi\" id=\"MathJax-Span-45\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">u</span><span class=\"mo\" id=\"MathJax-Span-46\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-47\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-48\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-49\"><span style=\"display: inline-block; position: relative; width: 0.989em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-50\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-51\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>≤</mo><mo>…</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>n</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-7\">u.key_1 \\leq u.key_2 \\leq \\dots u.key_n</script>；</p></li>\n<li><p>每个节点的关键字对其子树的范围分割。设节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-8-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-52\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-53\"><span class=\"mi\" id=\"MathJax-Span-54\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-8\">u</script>有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-9-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>+</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-55\" style=\"width: 2.815em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.344em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.27em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-56\"><span class=\"mi\" id=\"MathJax-Span-57\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-58\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-59\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>+</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-9\">n + 1</script>个指针，指向其<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-10-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>+</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-60\" style=\"width: 2.815em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.344em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.27em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-61\"><span class=\"mi\" id=\"MathJax-Span-62\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-63\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-64\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>+</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-10\">n + 1</script>棵子树，指针为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-11-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>&amp;#x2026;</mo><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>n</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-65\" style=\"width: 6.878em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.729em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1005.73em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-66\"><span class=\"mi\" id=\"MathJax-Span-67\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-68\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-69\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.932em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-70\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mn\" id=\"MathJax-Span-71\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-72\" style=\"font-family: MathJax_Main;\">,</span><span class=\"mo\" id=\"MathJax-Span-73\" style=\"font-family: MathJax_Main; padding-left: 0.167em;\">…</span><span class=\"mi\" id=\"MathJax-Span-74\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">u</span><span class=\"mo\" id=\"MathJax-Span-75\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-76\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.002em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-77\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-78\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>n</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-11\">u.p_1, \\dots u.p_n</script>，关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-12-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-79\" style=\"width: 1.044em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.833em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.389em, 1000.83em, 2.554em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-80\"><span class=\"msubsup\" id=\"MathJax-Span-81\"><span style=\"display: inline-block; position: relative; width: 0.84em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-82\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mi\" id=\"MathJax-Span-83\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.252em; border-left: 0px solid; width: 0px; height: 1.147em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>k</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-12\">k_i</script>为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-13-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-84\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-85\"><span class=\"mi\" id=\"MathJax-Span-86\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-87\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-88\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-89\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-90\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-13\">u.p_i</script>所指的子树中的关键字，有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-14-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><msub><mi>k</mi><mn>2</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>&amp;#x2026;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-91\" style=\"width: 15.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 13.073em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1012.99em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-92\"><span class=\"msubsup\" id=\"MathJax-Span-93\"><span style=\"display: inline-block; position: relative; width: 0.95em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-94\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mn\" id=\"MathJax-Span-95\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-96\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-97\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-98\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-99\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-100\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-101\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-102\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-103\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-104\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-105\" style=\"padding-left: 0.278em;\"><span style=\"display: inline-block; position: relative; width: 0.95em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-106\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mn\" id=\"MathJax-Span-107\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-108\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-109\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-110\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-111\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-112\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-113\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-114\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-115\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-116\" style=\"font-family: MathJax_Main; padding-left: 0.167em;\">…</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>k</mi><mn>1</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>≤</mo><msub><mi>k</mi><mn>2</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>…</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-14\">k_1 \\leq u.key_1 \\leq k_2 \\leq u.key_2 \\dots</script>成立；</p></li>\n<li><p>所有叶子节点具有相同的深度，即树的高度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-15-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-117\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-118\"><span class=\"mi\" id=\"MathJax-Span-119\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>h</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-15\">h</script>。这表明B树是平衡的。平衡性其实正是B树名字的来源，B表示的正是单词Balanced；</p></li>\n</ul>\n\n<p>一个标准的B树如下图：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320103506070?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%\" height=\"50%\"></center><p></p>\n\n\n\n<h4 id=\"2-b树的高度\">2. B树的高度</h4>\n\n<p>我直接给出结论了：对于一个包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-16-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-120\" style=\"width: 0.784em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.625em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.61em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-121\"><span class=\"mi\" id=\"MathJax-Span-122\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-16\">n</script>个关键字(<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-17-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>&amp;#x2265;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-123\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.38em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-124\"><span class=\"mi\" id=\"MathJax-Span-125\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-126\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-127\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>≥</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-17\">n \\geq 1</script>)，最小度数<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-18-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2265;</mo><mn>2</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-128\" style=\"width: 2.659em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.188em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.14em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-129\"><span class=\"mi\" id=\"MathJax-Span-130\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-131\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-132\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">2</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>≥</mo><mn>2</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-18\">t \\geq 2</script>的B树T，其高度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-19-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-133\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-134\"><span class=\"mi\" id=\"MathJax-Span-135\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>h</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-19\">h</script>满足如下规律：</p>\n\n\n\n<p><span class=\"MathJax_Preview\"></span></p><div class=\"MathJax_Display\" role=\"textbox\" aria-readonly=\"true\" style=\"text-align: center;\"></div><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-20-Frame\" tabindex=\"0\" style=\"text-align: center; position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mo>&amp;#x2264;</mo><msub><mi>log</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi></mrow></msub><mo>&amp;#x2061;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-136\" style=\"width: 7.682em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 6.369em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.8em, 1006.37em, 3.186em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-137\"><span class=\"mi\" id=\"MathJax-Span-138\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span><span class=\"mo\" id=\"MathJax-Span-139\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-140\" style=\"padding-left: 0.278em;\"><span style=\"display: inline-block; position: relative; width: 1.608em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.116em, 1001.26em, 4.373em, -1000em); top: -3.988em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-141\" style=\"font-family: MathJax_Main;\">log</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; top: -3.747em; left: 1.278em;\"><span class=\"texatom\" id=\"MathJax-Span-142\"><span class=\"mrow\" id=\"MathJax-Span-143\"><span class=\"mi\" id=\"MathJax-Span-144\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span></span></span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-145\"></span><span class=\"texatom\" id=\"MathJax-Span-146\" style=\"padding-left: 0.167em;\"><span class=\"mrow\" id=\"MathJax-Span-147\"><span class=\"mfrac\" id=\"MathJax-Span-148\"><span style=\"display: inline-block; position: relative; width: 2.442em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.144em, 1002.25em, 4.249em, -1000em); top: -4.665em; left: 50%; margin-left: -1.161em;\"><span class=\"mrow\" id=\"MathJax-Span-149\"><span class=\"mi\" id=\"MathJax-Span-150\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-151\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-152\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.144em, 1000.45em, 4.167em, -1000em); top: -3.302em; left: 50%; margin-left: -0.25em;\"><span class=\"mn\" id=\"MathJax-Span-153\" style=\"font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1002.44em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.442em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.895em; border-left: 0px solid; width: 0px; height: 2.577em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi>h</mi><mo>≤</mo><msub><mi>log</mi><mrow class=\"MJX-TeXAtom-ORD\"><mi>t</mi></mrow></msub><mo>⁡</mo><mrow class=\"MJX-TeXAtom-ORD\"><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-20\">\\begin{equation}\nh \\leq \\log_{t}{\\frac{n + 1}{2}}\n\\end{equation}</script><p></p>\n\n<p>在搜索B树时，很明显，访问节点（即读取磁盘）的次数与树的高度呈正比，而B树与红黑树和普通的二叉查找树相比，虽然高度都是对数数量级，但是显然B树中<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-21-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi><mi>o</mi><mi>g</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-154\" style=\"width: 1.513em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.25em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1001.25em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-155\"><span class=\"mi\" id=\"MathJax-Span-156\" style=\"font-family: MathJax_Math; font-style: italic;\">l</span><span class=\"mi\" id=\"MathJax-Span-157\" style=\"font-family: MathJax_Math; font-style: italic;\">o</span><span class=\"mi\" id=\"MathJax-Span-158\" style=\"font-family: MathJax_Math; font-style: italic;\">g<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>l</mi><mi>o</mi><mi>g</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-21\">log</script>函数的底可以比2更大，因此，和二叉树相比，极大地减少了磁盘读取的次数。</p>\n\n\n\n<h3 id=\"三搜索算法\"><a name=\"t3\"></a>三、搜索算法</h3>\n\n<p>这里，我直接用博客<a href=\"http://blog.csdn.net/v_july_v/article/details/6530142\" rel=\"nofollow\" target=\"_blank\">从B树、B+树、B*树谈到R 树</a>中的例子（因为这个例子非常好，也有现成的图示，就直接拿来用，不再自己班门弄斧了），一棵已经建立好的B树如下图所示，我们的目的是查找关键字为29的文件：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320103957037?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%\"></center><p></p>\n\n<p>先简单对上图说明一下：</p>\n\n<ul>\n<li><p>图中的小红方块表示对应关键字所代表的文件的存储位置，实际上可以看做是一个地址，比如根节点中17旁边的小红块表示的就是关键字17所对应的文件在硬盘中的存储地址。</p></li>\n<li><p>P是指针，不用多说了，需要注意的是：指针，关键字，以及关键字所代表的文件地址这三样东西合起来构成了B树的一个节点，这个节点存储在一个磁盘块上</p></li>\n</ul>\n\n<p>下面，看看搜索关键字的29的文件的过程：</p>\n\n<ol>\n<li><p>从根节点开始，读取根节点信息，根节点有2个关键字：17和35。因为17 &lt; 29 &lt; 35，所以找到指针P2指向的子树，也就是磁盘块3（1次I/0操作）</p></li>\n<li><p>读取当前节点信息，当前节点有2个关键字：26和30。26 &lt; 29 &lt; 30，找到指针P2指向的子树，也就是磁盘块8（2次I/0操作）</p></li>\n<li><p>读取当前节点信息，当前节点有2个关键字：28和29。找到了！（3次I/0操作）</p></li>\n</ol>\n\n<p>由上面的过程可见，同样的操作，如果使用平衡二叉树，那么需要至少4次I/O操作，B树比之二叉树的这种优势，还会随着节点数的增加而增加。另外，因为B树节点中的关键字都是排序好的，所以，在节点中的信息被读入内存之后，可以采用二分查找这种快速的查找方式，更进一步减少了读入内存之后的计算时间，由此更能说明对于外存数据结构来说，I/O次数是其查找信息中最大的时间消耗，而我们要做的所有努力就是尽量在搜索过程中减少I/O操作的次数。</p>\n\n\n\n<h3 id=\"四向b树插入关键字\"><a name=\"t4\"></a>四、向B树插入关键字</h3>\n\n<p>向B树种插入关键字的过程与向二叉查找树中插入关键字的过程类似，但是要稍微复杂一点，因为根据上面B树的定义，我们可以看出，B树每个节点中关键字的个数是有范围要求的，同时，B树是平衡的，所以，如果像二叉查找树那样，直接找到相关的叶子，插入关键字，有可能会导致B树的结构发生变化而这种变化会使得B树不再是B树。</p>\n\n<p>所以，我们这样来设计B树种对新关键字的插入：首先找到要插入的关键字应该插入的叶子节点（为方便描述，设这个叶子节点为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-22-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-159\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-160\"><span class=\"mi\" id=\"MathJax-Span-161\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-22\">u</script>），如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-23-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-162\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-163\"><span class=\"mi\" id=\"MathJax-Span-164\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-23\">u</script>是满的（恰好有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-24-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-165\" style=\"width: 3.128em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.604em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.53em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-166\"><span class=\"mn\" id=\"MathJax-Span-167\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mi\" id=\"MathJax-Span-168\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-169\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-170\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>2</mn><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-24\">2t - 1</script>个关键字），那么由于不能将一个关键字插入满的节点，我们需要对<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-25-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-171\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-172\"><span class=\"mi\" id=\"MathJax-Span-173\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-25\">u</script>按其<font color=\"RED\">当前排在中间关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-26-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-174\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-175\"><span class=\"mi\" id=\"MathJax-Span-176\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-177\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-178\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-179\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-180\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-181\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-182\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-26\">u.key_t</script><font color=\"K\">进行分裂，分裂成两个节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-27-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-183\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.693em, 1002.45em, 2.642em, -1000em); top: -2.292em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-184\"><span class=\"msubsup\" id=\"MathJax-Span-185\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-186\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-187\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-188\" style=\"font-family: MathJax_Main;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-189\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-190\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-191\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.292em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-27\">u_1, u_2</script>；同时，作为分裂标准的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-28-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-192\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-193\"><span class=\"mi\" id=\"MathJax-Span-194\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-195\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-196\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-197\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-198\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-199\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-200\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-28\">u.key_t</script>会被上移到<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-29-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-201\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-202\"><span class=\"mi\" id=\"MathJax-Span-203\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-29\">u</script>的父节点中，在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-30-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-204\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-205\"><span class=\"mi\" id=\"MathJax-Span-206\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-207\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-208\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-209\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-210\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-211\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-212\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-30\">u.key_t</script>插入前，如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-31-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-213\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-214\"><span class=\"mi\" id=\"MathJax-Span-215\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-31\">u</script>的父节点未满，则直接插入即可；如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-32-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-216\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-217\"><span class=\"mi\" id=\"MathJax-Span-218\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-32\">u</script>的父节点已满，则按照上面的方法对<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-33-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-219\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-220\"><span class=\"mi\" id=\"MathJax-Span-221\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-33\">u</script>的父节点分裂，这个过程如果一直不停止的话，最终会导致B树的根节点分裂，B树的高度增加一层。</font></font></p>\n\n<p>我用《算导》中的一个题目展示一下这种插入关键字的过程：</p>\n\n<p>现在我们要将关键字序列：F, S, Q, K, C, L, H, T, V, W, M, R, N, P, A, B, X, Y依次插入一棵最小度为2的B树中。也就是说，这棵树的节点中，最多有3个关键字，最少有1个关键字。</p>\n\n<p><strong>第1步</strong>，F, S, Q可以被插入一个节点（也就是根节点）</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320110812239?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第2步</strong>，插入关键字K，因为节点已满，所以在插入前，发生分裂，中间关键字Q上移，建立了一个新的根节点：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320112233417?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第3步</strong>，插入关键字C:</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320112758203?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第4步</strong>，插入关键字L，L应该被插入到根节点的左侧的孩子中，因为此时该节点已满，所以在插入前，发生分裂：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320113252304?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第5步</strong>，插入关键字H, T, V，这个过程没有发生节点的分裂：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320113755967?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第6步</strong>，插入关键字W，W应该被插入到根节点的最右侧的孩子中，因为此时该节点已满，所以在插入前，关键字T上移，最右端的叶子节点发生分裂：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20171203222249465?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p><strong>第7步</strong>，插入关键字M，M应该被插入到根节点的左起第2个孩子中，因为此时该节点已满，所以在插入前，发生分裂，分裂之后，中间关键字K上移，导致根节点发生分裂，树高增加1：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20171203222333265?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n<p>第8步，同样的道理，插入关键字R, N, P, A, B, X, Y：最终得到的B树如下：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20171203222406990?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p>\n\n\n\n<h3 id=\"五从b树删除关键字\"><a name=\"t5\"></a>五、从B树删除关键字</h3>\n\n<p>删除操作的基本思想和插入操作是一样的，都是不能因为关键字的改变而改变B树的结构。插入操作主要防止的是某个节点中关键字的个数太多，所以采用了分裂；删除则是要防止某个节点中，因删除了关键字而导致这个节点的关键字个数太少，所以采用了合并操作。</p>\n\n<p>下面分三种情况来讨论下删除操作是如何工作的，这个过程的顺序是自根节点起向下遍历B树</p>\n\n<p><strong>Case - 1：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-176-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-222\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-223\"><span class=\"mi\" id=\"MathJax-Span-224\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-176\">k</script>在节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-177-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-225\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-226\"><span class=\"mi\" id=\"MathJax-Span-227\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-177\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-178-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-228\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-229\"><span class=\"mi\" id=\"MathJax-Span-230\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-178\">u</script>是叶子节点，那么直接删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-179-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-231\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-232\"><span class=\"mi\" id=\"MathJax-Span-233\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-179\">k</script></p>\n\n<p><strong>Case - 2：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-180-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-234\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-235\"><span class=\"mi\" id=\"MathJax-Span-236\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-180\">k</script>在节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-181-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-237\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-238\"><span class=\"mi\" id=\"MathJax-Span-239\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-181\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-182-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-240\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-241\"><span class=\"mi\" id=\"MathJax-Span-242\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-182\">u</script>是内部节点，那么分以下3种情况讨论：</p>\n\n<p>(1) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-183-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-243\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-244\"><span class=\"mi\" id=\"MathJax-Span-245\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-183\">u</script>中<font color=\"red\">前于<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-184-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-246\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-247\"><span class=\"mi\" id=\"MathJax-Span-248\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-184\">k</script>的子节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-185-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-249\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-250\"><span class=\"msubsup\" id=\"MathJax-Span-251\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-252\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-253\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-185\">u_1</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-186-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-254\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-255\"><span class=\"mi\" id=\"MathJax-Span-256\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-186\">t</script>个关键字，则找出<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-187-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-257\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-258\"><span class=\"mi\" id=\"MathJax-Span-259\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-187\">k</script>在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-188-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-260\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-261\"><span class=\"msubsup\" id=\"MathJax-Span-262\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-263\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-264\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-188\">u_1</script>为根的子树中的<font color=\"red\">前驱<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-189-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-265\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-266\"><span class=\"msup\" id=\"MathJax-Span-267\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-268\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-269\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-189\">k'</script>（前驱的意思是<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-190-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-270\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-271\"><span class=\"msubsup\" id=\"MathJax-Span-272\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-273\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-274\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-190\">u_1</script>中比<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-191-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-275\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-276\"><span class=\"mi\" id=\"MathJax-Span-277\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-191\">k</script>小的关键字中最大的），然后在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-192-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-278\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-279\"><span class=\"msubsup\" id=\"MathJax-Span-280\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-281\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-282\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-192\">u_1</script>为根的子树中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-193-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-283\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-284\"><span class=\"msup\" id=\"MathJax-Span-285\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-286\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-287\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-193\">k'</script>，并在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-194-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-288\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-289\"><span class=\"mi\" id=\"MathJax-Span-290\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-194\">u</script>中以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-195-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-291\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-292\"><span class=\"msup\" id=\"MathJax-Span-293\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-294\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-295\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-195\">k'</script>替代<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-196-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-296\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-297\"><span class=\"mi\" id=\"MathJax-Span-298\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-196\">k</script></font></font></font></font></p>\n\n<p>(2) 如果上面的条件(1)不成立，也就是说，前于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-197-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-299\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-300\"><span class=\"mi\" id=\"MathJax-Span-301\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-197\">k</script>的子节点中关键字的个数小于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-198-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-302\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-303\"><span class=\"mi\" id=\"MathJax-Span-304\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-198\">t</script>了，那么就去找<font color=\"red\">后于<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-199-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-305\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-306\"><span class=\"mi\" id=\"MathJax-Span-307\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-199\">k</script>的子节点，记为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-200-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-308\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-309\"><span class=\"msubsup\" id=\"MathJax-Span-310\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-311\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-312\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-200\">u_2</script>。若<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-201-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-313\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-314\"><span class=\"msubsup\" id=\"MathJax-Span-315\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-316\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-317\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-201\">u_2</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-202-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-318\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-319\"><span class=\"mi\" id=\"MathJax-Span-320\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-202\">t</script>个关键字，则找出<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-203-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-321\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-322\"><span class=\"mi\" id=\"MathJax-Span-323\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-203\">k</script>在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-204-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-324\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-325\"><span class=\"msubsup\" id=\"MathJax-Span-326\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-327\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-328\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-204\">u_2</script>为根的子树中的<font color=\"red\">后继<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-205-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-329\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-330\"><span class=\"msup\" id=\"MathJax-Span-331\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-332\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-333\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-205\">k'</script>(大于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-206-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-334\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-335\"><span class=\"mi\" id=\"MathJax-Span-336\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-206\">k</script>的关键字中最小的)，然后在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-207-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-337\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-338\"><span class=\"msubsup\" id=\"MathJax-Span-339\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-340\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-341\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-207\">u_2</script>为根的子树中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-208-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-342\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-343\"><span class=\"msup\" id=\"MathJax-Span-344\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-345\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-346\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-208\">k'</script>，并在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-209-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-347\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-348\"><span class=\"mi\" id=\"MathJax-Span-349\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-209\">u</script>中以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-210-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-350\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-351\"><span class=\"msup\" id=\"MathJax-Span-352\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-353\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-354\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-210\">k'</script>替代<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-211-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-355\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-356\"><span class=\"mi\" id=\"MathJax-Span-357\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-211\">k</script>。可以看出（2）是（1）的一个对称过程</font></font></font></font></p>\n\n<p>(3) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-212-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-358\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.693em, 1002.45em, 2.642em, -1000em); top: -2.292em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-359\"><span class=\"msubsup\" id=\"MathJax-Span-360\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-361\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-362\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-363\" style=\"font-family: MathJax_Main;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-364\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-365\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-366\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.292em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-212\">u_1, u_2</script>中的关键字个数都是<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-213-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-367\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-368\"><span class=\"mi\" id=\"MathJax-Span-369\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-370\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-371\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-213\">t - 1</script>，则将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-214-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-372\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-373\"><span class=\"mi\" id=\"MathJax-Span-374\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-214\">k</script>和<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-215-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-375\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-376\"><span class=\"msubsup\" id=\"MathJax-Span-377\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-378\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-379\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-215\">u_2</script>合并后并入<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-216-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-380\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-381\"><span class=\"msubsup\" id=\"MathJax-Span-382\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-383\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-384\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-216\">u_1</script>，这样<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-217-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-385\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-386\"><span class=\"mi\" id=\"MathJax-Span-387\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-217\">u</script>就失去了<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-218-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-388\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-389\"><span class=\"mi\" id=\"MathJax-Span-390\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-218\">k</script>和指向<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-219-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-391\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-392\"><span class=\"msubsup\" id=\"MathJax-Span-393\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-394\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-395\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-219\">u_2</script>的指针，最后递归地从<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-220-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-396\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-397\"><span class=\"msubsup\" id=\"MathJax-Span-398\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-399\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-400\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-220\">u_1</script>中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-221-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-401\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-402\"><span class=\"mi\" id=\"MathJax-Span-403\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-221\">k</script></p>\n\n<p><strong>Case - 3：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-222-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-404\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-405\"><span class=\"mi\" id=\"MathJax-Span-406\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-222\">k</script>不在当前节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-223-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-407\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-408\"><span class=\"mi\" id=\"MathJax-Span-409\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-223\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-224-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-410\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-411\"><span class=\"mi\" id=\"MathJax-Span-412\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-224\">u</script>是内部节点（如果自上而下扫描到叶子都没有这个关键字的话，那就说明要删除的关键字根本就不存在，所以此处只考虑<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-225-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-413\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-414\"><span class=\"mi\" id=\"MathJax-Span-415\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-225\">u</script>是内部节点的情况），则首先确定包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-226-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-416\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-417\"><span class=\"mi\" id=\"MathJax-Span-418\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-226\">k</script>的<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-227-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-419\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-420\"><span class=\"mi\" id=\"MathJax-Span-421\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-227\">u</script>的子树，我们这里设为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-228-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-422\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-423\"><span class=\"mi\" id=\"MathJax-Span-424\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-425\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-426\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-427\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-428\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-228\">u.p_i</script>。如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-229-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-429\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-430\"><span class=\"mi\" id=\"MathJax-Span-431\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-432\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-433\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-434\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-435\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-229\">u.p_i</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-230-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-436\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-437\"><span class=\"mi\" id=\"MathJax-Span-438\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-230\">t</script>个关键字，那么继续扫描，寻找下一个要被扫描的子树；如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-231-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-439\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-440\"><span class=\"mi\" id=\"MathJax-Span-441\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-442\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-443\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-444\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-445\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-231\">u.p_i</script>中只含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-232-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-446\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-447\"><span class=\"mi\" id=\"MathJax-Span-448\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-449\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-450\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-232\">t - 1</script>个关键字，则需要分下面两种情况进行操作：</p>\n\n<p>(1) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-233-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-451\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-452\"><span class=\"mi\" id=\"MathJax-Span-453\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-454\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-455\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-456\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-457\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-233\">u.p_i</script>至少有一个相邻的兄弟比较“丰满”（即这个兄弟至少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-234-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-458\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-459\"><span class=\"mi\" id=\"MathJax-Span-460\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-234\">t</script>个关键字）。则将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-235-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-461\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-462\"><span class=\"mi\" id=\"MathJax-Span-463\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-235\">u</script>中的一个关键字降至<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-236-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-464\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-465\"><span class=\"mi\" id=\"MathJax-Span-466\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-467\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-468\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-469\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-470\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-236\">u.p_i</script>，同时令<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-237-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-471\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-472\"><span class=\"mi\" id=\"MathJax-Span-473\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-474\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-475\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-476\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-477\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-237\">u.p_i</script>的最“丰满”的兄弟中升一个关键至<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-238-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-478\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-479\"><span class=\"mi\" id=\"MathJax-Span-480\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-238\">u</script>。然后继续扫描B树，寻找<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-239-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-481\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-482\"><span class=\"mi\" id=\"MathJax-Span-483\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-239\">k</script></p>\n\n<p>(2) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-240-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-484\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-485\"><span class=\"mi\" id=\"MathJax-Span-486\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-487\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-488\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-489\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-490\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-240\">u.p_i</script>的两个相邻的兄弟都不“丰满”（都只有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-241-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-491\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-492\"><span class=\"mi\" id=\"MathJax-Span-493\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-494\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-495\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-241\">t - 1</script>个关键字）。则令<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-242-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-496\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-497\"><span class=\"mi\" id=\"MathJax-Span-498\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-499\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-500\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-501\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-502\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-242\">u.p_i</script>和其一个兄弟合并，再将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-243-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-503\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-504\"><span class=\"mi\" id=\"MathJax-Span-505\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-243\">u</script>的一个关键字降至新合并的节点。使之成为该节点的中间关键字。</p>\n\n<p>举个例子，就可以清晰看到上面说的这几种删除的情况。拿下图所示的最小度为3的B树为例（即树中除根和叶子之外的节点只能有2，3，4三种情况的关键字个数）：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320142505013?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 1: 删除上图中的关键字F，过程如下：先扫描根节点（含P），再扫描其左孩子（含CGM），发现丰满，继续扫描到左起第二个叶子，然后就是符合<strong>Case - 1</strong>的情况了。结果如下图所示：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20171228154424767?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 2: 再删除M，此时遇到<strong>Case - 2(1)</strong>的情况，结果如下图所示：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320143230759?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 3: 再删除G，G的前驱、后驱都是不丰满的。也就是<strong>Case - 2(3)</strong>的情况，结果如下图所示：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320143617327?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 4: 再删除D，扫描至含CL的节点后，发现它不丰满，且他的兄弟也不丰满。则将节点CL和TX合并，并降关键字P至新合并的节点。也就是<strong>Case - 3(2)</strong>的情况，结果如下图所示，此时，树高减1：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320153842292?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>Step 5: 再删除B，也就是<strong>Case - 3(1)</strong>的情况，结果如下图所示：</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320154130371?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>下面总结一下B树的删除原理：</p>\n\n<ol>\n<li>基本原则是不能破坏关键字个数的限制；</li>\n<li>如果在当前节点中，找到了要删的关键字，且当前节点为内部节点。那么，如果有比较丰满的前驱或后继，借一个上来，再把要删的关键字降下去，在子树中递归删除；如果没有比较丰满的前驱或后继，则令前驱与后继合并，把要删的关键字降下去，递归删除；</li>\n<li>如果在当前节点中，还未找到要删的关键字，且当前节点为内部节点。那么去找下一步应该扫描的孩子，并判断这个孩子是否丰满，如果丰满，继续扫描；如果不丰满，则看其有无丰满的兄弟，有的话，从父亲那里接一个，父亲再找其最丰满的兄弟借一个；如果没有丰满的兄弟，则合并，再令父亲下降，以保证B树的结构。</li>\n</ol>\n\n<h2 id=\"b树-1\"><a name=\"t6\"></a>B+树</h2>\n\n\n\n<h3 id=\"b树的定义\"><a name=\"t7\"></a>B+树的定义</h3>\n\n<p>B+树是B树的一种变形，它更适合实际应用中操作系统的文件索引和数据库索引。定义如下：（为和大多资料保持一致，这里使用阶数<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-102-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-506\" style=\"width: 1.096em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.885em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.86em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-507\"><span class=\"mi\" id=\"MathJax-Span-508\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-102\">m</script>来定义B+树，而不像之前的B树中，使用的是最小度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-103-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-509\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-510\"><span class=\"mi\" id=\"MathJax-Span-511\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-103\">t</script>来定义）</p>\n\n<ol>\n<li>除根节点外的内部节点，每个节点最多有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-104-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-512\" style=\"width: 1.074em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.893em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.87em, 2.451em, -1000em); top: -2.262em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-513\"><span class=\"mi\" id=\"MathJax-Span-514\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.262em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.085em; border-left: 0px solid; width: 0px; height: 0.686em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-104\">m</script>个关键字，最少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-105-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2308;</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2309;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-515\" style=\"width: 2.265em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.845em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.393em, 1001.67em, 2.893em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-516\"><span class=\"mo\" id=\"MathJax-Span-517\" style=\"font-family: MathJax_Main;\">⌈</span><span class=\"mfrac\" id=\"MathJax-Span-518\"><span style=\"display: inline-block; position: relative; width: 0.741em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.497em, 1000.61em, 4.174em, -1000em); top: -4.417em; left: 50%; margin-left: -0.31em;\"><span class=\"mi\" id=\"MathJax-Span-519\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">m</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.339em, 1000.32em, 4.167em, -1000em); top: -3.596em; left: 50%; margin-left: -0.177em;\"><span class=\"mn\" id=\"MathJax-Span-520\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1000.74em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.741em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-521\" style=\"font-family: MathJax_Main;\">⌉</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.542em; border-left: 0px solid; width: 0px; height: 1.514em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo fence=\"false\" stretchy=\"false\">⌈</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=\"false\" stretchy=\"false\">⌉</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-105\">\\lceil \\frac{m}{2} \\rceil</script>个关键字。其中每个关键字对应一个子树（也就是最多有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-106-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-522\" style=\"width: 1.074em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.893em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.87em, 2.451em, -1000em); top: -2.262em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-523\"><span class=\"mi\" id=\"MathJax-Span-524\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.262em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.085em; border-left: 0px solid; width: 0px; height: 0.686em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-106\">m</script>棵子树，最少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-107-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2308;</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2309;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-525\" style=\"width: 2.265em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.845em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.393em, 1001.67em, 2.893em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-526\"><span class=\"mo\" id=\"MathJax-Span-527\" style=\"font-family: MathJax_Main;\">⌈</span><span class=\"mfrac\" id=\"MathJax-Span-528\"><span style=\"display: inline-block; position: relative; width: 0.741em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.497em, 1000.61em, 4.174em, -1000em); top: -4.417em; left: 50%; margin-left: -0.31em;\"><span class=\"mi\" id=\"MathJax-Span-529\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">m</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.339em, 1000.32em, 4.167em, -1000em); top: -3.596em; left: 50%; margin-left: -0.177em;\"><span class=\"mn\" id=\"MathJax-Span-530\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1000.74em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.741em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-531\" style=\"font-family: MathJax_Main;\">⌉</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.542em; border-left: 0px solid; width: 0px; height: 1.514em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo fence=\"false\" stretchy=\"false\">⌈</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=\"false\" stretchy=\"false\">⌉</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-107\">\\lceil \\frac{m}{2} \\rceil</script>棵子树）；</li>\n<li>根节点要么没有子树，要么至少有2棵子树；</li>\n<li><p>所有的叶子节点包含了全部的关键字以及这些关键字指向文件的指针，并且：</p>\n\n<ul><li>所有叶子节点中的关键字按大小顺序排列</li>\n<li>相邻的叶子节点顺序链接（相当于是构成了一个顺序链表）</li>\n<li>所有叶子节点在同一层</li></ul></li>\n<li>所有分支节点的关键字都是对应子树中关键字的最大值</li>\n</ol>\n\n<p>比如，下图就是一个非常典型的B+树的例子。</p>\n\n<p></p><center> <br>\n<img src=\"https://img-blog.csdn.net/20170320155354653?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p>\n\n<p>B+树和B树相比，主要的不同点在以下3项：</p>\n\n<ul>\n<li>内部节点中，关键字的个数与其子树的个数相同，不像B树种，子树的个数总比关键字个数多1个</li>\n<li>所有指向文件的关键字及其指针都在叶子节点中，不像B树，有的指向文件的关键字是在内部节点中。换句话说，B+树中，内部节点仅仅起到索引的作用，</li>\n<li>在搜索过程中，如果查询和内部节点的关键字一致，那么搜索过程不停止，而是继续向下搜索这个分支。</li>\n</ul>\n\n<p>根据B+树的结构，我们可以发现B+树相比于B树，在文件系统，数据库系统当中，更有优势，原因如下：</p>\n\n<ol>\n<li><p>B+树的磁盘读写代价更低 <br>\nB+树的内部结点并没有指向关键字具体信息的指针。因此其内部结点相对B树更小。如果把所有同一内部结点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。一次性读入内存中的需要查找的关键字也就越多。相对来说I/O读写次数也就降低了。</p></li>\n<li><p>B+树的查询效率更加稳定 <br>\n由于内部结点并不是最终指向文件内容的结点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须走一条从根结点到叶子结点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当。</p></li>\n<li><p>B+树更有利于对数据库的扫描 <br>\nB树在提高了磁盘IO性能的同时并没有解决元素遍历的效率低下的问题，而B+树只需要遍历叶子节点就可以解决对全部关键字信息的扫描，所以对于数据库中频繁使用的range query，B+树有着更高的性能。</p></li>\n</ol>            </div>","slug":"B树B-树B-树B-树总结","published":1,"updated":"2018-11-02T06:24:46.031Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjo15hzsj004cdcyuptkdcog0","content":"<p>题目1： Mysql数据库用过吧？l里面的索引是基于什么数据结构。</p>\n<p>答：主要是基于Hash表和B+树</p>\n<p>题目2： 很好请你说一下B+树的实现细节是什么样的？B-树和B+树有什么区别？联合索引在B+树中如何存储？</p>\n<p>答: 首先，数据库使用树型结构来增加查询效率，并保持有序。那么，为什么不使用二叉树来实现数据结构呢，二叉树算法时间复杂度是lg(N)，查询速度和比较次数都是较小的。</p>\n<p>实际上，查询索引操作最耗资源的不在内存中，而是磁盘IO。索引是存在磁盘上的，当数据量比较大的时候，索引的大小可能达到几个G。那么，我们利用索引进行查询的时候，不可能把索引直接加载到内存中，只能一次读取一个磁盘页，一个磁盘页对应着一个节点，一次读取操作时一个磁盘io。</p>\n<p>在二叉树查询时，最坏的情况下查找的次数是树的高度，即io次数为树的高度。B-树就是比二叉树“矮胖”的树。</p>\n<p>二叉树的特征如下：</p>\n<ol>\n<li><p>根节点至少有两个子女</p>\n</li>\n<li><p>每个中间节点包含k-1个元素和k个孩子，其中 m/2 &lt;= k &lt;= m</p>\n</li>\n<li><p>每个叶子节点包含k-1个元素，其中 m/2 &lt;= k &lt;= m</p>\n</li>\n<li><p>所有叶子节点位于同一层</p>\n</li>\n<li><p>节点中的元素从小到大排列，正好是孩子节点的值域。（就是孩子节点的元素都比父节点中元素的最小值大，比父节点元素的最大值小）</p>\n</li>\n</ol>\n<p>B-树查询的次数并不比二叉树的次数小，但是相比起磁盘io速度，内存中比较的耗时就不足为提了。所以只要树的高度足够低，io次数少，就可以提升查找性能。而每个节点中有多个元素，都只在内存中操作。</p>\n<p>而B+树是基于B-树的，增加了如下规则：</p>\n<ol>\n<li><p>有k个子树的中间节点包含有k个元素（B树中是k-1个元素），每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。</p>\n</li>\n<li><p>所有的叶子结点中包含了全部元素的信息，及指向含这些元素记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。</p>\n</li>\n<li><p>所有的中间节点元素都同时存在于子节点，在子节点元素中是最大（或最小）元素。</p>\n</li>\n</ol>\n<p>所以，B+树对比B-树有如下好处：</p>\n<p>io次数少：b+树中间节点只存索引，不存在实际的数据，所以可以存储更多的数据。索引树更加的矮胖，io次数更少。<br>性能稳定：b+树数据只存在于叶子节点，查询性能稳定<br>范围查询简单：b+树不需要中序遍历，遍历链表即可。</p>\n<hr>\n<div class=\"markdown_views\"><br>                <p>B树是为实现高效的磁盘存取而设计的多叉平衡搜索树。这个概念在文件系统，数据库系统中非常重要。当然，有关于B树的产生，发展，结构等等方面的介绍已经非常详细，所以本文只是介绍有关于B树和B+树最核心的知识点，也算是我本人的学习笔记。至于详细的资料，因为毕竟有着太多，所以不再赘述。可以向大家推荐一篇博客：<a href=\"http://blog.csdn.net/v_july_v/article/details/6530142\" rel=\"nofollow\" target=\"_blank\">从B树、B+树、B<em>树谈到R 树</em></a>，这篇文章中，作者对于B树系列数据结构的讲解非常详细，我的这篇博客，也是大量参考了人家的很多例子和描述。</p><br><br><br><br><h2 id=\"b树\"><a name=\"t0\"></a>B树</h2><br><br><br><br><h3 id=\"一基本原理\"><a name=\"t1\"></a>一、基本原理</h3><br><br><p>首先，简单说一下B树产生的原因。B树是一种查找树，我们知道，这一类树（比如二叉查找树，红黑树等等）最初生成的目的都是为了解决某种系统中，查找效率低的问题。B树也是如此，它最初启发于二叉查找树，二叉查找树的特点是每个非叶节点都只有两个孩子节点。然而这种做法会导致当数据量非常大时，二叉查找树的深度过深，搜索算法自根节点向下搜索时，需要访问的节点也就变的相当多。如果这些节点存储在外存储器中，每访问一个节点，相当于就是进行了一次I/O操作，随着树高度的增加，频繁的I/O操作一定会降低查询的效率。</p><br><br><p>这里有一个基本的概念，就是说我们从外存储器中读取信息的步骤，简单来分，大致有两步：</p><br><br><ol><br><li>找到存储这个数据所对应的磁盘页面，这个过程是机械化的过程，需要依靠磁臂的转动，找到对应磁道，所以耗时长。</li><br><li>读取数据进内存，并实施运算，这是电子化的过程，相当快。</li><br></ol><br><br><p>综上，对于外存储器的信息读取最大的时间消耗在于寻找磁盘页面。那么一个基本的想法就是能不能减少这种读取的次数，在一个磁盘页面上，多存储一些索引信息。B树的基本逻辑就是这个思路，它要改二叉为多叉，每个节点存储更多的指针信息，以降低I/O操作数。</p><br><br><br><br><h3 id=\"二基本结构\"><a name=\"t2\"></a>二、基本结构</h3><br><br><br><br><h4 id=\"1-b树的定义\">1. B树的定义</h4><br><br><p>有关于B树概念的定义，不同的资料在表述上有所差别。我在这里采用《算导》中的定义，用最小度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mi\" id=\"MathJax-Span-3\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">t</script>来定义B树。一棵最小度为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-2-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-4\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-5\"><span class=\"mi\" id=\"MathJax-Span-6\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-2\">t</script>的B树是满足如下四个条件的平衡多叉树：</p><br><br><ul><br><li><p>每个节点最多包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-3-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-7\" style=\"width: 3.128em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.604em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.53em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-8\"><span class=\"mn\" id=\"MathJax-Span-9\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mi\" id=\"MathJax-Span-10\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-11\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-12\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>2</mn><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-3\">2t - 1</script>个关键字；除根节点外的每个节点至少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-4-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-13\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-14\"><span class=\"mi\" id=\"MathJax-Span-15\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-16\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-17\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-4\">t - 1</script>个关键字（<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-5-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2264;</mo><mn>2</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-18\" style=\"width: 2.659em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.188em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.14em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-19\"><span class=\"mi\" id=\"MathJax-Span-20\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-21\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mn\" id=\"MathJax-Span-22\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">2</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>≤</mo><mn>2</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-5\">t \\leq 2</script>），根节点至少有一个关键字；</p></li><br><li><p>一个节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-6-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-23\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-24\"><span class=\"mi\" id=\"MathJax-Span-25\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-6\">u</script>中的关键字按非降序排列：<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-7-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>&amp;#x2264;</mo><mo>&amp;#x2026;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>n</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-26\" style=\"width: 15.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 12.865em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1012.87em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-27\"><span class=\"mi\" id=\"MathJax-Span-28\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-29\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-30\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-31\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-32\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-33\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-34\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-35\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-36\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-37\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-38\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-39\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-40\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-41\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-42\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-43\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mo\" id=\"MathJax-Span-44\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">…</span><span class=\"mi\" id=\"MathJax-Span-45\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">u</span><span class=\"mo\" id=\"MathJax-Span-46\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-47\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-48\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-49\"><span style=\"display: inline-block; position: relative; width: 0.989em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-50\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-51\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>≤</mo><mo>…</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>n</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-7\">u.key_1 \\leq u.key_2 \\leq \\dots u.key_n</script>；</p></li><br><li><p>每个节点的关键字对其子树的范围分割。设节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-8-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-52\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-53\"><span class=\"mi\" id=\"MathJax-Span-54\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-8\">u</script>有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-9-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>+</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-55\" style=\"width: 2.815em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.344em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.27em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-56\"><span class=\"mi\" id=\"MathJax-Span-57\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-58\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-59\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>+</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-9\">n + 1</script>个指针，指向其<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-10-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>+</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-60\" style=\"width: 2.815em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.344em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.27em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-61\"><span class=\"mi\" id=\"MathJax-Span-62\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-63\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-64\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>+</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-10\">n + 1</script>棵子树，指针为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-11-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>&amp;#x2026;</mo><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>n</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-65\" style=\"width: 6.878em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.729em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1005.73em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-66\"><span class=\"mi\" id=\"MathJax-Span-67\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-68\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-69\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.932em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-70\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mn\" id=\"MathJax-Span-71\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-72\" style=\"font-family: MathJax_Main;\">,</span><span class=\"mo\" id=\"MathJax-Span-73\" style=\"font-family: MathJax_Main; padding-left: 0.167em;\">…</span><span class=\"mi\" id=\"MathJax-Span-74\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">u</span><span class=\"mo\" id=\"MathJax-Span-75\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-76\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.002em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-77\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-78\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>n</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-11\">u.p_1, \\dots u.p_n</script>，关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-12-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-79\" style=\"width: 1.044em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.833em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.389em, 1000.83em, 2.554em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-80\"><span class=\"msubsup\" id=\"MathJax-Span-81\"><span style=\"display: inline-block; position: relative; width: 0.84em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-82\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mi\" id=\"MathJax-Span-83\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.252em; border-left: 0px solid; width: 0px; height: 1.147em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>k</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-12\">k_i</script>为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-13-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-84\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-85\"><span class=\"mi\" id=\"MathJax-Span-86\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-87\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-88\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-89\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-90\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-13\">u.p_i</script>所指的子树中的关键字，有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-14-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><msub><mi>k</mi><mn>2</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>&amp;#x2026;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-91\" style=\"width: 15.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 13.073em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1012.99em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-92\"><span class=\"msubsup\" id=\"MathJax-Span-93\"><span style=\"display: inline-block; position: relative; width: 0.95em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-94\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mn\" id=\"MathJax-Span-95\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-96\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-97\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-98\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-99\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-100\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-101\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-102\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-103\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-104\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-105\" style=\"padding-left: 0.278em;\"><span style=\"display: inline-block; position: relative; width: 0.95em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-106\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mn\" id=\"MathJax-Span-107\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-108\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-109\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-110\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-111\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-112\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-113\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-114\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-115\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-116\" style=\"font-family: MathJax_Main; padding-left: 0.167em;\">…</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>k</mi><mn>1</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>≤</mo><msub><mi>k</mi><mn>2</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>…</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-14\">k_1 \\leq u.key_1 \\leq k_2 \\leq u.key_2 \\dots</script>成立；</p></li><br><li><p>所有叶子节点具有相同的深度，即树的高度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-15-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-117\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-118\"><span class=\"mi\" id=\"MathJax-Span-119\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>h</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-15\">h</script>。这表明B树是平衡的。平衡性其实正是B树名字的来源，B表示的正是单词Balanced；</p></li><br></ul><br><br><p>一个标准的B树如下图：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320103506070?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%\" height=\"50%\"></center><p></p><br><br><br><br><h4 id=\"2-b树的高度\">2. B树的高度</h4><br><br><p>我直接给出结论了：对于一个包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-16-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-120\" style=\"width: 0.784em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.625em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.61em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-121\"><span class=\"mi\" id=\"MathJax-Span-122\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-16\">n</script>个关键字(<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-17-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>&amp;#x2265;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-123\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.38em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-124\"><span class=\"mi\" id=\"MathJax-Span-125\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-126\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-127\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>≥</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-17\">n \\geq 1</script>)，最小度数<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-18-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2265;</mo><mn>2</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-128\" style=\"width: 2.659em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.188em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.14em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-129\"><span class=\"mi\" id=\"MathJax-Span-130\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-131\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-132\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">2</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>≥</mo><mn>2</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-18\">t \\geq 2</script>的B树T，其高度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-19-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-133\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-134\"><span class=\"mi\" id=\"MathJax-Span-135\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>h</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-19\">h</script>满足如下规律：</p><br><br><br><br><p><span class=\"MathJax_Preview\"></span></p><div class=\"MathJax_Display\" role=\"textbox\" aria-readonly=\"true\" style=\"text-align: center;\"></div><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-20-Frame\" tabindex=\"0\" style=\"text-align: center; position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mo>&amp;#x2264;</mo><msub><mi>log</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi></mrow></msub><mo>&amp;#x2061;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-136\" style=\"width: 7.682em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 6.369em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.8em, 1006.37em, 3.186em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-137\"><span class=\"mi\" id=\"MathJax-Span-138\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span><span class=\"mo\" id=\"MathJax-Span-139\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-140\" style=\"padding-left: 0.278em;\"><span style=\"display: inline-block; position: relative; width: 1.608em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.116em, 1001.26em, 4.373em, -1000em); top: -3.988em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-141\" style=\"font-family: MathJax_Main;\">log</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; top: -3.747em; left: 1.278em;\"><span class=\"texatom\" id=\"MathJax-Span-142\"><span class=\"mrow\" id=\"MathJax-Span-143\"><span class=\"mi\" id=\"MathJax-Span-144\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span></span></span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-145\"></span><span class=\"texatom\" id=\"MathJax-Span-146\" style=\"padding-left: 0.167em;\"><span class=\"mrow\" id=\"MathJax-Span-147\"><span class=\"mfrac\" id=\"MathJax-Span-148\"><span style=\"display: inline-block; position: relative; width: 2.442em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.144em, 1002.25em, 4.249em, -1000em); top: -4.665em; left: 50%; margin-left: -1.161em;\"><span class=\"mrow\" id=\"MathJax-Span-149\"><span class=\"mi\" id=\"MathJax-Span-150\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-151\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-152\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.144em, 1000.45em, 4.167em, -1000em); top: -3.302em; left: 50%; margin-left: -0.25em;\"><span class=\"mn\" id=\"MathJax-Span-153\" style=\"font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1002.44em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.442em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.895em; border-left: 0px solid; width: 0px; height: 2.577em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi>h</mi><mo>≤</mo><msub><mi>log</mi><mrow class=\"MJX-TeXAtom-ORD\"><mi>t</mi></mrow></msub><mo>⁡</mo><mrow class=\"MJX-TeXAtom-ORD\"><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-20\">\\begin{equation}<br>h \\leq \\log_{t}{\\frac{n + 1}{2}}<br>\\end{equation}</script><p></p><br><br><p>在搜索B树时，很明显，访问节点（即读取磁盘）的次数与树的高度呈正比，而B树与红黑树和普通的二叉查找树相比，虽然高度都是对数数量级，但是显然B树中<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-21-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi><mi>o</mi><mi>g</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-154\" style=\"width: 1.513em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.25em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1001.25em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-155\"><span class=\"mi\" id=\"MathJax-Span-156\" style=\"font-family: MathJax_Math; font-style: italic;\">l</span><span class=\"mi\" id=\"MathJax-Span-157\" style=\"font-family: MathJax_Math; font-style: italic;\">o</span><span class=\"mi\" id=\"MathJax-Span-158\" style=\"font-family: MathJax_Math; font-style: italic;\">g<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>l</mi><mi>o</mi><mi>g</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-21\">log</script>函数的底可以比2更大，因此，和二叉树相比，极大地减少了磁盘读取的次数。</p><br><br><br><br><h3 id=\"三搜索算法\"><a name=\"t3\"></a>三、搜索算法</h3><br><br><p>这里，我直接用博客<a href=\"http://blog.csdn.net/v_july_v/article/details/6530142\" rel=\"nofollow\" target=\"_blank\">从B树、B+树、B树谈到R 树</a>中的例子（因为这个例子非常好，也有现成的图示，就直接拿来用，不再自己班门弄斧了），一棵已经建立好的B树如下图所示，我们的目的是查找关键字为29的文件：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320103957037?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%\"></center><p></p><br><br><p>先简单对上图说明一下：</p><br><br><ul><br><li><p>图中的小红方块表示对应关键字所代表的文件的存储位置，实际上可以看做是一个地址，比如根节点中17旁边的小红块表示的就是关键字17所对应的文件在硬盘中的存储地址。</p></li><br><li><p>P是指针，不用多说了，需要注意的是：指针，关键字，以及关键字所代表的文件地址这三样东西合起来构成了B树的一个节点，这个节点存储在一个磁盘块上</p></li><br></ul><br><br><p>下面，看看搜索关键字的29的文件的过程：</p><br><br><ol><br><li><p>从根节点开始，读取根节点信息，根节点有2个关键字：17和35。因为17 &lt; 29 &lt; 35，所以找到指针P2指向的子树，也就是磁盘块3（1次I/0操作）</p></li><br><li><p>读取当前节点信息，当前节点有2个关键字：26和30。26 &lt; 29 &lt; 30，找到指针P2指向的子树，也就是磁盘块8（2次I/0操作）</p></li><br><li><p>读取当前节点信息，当前节点有2个关键字：28和29。找到了！（3次I/0操作）</p></li><br></ol><br><br><p>由上面的过程可见，同样的操作，如果使用平衡二叉树，那么需要至少4次I/O操作，B树比之二叉树的这种优势，还会随着节点数的增加而增加。另外，因为B树节点中的关键字都是排序好的，所以，在节点中的信息被读入内存之后，可以采用二分查找这种快速的查找方式，更进一步减少了读入内存之后的计算时间，由此更能说明对于外存数据结构来说，I/O次数是其查找信息中最大的时间消耗，而我们要做的所有努力就是尽量在搜索过程中减少I/O操作的次数。</p><br><br><br><br><h3 id=\"四向b树插入关键字\"><a name=\"t4\"></a>四、向B树插入关键字</h3><br><br><p>向B树种插入关键字的过程与向二叉查找树中插入关键字的过程类似，但是要稍微复杂一点，因为根据上面B树的定义，我们可以看出，B树每个节点中关键字的个数是有范围要求的，同时，B树是平衡的，所以，如果像二叉查找树那样，直接找到相关的叶子，插入关键字，有可能会导致B树的结构发生变化而这种变化会使得B树不再是B树。</p><br><br><p>所以，我们这样来设计B树种对新关键字的插入：首先找到要插入的关键字应该插入的叶子节点（为方便描述，设这个叶子节点为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-22-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-159\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-160\"><span class=\"mi\" id=\"MathJax-Span-161\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-22\">u</script>），如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-23-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-162\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-163\"><span class=\"mi\" id=\"MathJax-Span-164\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-23\">u</script>是满的（恰好有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-24-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-165\" style=\"width: 3.128em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.604em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.53em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-166\"><span class=\"mn\" id=\"MathJax-Span-167\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mi\" id=\"MathJax-Span-168\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-169\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-170\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>2</mn><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-24\">2t - 1</script>个关键字），那么由于不能将一个关键字插入满的节点，我们需要对<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-25-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-171\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-172\"><span class=\"mi\" id=\"MathJax-Span-173\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-25\">u</script>按其<font color=\"RED\">当前排在中间关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-26-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-174\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-175\"><span class=\"mi\" id=\"MathJax-Span-176\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-177\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-178\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-179\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-180\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-181\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-182\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-26\">u.key_t</script><font color=\"K\">进行分裂，分裂成两个节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-27-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-183\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.693em, 1002.45em, 2.642em, -1000em); top: -2.292em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-184\"><span class=\"msubsup\" id=\"MathJax-Span-185\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-186\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-187\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-188\" style=\"font-family: MathJax_Main;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-189\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-190\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-191\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.292em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-27\">u_1, u_2</script>；同时，作为分裂标准的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-28-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-192\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-193\"><span class=\"mi\" id=\"MathJax-Span-194\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-195\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-196\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-197\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-198\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-199\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-200\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-28\">u.key_t</script>会被上移到<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-29-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-201\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-202\"><span class=\"mi\" id=\"MathJax-Span-203\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-29\">u</script>的父节点中，在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-30-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-204\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-205\"><span class=\"mi\" id=\"MathJax-Span-206\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-207\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-208\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-209\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-210\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-211\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-212\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-30\">u.key_t</script>插入前，如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-31-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-213\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-214\"><span class=\"mi\" id=\"MathJax-Span-215\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-31\">u</script>的父节点未满，则直接插入即可；如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-32-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-216\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-217\"><span class=\"mi\" id=\"MathJax-Span-218\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-32\">u</script>的父节点已满，则按照上面的方法对<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-33-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-219\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-220\"><span class=\"mi\" id=\"MathJax-Span-221\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-33\">u</script>的父节点分裂，这个过程如果一直不停止的话，最终会导致B树的根节点分裂，B树的高度增加一层。</font></font></p><br><br><p>我用《算导》中的一个题目展示一下这种插入关键字的过程：</p><br><br><p>现在我们要将关键字序列：F, S, Q, K, C, L, H, T, V, W, M, R, N, P, A, B, X, Y依次插入一棵最小度为2的B树中。也就是说，这棵树的节点中，最多有3个关键字，最少有1个关键字。</p><br><br><p><strong>第1步</strong>，F, S, Q可以被插入一个节点（也就是根节点）</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320110812239?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第2步</strong>，插入关键字K，因为节点已满，所以在插入前，发生分裂，中间关键字Q上移，建立了一个新的根节点：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320112233417?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第3步</strong>，插入关键字C:</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320112758203?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第4步</strong>，插入关键字L，L应该被插入到根节点的左侧的孩子中，因为此时该节点已满，所以在插入前，发生分裂：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320113252304?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第5步</strong>，插入关键字H, T, V，这个过程没有发生节点的分裂：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320113755967?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第6步</strong>，插入关键字W，W应该被插入到根节点的最右侧的孩子中，因为此时该节点已满，所以在插入前，关键字T上移，最右端的叶子节点发生分裂：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20171203222249465?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第7步</strong>，插入关键字M，M应该被插入到根节点的左起第2个孩子中，因为此时该节点已满，所以在插入前，发生分裂，分裂之后，中间关键字K上移，导致根节点发生分裂，树高增加1：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20171203222333265?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p>第8步，同样的道理，插入关键字R, N, P, A, B, X, Y：最终得到的B树如下：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20171203222406990?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><br><br><h3 id=\"五从b树删除关键字\"><a name=\"t5\"></a>五、从B树删除关键字</h3><br><br><p>删除操作的基本思想和插入操作是一样的，都是不能因为关键字的改变而改变B树的结构。插入操作主要防止的是某个节点中关键字的个数太多，所以采用了分裂；删除则是要防止某个节点中，因删除了关键字而导致这个节点的关键字个数太少，所以采用了合并操作。</p><br><br><p>下面分三种情况来讨论下删除操作是如何工作的，这个过程的顺序是自根节点起向下遍历B树</p><br><br><p><strong>Case - 1：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-176-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-222\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-223\"><span class=\"mi\" id=\"MathJax-Span-224\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-176\">k</script>在节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-177-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-225\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-226\"><span class=\"mi\" id=\"MathJax-Span-227\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-177\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-178-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-228\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-229\"><span class=\"mi\" id=\"MathJax-Span-230\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-178\">u</script>是叶子节点，那么直接删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-179-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-231\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-232\"><span class=\"mi\" id=\"MathJax-Span-233\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-179\">k</script></p><br><br><p><strong>Case - 2：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-180-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-234\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-235\"><span class=\"mi\" id=\"MathJax-Span-236\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-180\">k</script>在节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-181-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-237\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-238\"><span class=\"mi\" id=\"MathJax-Span-239\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-181\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-182-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-240\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-241\"><span class=\"mi\" id=\"MathJax-Span-242\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-182\">u</script>是内部节点，那么分以下3种情况讨论：</p><br><br><p>(1) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-183-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-243\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-244\"><span class=\"mi\" id=\"MathJax-Span-245\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-183\">u</script>中<font color=\"red\">前于<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-184-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-246\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-247\"><span class=\"mi\" id=\"MathJax-Span-248\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-184\">k</script>的子节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-185-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-249\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-250\"><span class=\"msubsup\" id=\"MathJax-Span-251\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-252\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-253\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-185\">u_1</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-186-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-254\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-255\"><span class=\"mi\" id=\"MathJax-Span-256\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-186\">t</script>个关键字，则找出<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-187-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-257\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-258\"><span class=\"mi\" id=\"MathJax-Span-259\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-187\">k</script>在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-188-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-260\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-261\"><span class=\"msubsup\" id=\"MathJax-Span-262\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-263\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-264\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-188\">u_1</script>为根的子树中的<font color=\"red\">前驱<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-189-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-265\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-266\"><span class=\"msup\" id=\"MathJax-Span-267\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-268\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-269\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-189\">k’</script>（前驱的意思是<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-190-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-270\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-271\"><span class=\"msubsup\" id=\"MathJax-Span-272\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-273\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-274\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-190\">u_1</script>中比<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-191-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-275\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-276\"><span class=\"mi\" id=\"MathJax-Span-277\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-191\">k</script>小的关键字中最大的），然后在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-192-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-278\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-279\"><span class=\"msubsup\" id=\"MathJax-Span-280\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-281\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-282\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-192\">u_1</script>为根的子树中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-193-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-283\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-284\"><span class=\"msup\" id=\"MathJax-Span-285\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-286\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-287\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-193\">k’</script>，并在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-194-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-288\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-289\"><span class=\"mi\" id=\"MathJax-Span-290\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-194\">u</script>中以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-195-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-291\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-292\"><span class=\"msup\" id=\"MathJax-Span-293\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-294\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-295\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-195\">k’</script>替代<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-196-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-296\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-297\"><span class=\"mi\" id=\"MathJax-Span-298\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-196\">k</script></font></font></font></font></p><br><br><p>(2) 如果上面的条件(1)不成立，也就是说，前于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-197-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-299\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-300\"><span class=\"mi\" id=\"MathJax-Span-301\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-197\">k</script>的子节点中关键字的个数小于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-198-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-302\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-303\"><span class=\"mi\" id=\"MathJax-Span-304\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-198\">t</script>了，那么就去找<font color=\"red\">后于<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-199-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-305\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-306\"><span class=\"mi\" id=\"MathJax-Span-307\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-199\">k</script>的子节点，记为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-200-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-308\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-309\"><span class=\"msubsup\" id=\"MathJax-Span-310\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-311\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-312\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-200\">u_2</script>。若<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-201-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-313\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-314\"><span class=\"msubsup\" id=\"MathJax-Span-315\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-316\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-317\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-201\">u_2</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-202-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-318\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-319\"><span class=\"mi\" id=\"MathJax-Span-320\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-202\">t</script>个关键字，则找出<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-203-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-321\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-322\"><span class=\"mi\" id=\"MathJax-Span-323\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-203\">k</script>在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-204-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-324\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-325\"><span class=\"msubsup\" id=\"MathJax-Span-326\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-327\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-328\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-204\">u_2</script>为根的子树中的<font color=\"red\">后继<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-205-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-329\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-330\"><span class=\"msup\" id=\"MathJax-Span-331\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-332\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-333\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-205\">k’</script>(大于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-206-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-334\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-335\"><span class=\"mi\" id=\"MathJax-Span-336\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-206\">k</script>的关键字中最小的)，然后在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-207-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-337\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-338\"><span class=\"msubsup\" id=\"MathJax-Span-339\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-340\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-341\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-207\">u_2</script>为根的子树中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-208-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-342\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-343\"><span class=\"msup\" id=\"MathJax-Span-344\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-345\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-346\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-208\">k’</script>，并在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-209-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-347\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-348\"><span class=\"mi\" id=\"MathJax-Span-349\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-209\">u</script>中以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-210-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-350\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-351\"><span class=\"msup\" id=\"MathJax-Span-352\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-353\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-354\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-210\">k’</script>替代<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-211-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-355\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-356\"><span class=\"mi\" id=\"MathJax-Span-357\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-211\">k</script>。可以看出（2）是（1）的一个对称过程</font></font></font></font></p><br><br><p>(3) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-212-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-358\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.693em, 1002.45em, 2.642em, -1000em); top: -2.292em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-359\"><span class=\"msubsup\" id=\"MathJax-Span-360\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-361\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-362\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-363\" style=\"font-family: MathJax_Main;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-364\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-365\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-366\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.292em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-212\">u_1, u_2</script>中的关键字个数都是<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-213-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-367\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-368\"><span class=\"mi\" id=\"MathJax-Span-369\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-370\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-371\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-213\">t - 1</script>，则将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-214-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-372\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-373\"><span class=\"mi\" id=\"MathJax-Span-374\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-214\">k</script>和<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-215-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-375\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-376\"><span class=\"msubsup\" id=\"MathJax-Span-377\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-378\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-379\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-215\">u_2</script>合并后并入<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-216-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-380\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-381\"><span class=\"msubsup\" id=\"MathJax-Span-382\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-383\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-384\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-216\">u_1</script>，这样<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-217-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-385\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-386\"><span class=\"mi\" id=\"MathJax-Span-387\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-217\">u</script>就失去了<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-218-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-388\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-389\"><span class=\"mi\" id=\"MathJax-Span-390\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-218\">k</script>和指向<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-219-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-391\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-392\"><span class=\"msubsup\" id=\"MathJax-Span-393\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-394\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-395\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-219\">u_2</script>的指针，最后递归地从<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-220-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-396\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-397\"><span class=\"msubsup\" id=\"MathJax-Span-398\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-399\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-400\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-220\">u_1</script>中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-221-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-401\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-402\"><span class=\"mi\" id=\"MathJax-Span-403\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-221\">k</script></p><br><br><p><strong>Case - 3：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-222-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-404\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-405\"><span class=\"mi\" id=\"MathJax-Span-406\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-222\">k</script>不在当前节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-223-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-407\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-408\"><span class=\"mi\" id=\"MathJax-Span-409\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-223\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-224-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-410\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-411\"><span class=\"mi\" id=\"MathJax-Span-412\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-224\">u</script>是内部节点（如果自上而下扫描到叶子都没有这个关键字的话，那就说明要删除的关键字根本就不存在，所以此处只考虑<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-225-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-413\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-414\"><span class=\"mi\" id=\"MathJax-Span-415\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-225\">u</script>是内部节点的情况），则首先确定包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-226-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-416\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-417\"><span class=\"mi\" id=\"MathJax-Span-418\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-226\">k</script>的<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-227-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-419\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-420\"><span class=\"mi\" id=\"MathJax-Span-421\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-227\">u</script>的子树，我们这里设为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-228-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-422\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-423\"><span class=\"mi\" id=\"MathJax-Span-424\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-425\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-426\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-427\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-428\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-228\">u.p_i</script>。如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-229-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-429\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-430\"><span class=\"mi\" id=\"MathJax-Span-431\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-432\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-433\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-434\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-435\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-229\">u.p_i</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-230-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-436\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-437\"><span class=\"mi\" id=\"MathJax-Span-438\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-230\">t</script>个关键字，那么继续扫描，寻找下一个要被扫描的子树；如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-231-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-439\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-440\"><span class=\"mi\" id=\"MathJax-Span-441\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-442\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-443\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-444\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-445\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-231\">u.p_i</script>中只含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-232-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-446\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-447\"><span class=\"mi\" id=\"MathJax-Span-448\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-449\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-450\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-232\">t - 1</script>个关键字，则需要分下面两种情况进行操作：</p><br><br><p>(1) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-233-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-451\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-452\"><span class=\"mi\" id=\"MathJax-Span-453\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-454\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-455\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-456\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-457\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-233\">u.p_i</script>至少有一个相邻的兄弟比较“丰满”（即这个兄弟至少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-234-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-458\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-459\"><span class=\"mi\" id=\"MathJax-Span-460\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-234\">t</script>个关键字）。则将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-235-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-461\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-462\"><span class=\"mi\" id=\"MathJax-Span-463\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-235\">u</script>中的一个关键字降至<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-236-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-464\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-465\"><span class=\"mi\" id=\"MathJax-Span-466\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-467\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-468\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-469\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-470\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-236\">u.p_i</script>，同时令<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-237-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-471\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-472\"><span class=\"mi\" id=\"MathJax-Span-473\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-474\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-475\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-476\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-477\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-237\">u.p_i</script>的最“丰满”的兄弟中升一个关键至<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-238-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-478\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-479\"><span class=\"mi\" id=\"MathJax-Span-480\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-238\">u</script>。然后继续扫描B树，寻找<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-239-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-481\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-482\"><span class=\"mi\" id=\"MathJax-Span-483\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-239\">k</script></p><br><br><p>(2) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-240-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-484\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-485\"><span class=\"mi\" id=\"MathJax-Span-486\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-487\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-488\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-489\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-490\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-240\">u.p_i</script>的两个相邻的兄弟都不“丰满”（都只有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-241-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-491\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-492\"><span class=\"mi\" id=\"MathJax-Span-493\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-494\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-495\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-241\">t - 1</script>个关键字）。则令<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-242-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-496\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-497\"><span class=\"mi\" id=\"MathJax-Span-498\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-499\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-500\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-501\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-502\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-242\">u.p_i</script>和其一个兄弟合并，再将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-243-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-503\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-504\"><span class=\"mi\" id=\"MathJax-Span-505\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-243\">u</script>的一个关键字降至新合并的节点。使之成为该节点的中间关键字。</p><br><br><p>举个例子，就可以清晰看到上面说的这几种删除的情况。拿下图所示的最小度为3的B树为例（即树中除根和叶子之外的节点只能有2，3，4三种情况的关键字个数）：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320142505013?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 1: 删除上图中的关键字F，过程如下：先扫描根节点（含P），再扫描其左孩子（含CGM），发现丰满，继续扫描到左起第二个叶子，然后就是符合<strong>Case - 1</strong>的情况了。结果如下图所示：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20171228154424767?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 2: 再删除M，此时遇到<strong>Case - 2(1)</strong>的情况，结果如下图所示：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320143230759?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 3: 再删除G，G的前驱、后驱都是不丰满的。也就是<strong>Case - 2(3)</strong>的情况，结果如下图所示：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320143617327?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 4: 再删除D，扫描至含CL的节点后，发现它不丰满，且他的兄弟也不丰满。则将节点CL和TX合并，并降关键字P至新合并的节点。也就是<strong>Case - 3(2)</strong>的情况，结果如下图所示，此时，树高减1：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320153842292?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 5: 再删除B，也就是<strong>Case - 3(1)</strong>的情况，结果如下图所示：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320154130371?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>下面总结一下B树的删除原理：</p><br><br><ol><br><li>基本原则是不能破坏关键字个数的限制；</li><br><li>如果在当前节点中，找到了要删的关键字，且当前节点为内部节点。那么，如果有比较丰满的前驱或后继，借一个上来，再把要删的关键字降下去，在子树中递归删除；如果没有比较丰满的前驱或后继，则令前驱与后继合并，把要删的关键字降下去，递归删除；</li><br><li>如果在当前节点中，还未找到要删的关键字，且当前节点为内部节点。那么去找下一步应该扫描的孩子，并判断这个孩子是否丰满，如果丰满，继续扫描；如果不丰满，则看其有无丰满的兄弟，有的话，从父亲那里接一个，父亲再找其最丰满的兄弟借一个；如果没有丰满的兄弟，则合并，再令父亲下降，以保证B树的结构。</li><br></ol><br><br><h2 id=\"b树-1\"><a name=\"t6\"></a>B+树</h2><br><br><br><br><h3 id=\"b树的定义\"><a name=\"t7\"></a>B+树的定义</h3><br><br><p>B+树是B树的一种变形，它更适合实际应用中操作系统的文件索引和数据库索引。定义如下：（为和大多资料保持一致，这里使用阶数<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-102-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-506\" style=\"width: 1.096em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.885em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.86em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-507\"><span class=\"mi\" id=\"MathJax-Span-508\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-102\">m</script>来定义B+树，而不像之前的B树中，使用的是最小度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-103-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-509\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-510\"><span class=\"mi\" id=\"MathJax-Span-511\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-103\">t</script>来定义）</p><br><br><ol><br><li>除根节点外的内部节点，每个节点最多有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-104-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-512\" style=\"width: 1.074em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.893em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.87em, 2.451em, -1000em); top: -2.262em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-513\"><span class=\"mi\" id=\"MathJax-Span-514\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.262em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.085em; border-left: 0px solid; width: 0px; height: 0.686em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-104\">m</script>个关键字，最少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-105-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2308;</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2309;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-515\" style=\"width: 2.265em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.845em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.393em, 1001.67em, 2.893em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-516\"><span class=\"mo\" id=\"MathJax-Span-517\" style=\"font-family: MathJax_Main;\">⌈</span><span class=\"mfrac\" id=\"MathJax-Span-518\"><span style=\"display: inline-block; position: relative; width: 0.741em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.497em, 1000.61em, 4.174em, -1000em); top: -4.417em; left: 50%; margin-left: -0.31em;\"><span class=\"mi\" id=\"MathJax-Span-519\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">m</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.339em, 1000.32em, 4.167em, -1000em); top: -3.596em; left: 50%; margin-left: -0.177em;\"><span class=\"mn\" id=\"MathJax-Span-520\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1000.74em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.741em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-521\" style=\"font-family: MathJax_Main;\">⌉</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.542em; border-left: 0px solid; width: 0px; height: 1.514em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo fence=\"false\" stretchy=\"false\">⌈</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=\"false\" stretchy=\"false\">⌉</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-105\">\\lceil \\frac{m}{2} \\rceil</script>个关键字。其中每个关键字对应一个子树（也就是最多有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-106-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-522\" style=\"width: 1.074em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.893em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.87em, 2.451em, -1000em); top: -2.262em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-523\"><span class=\"mi\" id=\"MathJax-Span-524\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.262em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.085em; border-left: 0px solid; width: 0px; height: 0.686em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-106\">m</script>棵子树，最少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-107-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2308;</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2309;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-525\" style=\"width: 2.265em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.845em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.393em, 1001.67em, 2.893em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-526\"><span class=\"mo\" id=\"MathJax-Span-527\" style=\"font-family: MathJax_Main;\">⌈</span><span class=\"mfrac\" id=\"MathJax-Span-528\"><span style=\"display: inline-block; position: relative; width: 0.741em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.497em, 1000.61em, 4.174em, -1000em); top: -4.417em; left: 50%; margin-left: -0.31em;\"><span class=\"mi\" id=\"MathJax-Span-529\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">m</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.339em, 1000.32em, 4.167em, -1000em); top: -3.596em; left: 50%; margin-left: -0.177em;\"><span class=\"mn\" id=\"MathJax-Span-530\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1000.74em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.741em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-531\" style=\"font-family: MathJax_Main;\">⌉</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.542em; border-left: 0px solid; width: 0px; height: 1.514em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo fence=\"false\" stretchy=\"false\">⌈</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=\"false\" stretchy=\"false\">⌉</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-107\">\\lceil \\frac{m}{2} \\rceil</script>棵子树）；</li><br><li>根节点要么没有子树，要么至少有2棵子树；</li><br><li><p>所有的叶子节点包含了全部的关键字以及这些关键字指向文件的指针，并且：</p><br><br><ul><li>所有叶子节点中的关键字按大小顺序排列</li><br><li>相邻的叶子节点顺序链接（相当于是构成了一个顺序链表）</li><br><li>所有叶子节点在同一层</li></ul></li><br><li>所有分支节点的关键字都是对应子树中关键字的最大值</li><br></ol><br><br><p>比如，下图就是一个非常典型的B+树的例子。</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320155354653?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>B+树和B树相比，主要的不同点在以下3项：</p><br><br><ul><br><li>内部节点中，关键字的个数与其子树的个数相同，不像B树种，子树的个数总比关键字个数多1个</li><br><li>所有指向文件的关键字及其指针都在叶子节点中，不像B树，有的指向文件的关键字是在内部节点中。换句话说，B+树中，内部节点仅仅起到索引的作用，</li><br><li>在搜索过程中，如果查询和内部节点的关键字一致，那么搜索过程不停止，而是继续向下搜索这个分支。</li><br></ul><br><br><p>根据B+树的结构，我们可以发现B+树相比于B树，在文件系统，数据库系统当中，更有优势，原因如下：</p><br><br><ol><br><li><p>B+树的磁盘读写代价更低 <br><br>B+树的内部结点并没有指向关键字具体信息的指针。因此其内部结点相对B树更小。如果把所有同一内部结点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。一次性读入内存中的需要查找的关键字也就越多。相对来说I/O读写次数也就降低了。</p></li><br><li><p>B+树的查询效率更加稳定 <br><br>由于内部结点并不是最终指向文件内容的结点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须走一条从根结点到叶子结点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当。</p></li><br><li><p>B+树更有利于对数据库的扫描 <br><br>B树在提高了磁盘IO性能的同时并没有解决元素遍历的效率低下的问题，而B+树只需要遍历叶子节点就可以解决对全部关键字信息的扫描，所以对于数据库中频繁使用的range query，B+树有着更高的性能。</p></li><br></ol>            </div>","site":{"data":{}},"excerpt":"","more":"<p>题目1： Mysql数据库用过吧？l里面的索引是基于什么数据结构。</p>\n<p>答：主要是基于Hash表和B+树</p>\n<p>题目2： 很好请你说一下B+树的实现细节是什么样的？B-树和B+树有什么区别？联合索引在B+树中如何存储？</p>\n<p>答: 首先，数据库使用树型结构来增加查询效率，并保持有序。那么，为什么不使用二叉树来实现数据结构呢，二叉树算法时间复杂度是lg(N)，查询速度和比较次数都是较小的。</p>\n<p>实际上，查询索引操作最耗资源的不在内存中，而是磁盘IO。索引是存在磁盘上的，当数据量比较大的时候，索引的大小可能达到几个G。那么，我们利用索引进行查询的时候，不可能把索引直接加载到内存中，只能一次读取一个磁盘页，一个磁盘页对应着一个节点，一次读取操作时一个磁盘io。</p>\n<p>在二叉树查询时，最坏的情况下查找的次数是树的高度，即io次数为树的高度。B-树就是比二叉树“矮胖”的树。</p>\n<p>二叉树的特征如下：</p>\n<ol>\n<li><p>根节点至少有两个子女</p>\n</li>\n<li><p>每个中间节点包含k-1个元素和k个孩子，其中 m/2 &lt;= k &lt;= m</p>\n</li>\n<li><p>每个叶子节点包含k-1个元素，其中 m/2 &lt;= k &lt;= m</p>\n</li>\n<li><p>所有叶子节点位于同一层</p>\n</li>\n<li><p>节点中的元素从小到大排列，正好是孩子节点的值域。（就是孩子节点的元素都比父节点中元素的最小值大，比父节点元素的最大值小）</p>\n</li>\n</ol>\n<p>B-树查询的次数并不比二叉树的次数小，但是相比起磁盘io速度，内存中比较的耗时就不足为提了。所以只要树的高度足够低，io次数少，就可以提升查找性能。而每个节点中有多个元素，都只在内存中操作。</p>\n<p>而B+树是基于B-树的，增加了如下规则：</p>\n<ol>\n<li><p>有k个子树的中间节点包含有k个元素（B树中是k-1个元素），每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。</p>\n</li>\n<li><p>所有的叶子结点中包含了全部元素的信息，及指向含这些元素记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。</p>\n</li>\n<li><p>所有的中间节点元素都同时存在于子节点，在子节点元素中是最大（或最小）元素。</p>\n</li>\n</ol>\n<p>所以，B+树对比B-树有如下好处：</p>\n<p>io次数少：b+树中间节点只存索引，不存在实际的数据，所以可以存储更多的数据。索引树更加的矮胖，io次数更少。<br>性能稳定：b+树数据只存在于叶子节点，查询性能稳定<br>范围查询简单：b+树不需要中序遍历，遍历链表即可。</p>\n<hr>\n<div class=\"markdown_views\"><br>                <p>B树是为实现高效的磁盘存取而设计的多叉平衡搜索树。这个概念在文件系统，数据库系统中非常重要。当然，有关于B树的产生，发展，结构等等方面的介绍已经非常详细，所以本文只是介绍有关于B树和B+树最核心的知识点，也算是我本人的学习笔记。至于详细的资料，因为毕竟有着太多，所以不再赘述。可以向大家推荐一篇博客：<a href=\"http://blog.csdn.net/v_july_v/article/details/6530142\" rel=\"nofollow\" target=\"_blank\">从B树、B+树、B<em>树谈到R 树</em></a>，这篇文章中，作者对于B树系列数据结构的讲解非常详细，我的这篇博客，也是大量参考了人家的很多例子和描述。</p><br><br><br><br><h2 id=\"b树\"><a name=\"t0\"></a>B树</h2><br><br><br><br><h3 id=\"一基本原理\"><a name=\"t1\"></a>一、基本原理</h3><br><br><p>首先，简单说一下B树产生的原因。B树是一种查找树，我们知道，这一类树（比如二叉查找树，红黑树等等）最初生成的目的都是为了解决某种系统中，查找效率低的问题。B树也是如此，它最初启发于二叉查找树，二叉查找树的特点是每个非叶节点都只有两个孩子节点。然而这种做法会导致当数据量非常大时，二叉查找树的深度过深，搜索算法自根节点向下搜索时，需要访问的节点也就变的相当多。如果这些节点存储在外存储器中，每访问一个节点，相当于就是进行了一次I/O操作，随着树高度的增加，频繁的I/O操作一定会降低查询的效率。</p><br><br><p>这里有一个基本的概念，就是说我们从外存储器中读取信息的步骤，简单来分，大致有两步：</p><br><br><ol><br><li>找到存储这个数据所对应的磁盘页面，这个过程是机械化的过程，需要依靠磁臂的转动，找到对应磁道，所以耗时长。</li><br><li>读取数据进内存，并实施运算，这是电子化的过程，相当快。</li><br></ol><br><br><p>综上，对于外存储器的信息读取最大的时间消耗在于寻找磁盘页面。那么一个基本的想法就是能不能减少这种读取的次数，在一个磁盘页面上，多存储一些索引信息。B树的基本逻辑就是这个思路，它要改二叉为多叉，每个节点存储更多的指针信息，以降低I/O操作数。</p><br><br><br><br><h3 id=\"二基本结构\"><a name=\"t2\"></a>二、基本结构</h3><br><br><br><br><h4 id=\"1-b树的定义\">1. B树的定义</h4><br><br><p>有关于B树概念的定义，不同的资料在表述上有所差别。我在这里采用《算导》中的定义，用最小度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mi\" id=\"MathJax-Span-3\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">t</script>来定义B树。一棵最小度为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-2-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-4\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-5\"><span class=\"mi\" id=\"MathJax-Span-6\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-2\">t</script>的B树是满足如下四个条件的平衡多叉树：</p><br><br><ul><br><li><p>每个节点最多包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-3-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-7\" style=\"width: 3.128em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.604em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.53em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-8\"><span class=\"mn\" id=\"MathJax-Span-9\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mi\" id=\"MathJax-Span-10\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-11\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-12\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>2</mn><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-3\">2t - 1</script>个关键字；除根节点外的每个节点至少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-4-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-13\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-14\"><span class=\"mi\" id=\"MathJax-Span-15\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-16\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-17\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-4\">t - 1</script>个关键字（<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-5-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2264;</mo><mn>2</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-18\" style=\"width: 2.659em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.188em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.14em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-19\"><span class=\"mi\" id=\"MathJax-Span-20\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-21\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mn\" id=\"MathJax-Span-22\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">2</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>≤</mo><mn>2</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-5\">t \\leq 2</script>），根节点至少有一个关键字；</p></li><br><li><p>一个节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-6-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-23\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-24\"><span class=\"mi\" id=\"MathJax-Span-25\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-6\">u</script>中的关键字按非降序排列：<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-7-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>&amp;#x2264;</mo><mo>&amp;#x2026;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>n</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-26\" style=\"width: 15.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 12.865em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1012.87em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-27\"><span class=\"mi\" id=\"MathJax-Span-28\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-29\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-30\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-31\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-32\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-33\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-34\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-35\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-36\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-37\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-38\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-39\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-40\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-41\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-42\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-43\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mo\" id=\"MathJax-Span-44\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">…</span><span class=\"mi\" id=\"MathJax-Span-45\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">u</span><span class=\"mo\" id=\"MathJax-Span-46\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-47\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-48\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-49\"><span style=\"display: inline-block; position: relative; width: 0.989em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-50\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-51\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>≤</mo><mo>…</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>n</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-7\">u.key_1 \\leq u.key_2 \\leq \\dots u.key_n</script>；</p></li><br><li><p>每个节点的关键字对其子树的范围分割。设节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-8-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-52\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-53\"><span class=\"mi\" id=\"MathJax-Span-54\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-8\">u</script>有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-9-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>+</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-55\" style=\"width: 2.815em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.344em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.27em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-56\"><span class=\"mi\" id=\"MathJax-Span-57\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-58\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-59\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>+</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-9\">n + 1</script>个指针，指向其<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-10-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>+</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-60\" style=\"width: 2.815em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.344em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.27em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-61\"><span class=\"mi\" id=\"MathJax-Span-62\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-63\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-64\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>+</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-10\">n + 1</script>棵子树，指针为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-11-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>&amp;#x2026;</mo><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>n</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-65\" style=\"width: 6.878em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.729em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1005.73em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-66\"><span class=\"mi\" id=\"MathJax-Span-67\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-68\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-69\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.932em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-70\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mn\" id=\"MathJax-Span-71\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-72\" style=\"font-family: MathJax_Main;\">,</span><span class=\"mo\" id=\"MathJax-Span-73\" style=\"font-family: MathJax_Main; padding-left: 0.167em;\">…</span><span class=\"mi\" id=\"MathJax-Span-74\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">u</span><span class=\"mo\" id=\"MathJax-Span-75\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-76\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.002em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-77\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-78\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>n</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-11\">u.p_1, \\dots u.p_n</script>，关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-12-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-79\" style=\"width: 1.044em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.833em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.389em, 1000.83em, 2.554em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-80\"><span class=\"msubsup\" id=\"MathJax-Span-81\"><span style=\"display: inline-block; position: relative; width: 0.84em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-82\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mi\" id=\"MathJax-Span-83\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.252em; border-left: 0px solid; width: 0px; height: 1.147em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>k</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-12\">k_i</script>为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-13-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-84\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-85\"><span class=\"mi\" id=\"MathJax-Span-86\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-87\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-88\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-89\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-90\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-13\">u.p_i</script>所指的子树中的关键字，有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-14-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>&amp;#x2264;</mo><msub><mi>k</mi><mn>2</mn></msub><mo>&amp;#x2264;</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>&amp;#x2026;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-91\" style=\"width: 15.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 13.073em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1012.99em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-92\"><span class=\"msubsup\" id=\"MathJax-Span-93\"><span style=\"display: inline-block; position: relative; width: 0.95em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-94\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mn\" id=\"MathJax-Span-95\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-96\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-97\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-98\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-99\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-100\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-101\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-102\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-103\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-104\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-105\" style=\"padding-left: 0.278em;\"><span style=\"display: inline-block; position: relative; width: 0.95em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-106\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.521em;\"><span class=\"mn\" id=\"MathJax-Span-107\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-108\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-109\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;\">u</span><span class=\"mo\" id=\"MathJax-Span-110\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-111\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-112\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-113\"><span style=\"display: inline-block; position: relative; width: 0.919em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-114\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mn\" id=\"MathJax-Span-115\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-116\" style=\"font-family: MathJax_Main; padding-left: 0.167em;\">…</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>k</mi><mn>1</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>1</mn></msub><mo>≤</mo><msub><mi>k</mi><mn>2</mn></msub><mo>≤</mo><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mn>2</mn></msub><mo>…</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-14\">k_1 \\leq u.key_1 \\leq k_2 \\leq u.key_2 \\dots</script>成立；</p></li><br><li><p>所有叶子节点具有相同的深度，即树的高度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-15-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-117\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-118\"><span class=\"mi\" id=\"MathJax-Span-119\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>h</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-15\">h</script>。这表明B树是平衡的。平衡性其实正是B树名字的来源，B表示的正是单词Balanced；</p></li><br></ul><br><br><p>一个标准的B树如下图：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320103506070?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%\" height=\"50%\"></center><p></p><br><br><br><br><h4 id=\"2-b树的高度\">2. B树的高度</h4><br><br><p>我直接给出结论了：对于一个包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-16-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-120\" style=\"width: 0.784em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.625em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.61em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-121\"><span class=\"mi\" id=\"MathJax-Span-122\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-16\">n</script>个关键字(<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-17-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>&amp;#x2265;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-123\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.38em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-124\"><span class=\"mi\" id=\"MathJax-Span-125\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-126\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-127\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi><mo>≥</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-17\">n \\geq 1</script>)，最小度数<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-18-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2265;</mo><mn>2</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-128\" style=\"width: 2.659em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.188em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.14em, 2.638em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-129\"><span class=\"mi\" id=\"MathJax-Span-130\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-131\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-132\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">2</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.228em; border-left: 0px solid; width: 0px; height: 1.09em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>≥</mo><mn>2</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-18\">t \\geq 2</script>的B树T，其高度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-19-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-133\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-134\"><span class=\"mi\" id=\"MathJax-Span-135\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>h</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-19\">h</script>满足如下规律：</p><br><br><br><br><p><span class=\"MathJax_Preview\"></span></p><div class=\"MathJax_Display\" role=\"textbox\" aria-readonly=\"true\" style=\"text-align: center;\"></div><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-20-Frame\" tabindex=\"0\" style=\"text-align: center; position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mo>&amp;#x2264;</mo><msub><mi>log</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi></mrow></msub><mo>&amp;#x2061;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-136\" style=\"width: 7.682em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 6.369em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.8em, 1006.37em, 3.186em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-137\"><span class=\"mi\" id=\"MathJax-Span-138\" style=\"font-family: MathJax_Math; font-style: italic;\">h</span><span class=\"mo\" id=\"MathJax-Span-139\" style=\"font-family: MathJax_Main; padding-left: 0.278em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-140\" style=\"padding-left: 0.278em;\"><span style=\"display: inline-block; position: relative; width: 1.608em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.116em, 1001.26em, 4.373em, -1000em); top: -3.988em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-141\" style=\"font-family: MathJax_Main;\">log</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; top: -3.747em; left: 1.278em;\"><span class=\"texatom\" id=\"MathJax-Span-142\"><span class=\"mrow\" id=\"MathJax-Span-143\"><span class=\"mi\" id=\"MathJax-Span-144\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span></span></span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-145\"></span><span class=\"texatom\" id=\"MathJax-Span-146\" style=\"padding-left: 0.167em;\"><span class=\"mrow\" id=\"MathJax-Span-147\"><span class=\"mfrac\" id=\"MathJax-Span-148\"><span style=\"display: inline-block; position: relative; width: 2.442em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.144em, 1002.25em, 4.249em, -1000em); top: -4.665em; left: 50%; margin-left: -1.161em;\"><span class=\"mrow\" id=\"MathJax-Span-149\"><span class=\"mi\" id=\"MathJax-Span-150\" style=\"font-family: MathJax_Math; font-style: italic;\">n</span><span class=\"mo\" id=\"MathJax-Span-151\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">+</span><span class=\"mn\" id=\"MathJax-Span-152\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.144em, 1000.45em, 4.167em, -1000em); top: -3.302em; left: 50%; margin-left: -0.25em;\"><span class=\"mn\" id=\"MathJax-Span-153\" style=\"font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1002.44em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.442em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.895em; border-left: 0px solid; width: 0px; height: 2.577em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi>h</mi><mo>≤</mo><msub><mi>log</mi><mrow class=\"MJX-TeXAtom-ORD\"><mi>t</mi></mrow></msub><mo>⁡</mo><mrow class=\"MJX-TeXAtom-ORD\"><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-20\">\\begin{equation}<br>h \\leq \\log_{t}{\\frac{n + 1}{2}}<br>\\end{equation}</script><p></p><br><br><p>在搜索B树时，很明显，访问节点（即读取磁盘）的次数与树的高度呈正比，而B树与红黑树和普通的二叉查找树相比，虽然高度都是对数数量级，但是显然B树中<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-21-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi><mi>o</mi><mi>g</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-154\" style=\"width: 1.513em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.25em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1001.25em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-155\"><span class=\"mi\" id=\"MathJax-Span-156\" style=\"font-family: MathJax_Math; font-style: italic;\">l</span><span class=\"mi\" id=\"MathJax-Span-157\" style=\"font-family: MathJax_Math; font-style: italic;\">o</span><span class=\"mi\" id=\"MathJax-Span-158\" style=\"font-family: MathJax_Math; font-style: italic;\">g<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>l</mi><mi>o</mi><mi>g</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-21\">log</script>函数的底可以比2更大，因此，和二叉树相比，极大地减少了磁盘读取的次数。</p><br><br><br><br><h3 id=\"三搜索算法\"><a name=\"t3\"></a>三、搜索算法</h3><br><br><p>这里，我直接用博客<a href=\"http://blog.csdn.net/v_july_v/article/details/6530142\" rel=\"nofollow\" target=\"_blank\">从B树、B+树、B树谈到R 树</a>中的例子（因为这个例子非常好，也有现成的图示，就直接拿来用，不再自己班门弄斧了），一棵已经建立好的B树如下图所示，我们的目的是查找关键字为29的文件：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320103957037?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%\"></center><p></p><br><br><p>先简单对上图说明一下：</p><br><br><ul><br><li><p>图中的小红方块表示对应关键字所代表的文件的存储位置，实际上可以看做是一个地址，比如根节点中17旁边的小红块表示的就是关键字17所对应的文件在硬盘中的存储地址。</p></li><br><li><p>P是指针，不用多说了，需要注意的是：指针，关键字，以及关键字所代表的文件地址这三样东西合起来构成了B树的一个节点，这个节点存储在一个磁盘块上</p></li><br></ul><br><br><p>下面，看看搜索关键字的29的文件的过程：</p><br><br><ol><br><li><p>从根节点开始，读取根节点信息，根节点有2个关键字：17和35。因为17 &lt; 29 &lt; 35，所以找到指针P2指向的子树，也就是磁盘块3（1次I/0操作）</p></li><br><li><p>读取当前节点信息，当前节点有2个关键字：26和30。26 &lt; 29 &lt; 30，找到指针P2指向的子树，也就是磁盘块8（2次I/0操作）</p></li><br><li><p>读取当前节点信息，当前节点有2个关键字：28和29。找到了！（3次I/0操作）</p></li><br></ol><br><br><p>由上面的过程可见，同样的操作，如果使用平衡二叉树，那么需要至少4次I/O操作，B树比之二叉树的这种优势，还会随着节点数的增加而增加。另外，因为B树节点中的关键字都是排序好的，所以，在节点中的信息被读入内存之后，可以采用二分查找这种快速的查找方式，更进一步减少了读入内存之后的计算时间，由此更能说明对于外存数据结构来说，I/O次数是其查找信息中最大的时间消耗，而我们要做的所有努力就是尽量在搜索过程中减少I/O操作的次数。</p><br><br><br><br><h3 id=\"四向b树插入关键字\"><a name=\"t4\"></a>四、向B树插入关键字</h3><br><br><p>向B树种插入关键字的过程与向二叉查找树中插入关键字的过程类似，但是要稍微复杂一点，因为根据上面B树的定义，我们可以看出，B树每个节点中关键字的个数是有范围要求的，同时，B树是平衡的，所以，如果像二叉查找树那样，直接找到相关的叶子，插入关键字，有可能会导致B树的结构发生变化而这种变化会使得B树不再是B树。</p><br><br><p>所以，我们这样来设计B树种对新关键字的插入：首先找到要插入的关键字应该插入的叶子节点（为方便描述，设这个叶子节点为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-22-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-159\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-160\"><span class=\"mi\" id=\"MathJax-Span-161\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-22\">u</script>），如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-23-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-162\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-163\"><span class=\"mi\" id=\"MathJax-Span-164\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-23\">u</script>是满的（恰好有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-24-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-165\" style=\"width: 3.128em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.604em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.53em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-166\"><span class=\"mn\" id=\"MathJax-Span-167\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mi\" id=\"MathJax-Span-168\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-169\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-170\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>2</mn><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-24\">2t - 1</script>个关键字），那么由于不能将一个关键字插入满的节点，我们需要对<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-25-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-171\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-172\"><span class=\"mi\" id=\"MathJax-Span-173\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-25\">u</script>按其<font color=\"RED\">当前排在中间关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-26-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-174\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-175\"><span class=\"mi\" id=\"MathJax-Span-176\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-177\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-178\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-179\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-180\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-181\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-182\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-26\">u.key_t</script><font color=\"K\">进行分裂，分裂成两个节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-27-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-183\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.693em, 1002.45em, 2.642em, -1000em); top: -2.292em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-184\"><span class=\"msubsup\" id=\"MathJax-Span-185\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-186\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-187\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-188\" style=\"font-family: MathJax_Main;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-189\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-190\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-191\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.292em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-27\">u_1, u_2</script>；同时，作为分裂标准的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-28-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-192\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-193\"><span class=\"mi\" id=\"MathJax-Span-194\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-195\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-196\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-197\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-198\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-199\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-200\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-28\">u.key_t</script>会被上移到<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-29-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-201\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-202\"><span class=\"mi\" id=\"MathJax-Span-203\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-29\">u</script>的父节点中，在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-30-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-204\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.813em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1002.81em, 2.705em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-205\"><span class=\"mi\" id=\"MathJax-Span-206\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-207\" style=\"font-family: MathJax_Main;\">.</span><span class=\"mi\" id=\"MathJax-Span-208\" style=\"font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;\">k</span><span class=\"mi\" id=\"MathJax-Span-209\" style=\"font-family: MathJax_Math; font-style: italic;\">e</span><span class=\"msubsup\" id=\"MathJax-Span-210\"><span style=\"display: inline-block; position: relative; width: 0.82em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.372em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-211\" style=\"font-family: MathJax_Math; font-style: italic;\">y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.006em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.49em;\"><span class=\"mi\" id=\"MathJax-Span-212\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">t</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.308em; border-left: 0px solid; width: 0px; height: 1.204em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><mi>k</mi><mi>e</mi><msub><mi>y</mi><mi>t</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-30\">u.key_t</script>插入前，如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-31-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-213\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-214\"><span class=\"mi\" id=\"MathJax-Span-215\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-31\">u</script>的父节点未满，则直接插入即可；如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-32-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-216\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-217\"><span class=\"mi\" id=\"MathJax-Span-218\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-32\">u</script>的父节点已满，则按照上面的方法对<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-33-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-219\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-220\"><span class=\"mi\" id=\"MathJax-Span-221\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-33\">u</script>的父节点分裂，这个过程如果一直不停止的话，最终会导致B树的根节点分裂，B树的高度增加一层。</font></font></p><br><br><p>我用《算导》中的一个题目展示一下这种插入关键字的过程：</p><br><br><p>现在我们要将关键字序列：F, S, Q, K, C, L, H, T, V, W, M, R, N, P, A, B, X, Y依次插入一棵最小度为2的B树中。也就是说，这棵树的节点中，最多有3个关键字，最少有1个关键字。</p><br><br><p><strong>第1步</strong>，F, S, Q可以被插入一个节点（也就是根节点）</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320110812239?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第2步</strong>，插入关键字K，因为节点已满，所以在插入前，发生分裂，中间关键字Q上移，建立了一个新的根节点：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320112233417?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第3步</strong>，插入关键字C:</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320112758203?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第4步</strong>，插入关键字L，L应该被插入到根节点的左侧的孩子中，因为此时该节点已满，所以在插入前，发生分裂：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320113252304?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第5步</strong>，插入关键字H, T, V，这个过程没有发生节点的分裂：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320113755967?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第6步</strong>，插入关键字W，W应该被插入到根节点的最右侧的孩子中，因为此时该节点已满，所以在插入前，关键字T上移，最右端的叶子节点发生分裂：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20171203222249465?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p><strong>第7步</strong>，插入关键字M，M应该被插入到根节点的左起第2个孩子中，因为此时该节点已满，所以在插入前，发生分裂，分裂之后，中间关键字K上移，导致根节点发生分裂，树高增加1：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20171203222333265?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><p>第8步，同样的道理，插入关键字R, N, P, A, B, X, Y：最终得到的B树如下：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20171203222406990?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></center><p></p><br><br><br><br><h3 id=\"五从b树删除关键字\"><a name=\"t5\"></a>五、从B树删除关键字</h3><br><br><p>删除操作的基本思想和插入操作是一样的，都是不能因为关键字的改变而改变B树的结构。插入操作主要防止的是某个节点中关键字的个数太多，所以采用了分裂；删除则是要防止某个节点中，因删除了关键字而导致这个节点的关键字个数太少，所以采用了合并操作。</p><br><br><p>下面分三种情况来讨论下删除操作是如何工作的，这个过程的顺序是自根节点起向下遍历B树</p><br><br><p><strong>Case - 1：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-176-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-222\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-223\"><span class=\"mi\" id=\"MathJax-Span-224\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-176\">k</script>在节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-177-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-225\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-226\"><span class=\"mi\" id=\"MathJax-Span-227\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-177\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-178-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-228\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-229\"><span class=\"mi\" id=\"MathJax-Span-230\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-178\">u</script>是叶子节点，那么直接删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-179-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-231\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-232\"><span class=\"mi\" id=\"MathJax-Span-233\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-179\">k</script></p><br><br><p><strong>Case - 2：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-180-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-234\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-235\"><span class=\"mi\" id=\"MathJax-Span-236\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-180\">k</script>在节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-181-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-237\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-238\"><span class=\"mi\" id=\"MathJax-Span-239\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-181\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-182-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-240\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-241\"><span class=\"mi\" id=\"MathJax-Span-242\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-182\">u</script>是内部节点，那么分以下3种情况讨论：</p><br><br><p>(1) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-183-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-243\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-244\"><span class=\"mi\" id=\"MathJax-Span-245\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-183\">u</script>中<font color=\"red\">前于<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-184-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-246\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-247\"><span class=\"mi\" id=\"MathJax-Span-248\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-184\">k</script>的子节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-185-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-249\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-250\"><span class=\"msubsup\" id=\"MathJax-Span-251\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-252\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-253\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-185\">u_1</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-186-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-254\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-255\"><span class=\"mi\" id=\"MathJax-Span-256\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-186\">t</script>个关键字，则找出<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-187-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-257\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-258\"><span class=\"mi\" id=\"MathJax-Span-259\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-187\">k</script>在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-188-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-260\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-261\"><span class=\"msubsup\" id=\"MathJax-Span-262\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-263\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-264\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-188\">u_1</script>为根的子树中的<font color=\"red\">前驱<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-189-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-265\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-266\"><span class=\"msup\" id=\"MathJax-Span-267\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-268\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-269\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-189\">k’</script>（前驱的意思是<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-190-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-270\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-271\"><span class=\"msubsup\" id=\"MathJax-Span-272\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-273\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-274\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-190\">u_1</script>中比<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-191-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-275\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-276\"><span class=\"mi\" id=\"MathJax-Span-277\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-191\">k</script>小的关键字中最大的），然后在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-192-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-278\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-279\"><span class=\"msubsup\" id=\"MathJax-Span-280\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-281\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-282\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-192\">u_1</script>为根的子树中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-193-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-283\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-284\"><span class=\"msup\" id=\"MathJax-Span-285\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-286\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-287\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-193\">k’</script>，并在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-194-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-288\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-289\"><span class=\"mi\" id=\"MathJax-Span-290\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-194\">u</script>中以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-195-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-291\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-292\"><span class=\"msup\" id=\"MathJax-Span-293\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-294\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-295\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-195\">k’</script>替代<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-196-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-296\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-297\"><span class=\"mi\" id=\"MathJax-Span-298\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-196\">k</script></font></font></font></font></p><br><br><p>(2) 如果上面的条件(1)不成立，也就是说，前于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-197-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-299\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-300\"><span class=\"mi\" id=\"MathJax-Span-301\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-197\">k</script>的子节点中关键字的个数小于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-198-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-302\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-303\"><span class=\"mi\" id=\"MathJax-Span-304\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-198\">t</script>了，那么就去找<font color=\"red\">后于<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-199-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-305\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-306\"><span class=\"mi\" id=\"MathJax-Span-307\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-199\">k</script>的子节点，记为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-200-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-308\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-309\"><span class=\"msubsup\" id=\"MathJax-Span-310\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-311\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-312\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-200\">u_2</script>。若<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-201-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-313\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-314\"><span class=\"msubsup\" id=\"MathJax-Span-315\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-316\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-317\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-201\">u_2</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-202-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-318\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-319\"><span class=\"mi\" id=\"MathJax-Span-320\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-202\">t</script>个关键字，则找出<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-203-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-321\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-322\"><span class=\"mi\" id=\"MathJax-Span-323\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-203\">k</script>在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-204-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-324\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-325\"><span class=\"msubsup\" id=\"MathJax-Span-326\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-327\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-328\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-204\">u_2</script>为根的子树中的<font color=\"red\">后继<font color=\"K\"><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-205-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-329\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-330\"><span class=\"msup\" id=\"MathJax-Span-331\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-332\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-333\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-205\">k’</script>(大于<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-206-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-334\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-335\"><span class=\"mi\" id=\"MathJax-Span-336\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-206\">k</script>的关键字中最小的)，然后在以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-207-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-337\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-338\"><span class=\"msubsup\" id=\"MathJax-Span-339\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-340\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-341\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-207\">u_2</script>为根的子树中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-208-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-342\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-343\"><span class=\"msup\" id=\"MathJax-Span-344\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-345\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-346\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-208\">k’</script>，并在<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-209-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-347\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-348\"><span class=\"mi\" id=\"MathJax-Span-349\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-209\">u</script>中以<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-210-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>k</mi><mo>&amp;#x2032;</mo></msup></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-350\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.781em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.324em, 1000.78em, 2.407em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-351\"><span class=\"msup\" id=\"MathJax-Span-352\"><span style=\"display: inline-block; position: relative; width: 0.79em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.16em, 1000.5em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-353\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -4.373em; left: 0.521em;\"><span class=\"mo\" id=\"MathJax-Span-354\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">′</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 1.049em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>k</mi><mo>′</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-210\">k’</script>替代<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-211-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-355\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-356\"><span class=\"mi\" id=\"MathJax-Span-357\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-211\">k</script>。可以看出（2）是（1）的一个对称过程</font></font></font></font></p><br><br><p>(3) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-212-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-358\" style=\"width: 2.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.448em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.693em, 1002.45em, 2.642em, -1000em); top: -2.292em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-359\"><span class=\"msubsup\" id=\"MathJax-Span-360\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-361\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-362\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-363\" style=\"font-family: MathJax_Main;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-364\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-365\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-366\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.292em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub><mo>,</mo><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-212\">u_1, u_2</script>中的关键字个数都是<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-213-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-367\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-368\"><span class=\"mi\" id=\"MathJax-Span-369\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-370\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-371\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-213\">t - 1</script>，则将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-214-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-372\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-373\"><span class=\"mi\" id=\"MathJax-Span-374\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-214\">k</script>和<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-215-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-375\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-376\"><span class=\"msubsup\" id=\"MathJax-Span-377\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-378\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-379\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-215\">u_2</script>合并后并入<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-216-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-380\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-381\"><span class=\"msubsup\" id=\"MathJax-Span-382\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-383\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-384\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-216\">u_1</script>，这样<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-217-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-385\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-386\"><span class=\"mi\" id=\"MathJax-Span-387\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-217\">u</script>就失去了<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-218-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-388\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-389\"><span class=\"mi\" id=\"MathJax-Span-390\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-218\">k</script>和指向<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-219-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-391\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-392\"><span class=\"msubsup\" id=\"MathJax-Span-393\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-394\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-395\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>2</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-219\">u_2</script>的指针，最后递归地从<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-220-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-396\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.99em, 2.546em, -1000em); top: -2.24em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-397\"><span class=\"msubsup\" id=\"MathJax-Span-398\"><span style=\"display: inline-block; position: relative; width: 1.001em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.55em, 4.178em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-399\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.572em;\"><span class=\"mn\" id=\"MathJax-Span-400\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.24em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.242em; border-left: 0px solid; width: 0px; height: 0.835em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>u</mi><mn>1</mn></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-220\">u_1</script>中删除<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-221-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-401\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-402\"><span class=\"mi\" id=\"MathJax-Span-403\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-221\">k</script></p><br><br><p><strong>Case - 3：</strong>如果要删除的关键字<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-222-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-404\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-405\"><span class=\"mi\" id=\"MathJax-Span-406\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-222\">k</script>不在当前节点<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-223-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-407\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-408\"><span class=\"mi\" id=\"MathJax-Span-409\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-223\">u</script>中，而且<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-224-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-410\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-411\"><span class=\"mi\" id=\"MathJax-Span-412\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-224\">u</script>是内部节点（如果自上而下扫描到叶子都没有这个关键字的话，那就说明要删除的关键字根本就不存在，所以此处只考虑<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-225-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-413\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-414\"><span class=\"mi\" id=\"MathJax-Span-415\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-225\">u</script>是内部节点的情况），则首先确定包含<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-226-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-416\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-417\"><span class=\"mi\" id=\"MathJax-Span-418\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-226\">k</script>的<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-227-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-419\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-420\"><span class=\"mi\" id=\"MathJax-Span-421\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-227\">u</script>的子树，我们这里设为<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-228-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-422\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-423\"><span class=\"mi\" id=\"MathJax-Span-424\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-425\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-426\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-427\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-428\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-228\">u.p_i</script>。如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-229-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-429\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-430\"><span class=\"mi\" id=\"MathJax-Span-431\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-432\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-433\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-434\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-435\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-229\">u.p_i</script>中至少含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-230-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-436\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-437\"><span class=\"mi\" id=\"MathJax-Span-438\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-230\">t</script>个关键字，那么继续扫描，寻找下一个要被扫描的子树；如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-231-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-439\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-440\"><span class=\"mi\" id=\"MathJax-Span-441\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-442\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-443\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-444\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-445\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-231\">u.p_i</script>中只含有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-232-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-446\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-447\"><span class=\"mi\" id=\"MathJax-Span-448\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-449\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-450\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-232\">t - 1</script>个关键字，则需要分下面两种情况进行操作：</p><br><br><p>(1) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-233-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-451\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-452\"><span class=\"mi\" id=\"MathJax-Span-453\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-454\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-455\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-456\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-457\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-233\">u.p_i</script>至少有一个相邻的兄弟比较“丰满”（即这个兄弟至少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-234-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-458\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-459\"><span class=\"mi\" id=\"MathJax-Span-460\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-234\">t</script>个关键字）。则将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-235-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-461\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-462\"><span class=\"mi\" id=\"MathJax-Span-463\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-235\">u</script>中的一个关键字降至<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-236-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-464\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-465\"><span class=\"mi\" id=\"MathJax-Span-466\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-467\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-468\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-469\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-470\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-236\">u.p_i</script>，同时令<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-237-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-471\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-472\"><span class=\"mi\" id=\"MathJax-Span-473\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-474\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-475\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-476\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-477\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-237\">u.p_i</script>的最“丰满”的兄弟中升一个关键至<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-238-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-478\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-479\"><span class=\"mi\" id=\"MathJax-Span-480\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-238\">u</script>。然后继续扫描B树，寻找<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-239-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-481\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.494em, 1000.5em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-482\"><span class=\"mi\" id=\"MathJax-Span-483\" style=\"font-family: MathJax_Math; font-style: italic;\">k</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.971em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>k</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-239\">k</script></p><br><br><p>(2) 如果<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-240-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-484\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-485\"><span class=\"mi\" id=\"MathJax-Span-486\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-487\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-488\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-489\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-490\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-240\">u.p_i</script>的两个相邻的兄弟都不“丰满”（都只有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-241-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-491\" style=\"width: 2.503em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.522em, 1002.01em, 2.582em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-492\"><span class=\"mi\" id=\"MathJax-Span-493\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span><span class=\"mo\" id=\"MathJax-Span-494\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">−</span><span class=\"mn\" id=\"MathJax-Span-495\" style=\"font-family: MathJax_Main; padding-left: 0.222em;\">1</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.161em; border-left: 0px solid; width: 0px; height: 1.023em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-241\">t - 1</script>个关键字）。则令<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-242-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-496\" style=\"width: 2.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1001.82em, 2.694em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-497\"><span class=\"mi\" id=\"MathJax-Span-498\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span><span class=\"mo\" id=\"MathJax-Span-499\" style=\"font-family: MathJax_Main;\">.</span><span class=\"msubsup\" id=\"MathJax-Span-500\" style=\"padding-left: 0.167em;\"><span style=\"display: inline-block; position: relative; width: 0.822em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.5em, 4.361em, -1000em); top: -4.01em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-501\" style=\"font-family: MathJax_Math; font-style: italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span><span style=\"position: absolute; top: -3.86em; left: 0.503em;\"><span class=\"mi\" id=\"MathJax-Span-502\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.01em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.295em; border-left: 0px solid; width: 0px; height: 0.888em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi><mo>.</mo><msub><mi>p</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-242\">u.p_i</script>和其一个兄弟合并，再将<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-243-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-503\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.573em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.55em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-504\"><span class=\"mi\" id=\"MathJax-Span-505\" style=\"font-family: MathJax_Math; font-style: italic;\">u</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>u</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-243\">u</script>的一个关键字降至新合并的节点。使之成为该节点的中间关键字。</p><br><br><p>举个例子，就可以清晰看到上面说的这几种删除的情况。拿下图所示的最小度为3的B树为例（即树中除根和叶子之外的节点只能有2，3，4三种情况的关键字个数）：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320142505013?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 1: 删除上图中的关键字F，过程如下：先扫描根节点（含P），再扫描其左孩子（含CGM），发现丰满，继续扫描到左起第二个叶子，然后就是符合<strong>Case - 1</strong>的情况了。结果如下图所示：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20171228154424767?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 2: 再删除M，此时遇到<strong>Case - 2(1)</strong>的情况，结果如下图所示：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320143230759?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 3: 再删除G，G的前驱、后驱都是不丰满的。也就是<strong>Case - 2(3)</strong>的情况，结果如下图所示：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320143617327?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 4: 再删除D，扫描至含CL的节点后，发现它不丰满，且他的兄弟也不丰满。则将节点CL和TX合并，并降关键字P至新合并的节点。也就是<strong>Case - 3(2)</strong>的情况，结果如下图所示，此时，树高减1：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320153842292?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>Step 5: 再删除B，也就是<strong>Case - 3(1)</strong>的情况，结果如下图所示：</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320154130371?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>下面总结一下B树的删除原理：</p><br><br><ol><br><li>基本原则是不能破坏关键字个数的限制；</li><br><li>如果在当前节点中，找到了要删的关键字，且当前节点为内部节点。那么，如果有比较丰满的前驱或后继，借一个上来，再把要删的关键字降下去，在子树中递归删除；如果没有比较丰满的前驱或后继，则令前驱与后继合并，把要删的关键字降下去，递归删除；</li><br><li>如果在当前节点中，还未找到要删的关键字，且当前节点为内部节点。那么去找下一步应该扫描的孩子，并判断这个孩子是否丰满，如果丰满，继续扫描；如果不丰满，则看其有无丰满的兄弟，有的话，从父亲那里接一个，父亲再找其最丰满的兄弟借一个；如果没有丰满的兄弟，则合并，再令父亲下降，以保证B树的结构。</li><br></ol><br><br><h2 id=\"b树-1\"><a name=\"t6\"></a>B+树</h2><br><br><br><br><h3 id=\"b树的定义\"><a name=\"t7\"></a>B+树的定义</h3><br><br><p>B+树是B树的一种变形，它更适合实际应用中操作系统的文件索引和数据库索引。定义如下：（为和大多资料保持一致，这里使用阶数<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-102-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-506\" style=\"width: 1.096em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.885em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.746em, 1000.86em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-507\"><span class=\"mi\" id=\"MathJax-Span-508\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.669em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-102\">m</script>来定义B+树，而不像之前的B树中，使用的是最小度<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-103-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-509\" style=\"width: 0.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.365em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.562em, 1000.33em, 2.511em, -1000em); top: -2.344em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-510\"><span class=\"mi\" id=\"MathJax-Span-511\" style=\"font-family: MathJax_Math; font-style: italic;\">t</span></span><span style=\"display: inline-block; width: 0px; height: 2.344em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.076em; border-left: 0px solid; width: 0px; height: 0.889em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>t</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-103\">t</script>来定义）</p><br><br><ol><br><li>除根节点外的内部节点，每个节点最多有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-104-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-512\" style=\"width: 1.074em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.893em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.87em, 2.451em, -1000em); top: -2.262em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-513\"><span class=\"mi\" id=\"MathJax-Span-514\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.262em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.085em; border-left: 0px solid; width: 0px; height: 0.686em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-104\">m</script>个关键字，最少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-105-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2308;</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2309;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-515\" style=\"width: 2.265em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.845em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.393em, 1001.67em, 2.893em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-516\"><span class=\"mo\" id=\"MathJax-Span-517\" style=\"font-family: MathJax_Main;\">⌈</span><span class=\"mfrac\" id=\"MathJax-Span-518\"><span style=\"display: inline-block; position: relative; width: 0.741em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.497em, 1000.61em, 4.174em, -1000em); top: -4.417em; left: 50%; margin-left: -0.31em;\"><span class=\"mi\" id=\"MathJax-Span-519\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">m</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.339em, 1000.32em, 4.167em, -1000em); top: -3.596em; left: 50%; margin-left: -0.177em;\"><span class=\"mn\" id=\"MathJax-Span-520\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1000.74em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.741em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-521\" style=\"font-family: MathJax_Main;\">⌉</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.542em; border-left: 0px solid; width: 0px; height: 1.514em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo fence=\"false\" stretchy=\"false\">⌈</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=\"false\" stretchy=\"false\">⌉</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-105\">\\lceil \\frac{m}{2} \\rceil</script>个关键字。其中每个关键字对应一个子树（也就是最多有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-106-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-522\" style=\"width: 1.074em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.893em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.641em, 1000.87em, 2.451em, -1000em); top: -2.262em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-523\"><span class=\"mi\" id=\"MathJax-Span-524\" style=\"font-family: MathJax_Math; font-style: italic;\">m</span></span><span style=\"display: inline-block; width: 0px; height: 2.262em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.085em; border-left: 0px solid; width: 0px; height: 0.686em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>m</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-106\">m</script>棵子树，最少有<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-107-Frame\" tabindex=\"0\" style=\"position: relative;\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2308;</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2309;</mo></math>\" role=\"presentation\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-525\" style=\"width: 2.265em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.845em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.393em, 1001.67em, 2.893em, -1000em); top: -2.321em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-526\"><span class=\"mo\" id=\"MathJax-Span-527\" style=\"font-family: MathJax_Main;\">⌈</span><span class=\"mfrac\" id=\"MathJax-Span-528\"><span style=\"display: inline-block; position: relative; width: 0.741em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;\"><span style=\"position: absolute; clip: rect(3.497em, 1000.61em, 4.174em, -1000em); top: -4.417em; left: 50%; margin-left: -0.31em;\"><span class=\"mi\" id=\"MathJax-Span-529\" style=\"font-size: 70.7%; font-family: MathJax_Math; font-style: italic;\">m</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(3.339em, 1000.32em, 4.167em, -1000em); top: -3.596em; left: 50%; margin-left: -0.177em;\"><span class=\"mn\" id=\"MathJax-Span-530\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 3.988em;\"></span></span><span style=\"position: absolute; clip: rect(0.818em, 1000.74em, 1.25em, -1000em); top: -1.291em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.741em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.071em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-531\" style=\"font-family: MathJax_Main;\">⌉</span></span><span style=\"display: inline-block; width: 0px; height: 2.321em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.542em; border-left: 0px solid; width: 0px; height: 1.514em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo fence=\"false\" stretchy=\"false\">⌈</mo><mfrac><mi>m</mi><mn>2</mn></mfrac><mo fence=\"false\" stretchy=\"false\">⌉</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-107\">\\lceil \\frac{m}{2} \\rceil</script>棵子树）；</li><br><li>根节点要么没有子树，要么至少有2棵子树；</li><br><li><p>所有的叶子节点包含了全部的关键字以及这些关键字指向文件的指针，并且：</p><br><br><ul><li>所有叶子节点中的关键字按大小顺序排列</li><br><li>相邻的叶子节点顺序链接（相当于是构成了一个顺序链表）</li><br><li>所有叶子节点在同一层</li></ul></li><br><li>所有分支节点的关键字都是对应子树中关键字的最大值</li><br></ol><br><br><p>比如，下图就是一个非常典型的B+树的例子。</p><br><br><p></p><center> <br><br><img src=\"https://img-blog.csdn.net/20170320155354653?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VvemlxaW5nNTA2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"80%/\"></center><p></p><br><br><p>B+树和B树相比，主要的不同点在以下3项：</p><br><br><ul><br><li>内部节点中，关键字的个数与其子树的个数相同，不像B树种，子树的个数总比关键字个数多1个</li><br><li>所有指向文件的关键字及其指针都在叶子节点中，不像B树，有的指向文件的关键字是在内部节点中。换句话说，B+树中，内部节点仅仅起到索引的作用，</li><br><li>在搜索过程中，如果查询和内部节点的关键字一致，那么搜索过程不停止，而是继续向下搜索这个分支。</li><br></ul><br><br><p>根据B+树的结构，我们可以发现B+树相比于B树，在文件系统，数据库系统当中，更有优势，原因如下：</p><br><br><ol><br><li><p>B+树的磁盘读写代价更低 <br><br>B+树的内部结点并没有指向关键字具体信息的指针。因此其内部结点相对B树更小。如果把所有同一内部结点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。一次性读入内存中的需要查找的关键字也就越多。相对来说I/O读写次数也就降低了。</p></li><br><li><p>B+树的查询效率更加稳定 <br><br>由于内部结点并不是最终指向文件内容的结点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须走一条从根结点到叶子结点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当。</p></li><br><li><p>B+树更有利于对数据库的扫描 <br><br>B树在提高了磁盘IO性能的同时并没有解决元素遍历的效率低下的问题，而B+树只需要遍历叶子节点就可以解决对全部关键字信息的扫描，所以对于数据库中频繁使用的range query，B+树有着更高的性能。</p></li><br></ol>            </div>"}],"PostAsset":[],"PostCategory":[{"post_id":"cjo15hzdn003wdcyudmtbnem7","category_id":"cjo15hzdp003ydcyu1u45znu8","_id":"cjo15hzdx0044dcyugbh4znig"}],"PostTag":[{"post_id":"cjo15hzam000rdcyulj3ucujb","tag_id":"cjo15hzar000tdcyukqgjr0dt","_id":"cjo15hzbb000ydcyue5wx1tod"},{"post_id":"cjo15hzaq000sdcyuqyd6ua59","tag_id":"cjo15hzar000tdcyukqgjr0dt","_id":"cjo15hzbd0012dcyuginaosrj"},{"post_id":"cjo15hzb0000udcyuhq5vfp76","tag_id":"cjo15hzbd0011dcyu9hve3pdg","_id":"cjo15hzbh0017dcyud8l62r4n"},{"post_id":"cjo15hzbe0013dcyuuprkyy9i","tag_id":"cjo15hzbg0015dcyugoh2gtsi","_id":"cjo15hzbj001adcyuttyhd8fr"},{"post_id":"cjo15hzbi0019dcyuhp2ag2ur","tag_id":"cjo15hzbk001cdcyuswe68mlv","_id":"cjo15hzbp001hdcyu440rhbn0"},{"post_id":"cjo15hzbk001ddcyue7hxgg5p","tag_id":"cjo15hzbo001gdcyug30mw0li","_id":"cjo15hzbu001ldcyuqc99f97q"},{"post_id":"cjo15hzbw001odcyudcanp5yc","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzbz001rdcyu1avidmws"},{"post_id":"cjo15hzbq001jdcyu1zqtqoy3","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzbz001tdcyutdqu2ilk"},{"post_id":"cjo15hzbx001pdcyu76nlo4dq","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzc1001wdcyuyfs45d61"},{"post_id":"cjo15hzbz001sdcyup1hktus0","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcb001ydcyu4akt57zk"},{"post_id":"cjo15hzbr001kdcyu87vyfk34","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcc0020dcyu9kf6wgvb"},{"post_id":"cjo15hzc0001udcyu2vt9eg2o","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcd0022dcyu9j43inah"},{"post_id":"cjo15hzc1001xdcyuk9k56791","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzce0024dcyunkorce2x"},{"post_id":"cjo15hzbv001ndcyuadlbajru","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcf0026dcyuxgujoq8n"},{"post_id":"cjo15hzcb001zdcyuyawuxdtw","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzch0028dcyukenqva70"},{"post_id":"cjo15hzcc0021dcyu1jofy45z","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzci002adcyuv7g8jifa"},{"post_id":"cjo15hzcd0023dcyunevlazvm","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcj002cdcyu9spdpm6v"},{"post_id":"cjo15hzce0025dcyu8r8lw3uu","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzck002edcyul217fvkz"},{"post_id":"cjo15hzcg0027dcyuc7vgl6dd","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcl002gdcyuani6shnt"},{"post_id":"cjo15hzci002bdcyuxiuh8ntx","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcm002idcyuxnlpho9w"},{"post_id":"cjo15hzcj002ddcyuxz7q98db","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcn002kdcyu5fuoacft"},{"post_id":"cjo15hzck002fdcyu24s7em8t","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzco002mdcyuwc3q5nuf"},{"post_id":"cjo15hzcl002hdcyubeqy2xx9","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcq002odcyu2jye8f4g"},{"post_id":"cjo15hzcn002jdcyudtc0igoh","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcr002qdcyuep4rzlsw"},{"post_id":"cjo15hzco002ldcyu4jmtet2g","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcs002tdcyumrjdu9p4"},{"post_id":"cjo15hzcp002ndcyub2l9wrwi","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzct002vdcyux1c2b0n9"},{"post_id":"cjo15hzct002wdcyu0y70fzmn","tag_id":"cjo15hzcs002sdcyud3t1bipk","_id":"cjo15hzcw002zdcyur6yf6ko5"},{"post_id":"cjo15hzcq002pdcyubwkfm05r","tag_id":"cjo15hzcs002sdcyud3t1bipk","_id":"cjo15hzcx0031dcyumjn9a9ns"},{"post_id":"cjo15hzcu002xdcyup1rdq8fd","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzcz0034dcyura8q2yd2"},{"post_id":"cjo15hzcw0030dcyus33kzssv","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzd00036dcyuz13fqfjv"},{"post_id":"cjo15hzcr002rdcyux9lpa7dn","tag_id":"cjo15hzcs002sdcyud3t1bipk","_id":"cjo15hzd10038dcyus42htc6p"},{"post_id":"cjo15hzcz0035dcyu5m3jdcn1","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzd4003adcyugf4hhl1r"},{"post_id":"cjo15hzcs002udcyuqwsrvnuw","tag_id":"cjo15hzcs002sdcyud3t1bipk","_id":"cjo15hzd6003cdcyuelq12e7j"},{"post_id":"cjo15hzd00037dcyuoxf10bcr","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzd7003fdcyu48qu03kj"},{"post_id":"cjo15hzd10039dcyu8839w0pa","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzd8003hdcyu4r2ozisr"},{"post_id":"cjo15hzd5003bdcyuc42nd4nr","tag_id":"cjo15hzd7003edcyuir1vmd6f","_id":"cjo15hzda003kdcyudryotvnm"},{"post_id":"cjo15hzdc003ndcyustttzdwo","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzdh003pdcyu79p4ecm5"},{"post_id":"cjo15hzsj004cdcyuptkdcog0","tag_id":"cjo15hzbv001mdcyu9i0a216c","_id":"cjo15hzsk004ddcyuoupfy5g6"}],"Tag":[{"name":"java","_id":"cjo15hzar000tdcyukqgjr0dt"},{"name":"java,多线程","_id":"cjo15hzbd0011dcyu9hve3pdg"},{"name":"微信 安卓","_id":"cjo15hzbg0015dcyugoh2gtsi"},{"name":"linux","_id":"cjo15hzbk001cdcyuswe68mlv"},{"name":"jar java","_id":"cjo15hzbo001gdcyug30mw0li"},{"name":"面试","_id":"cjo15hzbv001mdcyu9i0a216c"},{"name":"项目","_id":"cjo15hzcs002sdcyud3t1bipk"},{"name":"前端 编程","_id":"cjo15hzd7003edcyuir1vmd6f"}]}}