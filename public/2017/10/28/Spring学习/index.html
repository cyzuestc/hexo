<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 2017.10.28 Spring学习 · 陈昀钊</title><meta name="description" content="2017.10.28 Spring学习 - 陈昀钊"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yzchen.com/atom.xml" title="陈昀钊"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://www.uestc.edu.cn/" target="_blank" class="nav-list-link">UNIVERSITY</a></li><li class="nav-list-item"><a href="https://github.com/cyzuestc" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://bbs.uestc.edu.cn/" target="_blank" class="nav-list-link">清水河畔</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">2017.10.28 Spring学习</h1><div class="post-info">Oct 28, 2017</div><div class="post-content"><p>注解方式注入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">对于class</span><br><span class="line">@Component(&quot;name&quot;)</span><br><span class="line">=</span><br><span class="line">&lt;bean id=&quot;name&quot; class=&quot;...Student&quot;&gt;</span><br><span class="line">@Component</span><br><span class="line">&lt;bean id=&quot;student&quot; class=&quot;...Student&quot;&gt;</span><br><span class="line">对于方法</span><br><span class="line">@Resource</span><br></pre></td></tr></table></figure></p>
<p>IoC:把一个类放到Spring容器中, Spring为期创建对象<br>创建方式:默认构造函数,静态工程,实例工厂<br>默认情况下是单例<br>启动单例对象是在容器启动时创建<br>init,destory启动和销毁时使用的方法</p>
<h2 id="DI给属性赋值-set方法-还可以用构造器-还可以用Resource-Component注入"><a href="#DI给属性赋值-set方法-还可以用构造器-还可以用Resource-Component注入" class="headerlink" title="DI给属性赋值,set方法,还可以用构造器,还可以用Resource,Component注入"></a>DI给属性赋值,set方法,还可以用构造器,还可以用Resource,Component注入</h2><p>注解的继承</p>
<hr>
<p>静态代理模式:</p>
<ul>
<li>1.在该系统中,有多少dao就要多少proxy</li>
<li>2.如果目标接口有方法的改动,proxy也得做相应的修改</li>
</ul>
<hr>
<ul>
<li>导入目标类</li>
<li>导入切面</li>
<li>进行aop的配置<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;personDao&quot; class=&quot;com.itheima11.spring.aop.xml.transaction.PersonDaoImpl&quot;&gt;&lt;/bean&gt;</span><br><span class="line">&lt;bean id=&quot;transaction&quot; class=&quot;com.itheima11.spring.aop.xml.transaction.Transaction&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;aop:config&gt;</span><br><span class="line">   &lt;!-- </span><br><span class="line">   	切入点表达式</span><br><span class="line">   	  符合切入点表达式的类要产生代理对象</span><br><span class="line">   	  expression就是切入点表达式</span><br><span class="line">   	  id 标示符</span><br><span class="line">    --&gt;</span><br><span class="line">   &lt;aop:pointcut </span><br><span class="line">   	expression=&quot;execution(* com.itheima11.spring.aop.xml.transaction.PersonDaoImpl.*(..))&quot; </span><br><span class="line">   	id=&quot;perform&quot;/&gt;</span><br><span class="line">   &lt;!-- </span><br><span class="line">   	ref属性指向切面</span><br><span class="line">    --&gt;</span><br><span class="line">   &lt;aop:aspect ref=&quot;transaction&quot;&gt;</span><br><span class="line">   	&lt;!-- </span><br><span class="line">   		前置通知</span><br><span class="line">   		   在目标方法执行之前</span><br><span class="line">   	 --&gt;</span><br><span class="line">   	&lt;aop:before method=&quot;beginTransaction&quot; pointcut-ref=&quot;perform&quot;/&gt;</span><br><span class="line">   	&lt;!-- </span><br><span class="line">   		后置通知</span><br><span class="line">   	 --&gt;</span><br><span class="line">   	&lt;aop:after-returning method=&quot;commit&quot; pointcut-ref=&quot;perform&quot;/&gt;</span><br><span class="line">   &lt;/aop:aspect&gt;</span><br><span class="line">&lt;/aop:config&gt;</span><br><span class="line"> ```</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>只有符合切入点, 才让通知和目标方法结合在一起<br>AOP概念<br>切面:<br>通知:切面中的方法<br>连接点:客户端调用哪个方法,那个方法就是连接点<br>切入点:if判断句,如下;只有符合切入点,才让通知和目标方法结合在一起;符合切入点表达式的类要产生代理对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if(method.getName().equal(&quot;savePerson&quot;)&#123;</span><br><span class="line">    this.transaction.beginTransaction();</span><br><span class="line">    method.invoke(this.target, args);</span><br><span class="line">    this.transaction.commit();</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    method.invoke(this.target, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>目标对象:<br>AOP对象:代理对象<br>织入:形成代理对象代理方法的过程就叫织入<br>代理对象的方法=通知+目标对象<br>连接点:就是目标接口中的一个方法<br>拦截器中invoke方法就是代理对象的方法<br>execution( <em> com.itheima.spring..service.impl.</em>.*(..) ))在sping包及子包,知道service包出现 service下的impl包中所有类下所有方法<br>有切入点表达式,就很容易定位到类;<br>Ref属性指向切面;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">导入目标类</span><br><span class="line">导入切面</span><br><span class="line">进行aop配置</span><br></pre></td></tr></table></figure></p>
<p><bean id="personDao" class="com...PersonDaoImpl"></bean></p>
<p><bean id="transaction" class="com..Transaction"></bean><br><a href="aop:config" target="_blank" rel="noopener">aop:config</a><br>    &lt;aop:pointcut<br>    expression=”execution(<em> com.ithetma.spring.aop.xml.transaction.PersonDaoImpl.</em>(..))”  id=”perform”/&gt;<br>    <!--ref 指向切面--><br>    &lt;aop:aspect ref=”transaction”&gt;<br>        &lt;aop:before method=”beginTransaction” pointcut-ref=”perform”/&gt;<br>        &lt;aop:after-returning method=”commit”<br>        pointcut-ref=”perform”/&gt;<br>    <br>&lt;/aop:config&gt;<br><code>`</code><br>intercept:拦截<br>invocation:文件调取；行使</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/10/29/Spring,Struts学习/" class="prev">PREV</a><a href="/2017/10/27/Spring 学习/" class="next">NEXT</a></div><div class="copyright"><p>© 2018 powered by <a href="https://github.com/cyzuestc" target="_blank">Chenyunzhao</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>