<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 2017.10.31 Struts学习 · 陈昀钊</title><meta name="description" content="2017.10.31 Struts学习 - 陈昀钊"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yzchen.com/atom.xml" title="陈昀钊"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">LASTEST</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ALL</a></li><li class="nav-list-item"><a href="https://www.uestc.edu.cn/" target="_blank" class="nav-list-link">UNIVERSITY</a></li><li class="nav-list-item"><a href="https://github.com/cyzuestc" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://bbs.uestc.edu.cn/" target="_blank" class="nav-list-link">BBS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">2017.10.31 Struts学习</h1><div class="post-info">Oct 31, 2017</div><div class="post-content"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">action.class中:</span><br><span class="line">public class action &#123;</span><br><span class="line">    public String say()&#123;</span><br><span class="line">        System.out.println(&quot;fdsafdsa&quot;);</span><br><span class="line">        return &quot;success&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">struts.xml中</span><br><span class="line">&lt;struts&gt;</span><br><span class="line">    &lt;!--开启开发模式--&gt;</span><br><span class="line">    &lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot;&gt;&lt;/constant&gt;</span><br><span class="line">    &lt;package name=&quot;p1&quot; extends=&quot;struts-default&quot;&gt;</span><br><span class="line">        &lt;action name=&quot;say&quot; class=&quot;test.action&quot; method=&quot;say&quot;&gt;</span><br><span class="line">            &lt;result name=&quot;success&quot;&gt;/success.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">    &lt;/package&gt;</span><br><span class="line">&lt;/struts&gt;</span><br><span class="line"></span><br><span class="line">web.xml中</span><br><span class="line"></span><br><span class="line">    &lt;filter&gt;</span><br><span class="line">        &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class="line">        &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;</span><br><span class="line">    &lt;/filter&gt;</span><br><span class="line">    &lt;filter-mapping&gt;</span><br><span class="line">        &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>Struts执行过程简易版:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ie:say.action-&gt;tomcat</span><br><span class="line">tomcat-&gt;StrutsPrepareAndExecuteFilter-&gt;解析uri得到action元素-&gt;在struts.xml中vkdkresult()</span><br></pre></td></tr></table></figure></p>
<p>用户创建的:struts,action,template<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">default.properties 该文件在core包中 struts2.core</span><br><span class="line">struts-default.xml 该文件在core包中 struts2.core</span><br><span class="line">struts-plugin 某个jar包中</span><br><span class="line">struts.xml web应用默认配置文件</span><br><span class="line">struts.properties struts默认配置文件</span><br><span class="line">web.xml 应用配置文件</span><br></pre></td></tr></table></figure></p>
<p>代理:我调目标类的方法,先经过代理,再经过被代理对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;package&gt; 作用:方便模块化开发</span><br><span class="line">&lt;struts&gt;</span><br><span class="line">    &lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot;&gt;&lt;/constant&gt;</span><br><span class="line">    &lt;package name=&quot;p1&quot; extends=&quot;struts-default&quot;&gt;</span><br><span class="line">        &lt;action name=&quot;say&quot; class=&quot;test.action&quot; method=&quot;say&quot;&gt;</span><br><span class="line">            &lt;result name=&quot;success&quot;&gt;/success.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">    &lt;/package&gt;</span><br><span class="line">    &lt;package name=&quot;order&quot;&gt;&lt;/package&gt;</span><br><span class="line">&lt;/struts&gt;</span><br><span class="line"></span><br><span class="line">name:唯一,必须.</span><br><span class="line">extends: 一般都需要.直接或间接继承一个struts-default的包名</span><br><span class="line">可以继承以上的包如 extends=&quot;p1&quot;</span><br><span class="line">abstract=&quot;ture&quot; 说明这是个抽象包,让别人继承,此时没有什么action子元素</span><br><span class="line">namespace:名称空间,一般以&quot;/&quot;开头,和动作名称一起,构成访问路径</span><br></pre></td></tr></table></figure></p>
<p>action详解<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">编写动作类方法:继承ActionSupport</span><br><span class="line">&lt;action name=&quot;*_*&quot; class=&quot;....&quot; method=&#123;1,2&#125;&gt;</span><br><span class="line">    &lt;result name=&quot;success&quot;&gt;/&#123;1&#125;&#123;2&#125;.jsp&lt;/result&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>
<p>获取request,response<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.      </span><br><span class="line">        System.out.println(ServletActionContext.getRequest());;</span><br><span class="line">        System.out.println(ServletActionContext.getResponse());;</span><br><span class="line">        System.out.println(ServletActionContext.getServletContext());;</span><br><span class="line"></span><br><span class="line">2.  HttpServletRequest request;</span><br><span class="line">    HttpServletResponse response;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setServletRequest(HttpServletRequest request) &#123;</span><br><span class="line">        this.request = request;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setServletResponse(HttpServletResponse response) &#123;</span><br><span class="line">        this.response = response;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>return :配置一个结果视图<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">        &lt;action name=&quot;save&quot;  class=&quot;test.Demo3Action&quot; method=&quot;save&quot;&gt;</span><br><span class="line">            &lt;result name=&quot;success&quot; type=&quot;redirect&quot;&gt;/jsps/success.jsp&lt;/result&gt;</span><br><span class="line">            &lt;result name=&quot;error&quot;&gt;/jsps/error.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">name:逻辑视图名称,对应动作方法的返回值</span><br><span class="line">可以不写,默认success</span><br><span class="line">type:指定结果类型,默认dispatcher,就是转发</span><br><span class="line">其他类型:</span><br><span class="line">chain: 转发到另一个动作</span><br><span class="line">如:            &lt;result name=&quot;success&quot; type=&quot;chain&quot;&gt;action1&lt;/result&gt;</span><br><span class="line">redirectAction:重定向到另一个action</span><br><span class="line">velocity: </span><br><span class="line">tream:下载使用</span><br><span class="line">plainText:以纯文本的展示</span><br><span class="line">dispathcer: </span><br><span class="line">freemarker:</span><br><span class="line">httpheader:</span><br><span class="line">redirect:</span><br><span class="line"></span><br><span class="line">chain的另一种写法</span><br></pre></td></tr></table></figure></p>
<p>(EJB重量级持久层,天然分布式,负载均衡) 但是不够灵活,不能充分适应业务<br>多条件查询<br>如果使用EntityBean,做查询时,一个查询的条件就得写一个sql,就用了一个SessionBean,新增修改删除给EntityBean,多条件查询交给session.<br>Hibernate 开发快,无sql语句,面向对象,<br>Hibernate 与 mybatis区别<br>Hibernate,java面向对象盛行期.将设计过程全部面向对象开发.ORM.<br>ibatis:维持原有编程方式,前面面向对象,后面持久层使用sql<br>Hibernate通过反射,性能很低<br>Hibernate底层使用sql,就hql转sql无法优化</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/11/02/2017-11-9-ssm学习/" class="prev">PREV</a><a href="/2017/10/31/SpringMVC学习/" class="next">NEXT</a></div><div class="copyright"><p>© 2018 powered by <a href="https://github.com/cyzuestc" target="_blank">Chenyunzhao</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>